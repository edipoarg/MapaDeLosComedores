function Zg(n,a){for(var l=0;l<a.length;l++){const p=a[l];if(typeof p!="string"&&!Array.isArray(p)){for(const _ in p)if(_!=="default"&&!(_ in n)){const b=Object.getOwnPropertyDescriptor(p,_);b&&Object.defineProperty(n,_,b.get?b:{enumerable:!0,get:()=>p[_]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))p(_);new MutationObserver(_=>{for(const b of _)if(b.type==="childList")for(const v of b.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&p(v)}).observe(document,{childList:!0,subtree:!0});function l(_){const b={};return _.integrity&&(b.integrity=_.integrity),_.referrerPolicy&&(b.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?b.credentials="include":_.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function p(_){if(_.ep)return;_.ep=!0;const b=l(_);fetch(_.href,b)}})();var J2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Av={exports:{}},Up={},Sv={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed=Symbol.for("react.element"),Y2=Symbol.for("react.portal"),Q2=Symbol.for("react.fragment"),eC=Symbol.for("react.strict_mode"),tC=Symbol.for("react.profiler"),nC=Symbol.for("react.provider"),iC=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),rC=Symbol.for("react.suspense"),oC=Symbol.for("react.memo"),sC=Symbol.for("react.lazy"),z0=Symbol.iterator;function lC(n){return n===null||typeof n!="object"?null:(n=z0&&n[z0]||n["@@iterator"],typeof n=="function"?n:null)}var Ev={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tv=Object.assign,Mv={};function wc(n,a,l){this.props=n,this.context=a,this.refs=Mv,this.updater=l||Ev}wc.prototype.isReactComponent={};wc.prototype.setState=function(n,a){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,a,"setState")};wc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Iv(){}Iv.prototype=wc.prototype;function Xg(n,a,l){this.props=n,this.context=a,this.refs=Mv,this.updater=l||Ev}var Kg=Xg.prototype=new Iv;Kg.constructor=Xg;Tv(Kg,wc.prototype);Kg.isPureReactComponent=!0;var R0=Array.isArray,Pv=Object.prototype.hasOwnProperty,Jg={current:null},Dv={key:!0,ref:!0,__self:!0,__source:!0};function zv(n,a,l){var p,_={},b=null,v=null;if(a!=null)for(p in a.ref!==void 0&&(v=a.ref),a.key!==void 0&&(b=""+a.key),a)Pv.call(a,p)&&!Dv.hasOwnProperty(p)&&(_[p]=a[p]);var u=arguments.length-2;if(u===1)_.children=l;else if(1<u){for(var z=Array(u),V=0;V<u;V++)z[V]=arguments[V+2];_.children=z}if(n&&n.defaultProps)for(p in u=n.defaultProps,u)_[p]===void 0&&(_[p]=u[p]);return{$$typeof:Ed,type:n,key:b,ref:v,props:_,_owner:Jg.current}}function cC(n,a){return{$$typeof:Ed,type:n.type,key:a,ref:n.ref,props:n.props,_owner:n._owner}}function Yg(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ed}function uC(n){var a={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(l){return a[l]})}var k0=/\/+/g;function bm(n,a){return typeof n=="object"&&n!==null&&n.key!=null?uC(""+n.key):a.toString(36)}function ep(n,a,l,p,_){var b=typeof n;(b==="undefined"||b==="boolean")&&(n=null);var v=!1;if(n===null)v=!0;else switch(b){case"string":case"number":v=!0;break;case"object":switch(n.$$typeof){case Ed:case Y2:v=!0}}if(v)return v=n,_=_(v),n=p===""?"."+bm(v,0):p,R0(_)?(l="",n!=null&&(l=n.replace(k0,"$&/")+"/"),ep(_,a,l,"",function(V){return V})):_!=null&&(Yg(_)&&(_=cC(_,l+(!_.key||v&&v.key===_.key?"":(""+_.key).replace(k0,"$&/")+"/")+n)),a.push(_)),1;if(v=0,p=p===""?".":p+":",R0(n))for(var u=0;u<n.length;u++){b=n[u];var z=p+bm(b,u);v+=ep(b,a,l,z,_)}else if(z=lC(n),typeof z=="function")for(n=z.call(n),u=0;!(b=n.next()).done;)b=b.value,z=p+bm(b,u++),v+=ep(b,a,l,z,_);else if(b==="object")throw a=String(n),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return v}function Bh(n,a,l){if(n==null)return n;var p=[],_=0;return ep(n,p,"","",function(b){return a.call(l,b,_++)}),p}function dC(n){if(n._status===-1){var a=n._result;a=a(),a.then(function(l){(n._status===0||n._status===-1)&&(n._status=1,n._result=l)},function(l){(n._status===0||n._status===-1)&&(n._status=2,n._result=l)}),n._status===-1&&(n._status=0,n._result=a)}if(n._status===1)return n._result.default;throw n._result}var Xi={current:null},tp={transition:null},hC={ReactCurrentDispatcher:Xi,ReactCurrentBatchConfig:tp,ReactCurrentOwner:Jg};function Rv(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:Bh,forEach:function(n,a,l){Bh(n,function(){a.apply(this,arguments)},l)},count:function(n){var a=0;return Bh(n,function(){a++}),a},toArray:function(n){return Bh(n,function(a){return a})||[]},only:function(n){if(!Yg(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Gt.Component=wc;Gt.Fragment=Q2;Gt.Profiler=tC;Gt.PureComponent=Xg;Gt.StrictMode=eC;Gt.Suspense=rC;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hC;Gt.act=Rv;Gt.cloneElement=function(n,a,l){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var p=Tv({},n.props),_=n.key,b=n.ref,v=n._owner;if(a!=null){if(a.ref!==void 0&&(b=a.ref,v=Jg.current),a.key!==void 0&&(_=""+a.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(z in a)Pv.call(a,z)&&!Dv.hasOwnProperty(z)&&(p[z]=a[z]===void 0&&u!==void 0?u[z]:a[z])}var z=arguments.length-2;if(z===1)p.children=l;else if(1<z){u=Array(z);for(var V=0;V<z;V++)u[V]=arguments[V+2];p.children=u}return{$$typeof:Ed,type:n.type,key:_,ref:b,props:p,_owner:v}};Gt.createContext=function(n){return n={$$typeof:iC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:nC,_context:n},n.Consumer=n};Gt.createElement=zv;Gt.createFactory=function(n){var a=zv.bind(null,n);return a.type=n,a};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(n){return{$$typeof:aC,render:n}};Gt.isValidElement=Yg;Gt.lazy=function(n){return{$$typeof:sC,_payload:{_status:-1,_result:n},_init:dC}};Gt.memo=function(n,a){return{$$typeof:oC,type:n,compare:a===void 0?null:a}};Gt.startTransition=function(n){var a=tp.transition;tp.transition={};try{n()}finally{tp.transition=a}};Gt.unstable_act=Rv;Gt.useCallback=function(n,a){return Xi.current.useCallback(n,a)};Gt.useContext=function(n){return Xi.current.useContext(n)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(n){return Xi.current.useDeferredValue(n)};Gt.useEffect=function(n,a){return Xi.current.useEffect(n,a)};Gt.useId=function(){return Xi.current.useId()};Gt.useImperativeHandle=function(n,a,l){return Xi.current.useImperativeHandle(n,a,l)};Gt.useInsertionEffect=function(n,a){return Xi.current.useInsertionEffect(n,a)};Gt.useLayoutEffect=function(n,a){return Xi.current.useLayoutEffect(n,a)};Gt.useMemo=function(n,a){return Xi.current.useMemo(n,a)};Gt.useReducer=function(n,a,l){return Xi.current.useReducer(n,a,l)};Gt.useRef=function(n){return Xi.current.useRef(n)};Gt.useState=function(n){return Xi.current.useState(n)};Gt.useSyncExternalStore=function(n,a,l){return Xi.current.useSyncExternalStore(n,a,l)};Gt.useTransition=function(){return Xi.current.useTransition()};Gt.version="18.3.1";Sv.exports=Gt;var Me=Sv.exports;const to=Wg(Me),pC=Zg({__proto__:null,default:to},[Me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC=Me,mC=Symbol.for("react.element"),gC=Symbol.for("react.fragment"),yC=Object.prototype.hasOwnProperty,_C=fC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vC={key:!0,ref:!0,__self:!0,__source:!0};function kv(n,a,l){var p,_={},b=null,v=null;l!==void 0&&(b=""+l),a.key!==void 0&&(b=""+a.key),a.ref!==void 0&&(v=a.ref);for(p in a)yC.call(a,p)&&!vC.hasOwnProperty(p)&&(_[p]=a[p]);if(n&&n.defaultProps)for(p in a=n.defaultProps,a)_[p]===void 0&&(_[p]=a[p]);return{$$typeof:mC,type:n,key:b,ref:v,props:_,_owner:_C.current}}Up.Fragment=gC;Up.jsx=kv;Up.jsxs=kv;Av.exports=Up;var it=Av.exports,Ym={},Lv={exports:{}},za={},Ov={exports:{}},Bv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function a(at,ut){var bt=at.length;at.push(ut);e:for(;0<bt;){var Rt=bt-1>>>1,Nt=at[Rt];if(0<_(Nt,ut))at[Rt]=ut,at[bt]=Nt,bt=Rt;else break e}}function l(at){return at.length===0?null:at[0]}function p(at){if(at.length===0)return null;var ut=at[0],bt=at.pop();if(bt!==ut){at[0]=bt;e:for(var Rt=0,Nt=at.length,Tn=Nt>>>1;Rt<Tn;){var yn=2*(Rt+1)-1,On=at[yn],hn=yn+1,rn=at[hn];if(0>_(On,bt))hn<Nt&&0>_(rn,On)?(at[Rt]=rn,at[hn]=bt,Rt=hn):(at[Rt]=On,at[yn]=bt,Rt=yn);else if(hn<Nt&&0>_(rn,bt))at[Rt]=rn,at[hn]=bt,Rt=hn;else break e}}return ut}function _(at,ut){var bt=at.sortIndex-ut.sortIndex;return bt!==0?bt:at.id-ut.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;n.unstable_now=function(){return b.now()}}else{var v=Date,u=v.now();n.unstable_now=function(){return v.now()-u}}var z=[],V=[],W=1,j=null,N=3,Te=!1,Ce=!1,we=!1,Ge=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(at){for(var ut=l(V);ut!==null;){if(ut.callback===null)p(V);else if(ut.startTime<=at)p(V),ut.sortIndex=ut.expirationTime,a(z,ut);else break;ut=l(V)}}function Ee(at){if(we=!1,ce(at),!Ce)if(l(z)!==null)Ce=!0,$n(ke);else{var ut=l(V);ut!==null&&Un(Ee,ut.startTime-at)}}function ke(at,ut){Ce=!1,we&&(we=!1,re(pe),pe=-1),Te=!0;var bt=N;try{for(ce(ut),j=l(z);j!==null&&(!(j.expirationTime>ut)||at&&!ot());){var Rt=j.callback;if(typeof Rt=="function"){j.callback=null,N=j.priorityLevel;var Nt=Rt(j.expirationTime<=ut);ut=n.unstable_now(),typeof Nt=="function"?j.callback=Nt:j===l(z)&&p(z),ce(ut)}else p(z);j=l(z)}if(j!==null)var Tn=!0;else{var yn=l(V);yn!==null&&Un(Ee,yn.startTime-ut),Tn=!1}return Tn}finally{j=null,N=bt,Te=!1}}var Xe=!1,Qe=null,pe=-1,pt=5,ct=-1;function ot(){return!(n.unstable_now()-ct<pt)}function Xt(){if(Qe!==null){var at=n.unstable_now();ct=at;var ut=!0;try{ut=Qe(!0,at)}finally{ut?Ft():(Xe=!1,Qe=null)}}else Xe=!1}var Ft;if(typeof ie=="function")Ft=function(){ie(Xt)};else if(typeof MessageChannel<"u"){var Ot=new MessageChannel,Ln=Ot.port2;Ot.port1.onmessage=Xt,Ft=function(){Ln.postMessage(null)}}else Ft=function(){Ge(Xt,0)};function $n(at){Qe=at,Xe||(Xe=!0,Ft())}function Un(at,ut){pe=Ge(function(){at(n.unstable_now())},ut)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(at){at.callback=null},n.unstable_continueExecution=function(){Ce||Te||(Ce=!0,$n(ke))},n.unstable_forceFrameRate=function(at){0>at||125<at?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<at?Math.floor(1e3/at):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return l(z)},n.unstable_next=function(at){switch(N){case 1:case 2:case 3:var ut=3;break;default:ut=N}var bt=N;N=ut;try{return at()}finally{N=bt}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(at,ut){switch(at){case 1:case 2:case 3:case 4:case 5:break;default:at=3}var bt=N;N=at;try{return ut()}finally{N=bt}},n.unstable_scheduleCallback=function(at,ut,bt){var Rt=n.unstable_now();switch(typeof bt=="object"&&bt!==null?(bt=bt.delay,bt=typeof bt=="number"&&0<bt?Rt+bt:Rt):bt=Rt,at){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=bt+Nt,at={id:W++,callback:ut,priorityLevel:at,startTime:bt,expirationTime:Nt,sortIndex:-1},bt>Rt?(at.sortIndex=bt,a(V,at),l(z)===null&&at===l(V)&&(we?(re(pe),pe=-1):we=!0,Un(Ee,bt-Rt))):(at.sortIndex=Nt,a(z,at),Ce||Te||(Ce=!0,$n(ke))),at},n.unstable_shouldYield=ot,n.unstable_wrapCallback=function(at){var ut=N;return function(){var bt=N;N=ut;try{return at.apply(this,arguments)}finally{N=bt}}}})(Bv);Ov.exports=Bv;var xC=Ov.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=Me,Da=xC;function qe(n){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fv=new Set,od={};function Js(n,a){fc(n,a),fc(n+"Capture",a)}function fc(n,a){for(od[n]=a,n=0;n<a.length;n++)Fv.add(a[n])}var ao=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qm=Object.prototype.hasOwnProperty,wC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L0={},O0={};function CC(n){return Qm.call(O0,n)?!0:Qm.call(L0,n)?!1:wC.test(n)?O0[n]=!0:(L0[n]=!0,!1)}function AC(n,a,l,p){if(l!==null&&l.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function SC(n,a,l,p){if(a===null||typeof a>"u"||AC(n,a,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function Ki(n,a,l,p,_,b,v){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=l,this.propertyName=n,this.type=a,this.sanitizeURL=b,this.removeEmptyString=v}var xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xi[n]=new Ki(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var a=n[0];xi[a]=new Ki(a,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xi[n]=new Ki(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xi[n]=new Ki(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xi[n]=new Ki(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xi[n]=new Ki(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xi[n]=new Ki(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xi[n]=new Ki(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xi[n]=new Ki(n,5,!1,n.toLowerCase(),null,!1,!1)});var Qg=/[\-:]([a-z])/g;function ey(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var a=n.replace(Qg,ey);xi[a]=new Ki(a,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var a=n.replace(Qg,ey);xi[a]=new Ki(a,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var a=n.replace(Qg,ey);xi[a]=new Ki(a,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xi[n]=new Ki(n,1,!1,n.toLowerCase(),null,!1,!1)});xi.xlinkHref=new Ki("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xi[n]=new Ki(n,1,!1,n.toLowerCase(),null,!0,!0)});function ty(n,a,l,p){var _=xi.hasOwnProperty(a)?xi[a]:null;(_!==null?_.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(SC(a,l,_,p)&&(l=null),p||_===null?CC(a)&&(l===null?n.removeAttribute(a):n.setAttribute(a,""+l)):_.mustUseProperty?n[_.propertyName]=l===null?_.type===3?!1:"":l:(a=_.attributeName,p=_.attributeNamespace,l===null?n.removeAttribute(a):(_=_.type,l=_===3||_===4&&l===!0?"":""+l,p?n.setAttributeNS(p,a,l):n.setAttribute(a,l))))}var lo=bC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fh=Symbol.for("react.element"),Xl=Symbol.for("react.portal"),Kl=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),eg=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),jv=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),tg=Symbol.for("react.suspense"),ng=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),ko=Symbol.for("react.lazy"),Vv=Symbol.for("react.offscreen"),B0=Symbol.iterator;function Ru(n){return n===null||typeof n!="object"?null:(n=B0&&n[B0]||n["@@iterator"],typeof n=="function"?n:null)}var kn=Object.assign,wm;function $u(n){if(wm===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);wm=a&&a[1]||""}return`
`+wm+n}var Cm=!1;function Am(n,a){if(!n||Cm)return"";Cm=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(V){var p=V}Reflect.construct(n,[],a)}else{try{a.call()}catch(V){p=V}n.call(a.prototype)}else{try{throw Error()}catch(V){p=V}n()}}catch(V){if(V&&p&&typeof V.stack=="string"){for(var _=V.stack.split(`
`),b=p.stack.split(`
`),v=_.length-1,u=b.length-1;1<=v&&0<=u&&_[v]!==b[u];)u--;for(;1<=v&&0<=u;v--,u--)if(_[v]!==b[u]){if(v!==1||u!==1)do if(v--,u--,0>u||_[v]!==b[u]){var z=`
`+_[v].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=v&&0<=u);break}}}finally{Cm=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?$u(n):""}function EC(n){switch(n.tag){case 5:return $u(n.type);case 16:return $u("Lazy");case 13:return $u("Suspense");case 19:return $u("SuspenseList");case 0:case 2:case 15:return n=Am(n.type,!1),n;case 11:return n=Am(n.type.render,!1),n;case 1:return n=Am(n.type,!0),n;default:return""}}function ig(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Kl:return"Fragment";case Xl:return"Portal";case eg:return"Profiler";case ny:return"StrictMode";case tg:return"Suspense";case ng:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case jv:return(n.displayName||"Context")+".Consumer";case Nv:return(n._context.displayName||"Context")+".Provider";case iy:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ay:return a=n.displayName||null,a!==null?a:ig(n.type)||"Memo";case ko:a=n._payload,n=n._init;try{return ig(n(a))}catch{}}return null}function TC(n){var a=n.type;switch(n.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=a.render,n=n.displayName||n.name||"",a.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ig(a);case 8:return a===ny?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Wo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Uv(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function MC(n){var a=Uv(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),p=""+n[a];if(!n.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var _=l.get,b=l.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return _.call(this)},set:function(v){p=""+v,b.call(this,v)}}),Object.defineProperty(n,a,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(v){p=""+v},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Nh(n){n._valueTracker||(n._valueTracker=MC(n))}function qv(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var l=a.getValue(),p="";return n&&(p=Uv(n)?n.checked?"true":"false":n.value),n=p,n!==l?(a.setValue(n),!0):!1}function pp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ag(n,a){var l=a.checked;return kn({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function F0(n,a){var l=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;l=Wo(a.value!=null?a.value:l),n._wrapperState={initialChecked:p,initialValue:l,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Gv(n,a){a=a.checked,a!=null&&ty(n,"checked",a,!1)}function rg(n,a){Gv(n,a);var l=Wo(a.value),p=a.type;if(l!=null)p==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}a.hasOwnProperty("value")?og(n,a.type,l):a.hasOwnProperty("defaultValue")&&og(n,a.type,Wo(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(n.defaultChecked=!!a.defaultChecked)}function N0(n,a,l){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+n._wrapperState.initialValue,l||a===n.value||(n.value=a),n.defaultValue=a}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function og(n,a,l){(a!=="number"||pp(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Zu=Array.isArray;function lc(n,a,l,p){if(n=n.options,a){a={};for(var _=0;_<l.length;_++)a["$"+l[_]]=!0;for(l=0;l<n.length;l++)_=a.hasOwnProperty("$"+n[l].value),n[l].selected!==_&&(n[l].selected=_),_&&p&&(n[l].defaultSelected=!0)}else{for(l=""+Wo(l),a=null,_=0;_<n.length;_++){if(n[_].value===l){n[_].selected=!0,p&&(n[_].defaultSelected=!0);return}a!==null||n[_].disabled||(a=n[_])}a!==null&&(a.selected=!0)}}function sg(n,a){if(a.dangerouslySetInnerHTML!=null)throw Error(qe(91));return kn({},a,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function j0(n,a){var l=a.value;if(l==null){if(l=a.children,a=a.defaultValue,l!=null){if(a!=null)throw Error(qe(92));if(Zu(l)){if(1<l.length)throw Error(qe(93));l=l[0]}a=l}a==null&&(a=""),l=a}n._wrapperState={initialValue:Wo(l)}}function Hv(n,a){var l=Wo(a.value),p=Wo(a.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),a.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),p!=null&&(n.defaultValue=""+p)}function V0(n){var a=n.textContent;a===n._wrapperState.initialValue&&a!==""&&a!==null&&(n.value=a)}function $v(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lg(n,a){return n==null||n==="http://www.w3.org/1999/xhtml"?$v(a):n==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var jh,Zv=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,l,p,_){MSApp.execUnsafeLocalFunction(function(){return n(a,l,p,_)})}:n}(function(n,a){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=a;else{for(jh=jh||document.createElement("div"),jh.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=jh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;a.firstChild;)n.appendChild(a.firstChild)}});function sd(n,a){if(a){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=a;return}}n.textContent=a}var Ju={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IC=["Webkit","ms","Moz","O"];Object.keys(Ju).forEach(function(n){IC.forEach(function(a){a=a+n.charAt(0).toUpperCase()+n.substring(1),Ju[a]=Ju[n]})});function Wv(n,a,l){return a==null||typeof a=="boolean"||a===""?"":l||typeof a!="number"||a===0||Ju.hasOwnProperty(n)&&Ju[n]?(""+a).trim():a+"px"}function Xv(n,a){n=n.style;for(var l in a)if(a.hasOwnProperty(l)){var p=l.indexOf("--")===0,_=Wv(l,a[l],p);l==="float"&&(l="cssFloat"),p?n.setProperty(l,_):n[l]=_}}var PC=kn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cg(n,a){if(a){if(PC[n]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(qe(137,n));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(qe(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(qe(61))}if(a.style!=null&&typeof a.style!="object")throw Error(qe(62))}}function ug(n,a){if(n.indexOf("-")===-1)return typeof a.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dg=null;function ry(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hg=null,cc=null,uc=null;function U0(n){if(n=Id(n)){if(typeof hg!="function")throw Error(qe(280));var a=n.stateNode;a&&(a=Zp(a),hg(n.stateNode,n.type,a))}}function Kv(n){cc?uc?uc.push(n):uc=[n]:cc=n}function Jv(){if(cc){var n=cc,a=uc;if(uc=cc=null,U0(n),a)for(n=0;n<a.length;n++)U0(a[n])}}function Yv(n,a){return n(a)}function Qv(){}var Sm=!1;function ex(n,a,l){if(Sm)return n(a,l);Sm=!0;try{return Yv(n,a,l)}finally{Sm=!1,(cc!==null||uc!==null)&&(Qv(),Jv())}}function ld(n,a){var l=n.stateNode;if(l===null)return null;var p=Zp(l);if(p===null)return null;l=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(qe(231,a,typeof l));return l}var pg=!1;if(ao)try{var ku={};Object.defineProperty(ku,"passive",{get:function(){pg=!0}}),window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{pg=!1}function DC(n,a,l,p,_,b,v,u,z){var V=Array.prototype.slice.call(arguments,3);try{a.apply(l,V)}catch(W){this.onError(W)}}var Yu=!1,fp=null,mp=!1,fg=null,zC={onError:function(n){Yu=!0,fp=n}};function RC(n,a,l,p,_,b,v,u,z){Yu=!1,fp=null,DC.apply(zC,arguments)}function kC(n,a,l,p,_,b,v,u,z){if(RC.apply(this,arguments),Yu){if(Yu){var V=fp;Yu=!1,fp=null}else throw Error(qe(198));mp||(mp=!0,fg=V)}}function Ys(n){var a=n,l=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,a.flags&4098&&(l=a.return),n=a.return;while(n)}return a.tag===3?l:null}function tx(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function q0(n){if(Ys(n)!==n)throw Error(qe(188))}function LC(n){var a=n.alternate;if(!a){if(a=Ys(n),a===null)throw Error(qe(188));return a!==n?null:n}for(var l=n,p=a;;){var _=l.return;if(_===null)break;var b=_.alternate;if(b===null){if(p=_.return,p!==null){l=p;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===l)return q0(_),n;if(b===p)return q0(_),a;b=b.sibling}throw Error(qe(188))}if(l.return!==p.return)l=_,p=b;else{for(var v=!1,u=_.child;u;){if(u===l){v=!0,l=_,p=b;break}if(u===p){v=!0,p=_,l=b;break}u=u.sibling}if(!v){for(u=b.child;u;){if(u===l){v=!0,l=b,p=_;break}if(u===p){v=!0,p=b,l=_;break}u=u.sibling}if(!v)throw Error(qe(189))}}if(l.alternate!==p)throw Error(qe(190))}if(l.tag!==3)throw Error(qe(188));return l.stateNode.current===l?n:a}function nx(n){return n=LC(n),n!==null?ix(n):null}function ix(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var a=ix(n);if(a!==null)return a;n=n.sibling}return null}var ax=Da.unstable_scheduleCallback,G0=Da.unstable_cancelCallback,OC=Da.unstable_shouldYield,BC=Da.unstable_requestPaint,Hn=Da.unstable_now,FC=Da.unstable_getCurrentPriorityLevel,oy=Da.unstable_ImmediatePriority,rx=Da.unstable_UserBlockingPriority,gp=Da.unstable_NormalPriority,NC=Da.unstable_LowPriority,ox=Da.unstable_IdlePriority,qp=null,Dr=null;function jC(n){if(Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot(qp,n,void 0,(n.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:qC,VC=Math.log,UC=Math.LN2;function qC(n){return n>>>=0,n===0?32:31-(VC(n)/UC|0)|0}var Vh=64,Uh=4194304;function Wu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function yp(n,a){var l=n.pendingLanes;if(l===0)return 0;var p=0,_=n.suspendedLanes,b=n.pingedLanes,v=l&268435455;if(v!==0){var u=v&~_;u!==0?p=Wu(u):(b&=v,b!==0&&(p=Wu(b)))}else v=l&~_,v!==0?p=Wu(v):b!==0&&(p=Wu(b));if(p===0)return 0;if(a!==0&&a!==p&&!(a&_)&&(_=p&-p,b=a&-a,_>=b||_===16&&(b&4194240)!==0))return a;if(p&4&&(p|=l&16),a=n.entangledLanes,a!==0)for(n=n.entanglements,a&=p;0<a;)l=31-cr(a),_=1<<l,p|=n[l],a&=~_;return p}function GC(n,a){switch(n){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HC(n,a){for(var l=n.suspendedLanes,p=n.pingedLanes,_=n.expirationTimes,b=n.pendingLanes;0<b;){var v=31-cr(b),u=1<<v,z=_[v];z===-1?(!(u&l)||u&p)&&(_[v]=GC(u,a)):z<=a&&(n.expiredLanes|=u),b&=~u}}function mg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sx(){var n=Vh;return Vh<<=1,!(Vh&4194240)&&(Vh=64),n}function Em(n){for(var a=[],l=0;31>l;l++)a.push(n);return a}function Td(n,a,l){n.pendingLanes|=a,a!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,a=31-cr(a),n[a]=l}function $C(n,a){var l=n.pendingLanes&~a;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=a,n.mutableReadLanes&=a,n.entangledLanes&=a,a=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<l;){var _=31-cr(l),b=1<<_;a[_]=0,p[_]=-1,n[_]=-1,l&=~b}}function sy(n,a){var l=n.entangledLanes|=a;for(n=n.entanglements;l;){var p=31-cr(l),_=1<<p;_&a|n[p]&a&&(n[p]|=a),l&=~_}}var an=0;function lx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var cx,ly,ux,dx,hx,gg=!1,qh=[],jo=null,Vo=null,Uo=null,cd=new Map,ud=new Map,Oo=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H0(n,a){switch(n){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":cd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(a.pointerId)}}function Lu(n,a,l,p,_,b){return n===null||n.nativeEvent!==b?(n={blockedOn:a,domEventName:l,eventSystemFlags:p,nativeEvent:b,targetContainers:[_]},a!==null&&(a=Id(a),a!==null&&ly(a)),n):(n.eventSystemFlags|=p,a=n.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),n)}function WC(n,a,l,p,_){switch(a){case"focusin":return jo=Lu(jo,n,a,l,p,_),!0;case"dragenter":return Vo=Lu(Vo,n,a,l,p,_),!0;case"mouseover":return Uo=Lu(Uo,n,a,l,p,_),!0;case"pointerover":var b=_.pointerId;return cd.set(b,Lu(cd.get(b)||null,n,a,l,p,_)),!0;case"gotpointercapture":return b=_.pointerId,ud.set(b,Lu(ud.get(b)||null,n,a,l,p,_)),!0}return!1}function px(n){var a=Bs(n.target);if(a!==null){var l=Ys(a);if(l!==null){if(a=l.tag,a===13){if(a=tx(l),a!==null){n.blockedOn=a,hx(n.priority,function(){ux(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function np(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var l=yg(n.domEventName,n.eventSystemFlags,a[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var p=new l.constructor(l.type,l);dg=p,l.target.dispatchEvent(p),dg=null}else return a=Id(l),a!==null&&ly(a),n.blockedOn=l,!1;a.shift()}return!0}function $0(n,a,l){np(n)&&l.delete(a)}function XC(){gg=!1,jo!==null&&np(jo)&&(jo=null),Vo!==null&&np(Vo)&&(Vo=null),Uo!==null&&np(Uo)&&(Uo=null),cd.forEach($0),ud.forEach($0)}function Ou(n,a){n.blockedOn===a&&(n.blockedOn=null,gg||(gg=!0,Da.unstable_scheduleCallback(Da.unstable_NormalPriority,XC)))}function dd(n){function a(_){return Ou(_,n)}if(0<qh.length){Ou(qh[0],n);for(var l=1;l<qh.length;l++){var p=qh[l];p.blockedOn===n&&(p.blockedOn=null)}}for(jo!==null&&Ou(jo,n),Vo!==null&&Ou(Vo,n),Uo!==null&&Ou(Uo,n),cd.forEach(a),ud.forEach(a),l=0;l<Oo.length;l++)p=Oo[l],p.blockedOn===n&&(p.blockedOn=null);for(;0<Oo.length&&(l=Oo[0],l.blockedOn===null);)px(l),l.blockedOn===null&&Oo.shift()}var dc=lo.ReactCurrentBatchConfig,_p=!0;function KC(n,a,l,p){var _=an,b=dc.transition;dc.transition=null;try{an=1,cy(n,a,l,p)}finally{an=_,dc.transition=b}}function JC(n,a,l,p){var _=an,b=dc.transition;dc.transition=null;try{an=4,cy(n,a,l,p)}finally{an=_,dc.transition=b}}function cy(n,a,l,p){if(_p){var _=yg(n,a,l,p);if(_===null)Om(n,a,p,vp,l),H0(n,p);else if(WC(_,n,a,l,p))p.stopPropagation();else if(H0(n,p),a&4&&-1<ZC.indexOf(n)){for(;_!==null;){var b=Id(_);if(b!==null&&cx(b),b=yg(n,a,l,p),b===null&&Om(n,a,p,vp,l),b===_)break;_=b}_!==null&&p.stopPropagation()}else Om(n,a,p,null,l)}}var vp=null;function yg(n,a,l,p){if(vp=null,n=ry(p),n=Bs(n),n!==null)if(a=Ys(n),a===null)n=null;else if(l=a.tag,l===13){if(n=tx(a),n!==null)return n;n=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null);return vp=n,null}function fx(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FC()){case oy:return 1;case rx:return 4;case gp:case NC:return 16;case ox:return 536870912;default:return 16}default:return 16}}var Fo=null,uy=null,ip=null;function mx(){if(ip)return ip;var n,a=uy,l=a.length,p,_="value"in Fo?Fo.value:Fo.textContent,b=_.length;for(n=0;n<l&&a[n]===_[n];n++);var v=l-n;for(p=1;p<=v&&a[l-p]===_[b-p];p++);return ip=_.slice(n,1<p?1-p:void 0)}function ap(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Gh(){return!0}function Z0(){return!1}function Ra(n){function a(l,p,_,b,v){this._reactName=l,this._targetInst=_,this.type=p,this.nativeEvent=b,this.target=v,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(l=n[u],this[u]=l?l(b):b[u]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Gh:Z0,this.isPropagationStopped=Z0,this}return kn(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gh)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gh)},persist:function(){},isPersistent:Gh}),a}var Cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dy=Ra(Cc),Md=kn({},Cc,{view:0,detail:0}),YC=Ra(Md),Tm,Mm,Bu,Gp=kn({},Md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bu&&(Bu&&n.type==="mousemove"?(Tm=n.screenX-Bu.screenX,Mm=n.screenY-Bu.screenY):Mm=Tm=0,Bu=n),Tm)},movementY:function(n){return"movementY"in n?n.movementY:Mm}}),W0=Ra(Gp),QC=kn({},Gp,{dataTransfer:0}),eA=Ra(QC),tA=kn({},Md,{relatedTarget:0}),Im=Ra(tA),nA=kn({},Cc,{animationName:0,elapsedTime:0,pseudoElement:0}),iA=Ra(nA),aA=kn({},Cc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rA=Ra(aA),oA=kn({},Cc,{data:0}),X0=Ra(oA),sA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uA(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=cA[n])?!!a[n]:!1}function hy(){return uA}var dA=kn({},Md,{key:function(n){if(n.key){var a=sA[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=ap(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?lA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hy,charCode:function(n){return n.type==="keypress"?ap(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ap(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hA=Ra(dA),pA=kn({},Gp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=Ra(pA),fA=kn({},Md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hy}),mA=Ra(fA),gA=kn({},Cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),yA=Ra(gA),_A=kn({},Gp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),vA=Ra(_A),xA=[9,13,27,32],py=ao&&"CompositionEvent"in window,Qu=null;ao&&"documentMode"in document&&(Qu=document.documentMode);var bA=ao&&"TextEvent"in window&&!Qu,gx=ao&&(!py||Qu&&8<Qu&&11>=Qu),J0=" ",Y0=!1;function yx(n,a){switch(n){case"keyup":return xA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _x(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jl=!1;function wA(n,a){switch(n){case"compositionend":return _x(a);case"keypress":return a.which!==32?null:(Y0=!0,J0);case"textInput":return n=a.data,n===J0&&Y0?null:n;default:return null}}function CA(n,a){if(Jl)return n==="compositionend"||!py&&yx(n,a)?(n=mx(),ip=uy=Fo=null,Jl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return gx&&a.locale!=="ko"?null:a.data;default:return null}}var AA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q0(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!AA[n.type]:a==="textarea"}function vx(n,a,l,p){Kv(p),a=xp(a,"onChange"),0<a.length&&(l=new dy("onChange","change",null,l,p),n.push({event:l,listeners:a}))}var ed=null,hd=null;function SA(n){Px(n,0)}function Hp(n){var a=ec(n);if(qv(a))return n}function EA(n,a){if(n==="change")return a}var xx=!1;if(ao){var Pm;if(ao){var Dm="oninput"in document;if(!Dm){var e1=document.createElement("div");e1.setAttribute("oninput","return;"),Dm=typeof e1.oninput=="function"}Pm=Dm}else Pm=!1;xx=Pm&&(!document.documentMode||9<document.documentMode)}function t1(){ed&&(ed.detachEvent("onpropertychange",bx),hd=ed=null)}function bx(n){if(n.propertyName==="value"&&Hp(hd)){var a=[];vx(a,hd,n,ry(n)),ex(SA,a)}}function TA(n,a,l){n==="focusin"?(t1(),ed=a,hd=l,ed.attachEvent("onpropertychange",bx)):n==="focusout"&&t1()}function MA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hp(hd)}function IA(n,a){if(n==="click")return Hp(a)}function PA(n,a){if(n==="input"||n==="change")return Hp(a)}function DA(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var dr=typeof Object.is=="function"?Object.is:DA;function pd(n,a){if(dr(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var l=Object.keys(n),p=Object.keys(a);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var _=l[p];if(!Qm.call(a,_)||!dr(n[_],a[_]))return!1}return!0}function n1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function i1(n,a){var l=n1(n);n=0;for(var p;l;){if(l.nodeType===3){if(p=n+l.textContent.length,n<=a&&p>=a)return{node:l,offset:a-n};n=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=n1(l)}}function wx(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?wx(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Cx(){for(var n=window,a=pp();a instanceof n.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)n=a.contentWindow;else break;a=pp(n.document)}return a}function fy(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}function zA(n){var a=Cx(),l=n.focusedElem,p=n.selectionRange;if(a!==l&&l&&l.ownerDocument&&wx(l.ownerDocument.documentElement,l)){if(p!==null&&fy(l)){if(a=p.start,n=p.end,n===void 0&&(n=a),"selectionStart"in l)l.selectionStart=a,l.selectionEnd=Math.min(n,l.value.length);else if(n=(a=l.ownerDocument||document)&&a.defaultView||window,n.getSelection){n=n.getSelection();var _=l.textContent.length,b=Math.min(p.start,_);p=p.end===void 0?b:Math.min(p.end,_),!n.extend&&b>p&&(_=p,p=b,b=_),_=i1(l,b);var v=i1(l,p);_&&v&&(n.rangeCount!==1||n.anchorNode!==_.node||n.anchorOffset!==_.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(a=a.createRange(),a.setStart(_.node,_.offset),n.removeAllRanges(),b>p?(n.addRange(a),n.extend(v.node,v.offset)):(a.setEnd(v.node,v.offset),n.addRange(a)))}}for(a=[],n=l;n=n.parentNode;)n.nodeType===1&&a.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<a.length;l++)n=a[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var RA=ao&&"documentMode"in document&&11>=document.documentMode,Yl=null,_g=null,td=null,vg=!1;function a1(n,a,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vg||Yl==null||Yl!==pp(p)||(p=Yl,"selectionStart"in p&&fy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),td&&pd(td,p)||(td=p,p=xp(_g,"onSelect"),0<p.length&&(a=new dy("onSelect","select",null,a,l),n.push({event:a,listeners:p}),a.target=Yl)))}function Hh(n,a){var l={};return l[n.toLowerCase()]=a.toLowerCase(),l["Webkit"+n]="webkit"+a,l["Moz"+n]="moz"+a,l}var Ql={animationend:Hh("Animation","AnimationEnd"),animationiteration:Hh("Animation","AnimationIteration"),animationstart:Hh("Animation","AnimationStart"),transitionend:Hh("Transition","TransitionEnd")},zm={},Ax={};ao&&(Ax=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function $p(n){if(zm[n])return zm[n];if(!Ql[n])return n;var a=Ql[n],l;for(l in a)if(a.hasOwnProperty(l)&&l in Ax)return zm[n]=a[l];return n}var Sx=$p("animationend"),Ex=$p("animationiteration"),Tx=$p("animationstart"),Mx=$p("transitionend"),Ix=new Map,r1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(n,a){Ix.set(n,a),Js(a,[n])}for(var Rm=0;Rm<r1.length;Rm++){var km=r1[Rm],kA=km.toLowerCase(),LA=km[0].toUpperCase()+km.slice(1);Ko(kA,"on"+LA)}Ko(Sx,"onAnimationEnd");Ko(Ex,"onAnimationIteration");Ko(Tx,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(Mx,"onTransitionEnd");fc("onMouseEnter",["mouseout","mouseover"]);fc("onMouseLeave",["mouseout","mouseover"]);fc("onPointerEnter",["pointerout","pointerover"]);fc("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xu));function o1(n,a,l){var p=n.type||"unknown-event";n.currentTarget=l,kC(p,a,void 0,n),n.currentTarget=null}function Px(n,a){a=(a&4)!==0;for(var l=0;l<n.length;l++){var p=n[l],_=p.event;p=p.listeners;e:{var b=void 0;if(a)for(var v=p.length-1;0<=v;v--){var u=p[v],z=u.instance,V=u.currentTarget;if(u=u.listener,z!==b&&_.isPropagationStopped())break e;o1(_,u,V),b=z}else for(v=0;v<p.length;v++){if(u=p[v],z=u.instance,V=u.currentTarget,u=u.listener,z!==b&&_.isPropagationStopped())break e;o1(_,u,V),b=z}}}if(mp)throw n=fg,mp=!1,fg=null,n}function wn(n,a){var l=a[Ag];l===void 0&&(l=a[Ag]=new Set);var p=n+"__bubble";l.has(p)||(Dx(a,n,2,!1),l.add(p))}function Lm(n,a,l){var p=0;a&&(p|=4),Dx(l,n,p,a)}var $h="_reactListening"+Math.random().toString(36).slice(2);function fd(n){if(!n[$h]){n[$h]=!0,Fv.forEach(function(l){l!=="selectionchange"&&(OA.has(l)||Lm(l,!1,n),Lm(l,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[$h]||(a[$h]=!0,Lm("selectionchange",!1,a))}}function Dx(n,a,l,p){switch(fx(a)){case 1:var _=KC;break;case 4:_=JC;break;default:_=cy}l=_.bind(null,a,l,n),_=void 0,!pg||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),p?_!==void 0?n.addEventListener(a,l,{capture:!0,passive:_}):n.addEventListener(a,l,!0):_!==void 0?n.addEventListener(a,l,{passive:_}):n.addEventListener(a,l,!1)}function Om(n,a,l,p,_){var b=p;if(!(a&1)&&!(a&2)&&p!==null)e:for(;;){if(p===null)return;var v=p.tag;if(v===3||v===4){var u=p.stateNode.containerInfo;if(u===_||u.nodeType===8&&u.parentNode===_)break;if(v===4)for(v=p.return;v!==null;){var z=v.tag;if((z===3||z===4)&&(z=v.stateNode.containerInfo,z===_||z.nodeType===8&&z.parentNode===_))return;v=v.return}for(;u!==null;){if(v=Bs(u),v===null)return;if(z=v.tag,z===5||z===6){p=b=v;continue e}u=u.parentNode}}p=p.return}ex(function(){var V=b,W=ry(l),j=[];e:{var N=Ix.get(n);if(N!==void 0){var Te=dy,Ce=n;switch(n){case"keypress":if(ap(l)===0)break e;case"keydown":case"keyup":Te=hA;break;case"focusin":Ce="focus",Te=Im;break;case"focusout":Ce="blur",Te=Im;break;case"beforeblur":case"afterblur":Te=Im;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=eA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=mA;break;case Sx:case Ex:case Tx:Te=iA;break;case Mx:Te=yA;break;case"scroll":Te=YC;break;case"wheel":Te=vA;break;case"copy":case"cut":case"paste":Te=rA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=K0}var we=(a&4)!==0,Ge=!we&&n==="scroll",re=we?N!==null?N+"Capture":null:N;we=[];for(var ie=V,ce;ie!==null;){ce=ie;var Ee=ce.stateNode;if(ce.tag===5&&Ee!==null&&(ce=Ee,re!==null&&(Ee=ld(ie,re),Ee!=null&&we.push(md(ie,Ee,ce)))),Ge)break;ie=ie.return}0<we.length&&(N=new Te(N,Ce,null,l,W),j.push({event:N,listeners:we}))}}if(!(a&7)){e:{if(N=n==="mouseover"||n==="pointerover",Te=n==="mouseout"||n==="pointerout",N&&l!==dg&&(Ce=l.relatedTarget||l.fromElement)&&(Bs(Ce)||Ce[ro]))break e;if((Te||N)&&(N=W.window===W?W:(N=W.ownerDocument)?N.defaultView||N.parentWindow:window,Te?(Ce=l.relatedTarget||l.toElement,Te=V,Ce=Ce?Bs(Ce):null,Ce!==null&&(Ge=Ys(Ce),Ce!==Ge||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Te=null,Ce=V),Te!==Ce)){if(we=W0,Ee="onMouseLeave",re="onMouseEnter",ie="mouse",(n==="pointerout"||n==="pointerover")&&(we=K0,Ee="onPointerLeave",re="onPointerEnter",ie="pointer"),Ge=Te==null?N:ec(Te),ce=Ce==null?N:ec(Ce),N=new we(Ee,ie+"leave",Te,l,W),N.target=Ge,N.relatedTarget=ce,Ee=null,Bs(W)===V&&(we=new we(re,ie+"enter",Ce,l,W),we.target=ce,we.relatedTarget=Ge,Ee=we),Ge=Ee,Te&&Ce)t:{for(we=Te,re=Ce,ie=0,ce=we;ce;ce=$l(ce))ie++;for(ce=0,Ee=re;Ee;Ee=$l(Ee))ce++;for(;0<ie-ce;)we=$l(we),ie--;for(;0<ce-ie;)re=$l(re),ce--;for(;ie--;){if(we===re||re!==null&&we===re.alternate)break t;we=$l(we),re=$l(re)}we=null}else we=null;Te!==null&&s1(j,N,Te,we,!1),Ce!==null&&Ge!==null&&s1(j,Ge,Ce,we,!0)}}e:{if(N=V?ec(V):window,Te=N.nodeName&&N.nodeName.toLowerCase(),Te==="select"||Te==="input"&&N.type==="file")var ke=EA;else if(Q0(N))if(xx)ke=PA;else{ke=MA;var Xe=TA}else(Te=N.nodeName)&&Te.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(ke=IA);if(ke&&(ke=ke(n,V))){vx(j,ke,l,W);break e}Xe&&Xe(n,N,V),n==="focusout"&&(Xe=N._wrapperState)&&Xe.controlled&&N.type==="number"&&og(N,"number",N.value)}switch(Xe=V?ec(V):window,n){case"focusin":(Q0(Xe)||Xe.contentEditable==="true")&&(Yl=Xe,_g=V,td=null);break;case"focusout":td=_g=Yl=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,a1(j,l,W);break;case"selectionchange":if(RA)break;case"keydown":case"keyup":a1(j,l,W)}var Qe;if(py)e:{switch(n){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Jl?yx(n,l)&&(pe="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(pe="onCompositionStart");pe&&(gx&&l.locale!=="ko"&&(Jl||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Jl&&(Qe=mx()):(Fo=W,uy="value"in Fo?Fo.value:Fo.textContent,Jl=!0)),Xe=xp(V,pe),0<Xe.length&&(pe=new X0(pe,n,null,l,W),j.push({event:pe,listeners:Xe}),Qe?pe.data=Qe:(Qe=_x(l),Qe!==null&&(pe.data=Qe)))),(Qe=bA?wA(n,l):CA(n,l))&&(V=xp(V,"onBeforeInput"),0<V.length&&(W=new X0("onBeforeInput","beforeinput",null,l,W),j.push({event:W,listeners:V}),W.data=Qe))}Px(j,a)})}function md(n,a,l){return{instance:n,listener:a,currentTarget:l}}function xp(n,a){for(var l=a+"Capture",p=[];n!==null;){var _=n,b=_.stateNode;_.tag===5&&b!==null&&(_=b,b=ld(n,l),b!=null&&p.unshift(md(n,b,_)),b=ld(n,a),b!=null&&p.push(md(n,b,_))),n=n.return}return p}function $l(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function s1(n,a,l,p,_){for(var b=a._reactName,v=[];l!==null&&l!==p;){var u=l,z=u.alternate,V=u.stateNode;if(z!==null&&z===p)break;u.tag===5&&V!==null&&(u=V,_?(z=ld(l,b),z!=null&&v.unshift(md(l,z,u))):_||(z=ld(l,b),z!=null&&v.push(md(l,z,u)))),l=l.return}v.length!==0&&n.push({event:a,listeners:v})}var BA=/\r\n?/g,FA=/\u0000|\uFFFD/g;function l1(n){return(typeof n=="string"?n:""+n).replace(BA,`
`).replace(FA,"")}function Zh(n,a,l){if(a=l1(a),l1(n)!==a&&l)throw Error(qe(425))}function bp(){}var xg=null,bg=null;function wg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cg=typeof setTimeout=="function"?setTimeout:void 0,NA=typeof clearTimeout=="function"?clearTimeout:void 0,c1=typeof Promise=="function"?Promise:void 0,jA=typeof queueMicrotask=="function"?queueMicrotask:typeof c1<"u"?function(n){return c1.resolve(null).then(n).catch(VA)}:Cg;function VA(n){setTimeout(function(){throw n})}function Bm(n,a){var l=a,p=0;do{var _=l.nextSibling;if(n.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(p===0){n.removeChild(_),dd(a);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=_}while(l);dd(a)}function qo(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return n}function u1(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return n;a--}else l==="/$"&&a++}n=n.previousSibling}return null}var Ac=Math.random().toString(36).slice(2),Pr="__reactFiber$"+Ac,gd="__reactProps$"+Ac,ro="__reactContainer$"+Ac,Ag="__reactEvents$"+Ac,UA="__reactListeners$"+Ac,qA="__reactHandles$"+Ac;function Bs(n){var a=n[Pr];if(a)return a;for(var l=n.parentNode;l;){if(a=l[ro]||l[Pr]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(n=u1(n);n!==null;){if(l=n[Pr])return l;n=u1(n)}return a}n=l,l=n.parentNode}return null}function Id(n){return n=n[Pr]||n[ro],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ec(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(qe(33))}function Zp(n){return n[gd]||null}var Sg=[],tc=-1;function Jo(n){return{current:n}}function Cn(n){0>tc||(n.current=Sg[tc],Sg[tc]=null,tc--)}function gn(n,a){tc++,Sg[tc]=n.current,n.current=a}var Xo={},ki=Jo(Xo),ra=Jo(!1),Gs=Xo;function mc(n,a){var l=n.type.contextTypes;if(!l)return Xo;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var _={},b;for(b in l)_[b]=a[b];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=_),_}function oa(n){return n=n.childContextTypes,n!=null}function wp(){Cn(ra),Cn(ki)}function d1(n,a,l){if(ki.current!==Xo)throw Error(qe(168));gn(ki,a),gn(ra,l)}function zx(n,a,l){var p=n.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var _ in p)if(!(_ in a))throw Error(qe(108,TC(n)||"Unknown",_));return kn({},l,p)}function Cp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xo,Gs=ki.current,gn(ki,n),gn(ra,ra.current),!0}function h1(n,a,l){var p=n.stateNode;if(!p)throw Error(qe(169));l?(n=zx(n,a,Gs),p.__reactInternalMemoizedMergedChildContext=n,Cn(ra),Cn(ki),gn(ki,n)):Cn(ra),gn(ra,l)}var Jr=null,Wp=!1,Fm=!1;function Rx(n){Jr===null?Jr=[n]:Jr.push(n)}function GA(n){Wp=!0,Rx(n)}function Yo(){if(!Fm&&Jr!==null){Fm=!0;var n=0,a=an;try{var l=Jr;for(an=1;n<l.length;n++){var p=l[n];do p=p(!0);while(p!==null)}Jr=null,Wp=!1}catch(_){throw Jr!==null&&(Jr=Jr.slice(n+1)),ax(oy,Yo),_}finally{an=a,Fm=!1}}return null}var nc=[],ic=0,Ap=null,Sp=0,qa=[],Ga=0,Hs=null,Qr=1,eo="";function ks(n,a){nc[ic++]=Sp,nc[ic++]=Ap,Ap=n,Sp=a}function kx(n,a,l){qa[Ga++]=Qr,qa[Ga++]=eo,qa[Ga++]=Hs,Hs=n;var p=Qr;n=eo;var _=32-cr(p)-1;p&=~(1<<_),l+=1;var b=32-cr(a)+_;if(30<b){var v=_-_%5;b=(p&(1<<v)-1).toString(32),p>>=v,_-=v,Qr=1<<32-cr(a)+_|l<<_|p,eo=b+n}else Qr=1<<b|l<<_|p,eo=n}function my(n){n.return!==null&&(ks(n,1),kx(n,1,0))}function gy(n){for(;n===Ap;)Ap=nc[--ic],nc[ic]=null,Sp=nc[--ic],nc[ic]=null;for(;n===Hs;)Hs=qa[--Ga],qa[Ga]=null,eo=qa[--Ga],qa[Ga]=null,Qr=qa[--Ga],qa[Ga]=null}var Pa=null,Ia=null,En=!1,lr=null;function Lx(n,a){var l=Ha(5,null,null,0);l.elementType="DELETED",l.stateNode=a,l.return=n,a=n.deletions,a===null?(n.deletions=[l],n.flags|=16):a.push(l)}function p1(n,a){switch(n.tag){case 5:var l=n.type;return a=a.nodeType!==1||l.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(n.stateNode=a,Pa=n,Ia=qo(a.firstChild),!0):!1;case 6:return a=n.pendingProps===""||a.nodeType!==3?null:a,a!==null?(n.stateNode=a,Pa=n,Ia=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(l=Hs!==null?{id:Qr,overflow:eo}:null,n.memoizedState={dehydrated:a,treeContext:l,retryLane:1073741824},l=Ha(18,null,null,0),l.stateNode=a,l.return=n,n.child=l,Pa=n,Ia=null,!0):!1;default:return!1}}function Eg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Tg(n){if(En){var a=Ia;if(a){var l=a;if(!p1(n,a)){if(Eg(n))throw Error(qe(418));a=qo(l.nextSibling);var p=Pa;a&&p1(n,a)?Lx(p,l):(n.flags=n.flags&-4097|2,En=!1,Pa=n)}}else{if(Eg(n))throw Error(qe(418));n.flags=n.flags&-4097|2,En=!1,Pa=n}}}function f1(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Pa=n}function Wh(n){if(n!==Pa)return!1;if(!En)return f1(n),En=!0,!1;var a;if((a=n.tag!==3)&&!(a=n.tag!==5)&&(a=n.type,a=a!=="head"&&a!=="body"&&!wg(n.type,n.memoizedProps)),a&&(a=Ia)){if(Eg(n))throw Ox(),Error(qe(418));for(;a;)Lx(n,a),a=qo(a.nextSibling)}if(f1(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(qe(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(a===0){Ia=qo(n.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++}n=n.nextSibling}Ia=null}}else Ia=Pa?qo(n.stateNode.nextSibling):null;return!0}function Ox(){for(var n=Ia;n;)n=qo(n.nextSibling)}function gc(){Ia=Pa=null,En=!1}function yy(n){lr===null?lr=[n]:lr.push(n)}var HA=lo.ReactCurrentBatchConfig;function Fu(n,a,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(qe(309));var p=l.stateNode}if(!p)throw Error(qe(147,n));var _=p,b=""+n;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(v){var u=_.refs;v===null?delete u[b]:u[b]=v},a._stringRef=b,a)}if(typeof n!="string")throw Error(qe(284));if(!l._owner)throw Error(qe(290,n))}return n}function Xh(n,a){throw n=Object.prototype.toString.call(a),Error(qe(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n))}function m1(n){var a=n._init;return a(n._payload)}function Bx(n){function a(re,ie){if(n){var ce=re.deletions;ce===null?(re.deletions=[ie],re.flags|=16):ce.push(ie)}}function l(re,ie){if(!n)return null;for(;ie!==null;)a(re,ie),ie=ie.sibling;return null}function p(re,ie){for(re=new Map;ie!==null;)ie.key!==null?re.set(ie.key,ie):re.set(ie.index,ie),ie=ie.sibling;return re}function _(re,ie){return re=Zo(re,ie),re.index=0,re.sibling=null,re}function b(re,ie,ce){return re.index=ce,n?(ce=re.alternate,ce!==null?(ce=ce.index,ce<ie?(re.flags|=2,ie):ce):(re.flags|=2,ie)):(re.flags|=1048576,ie)}function v(re){return n&&re.alternate===null&&(re.flags|=2),re}function u(re,ie,ce,Ee){return ie===null||ie.tag!==6?(ie=Hm(ce,re.mode,Ee),ie.return=re,ie):(ie=_(ie,ce),ie.return=re,ie)}function z(re,ie,ce,Ee){var ke=ce.type;return ke===Kl?W(re,ie,ce.props.children,Ee,ce.key):ie!==null&&(ie.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ko&&m1(ke)===ie.type)?(Ee=_(ie,ce.props),Ee.ref=Fu(re,ie,ce),Ee.return=re,Ee):(Ee=dp(ce.type,ce.key,ce.props,null,re.mode,Ee),Ee.ref=Fu(re,ie,ce),Ee.return=re,Ee)}function V(re,ie,ce,Ee){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ce.containerInfo||ie.stateNode.implementation!==ce.implementation?(ie=$m(ce,re.mode,Ee),ie.return=re,ie):(ie=_(ie,ce.children||[]),ie.return=re,ie)}function W(re,ie,ce,Ee,ke){return ie===null||ie.tag!==7?(ie=qs(ce,re.mode,Ee,ke),ie.return=re,ie):(ie=_(ie,ce),ie.return=re,ie)}function j(re,ie,ce){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Hm(""+ie,re.mode,ce),ie.return=re,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Fh:return ce=dp(ie.type,ie.key,ie.props,null,re.mode,ce),ce.ref=Fu(re,null,ie),ce.return=re,ce;case Xl:return ie=$m(ie,re.mode,ce),ie.return=re,ie;case ko:var Ee=ie._init;return j(re,Ee(ie._payload),ce)}if(Zu(ie)||Ru(ie))return ie=qs(ie,re.mode,ce,null),ie.return=re,ie;Xh(re,ie)}return null}function N(re,ie,ce,Ee){var ke=ie!==null?ie.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ke!==null?null:u(re,ie,""+ce,Ee);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Fh:return ce.key===ke?z(re,ie,ce,Ee):null;case Xl:return ce.key===ke?V(re,ie,ce,Ee):null;case ko:return ke=ce._init,N(re,ie,ke(ce._payload),Ee)}if(Zu(ce)||Ru(ce))return ke!==null?null:W(re,ie,ce,Ee,null);Xh(re,ce)}return null}function Te(re,ie,ce,Ee,ke){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return re=re.get(ce)||null,u(ie,re,""+Ee,ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case Fh:return re=re.get(Ee.key===null?ce:Ee.key)||null,z(ie,re,Ee,ke);case Xl:return re=re.get(Ee.key===null?ce:Ee.key)||null,V(ie,re,Ee,ke);case ko:var Xe=Ee._init;return Te(re,ie,ce,Xe(Ee._payload),ke)}if(Zu(Ee)||Ru(Ee))return re=re.get(ce)||null,W(ie,re,Ee,ke,null);Xh(ie,Ee)}return null}function Ce(re,ie,ce,Ee){for(var ke=null,Xe=null,Qe=ie,pe=ie=0,pt=null;Qe!==null&&pe<ce.length;pe++){Qe.index>pe?(pt=Qe,Qe=null):pt=Qe.sibling;var ct=N(re,Qe,ce[pe],Ee);if(ct===null){Qe===null&&(Qe=pt);break}n&&Qe&&ct.alternate===null&&a(re,Qe),ie=b(ct,ie,pe),Xe===null?ke=ct:Xe.sibling=ct,Xe=ct,Qe=pt}if(pe===ce.length)return l(re,Qe),En&&ks(re,pe),ke;if(Qe===null){for(;pe<ce.length;pe++)Qe=j(re,ce[pe],Ee),Qe!==null&&(ie=b(Qe,ie,pe),Xe===null?ke=Qe:Xe.sibling=Qe,Xe=Qe);return En&&ks(re,pe),ke}for(Qe=p(re,Qe);pe<ce.length;pe++)pt=Te(Qe,re,pe,ce[pe],Ee),pt!==null&&(n&&pt.alternate!==null&&Qe.delete(pt.key===null?pe:pt.key),ie=b(pt,ie,pe),Xe===null?ke=pt:Xe.sibling=pt,Xe=pt);return n&&Qe.forEach(function(ot){return a(re,ot)}),En&&ks(re,pe),ke}function we(re,ie,ce,Ee){var ke=Ru(ce);if(typeof ke!="function")throw Error(qe(150));if(ce=ke.call(ce),ce==null)throw Error(qe(151));for(var Xe=ke=null,Qe=ie,pe=ie=0,pt=null,ct=ce.next();Qe!==null&&!ct.done;pe++,ct=ce.next()){Qe.index>pe?(pt=Qe,Qe=null):pt=Qe.sibling;var ot=N(re,Qe,ct.value,Ee);if(ot===null){Qe===null&&(Qe=pt);break}n&&Qe&&ot.alternate===null&&a(re,Qe),ie=b(ot,ie,pe),Xe===null?ke=ot:Xe.sibling=ot,Xe=ot,Qe=pt}if(ct.done)return l(re,Qe),En&&ks(re,pe),ke;if(Qe===null){for(;!ct.done;pe++,ct=ce.next())ct=j(re,ct.value,Ee),ct!==null&&(ie=b(ct,ie,pe),Xe===null?ke=ct:Xe.sibling=ct,Xe=ct);return En&&ks(re,pe),ke}for(Qe=p(re,Qe);!ct.done;pe++,ct=ce.next())ct=Te(Qe,re,pe,ct.value,Ee),ct!==null&&(n&&ct.alternate!==null&&Qe.delete(ct.key===null?pe:ct.key),ie=b(ct,ie,pe),Xe===null?ke=ct:Xe.sibling=ct,Xe=ct);return n&&Qe.forEach(function(Xt){return a(re,Xt)}),En&&ks(re,pe),ke}function Ge(re,ie,ce,Ee){if(typeof ce=="object"&&ce!==null&&ce.type===Kl&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Fh:e:{for(var ke=ce.key,Xe=ie;Xe!==null;){if(Xe.key===ke){if(ke=ce.type,ke===Kl){if(Xe.tag===7){l(re,Xe.sibling),ie=_(Xe,ce.props.children),ie.return=re,re=ie;break e}}else if(Xe.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ko&&m1(ke)===Xe.type){l(re,Xe.sibling),ie=_(Xe,ce.props),ie.ref=Fu(re,Xe,ce),ie.return=re,re=ie;break e}l(re,Xe);break}else a(re,Xe);Xe=Xe.sibling}ce.type===Kl?(ie=qs(ce.props.children,re.mode,Ee,ce.key),ie.return=re,re=ie):(Ee=dp(ce.type,ce.key,ce.props,null,re.mode,Ee),Ee.ref=Fu(re,ie,ce),Ee.return=re,re=Ee)}return v(re);case Xl:e:{for(Xe=ce.key;ie!==null;){if(ie.key===Xe)if(ie.tag===4&&ie.stateNode.containerInfo===ce.containerInfo&&ie.stateNode.implementation===ce.implementation){l(re,ie.sibling),ie=_(ie,ce.children||[]),ie.return=re,re=ie;break e}else{l(re,ie);break}else a(re,ie);ie=ie.sibling}ie=$m(ce,re.mode,Ee),ie.return=re,re=ie}return v(re);case ko:return Xe=ce._init,Ge(re,ie,Xe(ce._payload),Ee)}if(Zu(ce))return Ce(re,ie,ce,Ee);if(Ru(ce))return we(re,ie,ce,Ee);Xh(re,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ie!==null&&ie.tag===6?(l(re,ie.sibling),ie=_(ie,ce),ie.return=re,re=ie):(l(re,ie),ie=Hm(ce,re.mode,Ee),ie.return=re,re=ie),v(re)):l(re,ie)}return Ge}var yc=Bx(!0),Fx=Bx(!1),Ep=Jo(null),Tp=null,ac=null,_y=null;function vy(){_y=ac=Tp=null}function xy(n){var a=Ep.current;Cn(Ep),n._currentValue=a}function Mg(n,a,l){for(;n!==null;){var p=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),n===l)break;n=n.return}}function hc(n,a){Tp=n,_y=ac=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&a&&(aa=!0),n.firstContext=null)}function Za(n){var a=n._currentValue;if(_y!==n)if(n={context:n,memoizedValue:a,next:null},ac===null){if(Tp===null)throw Error(qe(308));ac=n,Tp.dependencies={lanes:0,firstContext:n}}else ac=ac.next=n;return a}var Fs=null;function by(n){Fs===null?Fs=[n]:Fs.push(n)}function Nx(n,a,l,p){var _=a.interleaved;return _===null?(l.next=l,by(a)):(l.next=_.next,_.next=l),a.interleaved=l,oo(n,p)}function oo(n,a){n.lanes|=a;var l=n.alternate;for(l!==null&&(l.lanes|=a),l=n,n=n.return;n!==null;)n.childLanes|=a,l=n.alternate,l!==null&&(l.childLanes|=a),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Lo=!1;function wy(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jx(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function no(n,a){return{eventTime:n,lane:a,tag:0,payload:null,callback:null,next:null}}function Go(n,a,l){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,Wt&2){var _=p.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),p.pending=a,oo(n,l)}return _=p.interleaved,_===null?(a.next=a,by(p)):(a.next=_.next,_.next=a),p.interleaved=a,oo(n,l)}function rp(n,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194240)!==0)){var p=a.lanes;p&=n.pendingLanes,l|=p,a.lanes=l,sy(n,l)}}function g1(n,a){var l=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var _=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};b===null?_=b=v:b=b.next=v,l=l.next}while(l!==null);b===null?_=b=a:b=b.next=a}else _=b=a;l={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:p.shared,effects:p.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=a:n.next=a,l.lastBaseUpdate=a}function Mp(n,a,l,p){var _=n.updateQueue;Lo=!1;var b=_.firstBaseUpdate,v=_.lastBaseUpdate,u=_.shared.pending;if(u!==null){_.shared.pending=null;var z=u,V=z.next;z.next=null,v===null?b=V:v.next=V,v=z;var W=n.alternate;W!==null&&(W=W.updateQueue,u=W.lastBaseUpdate,u!==v&&(u===null?W.firstBaseUpdate=V:u.next=V,W.lastBaseUpdate=z))}if(b!==null){var j=_.baseState;v=0,W=V=z=null,u=b;do{var N=u.lane,Te=u.eventTime;if((p&N)===N){W!==null&&(W=W.next={eventTime:Te,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var Ce=n,we=u;switch(N=a,Te=l,we.tag){case 1:if(Ce=we.payload,typeof Ce=="function"){j=Ce.call(Te,j,N);break e}j=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=we.payload,N=typeof Ce=="function"?Ce.call(Te,j,N):Ce,N==null)break e;j=kn({},j,N);break e;case 2:Lo=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,N=_.effects,N===null?_.effects=[u]:N.push(u))}else Te={eventTime:Te,lane:N,tag:u.tag,payload:u.payload,callback:u.callback,next:null},W===null?(V=W=Te,z=j):W=W.next=Te,v|=N;if(u=u.next,u===null){if(u=_.shared.pending,u===null)break;N=u,u=N.next,N.next=null,_.lastBaseUpdate=N,_.shared.pending=null}}while(!0);if(W===null&&(z=j),_.baseState=z,_.firstBaseUpdate=V,_.lastBaseUpdate=W,a=_.shared.interleaved,a!==null){_=a;do v|=_.lane,_=_.next;while(_!==a)}else b===null&&(_.shared.lanes=0);Zs|=v,n.lanes=v,n.memoizedState=j}}function y1(n,a,l){if(n=a.effects,a.effects=null,n!==null)for(a=0;a<n.length;a++){var p=n[a],_=p.callback;if(_!==null){if(p.callback=null,p=l,typeof _!="function")throw Error(qe(191,_));_.call(p)}}}var Pd={},zr=Jo(Pd),yd=Jo(Pd),_d=Jo(Pd);function Ns(n){if(n===Pd)throw Error(qe(174));return n}function Cy(n,a){switch(gn(_d,a),gn(yd,n),gn(zr,Pd),n=a.nodeType,n){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:lg(null,"");break;default:n=n===8?a.parentNode:a,a=n.namespaceURI||null,n=n.tagName,a=lg(a,n)}Cn(zr),gn(zr,a)}function _c(){Cn(zr),Cn(yd),Cn(_d)}function Vx(n){Ns(_d.current);var a=Ns(zr.current),l=lg(a,n.type);a!==l&&(gn(yd,n),gn(zr,l))}function Ay(n){yd.current===n&&(Cn(zr),Cn(yd))}var zn=Jo(0);function Ip(n){for(var a=n;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Nm=[];function Sy(){for(var n=0;n<Nm.length;n++)Nm[n]._workInProgressVersionPrimary=null;Nm.length=0}var op=lo.ReactCurrentDispatcher,jm=lo.ReactCurrentBatchConfig,$s=0,Rn=null,ti=null,di=null,Pp=!1,nd=!1,vd=0,$A=0;function Di(){throw Error(qe(321))}function Ey(n,a){if(a===null)return!1;for(var l=0;l<a.length&&l<n.length;l++)if(!dr(n[l],a[l]))return!1;return!0}function Ty(n,a,l,p,_,b){if($s=b,Rn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,op.current=n===null||n.memoizedState===null?KA:JA,n=l(p,_),nd){b=0;do{if(nd=!1,vd=0,25<=b)throw Error(qe(301));b+=1,di=ti=null,a.updateQueue=null,op.current=YA,n=l(p,_)}while(nd)}if(op.current=Dp,a=ti!==null&&ti.next!==null,$s=0,di=ti=Rn=null,Pp=!1,a)throw Error(qe(300));return n}function My(){var n=vd!==0;return vd=0,n}function Ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Rn.memoizedState=di=n:di=di.next=n,di}function Wa(){if(ti===null){var n=Rn.alternate;n=n!==null?n.memoizedState:null}else n=ti.next;var a=di===null?Rn.memoizedState:di.next;if(a!==null)di=a,ti=n;else{if(n===null)throw Error(qe(310));ti=n,n={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},di===null?Rn.memoizedState=di=n:di=di.next=n}return di}function xd(n,a){return typeof a=="function"?a(n):a}function Vm(n){var a=Wa(),l=a.queue;if(l===null)throw Error(qe(311));l.lastRenderedReducer=n;var p=ti,_=p.baseQueue,b=l.pending;if(b!==null){if(_!==null){var v=_.next;_.next=b.next,b.next=v}p.baseQueue=_=b,l.pending=null}if(_!==null){b=_.next,p=p.baseState;var u=v=null,z=null,V=b;do{var W=V.lane;if(($s&W)===W)z!==null&&(z=z.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),p=V.hasEagerState?V.eagerState:n(p,V.action);else{var j={lane:W,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};z===null?(u=z=j,v=p):z=z.next=j,Rn.lanes|=W,Zs|=W}V=V.next}while(V!==null&&V!==b);z===null?v=p:z.next=u,dr(p,a.memoizedState)||(aa=!0),a.memoizedState=p,a.baseState=v,a.baseQueue=z,l.lastRenderedState=p}if(n=l.interleaved,n!==null){_=n;do b=_.lane,Rn.lanes|=b,Zs|=b,_=_.next;while(_!==n)}else _===null&&(l.lanes=0);return[a.memoizedState,l.dispatch]}function Um(n){var a=Wa(),l=a.queue;if(l===null)throw Error(qe(311));l.lastRenderedReducer=n;var p=l.dispatch,_=l.pending,b=a.memoizedState;if(_!==null){l.pending=null;var v=_=_.next;do b=n(b,v.action),v=v.next;while(v!==_);dr(b,a.memoizedState)||(aa=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),l.lastRenderedState=b}return[b,p]}function Ux(){}function qx(n,a){var l=Rn,p=Wa(),_=a(),b=!dr(p.memoizedState,_);if(b&&(p.memoizedState=_,aa=!0),p=p.queue,Iy($x.bind(null,l,p,n),[n]),p.getSnapshot!==a||b||di!==null&&di.memoizedState.tag&1){if(l.flags|=2048,bd(9,Hx.bind(null,l,p,_,a),void 0,null),hi===null)throw Error(qe(349));$s&30||Gx(l,a,_)}return _}function Gx(n,a,l){n.flags|=16384,n={getSnapshot:a,value:l},a=Rn.updateQueue,a===null?(a={lastEffect:null,stores:null},Rn.updateQueue=a,a.stores=[n]):(l=a.stores,l===null?a.stores=[n]:l.push(n))}function Hx(n,a,l,p){a.value=l,a.getSnapshot=p,Zx(a)&&Wx(n)}function $x(n,a,l){return l(function(){Zx(a)&&Wx(n)})}function Zx(n){var a=n.getSnapshot;n=n.value;try{var l=a();return!dr(n,l)}catch{return!0}}function Wx(n){var a=oo(n,1);a!==null&&ur(a,n,1,-1)}function _1(n){var a=Ir();return typeof n=="function"&&(n=n()),a.memoizedState=a.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:n},a.queue=n,n=n.dispatch=XA.bind(null,Rn,n),[a.memoizedState,n]}function bd(n,a,l,p){return n={tag:n,create:a,destroy:l,deps:p,next:null},a=Rn.updateQueue,a===null?(a={lastEffect:null,stores:null},Rn.updateQueue=a,a.lastEffect=n.next=n):(l=a.lastEffect,l===null?a.lastEffect=n.next=n:(p=l.next,l.next=n,n.next=p,a.lastEffect=n)),n}function Xx(){return Wa().memoizedState}function sp(n,a,l,p){var _=Ir();Rn.flags|=n,_.memoizedState=bd(1|a,l,void 0,p===void 0?null:p)}function Xp(n,a,l,p){var _=Wa();p=p===void 0?null:p;var b=void 0;if(ti!==null){var v=ti.memoizedState;if(b=v.destroy,p!==null&&Ey(p,v.deps)){_.memoizedState=bd(a,l,b,p);return}}Rn.flags|=n,_.memoizedState=bd(1|a,l,b,p)}function v1(n,a){return sp(8390656,8,n,a)}function Iy(n,a){return Xp(2048,8,n,a)}function Kx(n,a){return Xp(4,2,n,a)}function Jx(n,a){return Xp(4,4,n,a)}function Yx(n,a){if(typeof a=="function")return n=n(),a(n),function(){a(null)};if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Qx(n,a,l){return l=l!=null?l.concat([n]):null,Xp(4,4,Yx.bind(null,a,n),l)}function Py(){}function eb(n,a){var l=Wa();a=a===void 0?null:a;var p=l.memoizedState;return p!==null&&a!==null&&Ey(a,p[1])?p[0]:(l.memoizedState=[n,a],n)}function tb(n,a){var l=Wa();a=a===void 0?null:a;var p=l.memoizedState;return p!==null&&a!==null&&Ey(a,p[1])?p[0]:(n=n(),l.memoizedState=[n,a],n)}function nb(n,a,l){return $s&21?(dr(l,a)||(l=sx(),Rn.lanes|=l,Zs|=l,n.baseState=!0),a):(n.baseState&&(n.baseState=!1,aa=!0),n.memoizedState=l)}function ZA(n,a){var l=an;an=l!==0&&4>l?l:4,n(!0);var p=jm.transition;jm.transition={};try{n(!1),a()}finally{an=l,jm.transition=p}}function ib(){return Wa().memoizedState}function WA(n,a,l){var p=$o(n);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},ab(n))rb(a,l);else if(l=Nx(n,a,l,p),l!==null){var _=Wi();ur(l,n,p,_),ob(l,a,p)}}function XA(n,a,l){var p=$o(n),_={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(ab(n))rb(a,_);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var v=a.lastRenderedState,u=b(v,l);if(_.hasEagerState=!0,_.eagerState=u,dr(u,v)){var z=a.interleaved;z===null?(_.next=_,by(a)):(_.next=z.next,z.next=_),a.interleaved=_;return}}catch{}finally{}l=Nx(n,a,_,p),l!==null&&(_=Wi(),ur(l,n,p,_),ob(l,a,p))}}function ab(n){var a=n.alternate;return n===Rn||a!==null&&a===Rn}function rb(n,a){nd=Pp=!0;var l=n.pending;l===null?a.next=a:(a.next=l.next,l.next=a),n.pending=a}function ob(n,a,l){if(l&4194240){var p=a.lanes;p&=n.pendingLanes,l|=p,a.lanes=l,sy(n,l)}}var Dp={readContext:Za,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},KA={readContext:Za,useCallback:function(n,a){return Ir().memoizedState=[n,a===void 0?null:a],n},useContext:Za,useEffect:v1,useImperativeHandle:function(n,a,l){return l=l!=null?l.concat([n]):null,sp(4194308,4,Yx.bind(null,a,n),l)},useLayoutEffect:function(n,a){return sp(4194308,4,n,a)},useInsertionEffect:function(n,a){return sp(4,2,n,a)},useMemo:function(n,a){var l=Ir();return a=a===void 0?null:a,n=n(),l.memoizedState=[n,a],n},useReducer:function(n,a,l){var p=Ir();return a=l!==void 0?l(a):a,p.memoizedState=p.baseState=a,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a},p.queue=n,n=n.dispatch=WA.bind(null,Rn,n),[p.memoizedState,n]},useRef:function(n){var a=Ir();return n={current:n},a.memoizedState=n},useState:_1,useDebugValue:Py,useDeferredValue:function(n){return Ir().memoizedState=n},useTransition:function(){var n=_1(!1),a=n[0];return n=ZA.bind(null,n[1]),Ir().memoizedState=n,[a,n]},useMutableSource:function(){},useSyncExternalStore:function(n,a,l){var p=Rn,_=Ir();if(En){if(l===void 0)throw Error(qe(407));l=l()}else{if(l=a(),hi===null)throw Error(qe(349));$s&30||Gx(p,a,l)}_.memoizedState=l;var b={value:l,getSnapshot:a};return _.queue=b,v1($x.bind(null,p,b,n),[n]),p.flags|=2048,bd(9,Hx.bind(null,p,b,l,a),void 0,null),l},useId:function(){var n=Ir(),a=hi.identifierPrefix;if(En){var l=eo,p=Qr;l=(p&~(1<<32-cr(p)-1)).toString(32)+l,a=":"+a+"R"+l,l=vd++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=$A++,a=":"+a+"r"+l.toString(32)+":";return n.memoizedState=a},unstable_isNewReconciler:!1},JA={readContext:Za,useCallback:eb,useContext:Za,useEffect:Iy,useImperativeHandle:Qx,useInsertionEffect:Kx,useLayoutEffect:Jx,useMemo:tb,useReducer:Vm,useRef:Xx,useState:function(){return Vm(xd)},useDebugValue:Py,useDeferredValue:function(n){var a=Wa();return nb(a,ti.memoizedState,n)},useTransition:function(){var n=Vm(xd)[0],a=Wa().memoizedState;return[n,a]},useMutableSource:Ux,useSyncExternalStore:qx,useId:ib,unstable_isNewReconciler:!1},YA={readContext:Za,useCallback:eb,useContext:Za,useEffect:Iy,useImperativeHandle:Qx,useInsertionEffect:Kx,useLayoutEffect:Jx,useMemo:tb,useReducer:Um,useRef:Xx,useState:function(){return Um(xd)},useDebugValue:Py,useDeferredValue:function(n){var a=Wa();return ti===null?a.memoizedState=n:nb(a,ti.memoizedState,n)},useTransition:function(){var n=Um(xd)[0],a=Wa().memoizedState;return[n,a]},useMutableSource:Ux,useSyncExternalStore:qx,useId:ib,unstable_isNewReconciler:!1};function rr(n,a){if(n&&n.defaultProps){a=kn({},a),n=n.defaultProps;for(var l in n)a[l]===void 0&&(a[l]=n[l]);return a}return a}function Ig(n,a,l,p){a=n.memoizedState,l=l(p,a),l=l==null?a:kn({},a,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Kp={isMounted:function(n){return(n=n._reactInternals)?Ys(n)===n:!1},enqueueSetState:function(n,a,l){n=n._reactInternals;var p=Wi(),_=$o(n),b=no(p,_);b.payload=a,l!=null&&(b.callback=l),a=Go(n,b,_),a!==null&&(ur(a,n,_,p),rp(a,n,_))},enqueueReplaceState:function(n,a,l){n=n._reactInternals;var p=Wi(),_=$o(n),b=no(p,_);b.tag=1,b.payload=a,l!=null&&(b.callback=l),a=Go(n,b,_),a!==null&&(ur(a,n,_,p),rp(a,n,_))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var l=Wi(),p=$o(n),_=no(l,p);_.tag=2,a!=null&&(_.callback=a),a=Go(n,_,p),a!==null&&(ur(a,n,p,l),rp(a,n,p))}};function x1(n,a,l,p,_,b,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,b,v):a.prototype&&a.prototype.isPureReactComponent?!pd(l,p)||!pd(_,b):!0}function sb(n,a,l){var p=!1,_=Xo,b=a.contextType;return typeof b=="object"&&b!==null?b=Za(b):(_=oa(a)?Gs:ki.current,p=a.contextTypes,b=(p=p!=null)?mc(n,_):Xo),a=new a(l,b),n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Kp,n.stateNode=a,a._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=_,n.__reactInternalMemoizedMaskedChildContext=b),a}function b1(n,a,l,p){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,p),a.state!==n&&Kp.enqueueReplaceState(a,a.state,null)}function Pg(n,a,l,p){var _=n.stateNode;_.props=l,_.state=n.memoizedState,_.refs={},wy(n);var b=a.contextType;typeof b=="object"&&b!==null?_.context=Za(b):(b=oa(a)?Gs:ki.current,_.context=mc(n,b)),_.state=n.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Ig(n,a,b,l),_.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(a=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),a!==_.state&&Kp.enqueueReplaceState(_,_.state,null),Mp(n,l,_,p),_.state=n.memoizedState),typeof _.componentDidMount=="function"&&(n.flags|=4194308)}function vc(n,a){try{var l="",p=a;do l+=EC(p),p=p.return;while(p);var _=l}catch(b){_=`
Error generating stack: `+b.message+`
`+b.stack}return{value:n,source:a,stack:_,digest:null}}function qm(n,a,l){return{value:n,source:null,stack:l??null,digest:a??null}}function Dg(n,a){try{console.error(a.value)}catch(l){setTimeout(function(){throw l})}}var QA=typeof WeakMap=="function"?WeakMap:Map;function lb(n,a,l){l=no(-1,l),l.tag=3,l.payload={element:null};var p=a.value;return l.callback=function(){Rp||(Rp=!0,Vg=p),Dg(n,a)},l}function cb(n,a,l){l=no(-1,l),l.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var _=a.value;l.payload=function(){return p(_)},l.callback=function(){Dg(n,a)}}var b=n.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(l.callback=function(){Dg(n,a),typeof p!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var v=a.stack;this.componentDidCatch(a.value,{componentStack:v!==null?v:""})}),l}function w1(n,a,l){var p=n.pingCache;if(p===null){p=n.pingCache=new QA;var _=new Set;p.set(a,_)}else _=p.get(a),_===void 0&&(_=new Set,p.set(a,_));_.has(l)||(_.add(l),n=pS.bind(null,n,a,l),a.then(n,n))}function C1(n){do{var a;if((a=n.tag===13)&&(a=n.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return n;n=n.return}while(n!==null);return null}function A1(n,a,l,p,_){return n.mode&1?(n.flags|=65536,n.lanes=_,n):(n===a?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(a=no(-1,1),a.tag=2,Go(l,a,1))),l.lanes|=1),n)}var eS=lo.ReactCurrentOwner,aa=!1;function Zi(n,a,l,p){a.child=n===null?Fx(a,null,l,p):yc(a,n.child,l,p)}function S1(n,a,l,p,_){l=l.render;var b=a.ref;return hc(a,_),p=Ty(n,a,l,p,b,_),l=My(),n!==null&&!aa?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~_,so(n,a,_)):(En&&l&&my(a),a.flags|=1,Zi(n,a,p,_),a.child)}function E1(n,a,l,p,_){if(n===null){var b=l.type;return typeof b=="function"&&!Fy(b)&&b.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(a.tag=15,a.type=b,ub(n,a,b,p,_)):(n=dp(l.type,null,p,a,a.mode,_),n.ref=a.ref,n.return=a,a.child=n)}if(b=n.child,!(n.lanes&_)){var v=b.memoizedProps;if(l=l.compare,l=l!==null?l:pd,l(v,p)&&n.ref===a.ref)return so(n,a,_)}return a.flags|=1,n=Zo(b,p),n.ref=a.ref,n.return=a,a.child=n}function ub(n,a,l,p,_){if(n!==null){var b=n.memoizedProps;if(pd(b,p)&&n.ref===a.ref)if(aa=!1,a.pendingProps=p=b,(n.lanes&_)!==0)n.flags&131072&&(aa=!0);else return a.lanes=n.lanes,so(n,a,_)}return zg(n,a,l,p,_)}function db(n,a,l){var p=a.pendingProps,_=p.children,b=n!==null?n.memoizedState:null;if(p.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},gn(oc,Ta),Ta|=l;else{if(!(l&1073741824))return n=b!==null?b.baseLanes|l:l,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:n,cachePool:null,transitions:null},a.updateQueue=null,gn(oc,Ta),Ta|=n,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:l,gn(oc,Ta),Ta|=p}else b!==null?(p=b.baseLanes|l,a.memoizedState=null):p=l,gn(oc,Ta),Ta|=p;return Zi(n,a,_,l),a.child}function hb(n,a){var l=a.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(a.flags|=512,a.flags|=2097152)}function zg(n,a,l,p,_){var b=oa(l)?Gs:ki.current;return b=mc(a,b),hc(a,_),l=Ty(n,a,l,p,b,_),p=My(),n!==null&&!aa?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~_,so(n,a,_)):(En&&p&&my(a),a.flags|=1,Zi(n,a,l,_),a.child)}function T1(n,a,l,p,_){if(oa(l)){var b=!0;Cp(a)}else b=!1;if(hc(a,_),a.stateNode===null)lp(n,a),sb(a,l,p),Pg(a,l,p,_),p=!0;else if(n===null){var v=a.stateNode,u=a.memoizedProps;v.props=u;var z=v.context,V=l.contextType;typeof V=="object"&&V!==null?V=Za(V):(V=oa(l)?Gs:ki.current,V=mc(a,V));var W=l.getDerivedStateFromProps,j=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function";j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(u!==p||z!==V)&&b1(a,v,p,V),Lo=!1;var N=a.memoizedState;v.state=N,Mp(a,p,v,_),z=a.memoizedState,u!==p||N!==z||ra.current||Lo?(typeof W=="function"&&(Ig(a,l,W,p),z=a.memoizedState),(u=Lo||x1(a,l,u,p,N,z,V))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=z),v.props=p,v.state=z,v.context=V,p=u):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{v=a.stateNode,jx(n,a),u=a.memoizedProps,V=a.type===a.elementType?u:rr(a.type,u),v.props=V,j=a.pendingProps,N=v.context,z=l.contextType,typeof z=="object"&&z!==null?z=Za(z):(z=oa(l)?Gs:ki.current,z=mc(a,z));var Te=l.getDerivedStateFromProps;(W=typeof Te=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(u!==j||N!==z)&&b1(a,v,p,z),Lo=!1,N=a.memoizedState,v.state=N,Mp(a,p,v,_);var Ce=a.memoizedState;u!==j||N!==Ce||ra.current||Lo?(typeof Te=="function"&&(Ig(a,l,Te,p),Ce=a.memoizedState),(V=Lo||x1(a,l,V,p,N,Ce,z)||!1)?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(p,Ce,z),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(p,Ce,z)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Ce),v.props=p,v.state=Ce,v.context=z,p=V):(typeof v.componentDidUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&N===n.memoizedState||(a.flags|=1024),p=!1)}return Rg(n,a,l,p,b,_)}function Rg(n,a,l,p,_,b){hb(n,a);var v=(a.flags&128)!==0;if(!p&&!v)return _&&h1(a,l,!1),so(n,a,b);p=a.stateNode,eS.current=a;var u=v&&typeof l.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,n!==null&&v?(a.child=yc(a,n.child,null,b),a.child=yc(a,null,u,b)):Zi(n,a,u,b),a.memoizedState=p.state,_&&h1(a,l,!0),a.child}function pb(n){var a=n.stateNode;a.pendingContext?d1(n,a.pendingContext,a.pendingContext!==a.context):a.context&&d1(n,a.context,!1),Cy(n,a.containerInfo)}function M1(n,a,l,p,_){return gc(),yy(_),a.flags|=256,Zi(n,a,l,p),a.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function Lg(n){return{baseLanes:n,cachePool:null,transitions:null}}function fb(n,a,l){var p=a.pendingProps,_=zn.current,b=!1,v=(a.flags&128)!==0,u;if((u=v)||(u=n!==null&&n.memoizedState===null?!1:(_&2)!==0),u?(b=!0,a.flags&=-129):(n===null||n.memoizedState!==null)&&(_|=1),gn(zn,_&1),n===null)return Tg(a),n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(a.mode&1?n.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(v=p.children,n=p.fallback,b?(p=a.mode,b=a.child,v={mode:"hidden",children:v},!(p&1)&&b!==null?(b.childLanes=0,b.pendingProps=v):b=Qp(v,p,0,null),n=qs(n,p,l,null),b.return=a,n.return=a,b.sibling=n,a.child=b,a.child.memoizedState=Lg(l),a.memoizedState=kg,n):Dy(a,v));if(_=n.memoizedState,_!==null&&(u=_.dehydrated,u!==null))return tS(n,a,v,p,u,_,l);if(b){b=p.fallback,v=a.mode,_=n.child,u=_.sibling;var z={mode:"hidden",children:p.children};return!(v&1)&&a.child!==_?(p=a.child,p.childLanes=0,p.pendingProps=z,a.deletions=null):(p=Zo(_,z),p.subtreeFlags=_.subtreeFlags&14680064),u!==null?b=Zo(u,b):(b=qs(b,v,l,null),b.flags|=2),b.return=a,p.return=a,p.sibling=b,a.child=p,p=b,b=a.child,v=n.child.memoizedState,v=v===null?Lg(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},b.memoizedState=v,b.childLanes=n.childLanes&~l,a.memoizedState=kg,p}return b=n.child,n=b.sibling,p=Zo(b,{mode:"visible",children:p.children}),!(a.mode&1)&&(p.lanes=l),p.return=a,p.sibling=null,n!==null&&(l=a.deletions,l===null?(a.deletions=[n],a.flags|=16):l.push(n)),a.child=p,a.memoizedState=null,p}function Dy(n,a){return a=Qp({mode:"visible",children:a},n.mode,0,null),a.return=n,n.child=a}function Kh(n,a,l,p){return p!==null&&yy(p),yc(a,n.child,null,l),n=Dy(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function tS(n,a,l,p,_,b,v){if(l)return a.flags&256?(a.flags&=-257,p=qm(Error(qe(422))),Kh(n,a,v,p)):a.memoizedState!==null?(a.child=n.child,a.flags|=128,null):(b=p.fallback,_=a.mode,p=Qp({mode:"visible",children:p.children},_,0,null),b=qs(b,_,v,null),b.flags|=2,p.return=a,b.return=a,p.sibling=b,a.child=p,a.mode&1&&yc(a,n.child,null,v),a.child.memoizedState=Lg(v),a.memoizedState=kg,b);if(!(a.mode&1))return Kh(n,a,v,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var u=p.dgst;return p=u,b=Error(qe(419)),p=qm(b,p,void 0),Kh(n,a,v,p)}if(u=(v&n.childLanes)!==0,aa||u){if(p=hi,p!==null){switch(v&-v){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(p.suspendedLanes|v)?0:_,_!==0&&_!==b.retryLane&&(b.retryLane=_,oo(n,_),ur(p,n,_,-1))}return By(),p=qm(Error(qe(421))),Kh(n,a,v,p)}return _.data==="$?"?(a.flags|=128,a.child=n.child,a=fS.bind(null,n),_._reactRetry=a,null):(n=b.treeContext,Ia=qo(_.nextSibling),Pa=a,En=!0,lr=null,n!==null&&(qa[Ga++]=Qr,qa[Ga++]=eo,qa[Ga++]=Hs,Qr=n.id,eo=n.overflow,Hs=a),a=Dy(a,p.children),a.flags|=4096,a)}function I1(n,a,l){n.lanes|=a;var p=n.alternate;p!==null&&(p.lanes|=a),Mg(n.return,a,l)}function Gm(n,a,l,p,_){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:_}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=l,b.tailMode=_)}function mb(n,a,l){var p=a.pendingProps,_=p.revealOrder,b=p.tail;if(Zi(n,a,p.children,l),p=zn.current,p&2)p=p&1|2,a.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&I1(n,l,a);else if(n.tag===19)I1(n,l,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(gn(zn,p),!(a.mode&1))a.memoizedState=null;else switch(_){case"forwards":for(l=a.child,_=null;l!==null;)n=l.alternate,n!==null&&Ip(n)===null&&(_=l),l=l.sibling;l=_,l===null?(_=a.child,a.child=null):(_=l.sibling,l.sibling=null),Gm(a,!1,_,l,b);break;case"backwards":for(l=null,_=a.child,a.child=null;_!==null;){if(n=_.alternate,n!==null&&Ip(n)===null){a.child=_;break}n=_.sibling,_.sibling=l,l=_,_=n}Gm(a,!0,l,null,b);break;case"together":Gm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function lp(n,a){!(a.mode&1)&&n!==null&&(n.alternate=null,a.alternate=null,a.flags|=2)}function so(n,a,l){if(n!==null&&(a.dependencies=n.dependencies),Zs|=a.lanes,!(l&a.childLanes))return null;if(n!==null&&a.child!==n.child)throw Error(qe(153));if(a.child!==null){for(n=a.child,l=Zo(n,n.pendingProps),a.child=l,l.return=a;n.sibling!==null;)n=n.sibling,l=l.sibling=Zo(n,n.pendingProps),l.return=a;l.sibling=null}return a.child}function nS(n,a,l){switch(a.tag){case 3:pb(a),gc();break;case 5:Vx(a);break;case 1:oa(a.type)&&Cp(a);break;case 4:Cy(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,_=a.memoizedProps.value;gn(Ep,p._currentValue),p._currentValue=_;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(gn(zn,zn.current&1),a.flags|=128,null):l&a.child.childLanes?fb(n,a,l):(gn(zn,zn.current&1),n=so(n,a,l),n!==null?n.sibling:null);gn(zn,zn.current&1);break;case 19:if(p=(l&a.childLanes)!==0,n.flags&128){if(p)return mb(n,a,l);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),gn(zn,zn.current),p)break;return null;case 22:case 23:return a.lanes=0,db(n,a,l)}return so(n,a,l)}var gb,Og,yb,_b;gb=function(n,a){for(var l=a.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};Og=function(){};yb=function(n,a,l,p){var _=n.memoizedProps;if(_!==p){n=a.stateNode,Ns(zr.current);var b=null;switch(l){case"input":_=ag(n,_),p=ag(n,p),b=[];break;case"select":_=kn({},_,{value:void 0}),p=kn({},p,{value:void 0}),b=[];break;case"textarea":_=sg(n,_),p=sg(n,p),b=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=bp)}cg(l,p);var v;l=null;for(V in _)if(!p.hasOwnProperty(V)&&_.hasOwnProperty(V)&&_[V]!=null)if(V==="style"){var u=_[V];for(v in u)u.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(od.hasOwnProperty(V)?b||(b=[]):(b=b||[]).push(V,null));for(V in p){var z=p[V];if(u=_!=null?_[V]:void 0,p.hasOwnProperty(V)&&z!==u&&(z!=null||u!=null))if(V==="style")if(u){for(v in u)!u.hasOwnProperty(v)||z&&z.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in z)z.hasOwnProperty(v)&&u[v]!==z[v]&&(l||(l={}),l[v]=z[v])}else l||(b||(b=[]),b.push(V,l)),l=z;else V==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,u=u?u.__html:void 0,z!=null&&u!==z&&(b=b||[]).push(V,z)):V==="children"?typeof z!="string"&&typeof z!="number"||(b=b||[]).push(V,""+z):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(od.hasOwnProperty(V)?(z!=null&&V==="onScroll"&&wn("scroll",n),b||u===z||(b=[])):(b=b||[]).push(V,z))}l&&(b=b||[]).push("style",l);var V=b;(a.updateQueue=V)&&(a.flags|=4)}};_b=function(n,a,l,p){l!==p&&(a.flags|=4)};function Nu(n,a){if(!En)switch(n.tailMode){case"hidden":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function zi(n){var a=n.alternate!==null&&n.alternate.child===n.child,l=0,p=0;if(a)for(var _=n.child;_!==null;)l|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=n,_=_.sibling;else for(_=n.child;_!==null;)l|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=n,_=_.sibling;return n.subtreeFlags|=p,n.childLanes=l,a}function iS(n,a,l){var p=a.pendingProps;switch(gy(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(a),null;case 1:return oa(a.type)&&wp(),zi(a),null;case 3:return p=a.stateNode,_c(),Cn(ra),Cn(ki),Sy(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Wh(a)?a.flags|=4:n===null||n.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,lr!==null&&(Gg(lr),lr=null))),Og(n,a),zi(a),null;case 5:Ay(a);var _=Ns(_d.current);if(l=a.type,n!==null&&a.stateNode!=null)yb(n,a,l,p,_),n.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(qe(166));return zi(a),null}if(n=Ns(zr.current),Wh(a)){p=a.stateNode,l=a.type;var b=a.memoizedProps;switch(p[Pr]=a,p[gd]=b,n=(a.mode&1)!==0,l){case"dialog":wn("cancel",p),wn("close",p);break;case"iframe":case"object":case"embed":wn("load",p);break;case"video":case"audio":for(_=0;_<Xu.length;_++)wn(Xu[_],p);break;case"source":wn("error",p);break;case"img":case"image":case"link":wn("error",p),wn("load",p);break;case"details":wn("toggle",p);break;case"input":F0(p,b),wn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},wn("invalid",p);break;case"textarea":j0(p,b),wn("invalid",p)}cg(l,b),_=null;for(var v in b)if(b.hasOwnProperty(v)){var u=b[v];v==="children"?typeof u=="string"?p.textContent!==u&&(b.suppressHydrationWarning!==!0&&Zh(p.textContent,u,n),_=["children",u]):typeof u=="number"&&p.textContent!==""+u&&(b.suppressHydrationWarning!==!0&&Zh(p.textContent,u,n),_=["children",""+u]):od.hasOwnProperty(v)&&u!=null&&v==="onScroll"&&wn("scroll",p)}switch(l){case"input":Nh(p),N0(p,b,!0);break;case"textarea":Nh(p),V0(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=bp)}p=_,a.updateQueue=p,p!==null&&(a.flags|=4)}else{v=_.nodeType===9?_:_.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$v(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=v.createElement(l,{is:p.is}):(n=v.createElement(l),l==="select"&&(v=n,p.multiple?v.multiple=!0:p.size&&(v.size=p.size))):n=v.createElementNS(n,l),n[Pr]=a,n[gd]=p,gb(n,a,!1,!1),a.stateNode=n;e:{switch(v=ug(l,p),l){case"dialog":wn("cancel",n),wn("close",n),_=p;break;case"iframe":case"object":case"embed":wn("load",n),_=p;break;case"video":case"audio":for(_=0;_<Xu.length;_++)wn(Xu[_],n);_=p;break;case"source":wn("error",n),_=p;break;case"img":case"image":case"link":wn("error",n),wn("load",n),_=p;break;case"details":wn("toggle",n),_=p;break;case"input":F0(n,p),_=ag(n,p),wn("invalid",n);break;case"option":_=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},_=kn({},p,{value:void 0}),wn("invalid",n);break;case"textarea":j0(n,p),_=sg(n,p),wn("invalid",n);break;default:_=p}cg(l,_),u=_;for(b in u)if(u.hasOwnProperty(b)){var z=u[b];b==="style"?Xv(n,z):b==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Zv(n,z)):b==="children"?typeof z=="string"?(l!=="textarea"||z!=="")&&sd(n,z):typeof z=="number"&&sd(n,""+z):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(od.hasOwnProperty(b)?z!=null&&b==="onScroll"&&wn("scroll",n):z!=null&&ty(n,b,z,v))}switch(l){case"input":Nh(n),N0(n,p,!1);break;case"textarea":Nh(n),V0(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Wo(p.value));break;case"select":n.multiple=!!p.multiple,b=p.value,b!=null?lc(n,!!p.multiple,b,!1):p.defaultValue!=null&&lc(n,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(n.onclick=bp)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return zi(a),null;case 6:if(n&&a.stateNode!=null)_b(n,a,n.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(qe(166));if(l=Ns(_d.current),Ns(zr.current),Wh(a)){if(p=a.stateNode,l=a.memoizedProps,p[Pr]=a,(b=p.nodeValue!==l)&&(n=Pa,n!==null))switch(n.tag){case 3:Zh(p.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Zh(p.nodeValue,l,(n.mode&1)!==0)}b&&(a.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[Pr]=a,a.stateNode=p}return zi(a),null;case 13:if(Cn(zn),p=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(En&&Ia!==null&&a.mode&1&&!(a.flags&128))Ox(),gc(),a.flags|=98560,b=!1;else if(b=Wh(a),p!==null&&p.dehydrated!==null){if(n===null){if(!b)throw Error(qe(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(qe(317));b[Pr]=a}else gc(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;zi(a),b=!1}else lr!==null&&(Gg(lr),lr=null),b=!0;if(!b)return a.flags&65536?a:null}return a.flags&128?(a.lanes=l,a):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(a.child.flags|=8192,a.mode&1&&(n===null||zn.current&1?ni===0&&(ni=3):By())),a.updateQueue!==null&&(a.flags|=4),zi(a),null);case 4:return _c(),Og(n,a),n===null&&fd(a.stateNode.containerInfo),zi(a),null;case 10:return xy(a.type._context),zi(a),null;case 17:return oa(a.type)&&wp(),zi(a),null;case 19:if(Cn(zn),b=a.memoizedState,b===null)return zi(a),null;if(p=(a.flags&128)!==0,v=b.rendering,v===null)if(p)Nu(b,!1);else{if(ni!==0||n!==null&&n.flags&128)for(n=a.child;n!==null;){if(v=Ip(n),v!==null){for(a.flags|=128,Nu(b,!1),p=v.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=l,l=a.child;l!==null;)b=l,n=p,b.flags&=14680066,v=b.alternate,v===null?(b.childLanes=0,b.lanes=n,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=v.childLanes,b.lanes=v.lanes,b.child=v.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=v.memoizedProps,b.memoizedState=v.memoizedState,b.updateQueue=v.updateQueue,b.type=v.type,n=v.dependencies,b.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return gn(zn,zn.current&1|2),a.child}n=n.sibling}b.tail!==null&&Hn()>xc&&(a.flags|=128,p=!0,Nu(b,!1),a.lanes=4194304)}else{if(!p)if(n=Ip(v),n!==null){if(a.flags|=128,p=!0,l=n.updateQueue,l!==null&&(a.updateQueue=l,a.flags|=4),Nu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!v.alternate&&!En)return zi(a),null}else 2*Hn()-b.renderingStartTime>xc&&l!==1073741824&&(a.flags|=128,p=!0,Nu(b,!1),a.lanes=4194304);b.isBackwards?(v.sibling=a.child,a.child=v):(l=b.last,l!==null?l.sibling=v:a.child=v,b.last=v)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=Hn(),a.sibling=null,l=zn.current,gn(zn,p?l&1|2:l&1),a):(zi(a),null);case 22:case 23:return Oy(),p=a.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(a.flags|=8192),p&&a.mode&1?Ta&1073741824&&(zi(a),a.subtreeFlags&6&&(a.flags|=8192)):zi(a),null;case 24:return null;case 25:return null}throw Error(qe(156,a.tag))}function aS(n,a){switch(gy(a),a.tag){case 1:return oa(a.type)&&wp(),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return _c(),Cn(ra),Cn(ki),Sy(),n=a.flags,n&65536&&!(n&128)?(a.flags=n&-65537|128,a):null;case 5:return Ay(a),null;case 13:if(Cn(zn),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(qe(340));gc()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return Cn(zn),null;case 4:return _c(),null;case 10:return xy(a.type._context),null;case 22:case 23:return Oy(),null;case 24:return null;default:return null}}var Jh=!1,Ri=!1,rS=typeof WeakSet=="function"?WeakSet:Set,mt=null;function rc(n,a){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){Vn(n,a,p)}else l.current=null}function Bg(n,a,l){try{l()}catch(p){Vn(n,a,p)}}var P1=!1;function oS(n,a){if(xg=_p,n=Cx(),fy(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var _=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var v=0,u=-1,z=-1,V=0,W=0,j=n,N=null;t:for(;;){for(var Te;j!==l||_!==0&&j.nodeType!==3||(u=v+_),j!==b||p!==0&&j.nodeType!==3||(z=v+p),j.nodeType===3&&(v+=j.nodeValue.length),(Te=j.firstChild)!==null;)N=j,j=Te;for(;;){if(j===n)break t;if(N===l&&++V===_&&(u=v),N===b&&++W===p&&(z=v),(Te=j.nextSibling)!==null)break;j=N,N=j.parentNode}j=Te}l=u===-1||z===-1?null:{start:u,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(bg={focusedElem:n,selectionRange:l},_p=!1,mt=a;mt!==null;)if(a=mt,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,mt=n;else for(;mt!==null;){a=mt;try{var Ce=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var we=Ce.memoizedProps,Ge=Ce.memoizedState,re=a.stateNode,ie=re.getSnapshotBeforeUpdate(a.elementType===a.type?we:rr(a.type,we),Ge);re.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ce=a.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(Ee){Vn(a,a.return,Ee)}if(n=a.sibling,n!==null){n.return=a.return,mt=n;break}mt=a.return}return Ce=P1,P1=!1,Ce}function id(n,a,l){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&n)===n){var b=_.destroy;_.destroy=void 0,b!==void 0&&Bg(a,l,b)}_=_.next}while(_!==p)}}function Jp(n,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&n)===n){var p=l.create;l.destroy=p()}l=l.next}while(l!==a)}}function Fg(n){var a=n.ref;if(a!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof a=="function"?a(n):a.current=n}}function vb(n){var a=n.alternate;a!==null&&(n.alternate=null,vb(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&(delete a[Pr],delete a[gd],delete a[Ag],delete a[UA],delete a[qA])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xb(n){return n.tag===5||n.tag===3||n.tag===4}function D1(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ng(n,a,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(n,a):l.insertBefore(n,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(n,l)):(a=l,a.appendChild(n)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=bp));else if(p!==4&&(n=n.child,n!==null))for(Ng(n,a,l),n=n.sibling;n!==null;)Ng(n,a,l),n=n.sibling}function jg(n,a,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,a?l.insertBefore(n,a):l.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(jg(n,a,l),n=n.sibling;n!==null;)jg(n,a,l),n=n.sibling}var _i=null,or=!1;function zo(n,a,l){for(l=l.child;l!==null;)bb(n,a,l),l=l.sibling}function bb(n,a,l){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount(qp,l)}catch{}switch(l.tag){case 5:Ri||rc(l,a);case 6:var p=_i,_=or;_i=null,zo(n,a,l),_i=p,or=_,_i!==null&&(or?(n=_i,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):_i.removeChild(l.stateNode));break;case 18:_i!==null&&(or?(n=_i,l=l.stateNode,n.nodeType===8?Bm(n.parentNode,l):n.nodeType===1&&Bm(n,l),dd(n)):Bm(_i,l.stateNode));break;case 4:p=_i,_=or,_i=l.stateNode.containerInfo,or=!0,zo(n,a,l),_i=p,or=_;break;case 0:case 11:case 14:case 15:if(!Ri&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var b=_,v=b.destroy;b=b.tag,v!==void 0&&(b&2||b&4)&&Bg(l,a,v),_=_.next}while(_!==p)}zo(n,a,l);break;case 1:if(!Ri&&(rc(l,a),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(u){Vn(l,a,u)}zo(n,a,l);break;case 21:zo(n,a,l);break;case 22:l.mode&1?(Ri=(p=Ri)||l.memoizedState!==null,zo(n,a,l),Ri=p):zo(n,a,l);break;default:zo(n,a,l)}}function z1(n){var a=n.updateQueue;if(a!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new rS),a.forEach(function(p){var _=mS.bind(null,n,p);l.has(p)||(l.add(p),p.then(_,_))})}}function ar(n,a){var l=a.deletions;if(l!==null)for(var p=0;p<l.length;p++){var _=l[p];try{var b=n,v=a,u=v;e:for(;u!==null;){switch(u.tag){case 5:_i=u.stateNode,or=!1;break e;case 3:_i=u.stateNode.containerInfo,or=!0;break e;case 4:_i=u.stateNode.containerInfo,or=!0;break e}u=u.return}if(_i===null)throw Error(qe(160));bb(b,v,_),_i=null,or=!1;var z=_.alternate;z!==null&&(z.return=null),_.return=null}catch(V){Vn(_,a,V)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)wb(a,n),a=a.sibling}function wb(n,a){var l=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ar(a,n),Mr(n),p&4){try{id(3,n,n.return),Jp(3,n)}catch(we){Vn(n,n.return,we)}try{id(5,n,n.return)}catch(we){Vn(n,n.return,we)}}break;case 1:ar(a,n),Mr(n),p&512&&l!==null&&rc(l,l.return);break;case 5:if(ar(a,n),Mr(n),p&512&&l!==null&&rc(l,l.return),n.flags&32){var _=n.stateNode;try{sd(_,"")}catch(we){Vn(n,n.return,we)}}if(p&4&&(_=n.stateNode,_!=null)){var b=n.memoizedProps,v=l!==null?l.memoizedProps:b,u=n.type,z=n.updateQueue;if(n.updateQueue=null,z!==null)try{u==="input"&&b.type==="radio"&&b.name!=null&&Gv(_,b),ug(u,v);var V=ug(u,b);for(v=0;v<z.length;v+=2){var W=z[v],j=z[v+1];W==="style"?Xv(_,j):W==="dangerouslySetInnerHTML"?Zv(_,j):W==="children"?sd(_,j):ty(_,W,j,V)}switch(u){case"input":rg(_,b);break;case"textarea":Hv(_,b);break;case"select":var N=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!b.multiple;var Te=b.value;Te!=null?lc(_,!!b.multiple,Te,!1):N!==!!b.multiple&&(b.defaultValue!=null?lc(_,!!b.multiple,b.defaultValue,!0):lc(_,!!b.multiple,b.multiple?[]:"",!1))}_[gd]=b}catch(we){Vn(n,n.return,we)}}break;case 6:if(ar(a,n),Mr(n),p&4){if(n.stateNode===null)throw Error(qe(162));_=n.stateNode,b=n.memoizedProps;try{_.nodeValue=b}catch(we){Vn(n,n.return,we)}}break;case 3:if(ar(a,n),Mr(n),p&4&&l!==null&&l.memoizedState.isDehydrated)try{dd(a.containerInfo)}catch(we){Vn(n,n.return,we)}break;case 4:ar(a,n),Mr(n);break;case 13:ar(a,n),Mr(n),_=n.child,_.flags&8192&&(b=_.memoizedState!==null,_.stateNode.isHidden=b,!b||_.alternate!==null&&_.alternate.memoizedState!==null||(ky=Hn())),p&4&&z1(n);break;case 22:if(W=l!==null&&l.memoizedState!==null,n.mode&1?(Ri=(V=Ri)||W,ar(a,n),Ri=V):ar(a,n),Mr(n),p&8192){if(V=n.memoizedState!==null,(n.stateNode.isHidden=V)&&!W&&n.mode&1)for(mt=n,W=n.child;W!==null;){for(j=mt=W;mt!==null;){switch(N=mt,Te=N.child,N.tag){case 0:case 11:case 14:case 15:id(4,N,N.return);break;case 1:rc(N,N.return);var Ce=N.stateNode;if(typeof Ce.componentWillUnmount=="function"){p=N,l=N.return;try{a=p,Ce.props=a.memoizedProps,Ce.state=a.memoizedState,Ce.componentWillUnmount()}catch(we){Vn(p,l,we)}}break;case 5:rc(N,N.return);break;case 22:if(N.memoizedState!==null){k1(j);continue}}Te!==null?(Te.return=N,mt=Te):k1(j)}W=W.sibling}e:for(W=null,j=n;;){if(j.tag===5){if(W===null){W=j;try{_=j.stateNode,V?(b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(u=j.stateNode,z=j.memoizedProps.style,v=z!=null&&z.hasOwnProperty("display")?z.display:null,u.style.display=Wv("display",v))}catch(we){Vn(n,n.return,we)}}}else if(j.tag===6){if(W===null)try{j.stateNode.nodeValue=V?"":j.memoizedProps}catch(we){Vn(n,n.return,we)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===n)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===n)break e;for(;j.sibling===null;){if(j.return===null||j.return===n)break e;W===j&&(W=null),j=j.return}W===j&&(W=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:ar(a,n),Mr(n),p&4&&z1(n);break;case 21:break;default:ar(a,n),Mr(n)}}function Mr(n){var a=n.flags;if(a&2){try{e:{for(var l=n.return;l!==null;){if(xb(l)){var p=l;break e}l=l.return}throw Error(qe(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(sd(_,""),p.flags&=-33);var b=D1(n);jg(n,b,_);break;case 3:case 4:var v=p.stateNode.containerInfo,u=D1(n);Ng(n,u,v);break;default:throw Error(qe(161))}}catch(z){Vn(n,n.return,z)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function sS(n,a,l){mt=n,Cb(n)}function Cb(n,a,l){for(var p=(n.mode&1)!==0;mt!==null;){var _=mt,b=_.child;if(_.tag===22&&p){var v=_.memoizedState!==null||Jh;if(!v){var u=_.alternate,z=u!==null&&u.memoizedState!==null||Ri;u=Jh;var V=Ri;if(Jh=v,(Ri=z)&&!V)for(mt=_;mt!==null;)v=mt,z=v.child,v.tag===22&&v.memoizedState!==null?L1(_):z!==null?(z.return=v,mt=z):L1(_);for(;b!==null;)mt=b,Cb(b),b=b.sibling;mt=_,Jh=u,Ri=V}R1(n)}else _.subtreeFlags&8772&&b!==null?(b.return=_,mt=b):R1(n)}}function R1(n){for(;mt!==null;){var a=mt;if(a.flags&8772){var l=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Ri||Jp(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Ri)if(l===null)p.componentDidMount();else{var _=a.elementType===a.type?l.memoizedProps:rr(a.type,l.memoizedProps);p.componentDidUpdate(_,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&y1(a,b,p);break;case 3:var v=a.updateQueue;if(v!==null){if(l=null,a.child!==null)switch(a.child.tag){case 5:l=a.child.stateNode;break;case 1:l=a.child.stateNode}y1(a,v,l)}break;case 5:var u=a.stateNode;if(l===null&&a.flags&4){l=u;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&l.focus();break;case"img":z.src&&(l.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var V=a.alternate;if(V!==null){var W=V.memoizedState;if(W!==null){var j=W.dehydrated;j!==null&&dd(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}Ri||a.flags&512&&Fg(a)}catch(N){Vn(a,a.return,N)}}if(a===n){mt=null;break}if(l=a.sibling,l!==null){l.return=a.return,mt=l;break}mt=a.return}}function k1(n){for(;mt!==null;){var a=mt;if(a===n){mt=null;break}var l=a.sibling;if(l!==null){l.return=a.return,mt=l;break}mt=a.return}}function L1(n){for(;mt!==null;){var a=mt;try{switch(a.tag){case 0:case 11:case 15:var l=a.return;try{Jp(4,a)}catch(z){Vn(a,l,z)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var _=a.return;try{p.componentDidMount()}catch(z){Vn(a,_,z)}}var b=a.return;try{Fg(a)}catch(z){Vn(a,b,z)}break;case 5:var v=a.return;try{Fg(a)}catch(z){Vn(a,v,z)}}}catch(z){Vn(a,a.return,z)}if(a===n){mt=null;break}var u=a.sibling;if(u!==null){u.return=a.return,mt=u;break}mt=a.return}}var lS=Math.ceil,zp=lo.ReactCurrentDispatcher,zy=lo.ReactCurrentOwner,$a=lo.ReactCurrentBatchConfig,Wt=0,hi=null,Jn=null,vi=0,Ta=0,oc=Jo(0),ni=0,wd=null,Zs=0,Yp=0,Ry=0,ad=null,ia=null,ky=0,xc=1/0,Kr=null,Rp=!1,Vg=null,Ho=null,Yh=!1,No=null,kp=0,rd=0,Ug=null,cp=-1,up=0;function Wi(){return Wt&6?Hn():cp!==-1?cp:cp=Hn()}function $o(n){return n.mode&1?Wt&2&&vi!==0?vi&-vi:HA.transition!==null?(up===0&&(up=sx()),up):(n=an,n!==0||(n=window.event,n=n===void 0?16:fx(n.type)),n):1}function ur(n,a,l,p){if(50<rd)throw rd=0,Ug=null,Error(qe(185));Td(n,l,p),(!(Wt&2)||n!==hi)&&(n===hi&&(!(Wt&2)&&(Yp|=l),ni===4&&Bo(n,vi)),sa(n,p),l===1&&Wt===0&&!(a.mode&1)&&(xc=Hn()+500,Wp&&Yo()))}function sa(n,a){var l=n.callbackNode;HC(n,a);var p=yp(n,n===hi?vi:0);if(p===0)l!==null&&G0(l),n.callbackNode=null,n.callbackPriority=0;else if(a=p&-p,n.callbackPriority!==a){if(l!=null&&G0(l),a===1)n.tag===0?GA(O1.bind(null,n)):Rx(O1.bind(null,n)),jA(function(){!(Wt&6)&&Yo()}),l=null;else{switch(lx(p)){case 1:l=oy;break;case 4:l=rx;break;case 16:l=gp;break;case 536870912:l=ox;break;default:l=gp}l=Db(l,Ab.bind(null,n))}n.callbackPriority=a,n.callbackNode=l}}function Ab(n,a){if(cp=-1,up=0,Wt&6)throw Error(qe(327));var l=n.callbackNode;if(pc()&&n.callbackNode!==l)return null;var p=yp(n,n===hi?vi:0);if(p===0)return null;if(p&30||p&n.expiredLanes||a)a=Lp(n,p);else{a=p;var _=Wt;Wt|=2;var b=Eb();(hi!==n||vi!==a)&&(Kr=null,xc=Hn()+500,Us(n,a));do try{dS();break}catch(u){Sb(n,u)}while(!0);vy(),zp.current=b,Wt=_,Jn!==null?a=0:(hi=null,vi=0,a=ni)}if(a!==0){if(a===2&&(_=mg(n),_!==0&&(p=_,a=qg(n,_))),a===1)throw l=wd,Us(n,0),Bo(n,p),sa(n,Hn()),l;if(a===6)Bo(n,p);else{if(_=n.current.alternate,!(p&30)&&!cS(_)&&(a=Lp(n,p),a===2&&(b=mg(n),b!==0&&(p=b,a=qg(n,b))),a===1))throw l=wd,Us(n,0),Bo(n,p),sa(n,Hn()),l;switch(n.finishedWork=_,n.finishedLanes=p,a){case 0:case 1:throw Error(qe(345));case 2:Ls(n,ia,Kr);break;case 3:if(Bo(n,p),(p&130023424)===p&&(a=ky+500-Hn(),10<a)){if(yp(n,0)!==0)break;if(_=n.suspendedLanes,(_&p)!==p){Wi(),n.pingedLanes|=n.suspendedLanes&_;break}n.timeoutHandle=Cg(Ls.bind(null,n,ia,Kr),a);break}Ls(n,ia,Kr);break;case 4:if(Bo(n,p),(p&4194240)===p)break;for(a=n.eventTimes,_=-1;0<p;){var v=31-cr(p);b=1<<v,v=a[v],v>_&&(_=v),p&=~b}if(p=_,p=Hn()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*lS(p/1960))-p,10<p){n.timeoutHandle=Cg(Ls.bind(null,n,ia,Kr),p);break}Ls(n,ia,Kr);break;case 5:Ls(n,ia,Kr);break;default:throw Error(qe(329))}}}return sa(n,Hn()),n.callbackNode===l?Ab.bind(null,n):null}function qg(n,a){var l=ad;return n.current.memoizedState.isDehydrated&&(Us(n,a).flags|=256),n=Lp(n,a),n!==2&&(a=ia,ia=l,a!==null&&Gg(a)),n}function Gg(n){ia===null?ia=n:ia.push.apply(ia,n)}function cS(n){for(var a=n;;){if(a.flags&16384){var l=a.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var _=l[p],b=_.getSnapshot;_=_.value;try{if(!dr(b(),_))return!1}catch{return!1}}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Bo(n,a){for(a&=~Ry,a&=~Yp,n.suspendedLanes|=a,n.pingedLanes&=~a,n=n.expirationTimes;0<a;){var l=31-cr(a),p=1<<l;n[l]=-1,a&=~p}}function O1(n){if(Wt&6)throw Error(qe(327));pc();var a=yp(n,0);if(!(a&1))return sa(n,Hn()),null;var l=Lp(n,a);if(n.tag!==0&&l===2){var p=mg(n);p!==0&&(a=p,l=qg(n,p))}if(l===1)throw l=wd,Us(n,0),Bo(n,a),sa(n,Hn()),l;if(l===6)throw Error(qe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=a,Ls(n,ia,Kr),sa(n,Hn()),null}function Ly(n,a){var l=Wt;Wt|=1;try{return n(a)}finally{Wt=l,Wt===0&&(xc=Hn()+500,Wp&&Yo())}}function Ws(n){No!==null&&No.tag===0&&!(Wt&6)&&pc();var a=Wt;Wt|=1;var l=$a.transition,p=an;try{if($a.transition=null,an=1,n)return n()}finally{an=p,$a.transition=l,Wt=a,!(Wt&6)&&Yo()}}function Oy(){Ta=oc.current,Cn(oc)}function Us(n,a){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,NA(l)),Jn!==null)for(l=Jn.return;l!==null;){var p=l;switch(gy(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&wp();break;case 3:_c(),Cn(ra),Cn(ki),Sy();break;case 5:Ay(p);break;case 4:_c();break;case 13:Cn(zn);break;case 19:Cn(zn);break;case 10:xy(p.type._context);break;case 22:case 23:Oy()}l=l.return}if(hi=n,Jn=n=Zo(n.current,null),vi=Ta=a,ni=0,wd=null,Ry=Yp=Zs=0,ia=ad=null,Fs!==null){for(a=0;a<Fs.length;a++)if(l=Fs[a],p=l.interleaved,p!==null){l.interleaved=null;var _=p.next,b=l.pending;if(b!==null){var v=b.next;b.next=_,p.next=v}l.pending=p}Fs=null}return n}function Sb(n,a){do{var l=Jn;try{if(vy(),op.current=Dp,Pp){for(var p=Rn.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}Pp=!1}if($s=0,di=ti=Rn=null,nd=!1,vd=0,zy.current=null,l===null||l.return===null){ni=1,wd=a,Jn=null;break}e:{var b=n,v=l.return,u=l,z=a;if(a=vi,u.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var V=z,W=u,j=W.tag;if(!(W.mode&1)&&(j===0||j===11||j===15)){var N=W.alternate;N?(W.updateQueue=N.updateQueue,W.memoizedState=N.memoizedState,W.lanes=N.lanes):(W.updateQueue=null,W.memoizedState=null)}var Te=C1(v);if(Te!==null){Te.flags&=-257,A1(Te,v,u,b,a),Te.mode&1&&w1(b,V,a),a=Te,z=V;var Ce=a.updateQueue;if(Ce===null){var we=new Set;we.add(z),a.updateQueue=we}else Ce.add(z);break e}else{if(!(a&1)){w1(b,V,a),By();break e}z=Error(qe(426))}}else if(En&&u.mode&1){var Ge=C1(v);if(Ge!==null){!(Ge.flags&65536)&&(Ge.flags|=256),A1(Ge,v,u,b,a),yy(vc(z,u));break e}}b=z=vc(z,u),ni!==4&&(ni=2),ad===null?ad=[b]:ad.push(b),b=v;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var re=lb(b,z,a);g1(b,re);break e;case 1:u=z;var ie=b.type,ce=b.stateNode;if(!(b.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Ho===null||!Ho.has(ce)))){b.flags|=65536,a&=-a,b.lanes|=a;var Ee=cb(b,u,a);g1(b,Ee);break e}}b=b.return}while(b!==null)}Mb(l)}catch(ke){a=ke,Jn===l&&l!==null&&(Jn=l=l.return);continue}break}while(!0)}function Eb(){var n=zp.current;return zp.current=Dp,n===null?Dp:n}function By(){(ni===0||ni===3||ni===2)&&(ni=4),hi===null||!(Zs&268435455)&&!(Yp&268435455)||Bo(hi,vi)}function Lp(n,a){var l=Wt;Wt|=2;var p=Eb();(hi!==n||vi!==a)&&(Kr=null,Us(n,a));do try{uS();break}catch(_){Sb(n,_)}while(!0);if(vy(),Wt=l,zp.current=p,Jn!==null)throw Error(qe(261));return hi=null,vi=0,ni}function uS(){for(;Jn!==null;)Tb(Jn)}function dS(){for(;Jn!==null&&!OC();)Tb(Jn)}function Tb(n){var a=Pb(n.alternate,n,Ta);n.memoizedProps=n.pendingProps,a===null?Mb(n):Jn=a,zy.current=null}function Mb(n){var a=n;do{var l=a.alternate;if(n=a.return,a.flags&32768){if(l=aS(l,a),l!==null){l.flags&=32767,Jn=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ni=6,Jn=null;return}}else if(l=iS(l,a,Ta),l!==null){Jn=l;return}if(a=a.sibling,a!==null){Jn=a;return}Jn=a=n}while(a!==null);ni===0&&(ni=5)}function Ls(n,a,l){var p=an,_=$a.transition;try{$a.transition=null,an=1,hS(n,a,l,p)}finally{$a.transition=_,an=p}return null}function hS(n,a,l,p){do pc();while(No!==null);if(Wt&6)throw Error(qe(327));l=n.finishedWork;var _=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(qe(177));n.callbackNode=null,n.callbackPriority=0;var b=l.lanes|l.childLanes;if($C(n,b),n===hi&&(Jn=hi=null,vi=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Yh||(Yh=!0,Db(gp,function(){return pc(),null})),b=(l.flags&15990)!==0,l.subtreeFlags&15990||b){b=$a.transition,$a.transition=null;var v=an;an=1;var u=Wt;Wt|=4,zy.current=null,oS(n,l),wb(l,n),zA(bg),_p=!!xg,bg=xg=null,n.current=l,sS(l),BC(),Wt=u,an=v,$a.transition=b}else n.current=l;if(Yh&&(Yh=!1,No=n,kp=_),b=n.pendingLanes,b===0&&(Ho=null),jC(l.stateNode),sa(n,Hn()),a!==null)for(p=n.onRecoverableError,l=0;l<a.length;l++)_=a[l],p(_.value,{componentStack:_.stack,digest:_.digest});if(Rp)throw Rp=!1,n=Vg,Vg=null,n;return kp&1&&n.tag!==0&&pc(),b=n.pendingLanes,b&1?n===Ug?rd++:(rd=0,Ug=n):rd=0,Yo(),null}function pc(){if(No!==null){var n=lx(kp),a=$a.transition,l=an;try{if($a.transition=null,an=16>n?16:n,No===null)var p=!1;else{if(n=No,No=null,kp=0,Wt&6)throw Error(qe(331));var _=Wt;for(Wt|=4,mt=n.current;mt!==null;){var b=mt,v=b.child;if(mt.flags&16){var u=b.deletions;if(u!==null){for(var z=0;z<u.length;z++){var V=u[z];for(mt=V;mt!==null;){var W=mt;switch(W.tag){case 0:case 11:case 15:id(8,W,b)}var j=W.child;if(j!==null)j.return=W,mt=j;else for(;mt!==null;){W=mt;var N=W.sibling,Te=W.return;if(vb(W),W===V){mt=null;break}if(N!==null){N.return=Te,mt=N;break}mt=Te}}}var Ce=b.alternate;if(Ce!==null){var we=Ce.child;if(we!==null){Ce.child=null;do{var Ge=we.sibling;we.sibling=null,we=Ge}while(we!==null)}}mt=b}}if(b.subtreeFlags&2064&&v!==null)v.return=b,mt=v;else e:for(;mt!==null;){if(b=mt,b.flags&2048)switch(b.tag){case 0:case 11:case 15:id(9,b,b.return)}var re=b.sibling;if(re!==null){re.return=b.return,mt=re;break e}mt=b.return}}var ie=n.current;for(mt=ie;mt!==null;){v=mt;var ce=v.child;if(v.subtreeFlags&2064&&ce!==null)ce.return=v,mt=ce;else e:for(v=ie;mt!==null;){if(u=mt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Jp(9,u)}}catch(ke){Vn(u,u.return,ke)}if(u===v){mt=null;break e}var Ee=u.sibling;if(Ee!==null){Ee.return=u.return,mt=Ee;break e}mt=u.return}}if(Wt=_,Yo(),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot(qp,n)}catch{}p=!0}return p}finally{an=l,$a.transition=a}}return!1}function B1(n,a,l){a=vc(l,a),a=lb(n,a,1),n=Go(n,a,1),a=Wi(),n!==null&&(Td(n,1,a),sa(n,a))}function Vn(n,a,l){if(n.tag===3)B1(n,n,l);else for(;a!==null;){if(a.tag===3){B1(a,n,l);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ho===null||!Ho.has(p))){n=vc(l,n),n=cb(a,n,1),a=Go(a,n,1),n=Wi(),a!==null&&(Td(a,1,n),sa(a,n));break}}a=a.return}}function pS(n,a,l){var p=n.pingCache;p!==null&&p.delete(a),a=Wi(),n.pingedLanes|=n.suspendedLanes&l,hi===n&&(vi&l)===l&&(ni===4||ni===3&&(vi&130023424)===vi&&500>Hn()-ky?Us(n,0):Ry|=l),sa(n,a)}function Ib(n,a){a===0&&(n.mode&1?(a=Uh,Uh<<=1,!(Uh&130023424)&&(Uh=4194304)):a=1);var l=Wi();n=oo(n,a),n!==null&&(Td(n,a,l),sa(n,l))}function fS(n){var a=n.memoizedState,l=0;a!==null&&(l=a.retryLane),Ib(n,l)}function mS(n,a){var l=0;switch(n.tag){case 13:var p=n.stateNode,_=n.memoizedState;_!==null&&(l=_.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(qe(314))}p!==null&&p.delete(a),Ib(n,l)}var Pb;Pb=function(n,a,l){if(n!==null)if(n.memoizedProps!==a.pendingProps||ra.current)aa=!0;else{if(!(n.lanes&l)&&!(a.flags&128))return aa=!1,nS(n,a,l);aa=!!(n.flags&131072)}else aa=!1,En&&a.flags&1048576&&kx(a,Sp,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;lp(n,a),n=a.pendingProps;var _=mc(a,ki.current);hc(a,l),_=Ty(null,a,p,n,_,l);var b=My();return a.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,oa(p)?(b=!0,Cp(a)):b=!1,a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,wy(a),_.updater=Kp,a.stateNode=_,_._reactInternals=a,Pg(a,p,n,l),a=Rg(null,a,p,!0,b,l)):(a.tag=0,En&&b&&my(a),Zi(null,a,_,l),a=a.child),a;case 16:p=a.elementType;e:{switch(lp(n,a),n=a.pendingProps,_=p._init,p=_(p._payload),a.type=p,_=a.tag=yS(p),n=rr(p,n),_){case 0:a=zg(null,a,p,n,l);break e;case 1:a=T1(null,a,p,n,l);break e;case 11:a=S1(null,a,p,n,l);break e;case 14:a=E1(null,a,p,rr(p.type,n),l);break e}throw Error(qe(306,p,""))}return a;case 0:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:rr(p,_),zg(n,a,p,_,l);case 1:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:rr(p,_),T1(n,a,p,_,l);case 3:e:{if(pb(a),n===null)throw Error(qe(387));p=a.pendingProps,b=a.memoizedState,_=b.element,jx(n,a),Mp(a,p,null,l);var v=a.memoizedState;if(p=v.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){_=vc(Error(qe(423)),a),a=M1(n,a,p,l,_);break e}else if(p!==_){_=vc(Error(qe(424)),a),a=M1(n,a,p,l,_);break e}else for(Ia=qo(a.stateNode.containerInfo.firstChild),Pa=a,En=!0,lr=null,l=Fx(a,null,p,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(gc(),p===_){a=so(n,a,l);break e}Zi(n,a,p,l)}a=a.child}return a;case 5:return Vx(a),n===null&&Tg(a),p=a.type,_=a.pendingProps,b=n!==null?n.memoizedProps:null,v=_.children,wg(p,_)?v=null:b!==null&&wg(p,b)&&(a.flags|=32),hb(n,a),Zi(n,a,v,l),a.child;case 6:return n===null&&Tg(a),null;case 13:return fb(n,a,l);case 4:return Cy(a,a.stateNode.containerInfo),p=a.pendingProps,n===null?a.child=yc(a,null,p,l):Zi(n,a,p,l),a.child;case 11:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:rr(p,_),S1(n,a,p,_,l);case 7:return Zi(n,a,a.pendingProps,l),a.child;case 8:return Zi(n,a,a.pendingProps.children,l),a.child;case 12:return Zi(n,a,a.pendingProps.children,l),a.child;case 10:e:{if(p=a.type._context,_=a.pendingProps,b=a.memoizedProps,v=_.value,gn(Ep,p._currentValue),p._currentValue=v,b!==null)if(dr(b.value,v)){if(b.children===_.children&&!ra.current){a=so(n,a,l);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var u=b.dependencies;if(u!==null){v=b.child;for(var z=u.firstContext;z!==null;){if(z.context===p){if(b.tag===1){z=no(-1,l&-l),z.tag=2;var V=b.updateQueue;if(V!==null){V=V.shared;var W=V.pending;W===null?z.next=z:(z.next=W.next,W.next=z),V.pending=z}}b.lanes|=l,z=b.alternate,z!==null&&(z.lanes|=l),Mg(b.return,l,a),u.lanes|=l;break}z=z.next}}else if(b.tag===10)v=b.type===a.type?null:b.child;else if(b.tag===18){if(v=b.return,v===null)throw Error(qe(341));v.lanes|=l,u=v.alternate,u!==null&&(u.lanes|=l),Mg(v,l,a),v=b.sibling}else v=b.child;if(v!==null)v.return=b;else for(v=b;v!==null;){if(v===a){v=null;break}if(b=v.sibling,b!==null){b.return=v.return,v=b;break}v=v.return}b=v}Zi(n,a,_.children,l),a=a.child}return a;case 9:return _=a.type,p=a.pendingProps.children,hc(a,l),_=Za(_),p=p(_),a.flags|=1,Zi(n,a,p,l),a.child;case 14:return p=a.type,_=rr(p,a.pendingProps),_=rr(p.type,_),E1(n,a,p,_,l);case 15:return ub(n,a,a.type,a.pendingProps,l);case 17:return p=a.type,_=a.pendingProps,_=a.elementType===p?_:rr(p,_),lp(n,a),a.tag=1,oa(p)?(n=!0,Cp(a)):n=!1,hc(a,l),sb(a,p,_),Pg(a,p,_,l),Rg(null,a,p,!0,n,l);case 19:return mb(n,a,l);case 22:return db(n,a,l)}throw Error(qe(156,a.tag))};function Db(n,a){return ax(n,a)}function gS(n,a,l,p){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ha(n,a,l,p){return new gS(n,a,l,p)}function Fy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function yS(n){if(typeof n=="function")return Fy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===iy)return 11;if(n===ay)return 14}return 2}function Zo(n,a){var l=n.alternate;return l===null?(l=Ha(n.tag,a,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=a,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,a=n.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function dp(n,a,l,p,_,b){var v=2;if(p=n,typeof n=="function")Fy(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case Kl:return qs(l.children,_,b,a);case ny:v=8,_|=8;break;case eg:return n=Ha(12,l,a,_|2),n.elementType=eg,n.lanes=b,n;case tg:return n=Ha(13,l,a,_),n.elementType=tg,n.lanes=b,n;case ng:return n=Ha(19,l,a,_),n.elementType=ng,n.lanes=b,n;case Vv:return Qp(l,_,b,a);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Nv:v=10;break e;case jv:v=9;break e;case iy:v=11;break e;case ay:v=14;break e;case ko:v=16,p=null;break e}throw Error(qe(130,n==null?n:typeof n,""))}return a=Ha(v,l,a,_),a.elementType=n,a.type=p,a.lanes=b,a}function qs(n,a,l,p){return n=Ha(7,n,p,a),n.lanes=l,n}function Qp(n,a,l,p){return n=Ha(22,n,p,a),n.elementType=Vv,n.lanes=l,n.stateNode={isHidden:!1},n}function Hm(n,a,l){return n=Ha(6,n,null,a),n.lanes=l,n}function $m(n,a,l){return a=Ha(4,n.children!==null?n.children:[],n.key,a),a.lanes=l,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function _S(n,a,l,p,_){this.tag=a,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Em(0),this.expirationTimes=Em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Em(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Ny(n,a,l,p,_,b,v,u,z){return n=new _S(n,a,l,u,z),a===1?(a=1,b===!0&&(a|=8)):a=0,b=Ha(3,null,null,a),n.current=b,b.stateNode=n,b.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},wy(b),n}function vS(n,a,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xl,key:p==null?null:""+p,children:n,containerInfo:a,implementation:l}}function zb(n){if(!n)return Xo;n=n._reactInternals;e:{if(Ys(n)!==n||n.tag!==1)throw Error(qe(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(oa(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(qe(171))}if(n.tag===1){var l=n.type;if(oa(l))return zx(n,l,a)}return a}function Rb(n,a,l,p,_,b,v,u,z){return n=Ny(l,p,!0,n,_,b,v,u,z),n.context=zb(null),l=n.current,p=Wi(),_=$o(l),b=no(p,_),b.callback=a??null,Go(l,b,_),n.current.lanes=_,Td(n,_,p),sa(n,p),n}function ef(n,a,l,p){var _=a.current,b=Wi(),v=$o(_);return l=zb(l),a.context===null?a.context=l:a.pendingContext=l,a=no(b,v),a.payload={element:n},p=p===void 0?null:p,p!==null&&(a.callback=p),n=Go(_,a,v),n!==null&&(ur(n,_,v,b),rp(n,_,v)),v}function Op(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function F1(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<a?l:a}}function jy(n,a){F1(n,a),(n=n.alternate)&&F1(n,a)}function xS(){return null}var kb=typeof reportError=="function"?reportError:function(n){console.error(n)};function Vy(n){this._internalRoot=n}tf.prototype.render=Vy.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(qe(409));ef(n,a,null,null)};tf.prototype.unmount=Vy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Ws(function(){ef(null,n,null,null)}),a[ro]=null}};function tf(n){this._internalRoot=n}tf.prototype.unstable_scheduleHydration=function(n){if(n){var a=dx();n={blockedOn:null,target:n,priority:a};for(var l=0;l<Oo.length&&a!==0&&a<Oo[l].priority;l++);Oo.splice(l,0,n),l===0&&px(n)}};function Uy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function N1(){}function bS(n,a,l,p,_){if(_){if(typeof p=="function"){var b=p;p=function(){var V=Op(v);b.call(V)}}var v=Rb(a,p,n,0,null,!1,!1,"",N1);return n._reactRootContainer=v,n[ro]=v.current,fd(n.nodeType===8?n.parentNode:n),Ws(),v}for(;_=n.lastChild;)n.removeChild(_);if(typeof p=="function"){var u=p;p=function(){var V=Op(z);u.call(V)}}var z=Ny(n,0,!1,null,null,!1,!1,"",N1);return n._reactRootContainer=z,n[ro]=z.current,fd(n.nodeType===8?n.parentNode:n),Ws(function(){ef(a,z,l,p)}),z}function af(n,a,l,p,_){var b=l._reactRootContainer;if(b){var v=b;if(typeof _=="function"){var u=_;_=function(){var z=Op(v);u.call(z)}}ef(a,v,n,_)}else v=bS(l,a,n,_,p);return Op(v)}cx=function(n){switch(n.tag){case 3:var a=n.stateNode;if(a.current.memoizedState.isDehydrated){var l=Wu(a.pendingLanes);l!==0&&(sy(a,l|1),sa(a,Hn()),!(Wt&6)&&(xc=Hn()+500,Yo()))}break;case 13:Ws(function(){var p=oo(n,1);if(p!==null){var _=Wi();ur(p,n,1,_)}}),jy(n,1)}};ly=function(n){if(n.tag===13){var a=oo(n,134217728);if(a!==null){var l=Wi();ur(a,n,134217728,l)}jy(n,134217728)}};ux=function(n){if(n.tag===13){var a=$o(n),l=oo(n,a);if(l!==null){var p=Wi();ur(l,n,a,p)}jy(n,a)}};dx=function(){return an};hx=function(n,a){var l=an;try{return an=n,a()}finally{an=l}};hg=function(n,a,l){switch(a){case"input":if(rg(n,l),a=l.name,l.type==="radio"&&a!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<l.length;a++){var p=l[a];if(p!==n&&p.form===n.form){var _=Zp(p);if(!_)throw Error(qe(90));qv(p),rg(p,_)}}}break;case"textarea":Hv(n,l);break;case"select":a=l.value,a!=null&&lc(n,!!l.multiple,a,!1)}};Yv=Ly;Qv=Ws;var wS={usingClientEntryPoint:!1,Events:[Id,ec,Zp,Kv,Jv,Ly]},ju={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CS={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=nx(n),n===null?null:n.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||xS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{qp=Qh.inject(CS),Dr=Qh}catch{}}za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;za.createPortal=function(n,a){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uy(a))throw Error(qe(200));return vS(n,a,null,l)};za.createRoot=function(n,a){if(!Uy(n))throw Error(qe(299));var l=!1,p="",_=kb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=Ny(n,1,!1,null,null,l,!1,p,_),n[ro]=a.current,fd(n.nodeType===8?n.parentNode:n),new Vy(a)};za.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(qe(188)):(n=Object.keys(n).join(","),Error(qe(268,n)));return n=nx(a),n=n===null?null:n.stateNode,n};za.flushSync=function(n){return Ws(n)};za.hydrate=function(n,a,l){if(!nf(a))throw Error(qe(200));return af(null,n,a,!0,l)};za.hydrateRoot=function(n,a,l){if(!Uy(n))throw Error(qe(405));var p=l!=null&&l.hydratedSources||null,_=!1,b="",v=kb;if(l!=null&&(l.unstable_strictMode===!0&&(_=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),a=Rb(a,null,n,1,l??null,_,!1,b,v),n[ro]=a.current,fd(n),p)for(n=0;n<p.length;n++)l=p[n],_=l._getVersion,_=_(l._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[l,_]:a.mutableSourceEagerHydrationData.push(l,_);return new tf(a)};za.render=function(n,a,l){if(!nf(a))throw Error(qe(200));return af(null,n,a,!1,l)};za.unmountComponentAtNode=function(n){if(!nf(n))throw Error(qe(40));return n._reactRootContainer?(Ws(function(){af(null,null,n,!1,function(){n._reactRootContainer=null,n[ro]=null})}),!0):!1};za.unstable_batchedUpdates=Ly;za.unstable_renderSubtreeIntoContainer=function(n,a,l,p){if(!nf(l))throw Error(qe(200));if(n==null||n._reactInternals===void 0)throw Error(qe(38));return af(n,a,l,!1,p)};za.version="18.3.1-next-f1338f8080-20240426";function Lb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lb)}catch(n){console.error(n)}}Lb(),Lv.exports=za;var Dd=Lv.exports;const AS=Wg(Dd),SS=Zg({__proto__:null,default:AS},[Dd]);var j1=Dd;Ym.createRoot=j1.createRoot,Ym.hydrateRoot=j1.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dn(){return Dn=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},Dn.apply(this,arguments)}var Kn;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Kn||(Kn={}));const V1="popstate";function ES(n){n===void 0&&(n={});function a(_,b){let{pathname:v="/",search:u="",hash:z=""}=co(_.location.hash.substr(1));return!v.startsWith("/")&&!v.startsWith(".")&&(v="/"+v),Cd("",{pathname:v,search:u,hash:z},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function l(_,b){let v=_.document.querySelector("base"),u="";if(v&&v.getAttribute("href")){let z=_.location.href,V=z.indexOf("#");u=V===-1?z:z.slice(0,V)}return u+"#"+(typeof b=="string"?b:Ks(b))}function p(_,b){Xs(_.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(b)+")")}return MS(a,l,p,n)}function Ut(n,a){if(n===!1||n===null||typeof n>"u")throw new Error(a)}function Xs(n,a){if(!n){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function TS(){return Math.random().toString(36).substr(2,8)}function U1(n,a){return{usr:n.state,key:n.key,idx:a}}function Cd(n,a,l,p){return l===void 0&&(l=null),Dn({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof a=="string"?co(a):a,{state:l,key:a&&a.key||p||TS()})}function Ks(n){let{pathname:a="/",search:l="",hash:p=""}=n;return l&&l!=="?"&&(a+=l.charAt(0)==="?"?l:"?"+l),p&&p!=="#"&&(a+=p.charAt(0)==="#"?p:"#"+p),a}function co(n){let a={};if(n){let l=n.indexOf("#");l>=0&&(a.hash=n.substr(l),n=n.substr(0,l));let p=n.indexOf("?");p>=0&&(a.search=n.substr(p),n=n.substr(0,p)),n&&(a.pathname=n)}return a}function MS(n,a,l,p){p===void 0&&(p={});let{window:_=document.defaultView,v5Compat:b=!1}=p,v=_.history,u=Kn.Pop,z=null,V=W();V==null&&(V=0,v.replaceState(Dn({},v.state,{idx:V}),""));function W(){return(v.state||{idx:null}).idx}function j(){u=Kn.Pop;let Ge=W(),re=Ge==null?null:Ge-V;V=Ge,z&&z({action:u,location:we.location,delta:re})}function N(Ge,re){u=Kn.Push;let ie=Cd(we.location,Ge,re);l&&l(ie,Ge),V=W()+1;let ce=U1(ie,V),Ee=we.createHref(ie);try{v.pushState(ce,"",Ee)}catch(ke){if(ke instanceof DOMException&&ke.name==="DataCloneError")throw ke;_.location.assign(Ee)}b&&z&&z({action:u,location:we.location,delta:1})}function Te(Ge,re){u=Kn.Replace;let ie=Cd(we.location,Ge,re);l&&l(ie,Ge),V=W();let ce=U1(ie,V),Ee=we.createHref(ie);v.replaceState(ce,"",Ee),b&&z&&z({action:u,location:we.location,delta:0})}function Ce(Ge){let re=_.location.origin!=="null"?_.location.origin:_.location.href,ie=typeof Ge=="string"?Ge:Ks(Ge);return ie=ie.replace(/ $/,"%20"),Ut(re,"No window.location.(origin|href) available to create URL for href: "+ie),new URL(ie,re)}let we={get action(){return u},get location(){return n(_,v)},listen(Ge){if(z)throw new Error("A history only accepts one active listener");return _.addEventListener(V1,j),z=Ge,()=>{_.removeEventListener(V1,j),z=null}},createHref(Ge){return a(_,Ge)},createURL:Ce,encodeLocation(Ge){let re=Ce(Ge);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:N,replace:Te,go(Ge){return v.go(Ge)}};return we}var cn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(cn||(cn={}));const IS=new Set(["lazy","caseSensitive","path","id","index","children"]);function PS(n){return n.index===!0}function Ad(n,a,l,p){return l===void 0&&(l=[]),p===void 0&&(p={}),n.map((_,b)=>{let v=[...l,String(b)],u=typeof _.id=="string"?_.id:v.join("-");if(Ut(_.index!==!0||!_.children,"Cannot specify children on an index route"),Ut(!p[u],'Found a route id collision on id "'+u+`".  Route id's must be globally unique within Data Router usages`),PS(_)){let z=Dn({},_,a(_),{id:u});return p[u]=z,z}else{let z=Dn({},_,a(_),{id:u,children:void 0});return p[u]=z,_.children&&(z.children=Ad(_.children,a,v,p)),z}})}function Os(n,a,l){return l===void 0&&(l="/"),hp(n,a,l,!1)}function hp(n,a,l,p){let _=typeof a=="string"?co(a):a,b=Sc(_.pathname||"/",l);if(b==null)return null;let v=Ob(n);zS(v);let u=null;for(let z=0;u==null&&z<v.length;++z){let V=qS(b);u=VS(v[z],V,p)}return u}function DS(n,a){let{route:l,pathname:p,params:_}=n;return{id:l.id,pathname:p,params:_,data:a[l.id],handle:l.handle}}function Ob(n,a,l,p){a===void 0&&(a=[]),l===void 0&&(l=[]),p===void 0&&(p="");let _=(b,v,u)=>{let z={relativePath:u===void 0?b.path||"":u,caseSensitive:b.caseSensitive===!0,childrenIndex:v,route:b};z.relativePath.startsWith("/")&&(Ut(z.relativePath.startsWith(p),'Absolute route path "'+z.relativePath+'" nested under path '+('"'+p+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),z.relativePath=z.relativePath.slice(p.length));let V=io([p,z.relativePath]),W=l.concat(z);b.children&&b.children.length>0&&(Ut(b.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+V+'".')),Ob(b.children,a,W,V)),!(b.path==null&&!b.index)&&a.push({path:V,score:NS(V,b.index),routesMeta:W})};return n.forEach((b,v)=>{var u;if(b.path===""||!((u=b.path)!=null&&u.includes("?")))_(b,v);else for(let z of Bb(b.path))_(b,v,z)}),a}function Bb(n){let a=n.split("/");if(a.length===0)return[];let[l,...p]=a,_=l.endsWith("?"),b=l.replace(/\?$/,"");if(p.length===0)return _?[b,""]:[b];let v=Bb(p.join("/")),u=[];return u.push(...v.map(z=>z===""?b:[b,z].join("/"))),_&&u.push(...v),u.map(z=>n.startsWith("/")&&z===""?"/":z)}function zS(n){n.sort((a,l)=>a.score!==l.score?l.score-a.score:jS(a.routesMeta.map(p=>p.childrenIndex),l.routesMeta.map(p=>p.childrenIndex)))}const RS=/^:[\w-]+$/,kS=3,LS=2,OS=1,BS=10,FS=-2,q1=n=>n==="*";function NS(n,a){let l=n.split("/"),p=l.length;return l.some(q1)&&(p+=FS),a&&(p+=LS),l.filter(_=>!q1(_)).reduce((_,b)=>_+(RS.test(b)?kS:b===""?OS:BS),p)}function jS(n,a){return n.length===a.length&&n.slice(0,-1).every((p,_)=>p===a[_])?n[n.length-1]-a[a.length-1]:0}function VS(n,a,l){l===void 0&&(l=!1);let{routesMeta:p}=n,_={},b="/",v=[];for(let u=0;u<p.length;++u){let z=p[u],V=u===p.length-1,W=b==="/"?a:a.slice(b.length)||"/",j=G1({path:z.relativePath,caseSensitive:z.caseSensitive,end:V},W),N=z.route;if(!j&&V&&l&&!p[p.length-1].route.index&&(j=G1({path:z.relativePath,caseSensitive:z.caseSensitive,end:!1},W)),!j)return null;Object.assign(_,j.params),v.push({params:_,pathname:io([b,j.pathname]),pathnameBase:$S(io([b,j.pathnameBase])),route:N}),j.pathnameBase!=="/"&&(b=io([b,j.pathnameBase]))}return v}function G1(n,a){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[l,p]=US(n.path,n.caseSensitive,n.end),_=a.match(l);if(!_)return null;let b=_[0],v=b.replace(/(.)\/+$/,"$1"),u=_.slice(1);return{params:p.reduce((V,W,j)=>{let{paramName:N,isOptional:Te}=W;if(N==="*"){let we=u[j]||"";v=b.slice(0,b.length-we.length).replace(/(.)\/+$/,"$1")}const Ce=u[j];return Te&&!Ce?V[N]=void 0:V[N]=(Ce||"").replace(/%2F/g,"/"),V},{}),pathname:b,pathnameBase:v,pattern:n}}function US(n,a,l){a===void 0&&(a=!1),l===void 0&&(l=!0),Xs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let p=[],_="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,u,z)=>(p.push({paramName:u,isOptional:z!=null}),z?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(p.push({paramName:"*"}),_+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?_+="\\/*$":n!==""&&n!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,a?void 0:"i"),p]}function qS(n){try{return n.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Xs(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),n}}function Sc(n,a){if(a==="/")return n;if(!n.toLowerCase().startsWith(a.toLowerCase()))return null;let l=a.endsWith("/")?a.length-1:a.length,p=n.charAt(l);return p&&p!=="/"?null:n.slice(l)||"/"}function GS(n,a){a===void 0&&(a="/");let{pathname:l,search:p="",hash:_=""}=typeof n=="string"?co(n):n;return{pathname:l?l.startsWith("/")?l:HS(l,a):a,search:ZS(p),hash:WS(_)}}function HS(n,a){let l=a.replace(/\/+$/,"").split("/");return n.split("/").forEach(_=>{_===".."?l.length>1&&l.pop():_!=="."&&l.push(_)}),l.length>1?l.join("/"):"/"}function Zm(n,a,l,p){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(p)+"].  Please separate it out to the ")+("`to."+l+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fb(n){return n.filter((a,l)=>l===0||a.route.path&&a.route.path.length>0)}function qy(n,a){let l=Fb(n);return a?l.map((p,_)=>_===l.length-1?p.pathname:p.pathnameBase):l.map(p=>p.pathnameBase)}function Gy(n,a,l,p){p===void 0&&(p=!1);let _;typeof n=="string"?_=co(n):(_=Dn({},n),Ut(!_.pathname||!_.pathname.includes("?"),Zm("?","pathname","search",_)),Ut(!_.pathname||!_.pathname.includes("#"),Zm("#","pathname","hash",_)),Ut(!_.search||!_.search.includes("#"),Zm("#","search","hash",_)));let b=n===""||_.pathname==="",v=b?"/":_.pathname,u;if(v==null)u=l;else{let j=a.length-1;if(!p&&v.startsWith("..")){let N=v.split("/");for(;N[0]==="..";)N.shift(),j-=1;_.pathname=N.join("/")}u=j>=0?a[j]:"/"}let z=GS(_,u),V=v&&v!=="/"&&v.endsWith("/"),W=(b||v===".")&&l.endsWith("/");return!z.pathname.endsWith("/")&&(V||W)&&(z.pathname+="/"),z}const io=n=>n.join("/").replace(/\/\/+/g,"/"),$S=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ZS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,WS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Bp{constructor(a,l,p,_){_===void 0&&(_=!1),this.status=a,this.statusText=l||"",this.internal=_,p instanceof Error?(this.data=p.toString(),this.error=p):this.data=p}}function rf(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Nb=["post","put","patch","delete"],XS=new Set(Nb),KS=["get",...Nb],JS=new Set(KS),YS=new Set([301,302,303,307,308]),QS=new Set([307,308]),Wm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},eE={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Hy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tE=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),jb="remix-router-transitions";function nE(n){const a=n.window?n.window:typeof window<"u"?window:void 0,l=typeof a<"u"&&typeof a.document<"u"&&typeof a.document.createElement<"u",p=!l;Ut(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let _;if(n.mapRouteProperties)_=n.mapRouteProperties;else if(n.detectErrorBoundary){let $=n.detectErrorBoundary;_=ee=>({hasErrorBoundary:$(ee)})}else _=tE;let b={},v=Ad(n.routes,_,void 0,b),u,z=n.basename||"/",V=n.unstable_dataStrategy||sE,W=n.unstable_patchRoutesOnNavigation,j=Dn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),N=null,Te=new Set,Ce=1e3,we=new Set,Ge=null,re=null,ie=null,ce=n.hydrationData!=null,Ee=Os(v,n.history.location,z),ke=null;if(Ee==null&&!W){let $=$i(404,{pathname:n.history.location.pathname}),{matches:ee,route:ue}=ev(v);Ee=ee,ke={[ue.id]:$}}Ee&&!n.hydrationData&&me(Ee,v,n.history.location.pathname).active&&(Ee=null);let Xe;if(Ee)if(Ee.some($=>$.route.lazy))Xe=!1;else if(!Ee.some($=>$.route.loader))Xe=!0;else if(j.v7_partialHydration){let $=n.hydrationData?n.hydrationData.loaderData:null,ee=n.hydrationData?n.hydrationData.errors:null,ue=xe=>xe.route.loader?typeof xe.route.loader=="function"&&xe.route.loader.hydrate===!0?!1:$&&$[xe.route.id]!==void 0||ee&&ee[xe.route.id]!==void 0:!0;if(ee){let xe=Ee.findIndex(Le=>ee[Le.route.id]!==void 0);Xe=Ee.slice(0,xe+1).every(ue)}else Xe=Ee.every(ue)}else Xe=n.hydrationData!=null;else if(Xe=!1,Ee=[],j.v7_partialHydration){let $=me(null,v,n.history.location.pathname);$.active&&$.matches&&(Ee=$.matches)}let Qe,pe={historyAction:n.history.action,location:n.history.location,matches:Ee,initialized:Xe,navigation:Wm,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ke,fetchers:new Map,blockers:new Map},pt=Kn.Pop,ct=!1,ot,Xt=!1,Ft=new Map,Ot=null,Ln=!1,$n=!1,Un=[],at=new Set,ut=new Map,bt=0,Rt=-1,Nt=new Map,Tn=new Set,yn=new Map,On=new Map,hn=new Set,rn=new Map,qn=new Map,Xa=new Map,la=!1;function Rr(){if(N=n.history.listen($=>{let{action:ee,location:ue,delta:xe}=$;if(la){la=!1;return}Xs(qn.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Le=Fi({currentLocation:pe.location,nextLocation:ue,historyAction:ee});if(Le&&xe!=null){la=!0,n.history.go(xe*-1),Bi(Le,{state:"blocked",location:ue,proceed(){Bi(Le,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),n.history.go(xe)},reset(){let ze=new Map(pe.blockers);ze.set(Le,Vu),pn({blockers:ze})}});return}return Oi(ee,ue)}),l){xE(a,Ft);let $=()=>bE(a,Ft);a.addEventListener("pagehide",$),Ot=()=>a.removeEventListener("pagehide",$)}return pe.initialized||Oi(Kn.Pop,pe.location,{initialHydration:!0}),Qe}function ca(){N&&N(),Ot&&Ot(),Te.clear(),ot&&ot.abort(),pe.fetchers.forEach(($,ee)=>Ue(ee)),pe.blockers.forEach(($,ee)=>Yi(ee))}function ka($){return Te.add($),()=>Te.delete($)}function pn($,ee){ee===void 0&&(ee={}),pe=Dn({},pe,$);let ue=[],xe=[];j.v7_fetcherPersist&&pe.fetchers.forEach((Le,ze)=>{Le.state==="idle"&&(hn.has(ze)?xe.push(ze):ue.push(ze))}),[...Te].forEach(Le=>Le(pe,{deletedFetchers:xe,unstable_viewTransitionOpts:ee.viewTransitionOpts,unstable_flushSync:ee.flushSync===!0})),j.v7_fetcherPersist&&(ue.forEach(Le=>pe.fetchers.delete(Le)),xe.forEach(Le=>Ue(Le)))}function Li($,ee,ue){var xe,Le;let{flushSync:ze}=ue===void 0?{}:ue,nt=pe.actionData!=null&&pe.navigation.formMethod!=null&&sr(pe.navigation.formMethod)&&pe.navigation.state==="loading"&&((xe=$.state)==null?void 0:xe._isRedirect)!==!0,Oe;ee.actionData?Object.keys(ee.actionData).length>0?Oe=ee.actionData:Oe=null:nt?Oe=pe.actionData:Oe=null;let gt=ee.loaderData?Y1(pe.loaderData,ee.loaderData,ee.matches||[],ee.errors):pe.loaderData,Ve=pe.blockers;Ve.size>0&&(Ve=new Map(Ve),Ve.forEach((Tt,zt)=>Ve.set(zt,Vu)));let st=ct===!0||pe.navigation.formMethod!=null&&sr(pe.navigation.formMethod)&&((Le=$.state)==null?void 0:Le._isRedirect)!==!0;u&&(v=u,u=void 0),Ln||pt===Kn.Pop||(pt===Kn.Push?n.history.push($,$.state):pt===Kn.Replace&&n.history.replace($,$.state));let xt;if(pt===Kn.Pop){let Tt=Ft.get(pe.location.pathname);Tt&&Tt.has($.pathname)?xt={currentLocation:pe.location,nextLocation:$}:Ft.has($.pathname)&&(xt={currentLocation:$,nextLocation:pe.location})}else if(Xt){let Tt=Ft.get(pe.location.pathname);Tt?Tt.add($.pathname):(Tt=new Set([$.pathname]),Ft.set(pe.location.pathname,Tt)),xt={currentLocation:pe.location,nextLocation:$}}pn(Dn({},ee,{actionData:Oe,loaderData:gt,historyAction:pt,location:$,initialized:!0,navigation:Wm,revalidation:"idle",restoreScrollPosition:de($,ee.matches||pe.matches),preventScrollReset:st,blockers:Ve}),{viewTransitionOpts:xt,flushSync:ze===!0}),pt=Kn.Pop,ct=!1,Xt=!1,Ln=!1,$n=!1,Un=[]}async function be($,ee){if(typeof $=="number"){n.history.go($);return}let ue=Hg(pe.location,pe.matches,z,j.v7_prependBasename,$,j.v7_relativeSplatPath,ee==null?void 0:ee.fromRouteId,ee==null?void 0:ee.relative),{path:xe,submission:Le,error:ze}=H1(j.v7_normalizeFormMethod,!1,ue,ee),nt=pe.location,Oe=Cd(pe.location,xe,ee&&ee.state);Oe=Dn({},Oe,n.history.encodeLocation(Oe));let gt=ee&&ee.replace!=null?ee.replace:void 0,Ve=Kn.Push;gt===!0?Ve=Kn.Replace:gt===!1||Le!=null&&sr(Le.formMethod)&&Le.formAction===pe.location.pathname+pe.location.search&&(Ve=Kn.Replace);let st=ee&&"preventScrollReset"in ee?ee.preventScrollReset===!0:void 0,xt=(ee&&ee.unstable_flushSync)===!0,Tt=Fi({currentLocation:nt,nextLocation:Oe,historyAction:Ve});if(Tt){Bi(Tt,{state:"blocked",location:Oe,proceed(){Bi(Tt,{state:"proceeding",proceed:void 0,reset:void 0,location:Oe}),be($,ee)},reset(){let zt=new Map(pe.blockers);zt.set(Tt,Vu),pn({blockers:zt})}});return}return await Oi(Ve,Oe,{submission:Le,pendingError:ze,preventScrollReset:st,replace:ee&&ee.replace,enableViewTransition:ee&&ee.unstable_viewTransition,flushSync:xt})}function Ka(){if(wi(),pn({revalidation:"loading"}),pe.navigation.state!=="submitting"){if(pe.navigation.state==="idle"){Oi(pe.historyAction,pe.location,{startUninterruptedRevalidation:!0});return}Oi(pt||pe.historyAction,pe.navigation.location,{overrideNavigation:pe.navigation})}}async function Oi($,ee,ue){ot&&ot.abort(),ot=null,pt=$,Ln=(ue&&ue.startUninterruptedRevalidation)===!0,se(pe.location,pe.matches),ct=(ue&&ue.preventScrollReset)===!0,Xt=(ue&&ue.enableViewTransition)===!0;let xe=u||v,Le=ue&&ue.overrideNavigation,ze=Os(xe,ee,z),nt=(ue&&ue.flushSync)===!0,Oe=me(ze,xe,ee.pathname);if(Oe.active&&Oe.matches&&(ze=Oe.matches),!ze){let{error:Mt,notFoundMatches:_n,route:St}=Q(ee.pathname);Li(ee,{matches:_n,loaderData:{},errors:{[St.id]:Mt}},{flushSync:nt});return}if(pe.initialized&&!$n&&pE(pe.location,ee)&&!(ue&&ue.submission&&sr(ue.submission.formMethod))){Li(ee,{matches:ze},{flushSync:nt});return}ot=new AbortController;let gt=Zl(n.history,ee,ot.signal,ue&&ue.submission),Ve;if(ue&&ue.pendingError)Ve=[sc(ze).route.id,{type:cn.error,error:ue.pendingError}];else if(ue&&ue.submission&&sr(ue.submission.formMethod)){let Mt=await qt(gt,ee,ue.submission,ze,Oe.active,{replace:ue.replace,flushSync:nt});if(Mt.shortCircuited)return;if(Mt.pendingActionResult){let[_n,St]=Mt.pendingActionResult;if(Ma(St)&&rf(St.error)&&St.error.status===404){ot=null,Li(ee,{matches:Mt.matches,loaderData:{},errors:{[_n]:St.error}});return}}ze=Mt.matches||ze,Ve=Mt.pendingActionResult,Le=Xm(ee,ue.submission),nt=!1,Oe.active=!1,gt=Zl(n.history,gt.url,gt.signal)}let{shortCircuited:st,matches:xt,loaderData:Tt,errors:zt}=await un(gt,ee,ze,Oe.active,Le,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,nt,Ve);st||(ot=null,Li(ee,Dn({matches:xt||ze},Q1(Ve),{loaderData:Tt,errors:zt})))}async function qt($,ee,ue,xe,Le,ze){ze===void 0&&(ze={}),wi();let nt=_E(ee,ue);if(pn({navigation:nt},{flushSync:ze.flushSync===!0}),Le){let Ve=await ae(xe,ee.pathname,$.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){let{boundaryId:st,error:xt}=k(ee.pathname,Ve);return{matches:Ve.partialMatches,pendingActionResult:[st,{type:cn.error,error:xt}]}}else if(Ve.matches)xe=Ve.matches;else{let{notFoundMatches:st,error:xt,route:Tt}=Q(ee.pathname);return{matches:st,pendingActionResult:[Tt.id,{type:cn.error,error:xt}]}}}let Oe,gt=Ku(xe,ee);if(!gt.route.action&&!gt.route.lazy)Oe={type:cn.error,error:$i(405,{method:$.method,pathname:ee.pathname,routeId:gt.route.id})};else if(Oe=(await ha("action",$,[gt],xe))[0],$.signal.aborted)return{shortCircuited:!0};if(Vs(Oe)){let Ve;return ze&&ze.replace!=null?Ve=ze.replace:Ve=X1(Oe.response.headers.get("Location"),new URL($.url),z)===pe.location.pathname+pe.location.search,await da($,Oe,{submission:ue,replace:Ve}),{shortCircuited:!0}}if(js(Oe))throw $i(400,{type:"defer-action"});if(Ma(Oe)){let Ve=sc(xe,gt.route.id);return(ze&&ze.replace)!==!0&&(pt=Kn.Push),{matches:xe,pendingActionResult:[Ve.route.id,Oe]}}return{matches:xe,pendingActionResult:[gt.route.id,Oe]}}async function un($,ee,ue,xe,Le,ze,nt,Oe,gt,Ve,st){let xt=Le||Xm(ee,ze),Tt=ze||nt||av(xt),zt=!Ln&&(!j.v7_partialHydration||!gt);if(xe){if(zt){let Zt=pr(st);pn(Dn({navigation:xt},Zt!==void 0?{actionData:Zt}:{}),{flushSync:Ve})}let _t=await ae(ue,ee.pathname,$.signal);if(_t.type==="aborted")return{shortCircuited:!0};if(_t.type==="error"){let{boundaryId:Zt,error:In}=k(ee.pathname,_t);return{matches:_t.partialMatches,loaderData:{},errors:{[Zt]:In}}}else if(_t.matches)ue=_t.matches;else{let{error:Zt,notFoundMatches:In,route:It}=Q(ee.pathname);return{matches:In,loaderData:{},errors:{[It.id]:Zt}}}}let Mt=u||v,[_n,St]=$1(n.history,pe,ue,Tt,ee,j.v7_partialHydration&&gt===!0,j.v7_skipActionErrorRevalidation,$n,Un,at,hn,yn,Tn,Mt,z,st);if(L(_t=>!(ue&&ue.some(Zt=>Zt.route.id===_t))||_n&&_n.some(Zt=>Zt.route.id===_t)),Rt=++bt,_n.length===0&&St.length===0){let _t=Ci();return Li(ee,Dn({matches:ue,loaderData:{},errors:st&&Ma(st[1])?{[st[0]]:st[1].error}:null},Q1(st),_t?{fetchers:new Map(pe.fetchers)}:{}),{flushSync:Ve}),{shortCircuited:!0}}if(zt){let _t={};if(!xe){_t.navigation=xt;let Zt=pr(st);Zt!==void 0&&(_t.actionData=Zt)}St.length>0&&(_t.fetchers=La(St)),pn(_t,{flushSync:Ve})}St.forEach(_t=>{ut.has(_t.key)&&yt(_t.key),_t.controller&&ut.set(_t.key,_t.controller)});let Ja=()=>St.forEach(_t=>yt(_t.key));ot&&ot.signal.addEventListener("abort",Ja);let{loaderResults:Qi,fetcherResults:Fn}=await Ne(pe.matches,ue,_n,St,$);if($.signal.aborted)return{shortCircuited:!0};ot&&ot.signal.removeEventListener("abort",Ja),St.forEach(_t=>ut.delete(_t.key));let Nn=tv([...Qi,...Fn]);if(Nn){if(Nn.idx>=_n.length){let _t=St[Nn.idx-_n.length].key;Tn.add(_t)}return await da($,Nn.result,{replace:Oe}),{shortCircuited:!0}}let{loaderData:mr,errors:mn}=J1(pe,ue,_n,Qi,st,St,Fn,rn);rn.forEach((_t,Zt)=>{_t.subscribe(In=>{(In||_t.done)&&rn.delete(Zt)})}),j.v7_partialHydration&&gt&&pe.errors&&Object.entries(pe.errors).filter(_t=>{let[Zt]=_t;return!_n.some(In=>In.route.id===Zt)}).forEach(_t=>{let[Zt,In]=_t;mn=Object.assign(mn||{},{[Zt]:In})});let Mn=Ci(),Ya=At(Rt),Oa=Mn||Ya||St.length>0;return Dn({matches:ue,loaderData:mr,errors:mn},Oa?{fetchers:new Map(pe.fetchers)}:{})}function pr($){if($&&!Ma($[1]))return{[$[0]]:$[1].data};if(pe.actionData)return Object.keys(pe.actionData).length===0?null:pe.actionData}function La($){return $.forEach(ee=>{let ue=pe.fetchers.get(ee.key),xe=Uu(void 0,ue?ue.data:void 0);pe.fetchers.set(ee.key,xe)}),new Map(pe.fetchers)}function ua($,ee,ue,xe){if(p)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ut.has($)&&yt($);let Le=(xe&&xe.unstable_flushSync)===!0,ze=u||v,nt=Hg(pe.location,pe.matches,z,j.v7_prependBasename,ue,j.v7_relativeSplatPath,ee,xe==null?void 0:xe.relative),Oe=Os(ze,nt,z),gt=me(Oe,ze,nt);if(gt.active&&gt.matches&&(Oe=gt.matches),!Oe){Bn($,ee,$i(404,{pathname:nt}),{flushSync:Le});return}let{path:Ve,submission:st,error:xt}=H1(j.v7_normalizeFormMethod,!0,nt,xe);if(xt){Bn($,ee,xt,{flushSync:Le});return}let Tt=Ku(Oe,Ve);if(ct=(xe&&xe.preventScrollReset)===!0,st&&sr(st.formMethod)){fr($,ee,Ve,Tt,Oe,gt.active,Le,st);return}yn.set($,{routeId:ee,path:Ve}),bi($,ee,Ve,Tt,Oe,gt.active,Le,st)}async function fr($,ee,ue,xe,Le,ze,nt,Oe){wi(),yn.delete($);function gt(It){if(!It.route.action&&!It.route.lazy){let Ai=$i(405,{method:Oe.formMethod,pathname:ue,routeId:ee});return Bn($,ee,Ai,{flushSync:nt}),!0}return!1}if(!ze&&gt(xe))return;let Ve=pe.fetchers.get($);fn($,vE(Oe,Ve),{flushSync:nt});let st=new AbortController,xt=Zl(n.history,ue,st.signal,Oe);if(ze){let It=await ae(Le,ue,xt.signal);if(It.type==="aborted")return;if(It.type==="error"){let{error:Ai}=k(ue,It);Bn($,ee,Ai,{flushSync:nt});return}else if(It.matches){if(Le=It.matches,xe=Ku(Le,ue),gt(xe))return}else{Bn($,ee,$i(404,{pathname:ue}),{flushSync:nt});return}}ut.set($,st);let Tt=bt,Mt=(await ha("action",xt,[xe],Le))[0];if(xt.signal.aborted){ut.get($)===st&&ut.delete($);return}if(j.v7_fetcherPersist&&hn.has($)){if(Vs(Mt)||Ma(Mt)){fn($,Ro(void 0));return}}else{if(Vs(Mt))if(ut.delete($),Rt>Tt){fn($,Ro(void 0));return}else return Tn.add($),fn($,Uu(Oe)),da(xt,Mt,{fetcherSubmission:Oe});if(Ma(Mt)){Bn($,ee,Mt.error);return}}if(js(Mt))throw $i(400,{type:"defer-action"});let _n=pe.navigation.location||pe.location,St=Zl(n.history,_n,st.signal),Ja=u||v,Qi=pe.navigation.state!=="idle"?Os(Ja,pe.navigation.location,z):pe.matches;Ut(Qi,"Didn't find any matches after fetcher action");let Fn=++bt;Nt.set($,Fn);let Nn=Uu(Oe,Mt.data);pe.fetchers.set($,Nn);let[mr,mn]=$1(n.history,pe,Qi,Oe,_n,!1,j.v7_skipActionErrorRevalidation,$n,Un,at,hn,yn,Tn,Ja,z,[xe.route.id,Mt]);mn.filter(It=>It.key!==$).forEach(It=>{let Ai=It.key,pi=pe.fetchers.get(Ai),kr=Uu(void 0,pi?pi.data:void 0);pe.fetchers.set(Ai,kr),ut.has(Ai)&&yt(Ai),It.controller&&ut.set(Ai,It.controller)}),pn({fetchers:new Map(pe.fetchers)});let Mn=()=>mn.forEach(It=>yt(It.key));st.signal.addEventListener("abort",Mn);let{loaderResults:Ya,fetcherResults:Oa}=await Ne(pe.matches,Qi,mr,mn,St);if(st.signal.aborted)return;st.signal.removeEventListener("abort",Mn),Nt.delete($),ut.delete($),mn.forEach(It=>ut.delete(It.key));let _t=tv([...Ya,...Oa]);if(_t){if(_t.idx>=mr.length){let It=mn[_t.idx-mr.length].key;Tn.add(It)}return da(St,_t.result)}let{loaderData:Zt,errors:In}=J1(pe,pe.matches,mr,Ya,void 0,mn,Oa,rn);if(pe.fetchers.has($)){let It=Ro(Mt.data);pe.fetchers.set($,It)}At(Fn),pe.navigation.state==="loading"&&Fn>Rt?(Ut(pt,"Expected pending action"),ot&&ot.abort(),Li(pe.navigation.location,{matches:Qi,loaderData:Zt,errors:In,fetchers:new Map(pe.fetchers)})):(pn({errors:In,loaderData:Y1(pe.loaderData,Zt,Qi,In),fetchers:new Map(pe.fetchers)}),$n=!1)}async function bi($,ee,ue,xe,Le,ze,nt,Oe){let gt=pe.fetchers.get($);fn($,Uu(Oe,gt?gt.data:void 0),{flushSync:nt});let Ve=new AbortController,st=Zl(n.history,ue,Ve.signal);if(ze){let Mt=await ae(Le,ue,st.signal);if(Mt.type==="aborted")return;if(Mt.type==="error"){let{error:_n}=k(ue,Mt);Bn($,ee,_n,{flushSync:nt});return}else if(Mt.matches)Le=Mt.matches,xe=Ku(Le,ue);else{Bn($,ee,$i(404,{pathname:ue}),{flushSync:nt});return}}ut.set($,Ve);let xt=bt,zt=(await ha("loader",st,[xe],Le))[0];if(js(zt)&&(zt=await Hb(zt,st.signal,!0)||zt),ut.get($)===Ve&&ut.delete($),!st.signal.aborted){if(hn.has($)){fn($,Ro(void 0));return}if(Vs(zt))if(Rt>xt){fn($,Ro(void 0));return}else{Tn.add($),await da(st,zt);return}if(Ma(zt)){Bn($,ee,zt.error);return}Ut(!js(zt),"Unhandled fetcher deferred data"),fn($,Ro(zt.data))}}async function da($,ee,ue){let{submission:xe,fetcherSubmission:Le,replace:ze}=ue===void 0?{}:ue;ee.response.headers.has("X-Remix-Revalidate")&&($n=!0);let nt=ee.response.headers.get("Location");Ut(nt,"Expected a Location header on the redirect Response"),nt=X1(nt,new URL($.url),z);let Oe=Cd(pe.location,nt,{_isRedirect:!0});if(l){let zt=!1;if(ee.response.headers.has("X-Remix-Reload-Document"))zt=!0;else if(Hy.test(nt)){const Mt=n.history.createURL(nt);zt=Mt.origin!==a.location.origin||Sc(Mt.pathname,z)==null}if(zt){ze?a.location.replace(nt):a.location.assign(nt);return}}ot=null;let gt=ze===!0||ee.response.headers.has("X-Remix-Replace")?Kn.Replace:Kn.Push,{formMethod:Ve,formAction:st,formEncType:xt}=pe.navigation;!xe&&!Le&&Ve&&st&&xt&&(xe=av(pe.navigation));let Tt=xe||Le;if(QS.has(ee.response.status)&&Tt&&sr(Tt.formMethod))await Oi(gt,Oe,{submission:Dn({},Tt,{formAction:nt}),preventScrollReset:ct});else{let zt=Xm(Oe,xe);await Oi(gt,Oe,{overrideNavigation:zt,fetcherSubmission:Le,preventScrollReset:ct})}}async function ha($,ee,ue,xe){try{let Le=await lE(V,$,ee,ue,xe,b,_);return await Promise.all(Le.map((ze,nt)=>{if(mE(ze)){let Oe=ze.result;return{type:cn.redirect,response:dE(Oe,ee,ue[nt].route.id,xe,z,j.v7_relativeSplatPath)}}return uE(ze)}))}catch(Le){return ue.map(()=>({type:cn.error,error:Le}))}}async function Ne($,ee,ue,xe,Le){let[ze,...nt]=await Promise.all([ue.length?ha("loader",Le,ue,ee):[],...xe.map(Oe=>{if(Oe.matches&&Oe.match&&Oe.controller){let gt=Zl(n.history,Oe.path,Oe.controller.signal);return ha("loader",gt,[Oe.match],Oe.matches).then(Ve=>Ve[0])}else return Promise.resolve({type:cn.error,error:$i(404,{pathname:Oe.path})})})]);return await Promise.all([iv($,ue,ze,ze.map(()=>Le.signal),!1,pe.loaderData),iv($,xe.map(Oe=>Oe.match),nt,xe.map(Oe=>Oe.controller?Oe.controller.signal:null),!0)]),{loaderResults:ze,fetcherResults:nt}}function wi(){$n=!0,Un.push(...L()),yn.forEach(($,ee)=>{ut.has(ee)&&(at.add(ee),yt(ee))})}function fn($,ee,ue){ue===void 0&&(ue={}),pe.fetchers.set($,ee),pn({fetchers:new Map(pe.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Bn($,ee,ue,xe){xe===void 0&&(xe={});let Le=sc(pe.matches,ee);Ue($),pn({errors:{[Le.route.id]:ue},fetchers:new Map(pe.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function pa($){return j.v7_fetcherPersist&&(On.set($,(On.get($)||0)+1),hn.has($)&&hn.delete($)),pe.fetchers.get($)||eE}function Ue($){let ee=pe.fetchers.get($);ut.has($)&&!(ee&&ee.state==="loading"&&Nt.has($))&&yt($),yn.delete($),Nt.delete($),Tn.delete($),hn.delete($),at.delete($),pe.fetchers.delete($)}function Pt($){if(j.v7_fetcherPersist){let ee=(On.get($)||0)-1;ee<=0?(On.delete($),hn.add($)):On.set($,ee)}else Ue($);pn({fetchers:new Map(pe.fetchers)})}function yt($){let ee=ut.get($);Ut(ee,"Expected fetch controller: "+$),ee.abort(),ut.delete($)}function Yn($){for(let ee of $){let ue=pa(ee),xe=Ro(ue.data);pe.fetchers.set(ee,xe)}}function Ci(){let $=[],ee=!1;for(let ue of Tn){let xe=pe.fetchers.get(ue);Ut(xe,"Expected fetcher: "+ue),xe.state==="loading"&&(Tn.delete(ue),$.push(ue),ee=!0)}return Yn($),ee}function At($){let ee=[];for(let[ue,xe]of Nt)if(xe<$){let Le=pe.fetchers.get(ue);Ut(Le,"Expected fetcher: "+ue),Le.state==="loading"&&(yt(ue),Nt.delete(ue),ee.push(ue))}return Yn(ee),ee.length>0}function Ji($,ee){let ue=pe.blockers.get($)||Vu;return qn.get($)!==ee&&qn.set($,ee),ue}function Yi($){pe.blockers.delete($),qn.delete($)}function Bi($,ee){let ue=pe.blockers.get($)||Vu;Ut(ue.state==="unblocked"&&ee.state==="blocked"||ue.state==="blocked"&&ee.state==="blocked"||ue.state==="blocked"&&ee.state==="proceeding"||ue.state==="blocked"&&ee.state==="unblocked"||ue.state==="proceeding"&&ee.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+ee.state);let xe=new Map(pe.blockers);xe.set($,ee),pn({blockers:xe})}function Fi($){let{currentLocation:ee,nextLocation:ue,historyAction:xe}=$;if(qn.size===0)return;qn.size>1&&Xs(!1,"A router only supports one blocker at a time");let Le=Array.from(qn.entries()),[ze,nt]=Le[Le.length-1],Oe=pe.blockers.get(ze);if(!(Oe&&Oe.state==="proceeding")&&nt({currentLocation:ee,nextLocation:ue,historyAction:xe}))return ze}function Q($){let ee=$i(404,{pathname:$}),ue=u||v,{matches:xe,route:Le}=ev(ue);return L(),{notFoundMatches:xe,route:Le,error:ee}}function k($,ee){return{boundaryId:sc(ee.partialMatches).route.id,error:$i(400,{type:"route-discovery",pathname:$,message:ee.error!=null&&"message"in ee.error?ee.error:String(ee.error)})}}function L($){let ee=[];return rn.forEach((ue,xe)=>{(!$||$(xe))&&(ue.cancel(),ee.push(xe),rn.delete(xe))}),ee}function q($,ee,ue){if(Ge=$,ie=ee,re=ue||null,!ce&&pe.navigation===Wm){ce=!0;let xe=de(pe.location,pe.matches);xe!=null&&pn({restoreScrollPosition:xe})}return()=>{Ge=null,ie=null,re=null}}function X($,ee){return re&&re($,ee.map(xe=>DS(xe,pe.loaderData)))||$.key}function se($,ee){if(Ge&&ie){let ue=X($,ee);Ge[ue]=ie()}}function de($,ee){if(Ge){let ue=X($,ee),xe=Ge[ue];if(typeof xe=="number")return xe}return null}function me($,ee,ue){if(W){if(we.has(ue))return{active:!1,matches:$};if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:hp(ee,ue,z,!0)}}else return{active:!0,matches:hp(ee,ue,z,!0)||[]}}return{active:!1,matches:null}}async function ae($,ee,ue){let xe=$;for(;;){let Le=u==null,ze=u||v;try{await oE(W,ee,xe,ze,b,_,Xa,ue)}catch(gt){return{type:"error",error:gt,partialMatches:xe}}finally{Le&&(v=[...v])}if(ue.aborted)return{type:"aborted"};let nt=Os(ze,ee,z);if(nt)return Ae(ee,we),{type:"success",matches:nt};let Oe=hp(ze,ee,z,!0);if(!Oe||xe.length===Oe.length&&xe.every((gt,Ve)=>gt.route.id===Oe[Ve].route.id))return Ae(ee,we),{type:"success",matches:null};xe=Oe}}function Ae($,ee){if(ee.size>=Ce){let ue=ee.values().next().value;ee.delete(ue)}ee.add($)}function De($){b={},u=Ad($,_,void 0,b)}function ve($,ee){let ue=u==null;Ub($,ee,u||v,b,_),ue&&(v=[...v],pn({}))}return Qe={get basename(){return z},get future(){return j},get state(){return pe},get routes(){return v},get window(){return a},initialize:Rr,subscribe:ka,enableScrollRestoration:q,navigate:be,fetch:ua,revalidate:Ka,createHref:$=>n.history.createHref($),encodeLocation:$=>n.history.encodeLocation($),getFetcher:pa,deleteFetcher:Pt,dispose:ca,getBlocker:Ji,deleteBlocker:Yi,patchRoutes:ve,_internalFetchControllers:ut,_internalActiveDeferreds:rn,_internalSetRoutes:De},Qe}function iE(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Hg(n,a,l,p,_,b,v,u){let z,V;if(v){z=[];for(let j of a)if(z.push(j),j.route.id===v){V=j;break}}else z=a,V=a[a.length-1];let W=Gy(_||".",qy(z,b),Sc(n.pathname,l)||n.pathname,u==="path");return _==null&&(W.search=n.search,W.hash=n.hash),(_==null||_===""||_===".")&&V&&V.route.index&&!$y(W.search)&&(W.search=W.search?W.search.replace(/^\?/,"?index&"):"?index"),p&&l!=="/"&&(W.pathname=W.pathname==="/"?l:io([l,W.pathname])),Ks(W)}function H1(n,a,l,p){if(!p||!iE(p))return{path:l};if(p.formMethod&&!yE(p.formMethod))return{path:l,error:$i(405,{method:p.formMethod})};let _=()=>({path:l,error:$i(400,{type:"invalid-body"})}),b=p.formMethod||"get",v=n?b.toUpperCase():b.toLowerCase(),u=qb(l);if(p.body!==void 0){if(p.formEncType==="text/plain"){if(!sr(v))return _();let N=typeof p.body=="string"?p.body:p.body instanceof FormData||p.body instanceof URLSearchParams?Array.from(p.body.entries()).reduce((Te,Ce)=>{let[we,Ge]=Ce;return""+Te+we+"="+Ge+`
`},""):String(p.body);return{path:l,submission:{formMethod:v,formAction:u,formEncType:p.formEncType,formData:void 0,json:void 0,text:N}}}else if(p.formEncType==="application/json"){if(!sr(v))return _();try{let N=typeof p.body=="string"?JSON.parse(p.body):p.body;return{path:l,submission:{formMethod:v,formAction:u,formEncType:p.formEncType,formData:void 0,json:N,text:void 0}}}catch{return _()}}}Ut(typeof FormData=="function","FormData is not available in this environment");let z,V;if(p.formData)z=$g(p.formData),V=p.formData;else if(p.body instanceof FormData)z=$g(p.body),V=p.body;else if(p.body instanceof URLSearchParams)z=p.body,V=K1(z);else if(p.body==null)z=new URLSearchParams,V=new FormData;else try{z=new URLSearchParams(p.body),V=K1(z)}catch{return _()}let W={formMethod:v,formAction:u,formEncType:p&&p.formEncType||"application/x-www-form-urlencoded",formData:V,json:void 0,text:void 0};if(sr(W.formMethod))return{path:l,submission:W};let j=co(l);return a&&j.search&&$y(j.search)&&z.append("index",""),j.search="?"+z,{path:Ks(j),submission:W}}function aE(n,a){let l=n;if(a){let p=n.findIndex(_=>_.route.id===a);p>=0&&(l=n.slice(0,p))}return l}function $1(n,a,l,p,_,b,v,u,z,V,W,j,N,Te,Ce,we){let Ge=we?Ma(we[1])?we[1].error:we[1].data:void 0,re=n.createURL(a.location),ie=n.createURL(_),ce=we&&Ma(we[1])?we[0]:void 0,Ee=ce?aE(l,ce):l,ke=we?we[1].statusCode:void 0,Xe=v&&ke&&ke>=400,Qe=Ee.filter((pt,ct)=>{let{route:ot}=pt;if(ot.lazy)return!0;if(ot.loader==null)return!1;if(b)return typeof ot.loader!="function"||ot.loader.hydrate?!0:a.loaderData[ot.id]===void 0&&(!a.errors||a.errors[ot.id]===void 0);if(rE(a.loaderData,a.matches[ct],pt)||z.some(Ot=>Ot===pt.route.id))return!0;let Xt=a.matches[ct],Ft=pt;return Z1(pt,Dn({currentUrl:re,currentParams:Xt.params,nextUrl:ie,nextParams:Ft.params},p,{actionResult:Ge,actionStatus:ke,defaultShouldRevalidate:Xe?!1:u||re.pathname+re.search===ie.pathname+ie.search||re.search!==ie.search||Vb(Xt,Ft)}))}),pe=[];return j.forEach((pt,ct)=>{if(b||!l.some(Ln=>Ln.route.id===pt.routeId)||W.has(ct))return;let ot=Os(Te,pt.path,Ce);if(!ot){pe.push({key:ct,routeId:pt.routeId,path:pt.path,matches:null,match:null,controller:null});return}let Xt=a.fetchers.get(ct),Ft=Ku(ot,pt.path),Ot=!1;N.has(ct)?Ot=!1:V.has(ct)?(V.delete(ct),Ot=!0):Xt&&Xt.state!=="idle"&&Xt.data===void 0?Ot=u:Ot=Z1(Ft,Dn({currentUrl:re,currentParams:a.matches[a.matches.length-1].params,nextUrl:ie,nextParams:l[l.length-1].params},p,{actionResult:Ge,actionStatus:ke,defaultShouldRevalidate:Xe?!1:u})),Ot&&pe.push({key:ct,routeId:pt.routeId,path:pt.path,matches:ot,match:Ft,controller:new AbortController})}),[Qe,pe]}function rE(n,a,l){let p=!a||l.route.id!==a.route.id,_=n[l.route.id]===void 0;return p||_}function Vb(n,a){let l=n.route.path;return n.pathname!==a.pathname||l!=null&&l.endsWith("*")&&n.params["*"]!==a.params["*"]}function Z1(n,a){if(n.route.shouldRevalidate){let l=n.route.shouldRevalidate(a);if(typeof l=="boolean")return l}return a.defaultShouldRevalidate}async function oE(n,a,l,p,_,b,v,u){let z=[a,...l.map(V=>V.route.id)].join("-");try{let V=v.get(z);V||(V=n({path:a,matches:l,patch:(W,j)=>{u.aborted||Ub(W,j,p,_,b)}}),v.set(z,V)),V&&fE(V)&&await V}finally{v.delete(z)}}function Ub(n,a,l,p,_){if(n){var b;let v=p[n];Ut(v,"No route found to patch children into: routeId = "+n);let u=Ad(a,_,[n,"patch",String(((b=v.children)==null?void 0:b.length)||"0")],p);v.children?v.children.push(...u):v.children=u}else{let v=Ad(a,_,["patch",String(l.length||"0")],p);l.push(...v)}}async function W1(n,a,l){if(!n.lazy)return;let p=await n.lazy();if(!n.lazy)return;let _=l[n.id];Ut(_,"No route found in manifest");let b={};for(let v in p){let z=_[v]!==void 0&&v!=="hasErrorBoundary";Xs(!z,'Route "'+_.id+'" has a static property "'+v+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+v+'" will be ignored.')),!z&&!IS.has(v)&&(b[v]=p[v])}Object.assign(_,b),Object.assign(_,Dn({},a(_),{lazy:void 0}))}function sE(n){return Promise.all(n.matches.map(a=>a.resolve()))}async function lE(n,a,l,p,_,b,v,u){let z=p.reduce((j,N)=>j.add(N.route.id),new Set),V=new Set,W=await n({matches:_.map(j=>{let N=z.has(j.route.id);return Dn({},j,{shouldLoad:N,resolve:Ce=>(V.add(j.route.id),N?cE(a,l,j,b,v,Ce,u):Promise.resolve({type:cn.data,result:void 0}))})}),request:l,params:_[0].params,context:u});return _.forEach(j=>Ut(V.has(j.route.id),'`match.resolve()` was not called for route id "'+j.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),W.filter((j,N)=>z.has(_[N].route.id))}async function cE(n,a,l,p,_,b,v){let u,z,V=W=>{let j,N=new Promise((we,Ge)=>j=Ge);z=()=>j(),a.signal.addEventListener("abort",z);let Te=we=>typeof W!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+l.route.id+"]"))):W({request:a,params:l.params,context:v},...we!==void 0?[we]:[]),Ce;return b?Ce=b(we=>Te(we)):Ce=(async()=>{try{return{type:"data",result:await Te()}}catch(we){return{type:"error",result:we}}})(),Promise.race([Ce,N])};try{let W=l.route[n];if(l.route.lazy)if(W){let j,[N]=await Promise.all([V(W).catch(Te=>{j=Te}),W1(l.route,_,p)]);if(j!==void 0)throw j;u=N}else if(await W1(l.route,_,p),W=l.route[n],W)u=await V(W);else if(n==="action"){let j=new URL(a.url),N=j.pathname+j.search;throw $i(405,{method:a.method,pathname:N,routeId:l.route.id})}else return{type:cn.data,result:void 0};else if(W)u=await V(W);else{let j=new URL(a.url),N=j.pathname+j.search;throw $i(404,{pathname:N})}Ut(u.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+l.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(W){return{type:cn.error,result:W}}finally{z&&a.signal.removeEventListener("abort",z)}return u}async function uE(n){let{result:a,type:l}=n;if(Gb(a)){let V;try{let W=a.headers.get("Content-Type");W&&/\bapplication\/json\b/.test(W)?a.body==null?V=null:V=await a.json():V=await a.text()}catch(W){return{type:cn.error,error:W}}return l===cn.error?{type:cn.error,error:new Bp(a.status,a.statusText,V),statusCode:a.status,headers:a.headers}:{type:cn.data,data:V,statusCode:a.status,headers:a.headers}}if(l===cn.error){if(nv(a)){var p;if(a.data instanceof Error){var _;return{type:cn.error,error:a.data,statusCode:(_=a.init)==null?void 0:_.status}}a=new Bp(((p=a.init)==null?void 0:p.status)||500,void 0,a.data)}return{type:cn.error,error:a,statusCode:rf(a)?a.status:void 0}}if(gE(a)){var b,v;return{type:cn.deferred,deferredData:a,statusCode:(b=a.init)==null?void 0:b.status,headers:((v=a.init)==null?void 0:v.headers)&&new Headers(a.init.headers)}}if(nv(a)){var u,z;return{type:cn.data,data:a.data,statusCode:(u=a.init)==null?void 0:u.status,headers:(z=a.init)!=null&&z.headers?new Headers(a.init.headers):void 0}}return{type:cn.data,data:a}}function dE(n,a,l,p,_,b){let v=n.headers.get("Location");if(Ut(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!Hy.test(v)){let u=p.slice(0,p.findIndex(z=>z.route.id===l)+1);v=Hg(new URL(a.url),u,_,!0,v,b),n.headers.set("Location",v)}return n}function X1(n,a,l){if(Hy.test(n)){let p=n,_=p.startsWith("//")?new URL(a.protocol+p):new URL(p),b=Sc(_.pathname,l)!=null;if(_.origin===a.origin&&b)return _.pathname+_.search+_.hash}return n}function Zl(n,a,l,p){let _=n.createURL(qb(a)).toString(),b={signal:l};if(p&&sr(p.formMethod)){let{formMethod:v,formEncType:u}=p;b.method=v.toUpperCase(),u==="application/json"?(b.headers=new Headers({"Content-Type":u}),b.body=JSON.stringify(p.json)):u==="text/plain"?b.body=p.text:u==="application/x-www-form-urlencoded"&&p.formData?b.body=$g(p.formData):b.body=p.formData}return new Request(_,b)}function $g(n){let a=new URLSearchParams;for(let[l,p]of n.entries())a.append(l,typeof p=="string"?p:p.name);return a}function K1(n){let a=new FormData;for(let[l,p]of n.entries())a.append(l,p);return a}function hE(n,a,l,p,_,b){let v={},u=null,z,V=!1,W={},j=p&&Ma(p[1])?p[1].error:void 0;return l.forEach((N,Te)=>{let Ce=a[Te].route.id;if(Ut(!Vs(N),"Cannot handle redirect results in processLoaderData"),Ma(N)){let we=N.error;j!==void 0&&(we=j,j=void 0),u=u||{};{let Ge=sc(n,Ce);u[Ge.route.id]==null&&(u[Ge.route.id]=we)}v[Ce]=void 0,V||(V=!0,z=rf(N.error)?N.error.status:500),N.headers&&(W[Ce]=N.headers)}else js(N)?(_.set(Ce,N.deferredData),v[Ce]=N.deferredData.data,N.statusCode!=null&&N.statusCode!==200&&!V&&(z=N.statusCode),N.headers&&(W[Ce]=N.headers)):(v[Ce]=N.data,N.statusCode&&N.statusCode!==200&&!V&&(z=N.statusCode),N.headers&&(W[Ce]=N.headers))}),j!==void 0&&p&&(u={[p[0]]:j},v[p[0]]=void 0),{loaderData:v,errors:u,statusCode:z||200,loaderHeaders:W}}function J1(n,a,l,p,_,b,v,u){let{loaderData:z,errors:V}=hE(a,l,p,_,u);for(let W=0;W<b.length;W++){let{key:j,match:N,controller:Te}=b[W];Ut(v!==void 0&&v[W]!==void 0,"Did not find corresponding fetcher result");let Ce=v[W];if(!(Te&&Te.signal.aborted))if(Ma(Ce)){let we=sc(n.matches,N==null?void 0:N.route.id);V&&V[we.route.id]||(V=Dn({},V,{[we.route.id]:Ce.error})),n.fetchers.delete(j)}else if(Vs(Ce))Ut(!1,"Unhandled fetcher revalidation redirect");else if(js(Ce))Ut(!1,"Unhandled fetcher deferred data");else{let we=Ro(Ce.data);n.fetchers.set(j,we)}}return{loaderData:z,errors:V}}function Y1(n,a,l,p){let _=Dn({},a);for(let b of l){let v=b.route.id;if(a.hasOwnProperty(v)?a[v]!==void 0&&(_[v]=a[v]):n[v]!==void 0&&b.route.loader&&(_[v]=n[v]),p&&p.hasOwnProperty(v))break}return _}function Q1(n){return n?Ma(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function sc(n,a){return(a?n.slice(0,n.findIndex(p=>p.route.id===a)+1):[...n]).reverse().find(p=>p.route.hasErrorBoundary===!0)||n[0]}function ev(n){let a=n.length===1?n[0]:n.find(l=>l.index||!l.path||l.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:a}],route:a}}function $i(n,a){let{pathname:l,routeId:p,method:_,type:b,message:v}=a===void 0?{}:a,u="Unknown Server Error",z="Unknown @remix-run/router error";return n===400?(u="Bad Request",b==="route-discovery"?z='Unable to match URL "'+l+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+v):_&&l&&p?z="You made a "+_+' request to "'+l+'" but '+('did not provide a `loader` for route "'+p+'", ')+"so there is no way to handle the request.":b==="defer-action"?z="defer() is not supported in actions":b==="invalid-body"&&(z="Unable to encode submission body")):n===403?(u="Forbidden",z='Route "'+p+'" does not match URL "'+l+'"'):n===404?(u="Not Found",z='No route matches URL "'+l+'"'):n===405&&(u="Method Not Allowed",_&&l&&p?z="You made a "+_.toUpperCase()+' request to "'+l+'" but '+('did not provide an `action` for route "'+p+'", ')+"so there is no way to handle the request.":_&&(z='Invalid request method "'+_.toUpperCase()+'"')),new Bp(n||500,u,new Error(z),!0)}function tv(n){for(let a=n.length-1;a>=0;a--){let l=n[a];if(Vs(l))return{result:l,idx:a}}}function qb(n){let a=typeof n=="string"?co(n):n;return Ks(Dn({},a,{hash:""}))}function pE(n,a){return n.pathname!==a.pathname||n.search!==a.search?!1:n.hash===""?a.hash!=="":n.hash===a.hash?!0:a.hash!==""}function fE(n){return typeof n=="object"&&n!=null&&"then"in n}function mE(n){return Gb(n.result)&&YS.has(n.result.status)}function js(n){return n.type===cn.deferred}function Ma(n){return n.type===cn.error}function Vs(n){return(n&&n.type)===cn.redirect}function nv(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function gE(n){let a=n;return a&&typeof a=="object"&&typeof a.data=="object"&&typeof a.subscribe=="function"&&typeof a.cancel=="function"&&typeof a.resolveData=="function"}function Gb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function yE(n){return JS.has(n.toLowerCase())}function sr(n){return XS.has(n.toLowerCase())}async function iv(n,a,l,p,_,b){for(let v=0;v<l.length;v++){let u=l[v],z=a[v];if(!z)continue;let V=n.find(j=>j.route.id===z.route.id),W=V!=null&&!Vb(V,z)&&(b&&b[z.route.id])!==void 0;if(js(u)&&(_||W)){let j=p[v];Ut(j,"Expected an AbortSignal for revalidating fetcher deferred result"),await Hb(u,j,_).then(N=>{N&&(l[v]=N||l[v])})}}}async function Hb(n,a,l){if(l===void 0&&(l=!1),!await n.deferredData.resolveData(a)){if(l)try{return{type:cn.data,data:n.deferredData.unwrappedData}}catch(_){return{type:cn.error,error:_}}return{type:cn.data,data:n.deferredData.data}}}function $y(n){return new URLSearchParams(n).getAll("index").some(a=>a==="")}function Ku(n,a){let l=typeof a=="string"?co(a).search:a.search;if(n[n.length-1].route.index&&$y(l||""))return n[n.length-1];let p=Fb(n);return p[p.length-1]}function av(n){let{formMethod:a,formAction:l,formEncType:p,text:_,formData:b,json:v}=n;if(!(!a||!l||!p)){if(_!=null)return{formMethod:a,formAction:l,formEncType:p,formData:void 0,json:void 0,text:_};if(b!=null)return{formMethod:a,formAction:l,formEncType:p,formData:b,json:void 0,text:void 0};if(v!==void 0)return{formMethod:a,formAction:l,formEncType:p,formData:void 0,json:v,text:void 0}}}function Xm(n,a){return a?{state:"loading",location:n,formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function _E(n,a){return{state:"submitting",location:n,formMethod:a.formMethod,formAction:a.formAction,formEncType:a.formEncType,formData:a.formData,json:a.json,text:a.text}}function Uu(n,a){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:a}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:a}}function vE(n,a){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:a?a.data:void 0}}function Ro(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function xE(n,a){try{let l=n.sessionStorage.getItem(jb);if(l){let p=JSON.parse(l);for(let[_,b]of Object.entries(p||{}))b&&Array.isArray(b)&&a.set(_,new Set(b||[]))}}catch{}}function bE(n,a){if(a.size>0){let l={};for(let[p,_]of a)l[p]=[..._];try{n.sessionStorage.setItem(jb,JSON.stringify(l))}catch(p){Xs(!1,"Failed to save applied view transitions in sessionStorage ("+p+").")}}}/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fp(){return Fp=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},Fp.apply(this,arguments)}const of=Me.createContext(null),$b=Me.createContext(null),Qs=Me.createContext(null),Zy=Me.createContext(null),Qo=Me.createContext({outlet:null,matches:[],isDataRoute:!1}),Zb=Me.createContext(null);function wE(n,a){let{relative:l}=a===void 0?{}:a;zd()||Ut(!1);let{basename:p,navigator:_}=Me.useContext(Qs),{hash:b,pathname:v,search:u}=Xb(n,{relative:l}),z=v;return p!=="/"&&(z=v==="/"?p:io([p,v])),_.createHref({pathname:z,search:u,hash:b})}function zd(){return Me.useContext(Zy)!=null}function sf(){return zd()||Ut(!1),Me.useContext(Zy).location}function Wb(n){Me.useContext(Qs).static||Me.useLayoutEffect(n)}function CE(){let{isDataRoute:n}=Me.useContext(Qo);return n?BE():AE()}function AE(){zd()||Ut(!1);let n=Me.useContext(of),{basename:a,future:l,navigator:p}=Me.useContext(Qs),{matches:_}=Me.useContext(Qo),{pathname:b}=sf(),v=JSON.stringify(qy(_,l.v7_relativeSplatPath)),u=Me.useRef(!1);return Wb(()=>{u.current=!0}),Me.useCallback(function(V,W){if(W===void 0&&(W={}),!u.current)return;if(typeof V=="number"){p.go(V);return}let j=Gy(V,JSON.parse(v),b,W.relative==="path");n==null&&a!=="/"&&(j.pathname=j.pathname==="/"?a:io([a,j.pathname])),(W.replace?p.replace:p.push)(j,W.state,W)},[a,p,v,b,n])}const SE=Me.createContext(null);function EE(n){let a=Me.useContext(Qo).outlet;return a&&Me.createElement(SE.Provider,{value:n},a)}function Xb(n,a){let{relative:l}=a===void 0?{}:a,{future:p}=Me.useContext(Qs),{matches:_}=Me.useContext(Qo),{pathname:b}=sf(),v=JSON.stringify(qy(_,p.v7_relativeSplatPath));return Me.useMemo(()=>Gy(n,JSON.parse(v),b,l==="path"),[n,v,b,l])}function TE(n,a,l,p){zd()||Ut(!1);let{navigator:_}=Me.useContext(Qs),{matches:b}=Me.useContext(Qo),v=b[b.length-1],u=v?v.params:{};v&&v.pathname;let z=v?v.pathnameBase:"/";v&&v.route;let V=sf(),W;W=V;let j=W.pathname||"/",N=j;if(z!=="/"){let we=z.replace(/^\//,"").split("/");N="/"+j.replace(/^\//,"").split("/").slice(we.length).join("/")}let Te=Os(n,{pathname:N});return zE(Te&&Te.map(we=>Object.assign({},we,{params:Object.assign({},u,we.params),pathname:io([z,_.encodeLocation?_.encodeLocation(we.pathname).pathname:we.pathname]),pathnameBase:we.pathnameBase==="/"?z:io([z,_.encodeLocation?_.encodeLocation(we.pathnameBase).pathname:we.pathnameBase])})),b,l,p)}function ME(){let n=OE(),a=rf(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),l=n instanceof Error?n.stack:null,_={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Me.createElement(Me.Fragment,null,Me.createElement("h2",null,"Unexpected Application Error!"),Me.createElement("h3",{style:{fontStyle:"italic"}},a),l?Me.createElement("pre",{style:_},l):null,null)}const IE=Me.createElement(ME,null);class PE extends Me.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,l){return l.location!==a.location||l.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:l.error,location:l.location,revalidation:a.revalidation||l.revalidation}}componentDidCatch(a,l){console.error("React Router caught the following error during render",a,l)}render(){return this.state.error!==void 0?Me.createElement(Qo.Provider,{value:this.props.routeContext},Me.createElement(Zb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DE(n){let{routeContext:a,match:l,children:p}=n,_=Me.useContext(of);return _&&_.static&&_.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(_.staticContext._deepestRenderedBoundaryId=l.route.id),Me.createElement(Qo.Provider,{value:a},p)}function zE(n,a,l,p){var _;if(a===void 0&&(a=[]),l===void 0&&(l=null),p===void 0&&(p=null),n==null){var b;if(!l)return null;if(l.errors)n=l.matches;else if((b=p)!=null&&b.v7_partialHydration&&a.length===0&&!l.initialized&&l.matches.length>0)n=l.matches;else return null}let v=n,u=(_=l)==null?void 0:_.errors;if(u!=null){let W=v.findIndex(j=>j.route.id&&(u==null?void 0:u[j.route.id])!==void 0);W>=0||Ut(!1),v=v.slice(0,Math.min(v.length,W+1))}let z=!1,V=-1;if(l&&p&&p.v7_partialHydration)for(let W=0;W<v.length;W++){let j=v[W];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(V=W),j.route.id){let{loaderData:N,errors:Te}=l,Ce=j.route.loader&&N[j.route.id]===void 0&&(!Te||Te[j.route.id]===void 0);if(j.route.lazy||Ce){z=!0,V>=0?v=v.slice(0,V+1):v=[v[0]];break}}}return v.reduceRight((W,j,N)=>{let Te,Ce=!1,we=null,Ge=null;l&&(Te=u&&j.route.id?u[j.route.id]:void 0,we=j.route.errorElement||IE,z&&(V<0&&N===0?(FE("route-fallback"),Ce=!0,Ge=null):V===N&&(Ce=!0,Ge=j.route.hydrateFallbackElement||null)));let re=a.concat(v.slice(0,N+1)),ie=()=>{let ce;return Te?ce=we:Ce?ce=Ge:j.route.Component?ce=Me.createElement(j.route.Component,null):j.route.element?ce=j.route.element:ce=W,Me.createElement(DE,{match:j,routeContext:{outlet:W,matches:re,isDataRoute:l!=null},children:ce})};return l&&(j.route.ErrorBoundary||j.route.errorElement||N===0)?Me.createElement(PE,{location:l.location,revalidation:l.revalidation,component:we,error:Te,children:ie(),routeContext:{outlet:null,matches:re,isDataRoute:!0}}):ie()},null)}var Kb=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Kb||{}),Np=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Np||{});function RE(n){let a=Me.useContext(of);return a||Ut(!1),a}function kE(n){let a=Me.useContext($b);return a||Ut(!1),a}function LE(n){let a=Me.useContext(Qo);return a||Ut(!1),a}function Jb(n){let a=LE(),l=a.matches[a.matches.length-1];return l.route.id||Ut(!1),l.route.id}function OE(){var n;let a=Me.useContext(Zb),l=kE(Np.UseRouteError),p=Jb(Np.UseRouteError);return a!==void 0?a:(n=l.errors)==null?void 0:n[p]}function BE(){let{router:n}=RE(Kb.UseNavigateStable),a=Jb(Np.UseNavigateStable),l=Me.useRef(!1);return Wb(()=>{l.current=!0}),Me.useCallback(function(_,b){b===void 0&&(b={}),l.current&&(typeof _=="number"?n.navigate(_):n.navigate(_,Fp({fromRouteId:a},b)))},[n,a])}const rv={};function FE(n,a,l){rv[n]||(rv[n]=!0)}function NE(n){return EE(n.context)}function jE(n){let{basename:a="/",children:l=null,location:p,navigationType:_=Kn.Pop,navigator:b,static:v=!1,future:u}=n;zd()&&Ut(!1);let z=a.replace(/^\/*/,"/"),V=Me.useMemo(()=>({basename:z,navigator:b,static:v,future:Fp({v7_relativeSplatPath:!1},u)}),[z,u,b,v]);typeof p=="string"&&(p=co(p));let{pathname:W="/",search:j="",hash:N="",state:Te=null,key:Ce="default"}=p,we=Me.useMemo(()=>{let Ge=Sc(W,z);return Ge==null?null:{location:{pathname:Ge,search:j,hash:N,state:Te,key:Ce},navigationType:_}},[z,W,j,N,Te,Ce,_]);return we==null?null:Me.createElement(Qs.Provider,{value:V},Me.createElement(Zy.Provider,{children:l,value:we}))}new Promise(()=>{});function VE(n){let a={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(a,{element:Me.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(a,{hydrateFallbackElement:Me.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(a,{errorElement:Me.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),a}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},Sd.apply(this,arguments)}function UE(n,a){if(n==null)return{};var l={},p=Object.keys(n),_,b;for(b=0;b<p.length;b++)_=p[b],!(a.indexOf(_)>=0)&&(l[_]=n[_]);return l}function qE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function GE(n,a){return n.button===0&&(!a||a==="_self")&&!qE(n)}const HE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],$E="6";try{window.__reactRouterVersion=$E}catch{}function ZE(n,a){return nE({basename:void 0,future:Sd({},void 0,{v7_prependBasename:!0}),history:ES({window:void 0}),hydrationData:WE(),routes:n,mapRouteProperties:VE,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function WE(){var n;let a=(n=window)==null?void 0:n.__staticRouterHydrationData;return a&&a.errors&&(a=Sd({},a,{errors:XE(a.errors)})),a}function XE(n){if(!n)return null;let a=Object.entries(n),l={};for(let[p,_]of a)if(_&&_.__type==="RouteErrorResponse")l[p]=new Bp(_.status,_.statusText,_.data,_.internal===!0);else if(_&&_.__type==="Error"){if(_.__subType){let b=window[_.__subType];if(typeof b=="function")try{let v=new b(_.message);v.stack="",l[p]=v}catch{}}if(l[p]==null){let b=new Error(_.message);b.stack="",l[p]=b}}else l[p]=_;return l}const KE=Me.createContext({isTransitioning:!1}),JE=Me.createContext(new Map),YE="startTransition",ov=pC[YE],QE="flushSync",sv=SS[QE];function e3(n){ov?ov(n):n()}function qu(n){sv?sv(n):n()}class t3{constructor(){this.status="pending",this.promise=new Promise((a,l)=>{this.resolve=p=>{this.status==="pending"&&(this.status="resolved",a(p))},this.reject=p=>{this.status==="pending"&&(this.status="rejected",l(p))}})}}function n3(n){let{fallbackElement:a,router:l,future:p}=n,[_,b]=Me.useState(l.state),[v,u]=Me.useState(),[z,V]=Me.useState({isTransitioning:!1}),[W,j]=Me.useState(),[N,Te]=Me.useState(),[Ce,we]=Me.useState(),Ge=Me.useRef(new Map),{v7_startTransition:re}=p||{},ie=Me.useCallback(pe=>{re?e3(pe):pe()},[re]),ce=Me.useCallback((pe,pt)=>{let{deletedFetchers:ct,unstable_flushSync:ot,unstable_viewTransitionOpts:Xt}=pt;ct.forEach(Ot=>Ge.current.delete(Ot)),pe.fetchers.forEach((Ot,Ln)=>{Ot.data!==void 0&&Ge.current.set(Ln,Ot.data)});let Ft=l.window==null||l.window.document==null||typeof l.window.document.startViewTransition!="function";if(!Xt||Ft){ot?qu(()=>b(pe)):ie(()=>b(pe));return}if(ot){qu(()=>{N&&(W&&W.resolve(),N.skipTransition()),V({isTransitioning:!0,flushSync:!0,currentLocation:Xt.currentLocation,nextLocation:Xt.nextLocation})});let Ot=l.window.document.startViewTransition(()=>{qu(()=>b(pe))});Ot.finished.finally(()=>{qu(()=>{j(void 0),Te(void 0),u(void 0),V({isTransitioning:!1})})}),qu(()=>Te(Ot));return}N?(W&&W.resolve(),N.skipTransition(),we({state:pe,currentLocation:Xt.currentLocation,nextLocation:Xt.nextLocation})):(u(pe),V({isTransitioning:!0,flushSync:!1,currentLocation:Xt.currentLocation,nextLocation:Xt.nextLocation}))},[l.window,N,W,Ge,ie]);Me.useLayoutEffect(()=>l.subscribe(ce),[l,ce]),Me.useEffect(()=>{z.isTransitioning&&!z.flushSync&&j(new t3)},[z]),Me.useEffect(()=>{if(W&&v&&l.window){let pe=v,pt=W.promise,ct=l.window.document.startViewTransition(async()=>{ie(()=>b(pe)),await pt});ct.finished.finally(()=>{j(void 0),Te(void 0),u(void 0),V({isTransitioning:!1})}),Te(ct)}},[ie,v,W,l.window]),Me.useEffect(()=>{W&&v&&_.location.key===v.location.key&&W.resolve()},[W,N,_.location,v]),Me.useEffect(()=>{!z.isTransitioning&&Ce&&(u(Ce.state),V({isTransitioning:!0,flushSync:!1,currentLocation:Ce.currentLocation,nextLocation:Ce.nextLocation}),we(void 0))},[z.isTransitioning,Ce]),Me.useEffect(()=>{},[]);let Ee=Me.useMemo(()=>({createHref:l.createHref,encodeLocation:l.encodeLocation,go:pe=>l.navigate(pe),push:(pe,pt,ct)=>l.navigate(pe,{state:pt,preventScrollReset:ct==null?void 0:ct.preventScrollReset}),replace:(pe,pt,ct)=>l.navigate(pe,{replace:!0,state:pt,preventScrollReset:ct==null?void 0:ct.preventScrollReset})}),[l]),ke=l.basename||"/",Xe=Me.useMemo(()=>({router:l,navigator:Ee,static:!1,basename:ke}),[l,Ee,ke]),Qe=Me.useMemo(()=>({v7_relativeSplatPath:l.future.v7_relativeSplatPath}),[l.future.v7_relativeSplatPath]);return Me.createElement(Me.Fragment,null,Me.createElement(of.Provider,{value:Xe},Me.createElement($b.Provider,{value:_},Me.createElement(JE.Provider,{value:Ge.current},Me.createElement(KE.Provider,{value:z},Me.createElement(jE,{basename:ke,location:_.location,navigationType:_.historyAction,navigator:Ee,future:Qe},_.initialized||l.future.v7_partialHydration?Me.createElement(i3,{routes:l.routes,future:l.future,state:_}):a))))),null)}const i3=Me.memo(a3);function a3(n){let{routes:a,future:l,state:p}=n;return TE(a,void 0,p,l)}const r3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",o3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lv=Me.forwardRef(function(a,l){let{onClick:p,relative:_,reloadDocument:b,replace:v,state:u,target:z,to:V,preventScrollReset:W,unstable_viewTransition:j}=a,N=UE(a,HE),{basename:Te}=Me.useContext(Qs),Ce,we=!1;if(typeof V=="string"&&o3.test(V)&&(Ce=V,r3))try{let ce=new URL(window.location.href),Ee=V.startsWith("//")?new URL(ce.protocol+V):new URL(V),ke=Sc(Ee.pathname,Te);Ee.origin===ce.origin&&ke!=null?V=ke+Ee.search+Ee.hash:we=!0}catch{}let Ge=wE(V,{relative:_}),re=s3(V,{replace:v,state:u,target:z,preventScrollReset:W,relative:_,unstable_viewTransition:j});function ie(ce){p&&p(ce),ce.defaultPrevented||re(ce)}return Me.createElement("a",Sd({},N,{href:Ce||Ge,onClick:we||b?p:ie,ref:l,target:z}))});var cv;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(cv||(cv={}));var uv;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(uv||(uv={}));function s3(n,a){let{target:l,replace:p,state:_,preventScrollReset:b,relative:v,unstable_viewTransition:u}=a===void 0?{}:a,z=CE(),V=sf(),W=Xb(n,{relative:v});return Me.useCallback(j=>{if(GE(j,l)){j.preventDefault();let N=p!==void 0?p:Ks(V)===Ks(W);z(n,{replace:N,state:_,preventScrollReset:b,relative:v,unstable_viewTransition:u})}},[V,z,W,p,_,l,n,b,v,u])}function l3(){return it.jsx(it.Fragment,{children:it.jsx(NE,{})})}const c3="_navbar_cfoak_1",u3="_logo_cfoak_17",d3="_us_cfoak_23",Km={navbar:c3,logo:u3,us:d3};var Yb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dv=to.createContext&&to.createContext(Yb),h3=["attr","size","title"];function p3(n,a){if(n==null)return{};var l=f3(n,a),p,_;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(n);for(_=0;_<b.length;_++)p=b[_],!(a.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(n,p)&&(l[p]=n[p])}return l}function f3(n,a){if(n==null)return{};var l={};for(var p in n)if(Object.prototype.hasOwnProperty.call(n,p)){if(a.indexOf(p)>=0)continue;l[p]=n[p]}return l}function jp(){return jp=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(n[p]=l[p])}return n},jp.apply(this,arguments)}function hv(n,a){var l=Object.keys(n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(n);a&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(n,_).enumerable})),l.push.apply(l,p)}return l}function Vp(n){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?hv(Object(l),!0).forEach(function(p){m3(n,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):hv(Object(l)).forEach(function(p){Object.defineProperty(n,p,Object.getOwnPropertyDescriptor(l,p))})}return n}function m3(n,a,l){return a=g3(a),a in n?Object.defineProperty(n,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[a]=l,n}function g3(n){var a=y3(n,"string");return typeof a=="symbol"?a:a+""}function y3(n,a){if(typeof n!="object"||!n)return n;var l=n[Symbol.toPrimitive];if(l!==void 0){var p=l.call(n,a||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function Qb(n){return n&&n.map((a,l)=>to.createElement(a.tag,Vp({key:l},a.attr),Qb(a.child)))}function hr(n){return a=>to.createElement(_3,jp({attr:Vp({},n.attr)},a),Qb(n.child))}function _3(n){var a=l=>{var{attr:p,size:_,title:b}=n,v=p3(n,h3),u=_||l.size||"1em",z;return l.className&&(z=l.className),n.className&&(z=(z?z+" ":"")+n.className),to.createElement("svg",jp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,p,v,{className:z,style:Vp(Vp({color:n.color||l.color},l.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),b&&to.createElement("title",null,b),n.children)};return dv!==void 0?to.createElement(dv.Consumer,null,l=>a(l)):a(Yb)}function v3(n){return hr({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 17h-14c-1.103 0-2 .897-2 2s.897 2 2 2h14c1.103 0 2-.897 2-2s-.897-2-2-2zM19 10h-14c-1.103 0-2 .897-2 2s.897 2 2 2h14c1.103 0 2-.897 2-2s-.897-2-2-2zM19 3h-14c-1.103 0-2 .897-2 2s.897 2 2 2h14c1.103 0 2-.897 2-2s-.897-2-2-2z"},child:[]}]})(n)}function x3(){return it.jsxs("section",{className:Km.navbar,children:[it.jsx(lv,{to:"/",children:it.jsx("h1",{className:Km.logo,children:"Mapa de los Comedores"})}),it.jsx(lv,{to:"/us",children:it.jsx("h1",{className:Km.us,children:it.jsx(v3,{})})})]})}const b3="modulepreload",w3=function(n){return"/MapaDeLosComedores/"+n},pv={},C3=function(a,l,p){let _=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),v=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));_=Promise.all(l.map(u=>{if(u=w3(u),u in pv)return;pv[u]=!0;const z=u.endsWith(".css"),V=z?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${V}`))return;const W=document.createElement("link");if(W.rel=z?"stylesheet":b3,z||(W.as="script"),W.crossOrigin="",W.href=u,v&&W.setAttribute("nonce",v),document.head.appendChild(W),z)return new Promise((j,N)=>{W.addEventListener("load",j),W.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}return _.then(()=>a()).catch(b=>{const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=b,window.dispatchEvent(v),!v.defaultPrevented)throw b})},A3=Me.createContext(null);function S3(n,a){const l=Array.isArray(n)?n[0]:n?n.x:0,p=Array.isArray(n)?n[1]:n?n.y:0,_=Array.isArray(a)?a[0]:a?a.x:0,b=Array.isArray(a)?a[1]:a?a.y:0;return l===_&&p===b}function Yr(n,a){if(n===a)return!0;if(!n||!a)return!1;if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(!Yr(n[l],a[l]))return!1;return!0}else if(Array.isArray(a))return!1;if(typeof n=="object"&&typeof a=="object"){const l=Object.keys(n),p=Object.keys(a);if(l.length!==p.length)return!1;for(const _ of l)if(!a.hasOwnProperty(_)||!Yr(n[_],a[_]))return!1;return!0}return!1}function E3(n){const a=n.clone();return a.pixelsToGLUnits=n.pixelsToGLUnits,a}function fv(n,a){if(!n.getProjection)return;const l=n.getProjection(),p=a.getProjection();Yr(l,p)||a.setProjection(l)}function mv(n){return{longitude:n.center.lng,latitude:n.center.lat,zoom:n.zoom,pitch:n.pitch,bearing:n.bearing,padding:n.padding}}function gv(n,a){const l=a.viewState||a;let p=!1;if("longitude"in l&&"latitude"in l){const _=n.center;n.center=new _.constructor(l.longitude,l.latitude),p=p||_!==n.center}if("zoom"in l){const _=n.zoom;n.zoom=l.zoom,p=p||_!==n.zoom}if("bearing"in l){const _=n.bearing;n.bearing=l.bearing,p=p||_!==n.bearing}if("pitch"in l){const _=n.pitch;n.pitch=l.pitch,p=p||_!==n.pitch}return l.padding&&!n.isPaddingEqual(l.padding)&&(p=!0,n.padding=l.padding),p}const T3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function yv(n){if(!n)return null;if(typeof n=="string"||("toJS"in n&&(n=n.toJS()),!n.layers))return n;const a={};for(const p of n.layers)a[p.id]=p;const l=n.layers.map(p=>{let _=null;"interactive"in p&&(_=Object.assign({},p),delete _.interactive);const b=a[p.ref];if(b){_=_||Object.assign({},p),delete _.ref;for(const v of T3)v in b&&(_[v]=b[v])}return _||p});return{...n,layers:l}}var _v={};const vv={version:8,sources:{},layers:[]},xv={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Jm={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},bv={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},M3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],I3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class bc{constructor(a,l,p){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=_=>{const b=this.props[bv[_.type]];b?b(_):_.type==="error"&&console.error(_.error)},this._onPointerEvent=_=>{(_.type==="mousemove"||_.type==="mouseout")&&this._updateHover(_);const b=this.props[xv[_.type]];b&&(this.props.interactiveLayerIds&&_.type!=="mouseover"&&_.type!=="mouseout"&&(_.features=this._hoveredFeatures||this._queryRenderedFeatures(_.point)),b(_),delete _.features)},this._onCameraEvent=_=>{if(!this._internalUpdate){const b=this.props[Jm[_.type]];b&&b(_)}_.type in this._deferredEvents&&(this._deferredEvents[_.type]=!1)},this._MapClass=a,this.props=l,this._initialize(p)}get map(){return this._map}get transform(){return this._renderTransform}setProps(a){const l=this.props;this.props=a;const p=this._updateSettings(a,l);p&&this._createShadowTransform(this._map);const _=this._updateSize(a),b=this._updateViewState(a,!0);this._updateStyle(a,l),this._updateStyleComponents(a,l),this._updateHandlers(a,l),(p||_||b&&!this._map.isMoving())&&this.redraw()}static reuse(a,l){const p=bc.savedMaps.pop();if(!p)return null;const _=p.map,b=_.getContainer();for(l.className=b.className;b.childNodes.length>0;)l.appendChild(b.childNodes[0]);_._container=l;const v=_._resizeObserver;v&&(v.disconnect(),v.observe(l)),p.setProps({...a,styleDiffing:!1}),_.resize();const{initialViewState:u}=a;return u&&(u.bounds?_.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):p._updateViewState(u,!1)),_.isStyleLoaded()?_.fire("load"):_.once("styledata",()=>_.fire("load")),_._update(),p}_initialize(a){const{props:l}=this,{mapStyle:p=vv}=l,_={...l,...l.initialViewState,accessToken:l.mapboxAccessToken||P3()||null,container:a,style:yv(p)},b=_.initialViewState||_.viewState||_;if(Object.assign(_,{center:[b.longitude||0,b.latitude||0],zoom:b.zoom||0,pitch:b.pitch||0,bearing:b.bearing||0}),l.gl){const W=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=W,l.gl)}const v=new this._MapClass(_);b.padding&&v.setPadding(b.padding),l.cursor&&(v.getCanvas().style.cursor=l.cursor),this._createShadowTransform(v);const u=v._render;v._render=W=>{this._inRender=!0,u.call(v,W),this._inRender=!1};const z=v._renderTaskQueue.run;v._renderTaskQueue.run=W=>{z.call(v._renderTaskQueue,W),this._onBeforeRepaint()},v.on("render",()=>this._onAfterRepaint());const V=v.fire;v.fire=this._fireEvent.bind(this,V),v.on("resize",()=>{this._renderTransform.resize(v.transform.width,v.transform.height)}),v.on("styledata",()=>{this._updateStyleComponents(this.props,{}),fv(v.transform,this._renderTransform)}),v.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const W in xv)v.on(W,this._onPointerEvent);for(const W in Jm)v.on(W,this._onCameraEvent);for(const W in bv)v.on(W,this._onEvent);this._map=v}recycle(){const l=this.map.getContainer().querySelector("[mapboxgl-children]");l==null||l.remove(),bc.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const a=this._map;!this._inRender&&a.style&&(a._frame&&(a._frame.cancel(),a._frame=null),a._render())}_createShadowTransform(a){const l=E3(a.transform);a.painter.transform=l,this._renderTransform=l}_updateSize(a){const{viewState:l}=a;if(l){const p=this._map;if(l.width!==p.transform.width||l.height!==p.transform.height)return p.resize(),!0}return!1}_updateViewState(a,l){if(this._internalUpdate)return!1;const p=this._map,_=this._renderTransform,{zoom:b,pitch:v,bearing:u}=_,z=p.isMoving();z&&(_.cameraElevationReference="sea");const V=gv(_,{...mv(p.transform),...a});if(z&&(_.cameraElevationReference="ground"),V&&l){const W=this._deferredEvents;W.move=!0,W.zoom||(W.zoom=b!==_.zoom),W.rotate||(W.rotate=u!==_.bearing),W.pitch||(W.pitch=v!==_.pitch)}return z||gv(p.transform,a),V}_updateSettings(a,l){const p=this._map;let _=!1;for(const b of M3)if(b in a&&!Yr(a[b],l[b])){_=!0;const v=p[`set${b[0].toUpperCase()}${b.slice(1)}`];v==null||v.call(p,a[b])}return _}_updateStyle(a,l){if(a.cursor!==l.cursor&&(this._map.getCanvas().style.cursor=a.cursor||""),a.mapStyle!==l.mapStyle){const{mapStyle:p=vv,styleDiffing:_=!0}=a,b={diff:_};return"localIdeographFontFamily"in a&&(b.localIdeographFontFamily=a.localIdeographFontFamily),this._map.setStyle(yv(p),b),!0}return!1}_updateStyleComponents(a,l){const p=this._map;let _=!1;return p.isStyleLoaded()&&("light"in a&&p.setLight&&!Yr(a.light,l.light)&&(_=!0,p.setLight(a.light)),"fog"in a&&p.setFog&&!Yr(a.fog,l.fog)&&(_=!0,p.setFog(a.fog)),"terrain"in a&&p.setTerrain&&!Yr(a.terrain,l.terrain)&&(!a.terrain||p.getSource(a.terrain.source))&&(_=!0,p.setTerrain(a.terrain))),_}_updateHandlers(a,l){var p,_;const b=this._map;let v=!1;for(const u of I3){const z=(p=a[u])!==null&&p!==void 0?p:!0,V=(_=l[u])!==null&&_!==void 0?_:!0;Yr(z,V)||(v=!0,z?b[u].enable(z):b[u].disable())}return v}_queryRenderedFeatures(a){const l=this._map,p=l.transform,{interactiveLayerIds:_=[]}=this.props;try{return l.transform=this._renderTransform,l.queryRenderedFeatures(a,{layers:_.filter(l.getLayer.bind(l))})}catch{return[]}finally{l.transform=p}}_updateHover(a){var l;const{props:p}=this;if(p.interactiveLayerIds&&(p.onMouseMove||p.onMouseEnter||p.onMouseLeave)){const b=a.type,v=((l=this._hoveredFeatures)===null||l===void 0?void 0:l.length)>0,u=this._queryRenderedFeatures(a.point),z=u.length>0;!z&&v&&(a.type="mouseleave",this._onPointerEvent(a)),this._hoveredFeatures=u,z&&!v&&(a.type="mouseenter",this._onPointerEvent(a)),a.type=b}else this._hoveredFeatures=null}_fireEvent(a,l,p){const _=this._map,b=_.transform,v=typeof l=="string"?l:l.type;return v==="move"&&this._updateViewState(this.props,!1),v in Jm&&(typeof l=="object"&&(l.viewState=mv(b)),this._map.isMoving())?(_.transform=this._renderTransform,a.call(_,l,p),_.transform=b,_):(a.call(_,l,p),_)}_onBeforeRepaint(){const a=this._map;this._internalUpdate=!0;for(const p in this._deferredEvents)this._deferredEvents[p]&&a.fire(p);this._internalUpdate=!1;const l=this._map.transform;a.transform=this._renderTransform,this._onAfterRepaint=()=>{fv(this._renderTransform,l),a.transform=l}}}bc.savedMaps=[];function P3(){let n=null;if(typeof location<"u"){const a=/access_token=([^&\/]*)/.exec(location.search);n=a&&a[1]}try{n=n||_v.MapboxAccessToken}catch{}try{n=n||_v.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return n}const D3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function z3(n){if(!n)return null;const a=n.map,l={getMap:()=>a,getCenter:()=>n.transform.center,getZoom:()=>n.transform.zoom,getBearing:()=>n.transform.bearing,getPitch:()=>n.transform.pitch,getPadding:()=>n.transform.padding,getBounds:()=>n.transform.getBounds(),project:p=>{const _=a.transform;a.transform=n.transform;const b=a.project(p);return a.transform=_,b},unproject:p=>{const _=a.transform;a.transform=n.transform;const b=a.unproject(p);return a.transform=_,b},queryTerrainElevation:(p,_)=>{const b=a.transform;a.transform=n.transform;const v=a.queryTerrainElevation(p,_);return a.transform=b,v},queryRenderedFeatures:(p,_)=>{const b=a.transform;a.transform=n.transform;const v=a.queryRenderedFeatures(p,_);return a.transform=b,v}};for(const p of R3(a))!(p in l)&&!D3.includes(p)&&(l[p]=a[p].bind(a));return l}function R3(n){const a=new Set;let l=n;for(;l;){for(const p of Object.getOwnPropertyNames(l))p[0]!=="_"&&typeof n[p]=="function"&&p!=="fire"&&p!=="setEventedParent"&&a.add(p);l=Object.getPrototypeOf(l)}return Array.from(a)}const k3=typeof document<"u"?Me.useLayoutEffect:Me.useEffect,L3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function O3(n,a){for(const p of L3)p in a&&(n[p]=a[p]);const{RTLTextPlugin:l="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=a;l&&n.getRTLTextPluginStatus&&n.getRTLTextPluginStatus()==="unavailable"&&n.setRTLTextPlugin(l,p=>{p&&console.error(p)},!0)}const lf=Me.createContext(null);function B3(n,a,l){const p=Me.useContext(A3),[_,b]=Me.useState(null),v=Me.useRef(),{current:u}=Me.useRef({mapLib:null,map:null});Me.useEffect(()=>{const W=n.mapLib;let j=!0,N;return Promise.resolve(W||l).then(Te=>{if(!j)return;if(!Te)throw new Error("Invalid mapLib");const Ce="Map"in Te?Te:Te.default;if(!Ce.Map)throw new Error("Invalid mapLib");if(O3(Ce,n),!Ce.supported||Ce.supported(n))n.reuseMaps&&(N=bc.reuse(n,v.current)),N||(N=new bc(Ce.Map,n,v.current)),u.map=z3(N),u.mapLib=Ce,b(N),p==null||p.onMapMount(u.map,n.id);else throw new Error("Map is not supported by this browser")}).catch(Te=>{const{onError:Ce}=n;Ce?Ce({type:"error",target:null,originalEvent:null,error:Te}):console.error(Te)}),()=>{j=!1,N&&(p==null||p.onMapUnmount(n.id),n.reuseMaps?N.recycle():N.destroy())}},[]),k3(()=>{_&&_.setProps(n)}),Me.useImperativeHandle(a,()=>u.map,[_]);const z=Me.useMemo(()=>({position:"relative",width:"100%",height:"100%",...n.style}),[n.style]),V={height:"100%"};return Me.createElement("div",{id:n.id,ref:v,style:z},_&&Me.createElement(lf.Provider,{value:u},Me.createElement("div",{"mapboxgl-children":"",style:V},n.children)))}const F3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function el(n,a){if(!n||!a)return;const l=n.style;for(const p in a){const _=a[p];Number.isFinite(_)&&!F3.test(p)?l[p]=`${_}px`:l[p]=_}}function N3(n,a){const{map:l,mapLib:p}=Me.useContext(lf),_=Me.useRef({props:n});_.current.props=n;const b=Me.useMemo(()=>{let we=!1;Me.Children.forEach(n.children,ie=>{ie&&(we=!0)});const Ge={...n,element:we?document.createElement("div"):null},re=new p.Marker(Ge);return re.setLngLat([n.longitude,n.latitude]),re.getElement().addEventListener("click",ie=>{var ce,Ee;(Ee=(ce=_.current.props).onClick)===null||Ee===void 0||Ee.call(ce,{type:"click",target:re,originalEvent:ie})}),re.on("dragstart",ie=>{var ce,Ee;const ke=ie;ke.lngLat=b.getLngLat(),(Ee=(ce=_.current.props).onDragStart)===null||Ee===void 0||Ee.call(ce,ke)}),re.on("drag",ie=>{var ce,Ee;const ke=ie;ke.lngLat=b.getLngLat(),(Ee=(ce=_.current.props).onDrag)===null||Ee===void 0||Ee.call(ce,ke)}),re.on("dragend",ie=>{var ce,Ee;const ke=ie;ke.lngLat=b.getLngLat(),(Ee=(ce=_.current.props).onDragEnd)===null||Ee===void 0||Ee.call(ce,ke)}),re},[]);Me.useEffect(()=>(b.addTo(l.getMap()),()=>{b.remove()}),[]);const{longitude:v,latitude:u,offset:z,style:V,draggable:W=!1,popup:j=null,rotation:N=0,rotationAlignment:Te="auto",pitchAlignment:Ce="auto"}=n;return Me.useEffect(()=>{el(b.getElement(),V)},[V]),Me.useImperativeHandle(a,()=>b,[]),(b.getLngLat().lng!==v||b.getLngLat().lat!==u)&&b.setLngLat([v,u]),z&&!S3(b.getOffset(),z)&&b.setOffset(z),b.isDraggable()!==W&&b.setDraggable(W),b.getRotation()!==N&&b.setRotation(N),b.getRotationAlignment()!==Te&&b.setRotationAlignment(Te),b.getPitchAlignment()!==Ce&&b.setPitchAlignment(Ce),b.getPopup()!==j&&b.setPopup(j),Dd.createPortal(n.children,b.getElement())}const j3=Me.memo(Me.forwardRef(N3));function wv(n){return new Set(n?n.trim().split(/\s+/):[])}function V3(n,a){const{map:l,mapLib:p}=Me.useContext(lf),_=Me.useMemo(()=>document.createElement("div"),[]),b=Me.useRef({props:n});b.current.props=n;const v=Me.useMemo(()=>{const u={...n},z=new p.Popup(u);return z.setLngLat([n.longitude,n.latitude]),z.once("open",V=>{var W,j;(j=(W=b.current.props).onOpen)===null||j===void 0||j.call(W,V)}),z},[]);if(Me.useEffect(()=>{const u=z=>{var V,W;(W=(V=b.current.props).onClose)===null||W===void 0||W.call(V,z)};return v.on("close",u),v.setDOMContent(_).addTo(l.getMap()),()=>{v.off("close",u),v.isOpen()&&v.remove()}},[]),Me.useEffect(()=>{el(v.getElement(),n.style)},[n.style]),Me.useImperativeHandle(a,()=>v,[]),v.isOpen()&&((v.getLngLat().lng!==n.longitude||v.getLngLat().lat!==n.latitude)&&v.setLngLat([n.longitude,n.latitude]),n.offset&&!Yr(v.options.offset,n.offset)&&v.setOffset(n.offset),(v.options.anchor!==n.anchor||v.options.maxWidth!==n.maxWidth)&&(v.options.anchor=n.anchor,v.setMaxWidth(n.maxWidth)),v.options.className!==n.className)){const u=wv(v.options.className),z=wv(n.className);for(const V of u)z.has(V)||v.removeClassName(V);for(const V of z)u.has(V)||v.addClassName(V);v.options.className=n.className}return Dd.createPortal(n.children,_)}Me.memo(Me.forwardRef(V3));function Rd(n,a,l,p){const _=Me.useContext(lf),b=Me.useMemo(()=>n(_),[]);return Me.useEffect(()=>{const v=a,u=typeof a=="function"&&typeof l=="function"?a:null,z=typeof a=="function"?a:null,{map:V}=_;return V.hasControl(b)||(V.addControl(b,v==null?void 0:v.position),u&&u(_)),()=>{z&&z(_),V.hasControl(b)&&V.removeControl(b)}},[]),b}function U3(n){const a=Rd(({mapLib:l})=>new l.AttributionControl(n),{position:n.position});return Me.useEffect(()=>{el(a._container,n.style)},[n.style]),null}Me.memo(U3);function q3(n){const a=Rd(({mapLib:l})=>new l.FullscreenControl({container:n.containerId&&document.getElementById(n.containerId)}),{position:n.position});return Me.useEffect(()=>{el(a._controlContainer,n.style)},[n.style]),null}Me.memo(q3);function G3(n,a){const l=Me.useRef({props:n}),p=Rd(({mapLib:_})=>{const b=new _.GeolocateControl(n),v=b._setupUI;return b._setupUI=u=>{b._container.hasChildNodes()||v(u)},b.on("geolocate",u=>{var z,V;(V=(z=l.current.props).onGeolocate)===null||V===void 0||V.call(z,u)}),b.on("error",u=>{var z,V;(V=(z=l.current.props).onError)===null||V===void 0||V.call(z,u)}),b.on("outofmaxbounds",u=>{var z,V;(V=(z=l.current.props).onOutOfMaxBounds)===null||V===void 0||V.call(z,u)}),b.on("trackuserlocationstart",u=>{var z,V;(V=(z=l.current.props).onTrackUserLocationStart)===null||V===void 0||V.call(z,u)}),b.on("trackuserlocationend",u=>{var z,V;(V=(z=l.current.props).onTrackUserLocationEnd)===null||V===void 0||V.call(z,u)}),b},{position:n.position});return l.current.props=n,Me.useImperativeHandle(a,()=>p,[]),Me.useEffect(()=>{el(p._container,n.style)},[n.style]),null}Me.memo(Me.forwardRef(G3));function H3(n){const a=Rd(({mapLib:l})=>new l.NavigationControl(n),{position:n.position});return Me.useEffect(()=>{el(a._container,n.style)},[n.style]),null}const $3=Me.memo(H3);function Z3(n){const a=Rd(({mapLib:b})=>new b.ScaleControl(n),{position:n.position}),l=Me.useRef(n),p=l.current;l.current=n;const{style:_}=n;return n.maxWidth!==void 0&&n.maxWidth!==p.maxWidth&&(a.options.maxWidth=n.maxWidth),n.unit!==void 0&&n.unit!==p.unit&&a.setUnit(n.unit),Me.useEffect(()=>{el(a._container,_)},[_]),null}Me.memo(Z3);const W3=C3(()=>Promise.resolve().then(()=>Y3),void 0),X3=Me.forwardRef(function(a,l){return B3(a,l,W3)}),K3=j3,J3=$3;var ew={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.6.0/LICENSE.txt
 */(function(n,a){(function(l,p){n.exports=p()})(J2,function(){var l={},p={};function _(v,u,z){if(p[v]=z,v==="index"){var V="var sharedModule = {}; ("+p.shared+")(sharedModule); ("+p.worker+")(sharedModule);",W={};return p.shared(W),p.index(l,W),typeof window<"u"&&l.setWorkerUrl(window.URL.createObjectURL(new Blob([V],{type:"text/javascript"}))),l}}_("shared",["exports"],function(v){function u(i,t,r,s){return new(r||(r=Promise))(function(h,f){function y(E){try{C(s.next(E))}catch(M){f(M)}}function x(E){try{C(s.throw(E))}catch(M){f(M)}}function C(E){var M;E.done?h(E.value):(M=E.value,M instanceof r?M:new r(function(I){I(M)})).then(y,x)}C((s=s.apply(i,t||[])).next())})}function z(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}typeof SuppressedError=="function"&&SuppressedError;var V=W;function W(i,t){this.x=i,this.y=t}W.prototype={clone:function(){return new W(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,r=i.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),r=Math.sin(i),s=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=s,this},_rotateAround:function(i,t){var r=Math.cos(i),s=Math.sin(i),h=t.y+s*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-s*(this.y-t.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},W.convert=function(i){return i instanceof W?i:Array.isArray(i)?new W(i[0],i[1]):i};var j=z(V),N=Te;function Te(i,t,r,s){this.cx=3*i,this.bx=3*(r-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(s-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=r,this.p2y=s}Te.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var r=i,s=0;s<8;s++){var h=this.sampleCurveX(r)-i;if(Math.abs(h)<t)return r;var f=this.sampleCurveDerivativeX(r);if(Math.abs(f)<1e-6)break;r-=h/f}var y=0,x=1;for(r=i,s=0;s<20&&(h=this.sampleCurveX(r),!(Math.abs(h-i)<t));s++)i>h?y=r:x=r,r=.5*(x-y)+y;return r},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};var Ce=z(N);let we,Ge;function re(){return we==null&&(we=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),we}function ie(){if(Ge==null&&(Ge=!1,re())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let s=0;s<5*5;s++){const h=4*s;t.fillStyle=`rgb(${h},${h+1},${h+2})`,t.fillRect(s%5,Math.floor(s/5),1,1)}const r=t.getImageData(0,0,5,5).data;for(let s=0;s<5*5*4;s++)if(s%4!=3&&r[s]!==s){Ge=!0;break}}}return Ge||!1}function ce(i,t,r,s){const h=new Ce(i,t,r,s);return f=>h.solve(f)}const Ee=ce(.25,.1,.25,1);function ke(i,t,r){return Math.min(r,Math.max(t,i))}function Xe(i,t,r){const s=r-t,h=((i-t)%s+s)%s+t;return h===t?r:h}function Qe(i,...t){for(const r of t)for(const s in r)i[s]=r[s];return i}let pe=1;function pt(i,t,r){const s={};for(const h in i)s[h]=t.call(this,i[h],h,i);return s}function ct(i,t,r){const s={};for(const h in i)t.call(this,i[h],h,i)&&(s[h]=i[h]);return s}function ot(i){return Array.isArray(i)?i.map(ot):typeof i=="object"&&i?pt(i,ot):i}const Xt={};function Ft(i){Xt[i]||(typeof console<"u"&&console.warn(i),Xt[i]=!0)}function Ot(i,t,r){return(r.y-i.y)*(t.x-i.x)>(t.y-i.y)*(r.x-i.x)}function Ln(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let $n=null;function Un(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ut(i,t,r,s,h){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const f=new VideoFrame(i,{timestamp:0});try{const y=f==null?void 0:f.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);const x=y.startsWith("BGR"),C=new Uint8ClampedArray(s*h*4);if(yield f.copyTo(C,function(E,M,I,R,O){const F=4*Math.max(-M,0),U=(Math.max(0,I)-I)*R*4+F,J=4*R,ne=Math.max(0,M),ye=Math.max(0,I);return{rect:{x:ne,y:ye,width:Math.min(E.width,M+R)-ne,height:Math.min(E.height,I+O)-ye},layout:[{offset:U,stride:J}]}}(i,t,r,s,h)),x)for(let E=0;E<C.length;E+=4){const M=C[E];C[E]=C[E+2],C[E+2]=M}return C}finally{f.close()}})}let bt,Rt;const Nt="AbortError";function Tn(){return new Error(Nt)}const yn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function On(i){return yn.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const hn="global-dispatcher";class rn extends Error{constructor(t,r,s,h){super(`AJAXError: ${r} (${t}): ${s}`),this.status=t,this.statusText=r,this.url=s,this.body=h}}const qn=()=>Ln(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Xa=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const s=On(i.url);if(s)return s(i,t);if(Ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:hn},t)}if(!(/^file:/.test(r=i.url)||/^file:/.test(qn())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(s,h){return u(this,void 0,void 0,function*(){const f=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:qn(),signal:h.signal});s.type!=="json"||f.headers.has("Accept")||f.headers.set("Accept","application/json");const y=yield fetch(f);if(!y.ok){const E=yield y.blob();throw new rn(y.status,y.statusText,s.url,E)}let x;x=s.type==="arrayBuffer"||s.type==="image"?y.arrayBuffer():s.type==="json"?y.json():y.text();const C=yield x;if(h.signal.aborted)throw Tn();return{data:C,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}})}(i,t);if(Ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:hn},t)}var r;return function(s,h){return new Promise((f,y)=>{var x;const C=new XMLHttpRequest;C.open(s.method||"GET",s.url,!0),s.type!=="arrayBuffer"&&s.type!=="image"||(C.responseType="arraybuffer");for(const E in s.headers)C.setRequestHeader(E,s.headers[E]);s.type==="json"&&(C.responseType="text",!((x=s.headers)===null||x===void 0)&&x.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=s.credentials==="include",C.onerror=()=>{y(new Error(C.statusText))},C.onload=()=>{if(!h.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let E=C.response;if(s.type==="json")try{E=JSON.parse(C.response)}catch(M){return void y(M)}f({data:E,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const E=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});y(new rn(C.status,C.statusText,s.url,E))}},h.signal.addEventListener("abort",()=>{C.abort(),y(Tn())}),C.send(s.body)})}(i,t)};function la(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const t=new URL(i),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function Rr(i,t,r){r[i]&&r[i].indexOf(t)!==-1||(r[i]=r[i]||[],r[i].push(t))}function ca(i,t,r){if(r&&r[i]){const s=r[i].indexOf(t);s!==-1&&r[i].splice(s,1)}}class ka{constructor(t,r={}){Qe(this,r),this.type=t}}class pn extends ka{constructor(t,r={}){super("error",Qe({error:t},r))}}class Li{on(t,r){return this._listeners=this._listeners||{},Rr(t,r,this._listeners),this}off(t,r){return ca(t,r,this._listeners),ca(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Rr(t,r,this._oneTimeListeners),this):new Promise(s=>this.once(t,s))}fire(t,r){typeof t=="string"&&(t=new ka(t,r||{}));const s=t.type;if(this.listens(s)){t.target=this;const h=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];for(const x of h)x.call(this,t);const f=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];for(const x of f)ca(s,x,this._oneTimeListeners),x.call(this,t);const y=this._eventedParent;y&&(Qe(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(t))}else t instanceof pn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ka=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Oi(i,t){const r={};for(const s in i)s!=="ref"&&(r[s]=i[s]);return Ka.forEach(s=>{s in t&&(r[s]=t[s])}),r}function qt(i,t){if(Array.isArray(i)){if(!Array.isArray(t)||i.length!==t.length)return!1;for(let r=0;r<i.length;r++)if(!qt(i[r],t[r]))return!1;return!0}if(typeof i=="object"&&i!==null&&t!==null){if(typeof t!="object"||Object.keys(i).length!==Object.keys(t).length)return!1;for(const r in i)if(!qt(i[r],t[r]))return!1;return!0}return i===t}function un(i,t){i.push(t)}function pr(i,t,r){un(r,{command:"addSource",args:[i,t[i]]})}function La(i,t,r){un(t,{command:"removeSource",args:[i]}),r[i]=!0}function ua(i,t,r,s){La(i,r,s),pr(i,t,r)}function fr(i,t,r){let s;for(s in i[r])if(Object.prototype.hasOwnProperty.call(i[r],s)&&s!=="data"&&!qt(i[r][s],t[r][s]))return!1;for(s in t[r])if(Object.prototype.hasOwnProperty.call(t[r],s)&&s!=="data"&&!qt(i[r][s],t[r][s]))return!1;return!0}function bi(i,t,r,s,h,f){i=i||{},t=t||{};for(const y in i)Object.prototype.hasOwnProperty.call(i,y)&&(qt(i[y],t[y])||r.push({command:f,args:[s,y,t[y],h]}));for(const y in t)Object.prototype.hasOwnProperty.call(t,y)&&!Object.prototype.hasOwnProperty.call(i,y)&&(qt(i[y],t[y])||r.push({command:f,args:[s,y,t[y],h]}))}function da(i){return i.id}function ha(i,t){return i[t.id]=t,i}class Ne{constructor(t,r,s,h){this.message=(t?`${t}: `:"")+s,h&&(this.identifier=h),r!=null&&r.__line__&&(this.line=r.__line__)}}function wi(i,...t){for(const r of t)for(const s in r)i[s]=r[s];return i}class fn extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class Bn{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[s,h]of r)this.bindings[s]=h}concat(t){return new Bn(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const pa={kind:"null"},Ue={kind:"number"},Pt={kind:"string"},yt={kind:"boolean"},Yn={kind:"color"},Ci={kind:"object"},At={kind:"value"},Ji={kind:"collator"},Yi={kind:"formatted"},Bi={kind:"padding"},Fi={kind:"resolvedImage"},Q={kind:"variableAnchorOffsetCollection"};function k(i,t){return{kind:"array",itemType:i,N:t}}function L(i){if(i.kind==="array"){const t=L(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const q=[pa,Ue,Pt,yt,Yn,Yi,Ci,k(At),Bi,Fi,Q];function X(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!X(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const r of q)if(!X(r,t))return null}}return`Expected ${L(i)} but found ${L(t)} instead.`}function se(i,t){return t.some(r=>r.kind===i.kind)}function de(i,t){return t.some(r=>r==="null"?i===null:r==="array"?Array.isArray(i):r==="object"?i&&!Array.isArray(i)&&typeof i=="object":r===typeof i)}function me(i,t){return i.kind==="array"&&t.kind==="array"?i.itemType.kind===t.itemType.kind&&typeof i.N=="number":i.kind===t.kind}const ae=.96422,Ae=.82521,De=4/29,ve=6/29,$=3*ve*ve,ee=ve*ve*ve,ue=Math.PI/180,xe=180/Math.PI;function Le(i){return(i%=360)<0&&(i+=360),i}function ze([i,t,r,s]){let h,f;const y=Oe((.2225045*(i=nt(i))+.7168786*(t=nt(t))+.0606169*(r=nt(r)))/1);i===t&&t===r?h=f=y:(h=Oe((.4360747*i+.3850649*t+.1430804*r)/ae),f=Oe((.0139322*i+.0971045*t+.7141733*r)/Ae));const x=116*y-16;return[x<0?0:x,500*(h-y),200*(y-f),s]}function nt(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Oe(i){return i>ee?Math.pow(i,1/3):i/$+De}function gt([i,t,r,s]){let h=(i+16)/116,f=isNaN(t)?h:h+t/500,y=isNaN(r)?h:h-r/200;return h=1*st(h),f=ae*st(f),y=Ae*st(y),[Ve(3.1338561*f-1.6168667*h-.4906146*y),Ve(-.9787684*f+1.9161415*h+.033454*y),Ve(.0719453*f-.2289914*h+1.4052427*y),s]}function Ve(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function st(i){return i>ve?i*i*i:$*(i-De)}function xt(i){return parseInt(i.padEnd(2,i),16)/255}function Tt(i,t){return zt(t?i/100:i,0,1)}function zt(i,t,r){return Math.min(Math.max(t,i),r)}function Mt(i){return!i.some(Number.isNaN)}const _n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class St{constructor(t,r,s,h=1,f=!0){this.r=t,this.g=r,this.b=s,this.a=h,f||(this.r*=h,this.g*=h,this.b*=h,h||this.overwriteGetter("rgb",[t,r,s,h]))}static parse(t){if(t instanceof St)return t;if(typeof t!="string")return;const r=function(s){if((s=s.toLowerCase().trim())==="transparent")return[0,0,0,0];const h=_n[s];if(h){const[y,x,C]=h;return[y/255,x/255,C/255,1]}if(s.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(s)){const y=s.length<6?1:2;let x=1;return[xt(s.slice(x,x+=y)),xt(s.slice(x,x+=y)),xt(s.slice(x,x+=y)),xt(s.slice(x,x+y)||"ff")]}if(s.startsWith("rgb")){const y=s.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,C,E,M,I,R,O,F,U,J,ne,ye]=y,le=[M||" ",O||" ",J].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const fe=[E,R,U].join(""),Se=fe==="%%%"?100:fe===""?255:0;if(Se){const Re=[zt(+C/Se,0,1),zt(+I/Se,0,1),zt(+F/Se,0,1),ne?Tt(+ne,ye):1];if(Mt(Re))return Re}}return}}const f=s.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(f){const[y,x,C,E,M,I,R,O,F]=f,U=[C||" ",M||" ",R].join("");if(U==="  "||U==="  /"||U===",,"||U===",,,"){const J=[+x,zt(+E,0,100),zt(+I,0,100),O?Tt(+O,F):1];if(Mt(J))return function([ne,ye,le,fe]){function Se(Re){const Ke=(Re+ne/30)%12,vt=ye*Math.min(le,1-le);return le-vt*Math.max(-1,Math.min(Ke-3,9-Ke,1))}return ne=Le(ne),ye/=100,le/=100,[Se(0),Se(8),Se(4),fe]}(J)}}}(t);return r?new St(...r,!1):void 0}get rgb(){const{r:t,g:r,b:s,a:h}=this,f=h||1/0;return this.overwriteGetter("rgb",[t/f,r/f,s/f,h])}get hcl(){return this.overwriteGetter("hcl",function(t){const[r,s,h,f]=ze(t),y=Math.sqrt(s*s+h*h);return[Math.round(1e4*y)?Le(Math.atan2(h,s)*xe):NaN,y,r,f]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ze(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,s,h]=this.rgb;return`rgba(${[t,r,s].map(f=>Math.round(255*f)).join(",")},${h})`}}St.black=new St(0,0,0,1),St.white=new St(1,1,1,1),St.transparent=new St(0,0,0,0),St.red=new St(1,0,0,1);class Ja{constructor(t,r,s){this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Qi{constructor(t,r,s,h,f){this.text=t,this.image=r,this.scale=s,this.fontStack=h,this.textColor=f}}class Fn{constructor(t){this.sections=t}static fromString(t){return new Fn([new Qi(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Fn?t:Fn.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Nn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Nn)return t;if(typeof t=="number")return new Nn([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Nn(t)}}toString(){return JSON.stringify(this.values)}}const mr=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class mn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof mn)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let r=0;r<t.length;r+=2){const s=t[r],h=t[r+1];if(typeof s!="string"||!mr.has(s)||!Array.isArray(h)||h.length!==2||typeof h[0]!="number"||typeof h[1]!="number")return}return new mn(t)}}toString(){return JSON.stringify(this.values)}}class Mn{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Mn({name:t,available:!1}):null}}function Ya(i,t,r,s){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?s===void 0||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[i,t,r,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[i,t,r,s]:[i,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Oa(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof St||i instanceof Ja||i instanceof Fn||i instanceof Nn||i instanceof mn||i instanceof Mn)return!0;if(Array.isArray(i)){for(const t of i)if(!Oa(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Oa(i[t]))return!1;return!0}return!1}function _t(i){if(i===null)return pa;if(typeof i=="string")return Pt;if(typeof i=="boolean")return yt;if(typeof i=="number")return Ue;if(i instanceof St)return Yn;if(i instanceof Ja)return Ji;if(i instanceof Fn)return Yi;if(i instanceof Nn)return Bi;if(i instanceof mn)return Q;if(i instanceof Mn)return Fi;if(Array.isArray(i)){const t=i.length;let r;for(const s of i){const h=_t(s);if(r){if(r===h)continue;r=At;break}r=h}return k(r||At,t)}return Ci}function Zt(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof St||i instanceof Fn||i instanceof Nn||i instanceof mn||i instanceof Mn?i.toString():JSON.stringify(i)}class In{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Oa(t[1]))return r.error("invalid value");const s=t[1];let h=_t(s);const f=r.expectedType;return h.kind!=="array"||h.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(h=f),new In(h,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class It{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Ai={string:Pt,number:Ue,boolean:yt,object:Ci};class pi{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let s,h=1;const f=t[0];if(f==="array"){let x,C;if(t.length>2){const E=t[1];if(typeof E!="string"||!(E in Ai)||E==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);x=Ai[E],h++}else x=At;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);C=t[2],h++}s=k(x,C)}else{if(!Ai[f])throw new Error(`Types doesn't contain name = ${f}`);s=Ai[f]}const y=[];for(;h<t.length;h++){const x=r.parse(t[h],h,At);if(!x)return null;y.push(x)}return new pi(s,y)}evaluate(t){for(let r=0;r<this.args.length;r++){const s=this.args[r].evaluate(t);if(!X(this.type,_t(s)))return s;if(r===this.args.length-1)throw new It(`Expected value to be of type ${L(this.type)}, but found ${L(_t(s))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const kr={"to-boolean":yt,"to-color":Yn,"to-number":Ue,"to-string":Pt};class gr{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const s=t[0];if(!kr[s])throw new Error(`Can't parse ${s} as it is not part of the known types`);if((s==="to-boolean"||s==="to-string")&&t.length!==2)return r.error("Expected one argument.");const h=kr[s],f=[];for(let y=1;y<t.length;y++){const x=r.parse(t[y],y,At);if(!x)return null;f.push(x)}return new gr(h,f)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,s;for(const h of this.args){if(r=h.evaluate(t),s=null,r instanceof St)return r;if(typeof r=="string"){const f=t.parseColor(r);if(f)return f}else if(Array.isArray(r)&&(s=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:Ya(r[0],r[1],r[2],r[3]),!s))return new St(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new It(s||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const s of this.args){r=s.evaluate(t);const h=Nn.parse(r);if(h)return h}throw new It(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const s of this.args){r=s.evaluate(t);const h=mn.parse(r);if(h)return h}throw new It(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const s of this.args){if(r=s.evaluate(t),r===null)return 0;const h=Number(r);if(!isNaN(h))return h}throw new It(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Fn.fromString(Zt(this.args[0].evaluate(t)));case"resolvedImage":return Mn.fromString(Zt(this.args[0].evaluate(t)));default:return Zt(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Ec=["Unknown","Point","LineString","Polygon"];class es{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ec[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=St.parse(t)),r}}class yr{constructor(t,r,s=[],h,f=new Bn,y=[]){this.registry=t,this.path=s,this.key=s.map(x=>`[${x}]`).join(""),this.scope=f,this.errors=y,this.expectedType=h,this._isConstant=r}parse(t,r,s,h,f={}){return r?this.concat(r,s,h)._parse(t,f):this._parse(t,f)}_parse(t,r){function s(h,f,y){return y==="assert"?new pi(f,[h]):y==="coerce"?new gr(f,[h]):h}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=t[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const f=this.registry[h];if(f){let y=f.parse(t,this);if(!y)return null;if(this.expectedType){const x=this.expectedType,C=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||C.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(x.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(x.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(x,C))return null}else y=s(y,x,r.typeAnnotation||"coerce");else y=s(y,x,r.typeAnnotation||"coerce");else y=s(y,x,r.typeAnnotation||"coerce");else y=s(y,x,r.typeAnnotation||"assert")}if(!(y instanceof In)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){const x=new es;try{y=new In(y.type,y.evaluate(x))}catch(C){return this.error(C.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,r,s){const h=typeof t=="number"?this.path.concat(t):this.path,f=s?this.scope.concat(s):this.scope;return new yr(this.registry,this._isConstant,h,r||null,f,this.errors)}error(t,...r){const s=`${this.key}${r.map(h=>`[${h}]`).join("")}`;this.errors.push(new fn(s,t))}checkSubtype(t,r){const s=X(t,r);return s&&this.error(s),s}}class $t{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const s=[];for(let f=1;f<t.length-1;f+=2){const y=t[f];if(typeof y!="string")return r.error(`Expected string, but found ${typeof y} instead.`,f);if(/[^a-zA-Z0-9_]/.test(y))return r.error("Variable names must contain only alphanumeric characters or '_'.",f);const x=r.parse(t[f+1],f+1);if(!x)return null;s.push([y,x])}const h=r.parse(t[t.length-1],t.length-1,r.expectedType,s);return h?new $t(s,h):null}outputDefined(){return this.result.outputDefined()}}class tl{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const s=t[1];return r.scope.has(s)?new tl(s,r.scope.get(s)):r.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class Tc{constructor(t,r,s){this.type=t,this.index=r,this.input=s}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,Ue),h=r.parse(t[2],2,k(r.expectedType||At));return s&&h?new Tc(h.type.itemType,s,h):null}evaluate(t){const r=this.index.evaluate(t),s=this.input.evaluate(t);if(r<0)throw new It(`Array index out of bounds: ${r} < 0.`);if(r>=s.length)throw new It(`Array index out of bounds: ${r} > ${s.length-1}.`);if(r!==Math.floor(r))throw new It(`Array index must be an integer, but found ${r} instead.`);return s[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class ts{constructor(t,r){this.type=yt,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,At),h=r.parse(t[2],2,At);return s&&h?se(s.type,[yt,Pt,Ue,pa,At])?new ts(s,h):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${L(s.type)} instead`):null}evaluate(t){const r=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!s)return!1;if(!de(r,["boolean","string","number","null"]))throw new It(`Expected first argument to be of type boolean, string, number or null, but found ${L(_t(r))} instead.`);if(!de(s,["string","array"]))throw new It(`Expected second argument to be of type array or string, but found ${L(_t(s))} instead.`);return s.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class nl{constructor(t,r,s){this.type=Ue,this.needle=t,this.haystack=r,this.fromIndex=s}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,At),h=r.parse(t[2],2,At);if(!s||!h)return null;if(!se(s.type,[yt,Pt,Ue,pa,At]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${L(s.type)} instead`);if(t.length===4){const f=r.parse(t[3],3,Ue);return f?new nl(s,h,f):null}return new nl(s,h)}evaluate(t){const r=this.needle.evaluate(t),s=this.haystack.evaluate(t);if(!de(r,["boolean","string","number","null"]))throw new It(`Expected first argument to be of type boolean, string, number or null, but found ${L(_t(r))} instead.`);let h;if(this.fromIndex&&(h=this.fromIndex.evaluate(t)),de(s,["string"])){const f=s.indexOf(r,h);return f===-1?-1:[...s.slice(0,f)].length}if(de(s,["array"]))return s.indexOf(r,h);throw new It(`Expected second argument to be of type array or string, but found ${L(_t(s))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class il{constructor(t,r,s,h,f,y){this.inputType=t,this.type=r,this.input=s,this.cases=h,this.outputs=f,this.otherwise=y}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return r.error("Expected an even number of arguments.");let s,h;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);const f={},y=[];for(let E=2;E<t.length-1;E+=2){let M=t[E];const I=t[E+1];Array.isArray(M)||(M=[M]);const R=r.concat(E);if(M.length===0)return R.error("Expected at least one branch label.");for(const F of M){if(typeof F!="number"&&typeof F!="string")return R.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return R.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof F=="number"&&Math.floor(F)!==F)return R.error("Numeric branch labels must be integer values.");if(s){if(R.checkSubtype(s,_t(F)))return null}else s=_t(F);if(f[String(F)]!==void 0)return R.error("Branch labels must be unique.");f[String(F)]=y.length}const O=r.parse(I,E,h);if(!O)return null;h=h||O.type,y.push(O)}const x=r.parse(t[1],1,At);if(!x)return null;const C=r.parse(t[t.length-1],t.length-1,h);return C?x.type.kind!=="value"&&r.concat(1).checkSubtype(s,x.type)?null:new il(s,h,x,f,y,C):null}evaluate(t){const r=this.input.evaluate(t);return(_t(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class al{constructor(t,r,s){this.type=t,this.branches=r,this.otherwise=s}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return r.error("Expected an odd number of arguments.");let s;r.expectedType&&r.expectedType.kind!=="value"&&(s=r.expectedType);const h=[];for(let y=1;y<t.length-1;y+=2){const x=r.parse(t[y],y,yt);if(!x)return null;const C=r.parse(t[y+1],y+1,s);if(!C)return null;h.push([x,C]),s=s||C.type}const f=r.parse(t[t.length-1],t.length-1,s);if(!f)return null;if(!s)throw new Error("Can't infer output type");return new al(s,h,f)}evaluate(t){for(const[r,s]of this.branches)if(r.evaluate(t))return s.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,s]of this.branches)t(r),t(s);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}}class rl{constructor(t,r,s,h){this.type=t,this.input=r,this.beginIndex=s,this.endIndex=h}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const s=r.parse(t[1],1,At),h=r.parse(t[2],2,Ue);if(!s||!h)return null;if(!se(s.type,[k(At),Pt,At]))return r.error(`Expected first argument to be of type array or string, but found ${L(s.type)} instead`);if(t.length===4){const f=r.parse(t[3],3,Ue);return f?new rl(s.type,s,h,f):null}return new rl(s.type,s,h)}evaluate(t){const r=this.input.evaluate(t),s=this.beginIndex.evaluate(t);let h;if(this.endIndex&&(h=this.endIndex.evaluate(t)),de(r,["string"]))return[...r].slice(s,h).join("");if(de(r,["array"]))return r.slice(s,h);throw new It(`Expected first argument to be of type array or string, but found ${L(_t(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ns(i,t){const r=i.length-1;let s,h,f=0,y=r,x=0;for(;f<=y;)if(x=Math.floor((f+y)/2),s=i[x],h=i[x+1],s<=t){if(x===r||t<h)return x;f=x+1}else{if(!(s>t))throw new It("Input is not a number.");y=x-1}return 0}class uo{constructor(t,r,s){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[h,f]of s)this.labels.push(h),this.outputs.push(f)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");const s=r.parse(t[1],1,Ue);if(!s)return null;const h=[];let f=null;r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);for(let y=1;y<t.length;y+=2){const x=y===1?-1/0:t[y],C=t[y+1],E=y,M=y+1;if(typeof x!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(h.length&&h[h.length-1][0]>=x)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const I=r.parse(C,M,f);if(!I)return null;f=f||I.type,h.push([x,I])}return new uo(f,s,h)}evaluate(t){const r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(t);const h=this.input.evaluate(t);if(h<=r[0])return s[0].evaluate(t);const f=r.length;return h>=r[f-1]?s[f-1].evaluate(t):s[ns(r,h)].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function cf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var uf=kd;function kd(i,t,r,s){this.cx=3*i,this.bx=3*(r-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(s-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=r,this.p2y=s}kd.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var r=i,s=0;s<8;s++){var h=this.sampleCurveX(r)-i;if(Math.abs(h)<t)return r;var f=this.sampleCurveDerivativeX(r);if(Math.abs(f)<1e-6)break;r-=h/f}var y=0,x=1;for(r=i,s=0;s<20&&(h=this.sampleCurveX(r),!(Math.abs(h-i)<t));s++)i>h?y=r:x=r,r=.5*(x-y)+y;return r},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};var df=cf(uf);function _r(i,t,r){return i+r*(t-i)}function is(i,t,r){return i.map((s,h)=>_r(s,t[h],r))}const Ni={number:_r,color:function(i,t,r,s="rgb"){switch(s){case"rgb":{const[h,f,y,x]=is(i.rgb,t.rgb,r);return new St(h,f,y,x,!1)}case"hcl":{const[h,f,y,x]=i.hcl,[C,E,M,I]=t.hcl;let R,O;if(isNaN(h)||isNaN(C))isNaN(h)?isNaN(C)?R=NaN:(R=C,y!==1&&y!==0||(O=E)):(R=h,M!==1&&M!==0||(O=f));else{let ye=C-h;C>h&&ye>180?ye-=360:C<h&&h-C>180&&(ye+=360),R=h+r*ye}const[F,U,J,ne]=function([ye,le,fe,Se]){return ye=isNaN(ye)?0:ye*ue,gt([fe,Math.cos(ye)*le,Math.sin(ye)*le,Se])}([R,O??_r(f,E,r),_r(y,M,r),_r(x,I,r)]);return new St(F,U,J,ne,!1)}case"lab":{const[h,f,y,x]=gt(is(i.lab,t.lab,r));return new St(h,f,y,x,!1)}}},array:is,padding:function(i,t,r){return new Nn(is(i.values,t.values,r))},variableAnchorOffsetCollection:function(i,t,r){const s=i.values,h=t.values;if(s.length!==h.length)throw new It(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${t.toString()}`);const f=[];for(let y=0;y<s.length;y+=2){if(s[y]!==h[y])throw new It(`Cannot interpolate values containing mismatched anchors. from[${y}]: ${s[y]}, to[${y}]: ${h[y]}`);f.push(s[y]);const[x,C]=s[y+1],[E,M]=h[y+1];f.push([_r(x,E,r),_r(C,M,r)])}return new mn(f)}};class ji{constructor(t,r,s,h,f){this.type=t,this.operator=r,this.interpolation=s,this.input=h,this.labels=[],this.outputs=[];for(const[y,x]of f)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(t,r,s,h){let f=0;if(t.name==="exponential")f=as(r,t.base,s,h);else if(t.name==="linear")f=as(r,1,s,h);else if(t.name==="cubic-bezier"){const y=t.controlPoints;f=new df(y[0],y[1],y[2],y[3]).solve(as(r,1,s,h))}return f}static parse(t,r){let[s,h,f,...y]=t;if(!Array.isArray(h)||h.length===0)return r.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const E=h[1];if(typeof E!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:E}}else{if(h[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const E=h.slice(1);if(E.length!==4||E.some(M=>typeof M!="number"||M<0||M>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:E}}}if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(f=r.parse(f,2,Ue),!f)return null;const x=[];let C=null;s==="interpolate-hcl"||s==="interpolate-lab"?C=Yn:r.expectedType&&r.expectedType.kind!=="value"&&(C=r.expectedType);for(let E=0;E<y.length;E+=2){const M=y[E],I=y[E+1],R=E+3,O=E+4;if(typeof M!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(x.length&&x[x.length-1][0]>=M)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',R);const F=r.parse(I,O,C);if(!F)return null;C=C||F.type,x.push([M,F])}return me(C,Ue)||me(C,Yn)||me(C,Bi)||me(C,Q)||me(C,k(Ue))?new ji(C,s,h,f,x):r.error(`Type ${L(C)} is not interpolatable.`)}evaluate(t){const r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(t);const h=this.input.evaluate(t);if(h<=r[0])return s[0].evaluate(t);const f=r.length;if(h>=r[f-1])return s[f-1].evaluate(t);const y=ns(r,h),x=ji.interpolationFactor(this.interpolation,h,r[y],r[y+1]),C=s[y].evaluate(t),E=s[y+1].evaluate(t);switch(this.operator){case"interpolate":return Ni[this.type.kind](C,E,x);case"interpolate-hcl":return Ni.color(C,E,x,"hcl");case"interpolate-lab":return Ni.color(C,E,x,"lab")}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function as(i,t,r,s){const h=s-r,f=i-r;return h===0?0:t===1?f/h:(Math.pow(t,f)-1)/(Math.pow(t,h)-1)}class ol{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let s=null;const h=r.expectedType;h&&h.kind!=="value"&&(s=h);const f=[];for(const x of t.slice(1)){const C=r.parse(x,1+f.length,s,void 0,{typeAnnotation:"omit"});if(!C)return null;s=s||C.type,f.push(C)}if(!s)throw new Error("No output type");const y=h&&f.some(x=>X(h,x.type));return new ol(y?At:s,f)}evaluate(t){let r,s=null,h=0;for(const f of this.args)if(h++,s=f.evaluate(t),s&&s instanceof Mn&&!s.available&&(r||(r=s.name),s=null,h===this.args.length&&(s=r)),s!==null)break;return s}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function Ld(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Od(i,t,r,s){return s.compare(t,r)===0}function Lr(i,t,r){const s=i!=="=="&&i!=="!=";return class tw{constructor(f,y,x){this.type=yt,this.lhs=f,this.rhs=y,this.collator=x,this.hasUntypedArgument=f.type.kind==="value"||y.type.kind==="value"}static parse(f,y){if(f.length!==3&&f.length!==4)return y.error("Expected two or three arguments.");const x=f[0];let C=y.parse(f[1],1,At);if(!C)return null;if(!Ld(x,C.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${L(C.type)}'.`);let E=y.parse(f[2],2,At);if(!E)return null;if(!Ld(x,E.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${L(E.type)}'.`);if(C.type.kind!==E.type.kind&&C.type.kind!=="value"&&E.type.kind!=="value")return y.error(`Cannot compare types '${L(C.type)}' and '${L(E.type)}'.`);s&&(C.type.kind==="value"&&E.type.kind!=="value"?C=new pi(E.type,[C]):C.type.kind!=="value"&&E.type.kind==="value"&&(E=new pi(C.type,[E])));let M=null;if(f.length===4){if(C.type.kind!=="string"&&E.type.kind!=="string"&&C.type.kind!=="value"&&E.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(M=y.parse(f[3],3,Ji),!M)return null}return new tw(C,E,M)}evaluate(f){const y=this.lhs.evaluate(f),x=this.rhs.evaluate(f);if(s&&this.hasUntypedArgument){const C=_t(y),E=_t(x);if(C.kind!==E.kind||C.kind!=="string"&&C.kind!=="number")throw new It(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${C.kind}, ${E.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const C=_t(y),E=_t(x);if(C.kind!=="string"||E.kind!=="string")return t(f,y,x)}return this.collator?r(f,y,x,this.collator.evaluate(f)):t(f,y,x)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}}}const Bd=Lr("==",function(i,t,r){return t===r},Od),hf=Lr("!=",function(i,t,r){return t!==r},function(i,t,r,s){return!Od(0,t,r,s)}),pf=Lr("<",function(i,t,r){return t<r},function(i,t,r,s){return s.compare(t,r)<0}),Fd=Lr(">",function(i,t,r){return t>r},function(i,t,r,s){return s.compare(t,r)>0}),Nd=Lr("<=",function(i,t,r){return t<=r},function(i,t,r,s){return s.compare(t,r)<=0}),ff=Lr(">=",function(i,t,r){return t>=r},function(i,t,r,s){return s.compare(t,r)>=0});class sl{constructor(t,r,s){this.type=Ji,this.locale=s,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const s=t[1];if(typeof s!="object"||Array.isArray(s))return r.error("Collator options argument must be an object.");const h=r.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,yt);if(!h)return null;const f=r.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,yt);if(!f)return null;let y=null;return s.locale&&(y=r.parse(s.locale,1,Pt),!y)?null:new sl(h,f,y)}evaluate(t){return new Ja(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Mc{constructor(t,r,s,h,f){this.type=Pt,this.number=t,this.locale=r,this.currency=s,this.minFractionDigits=h,this.maxFractionDigits=f}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const s=r.parse(t[1],1,Ue);if(!s)return null;const h=t[2];if(typeof h!="object"||Array.isArray(h))return r.error("NumberFormat options argument must be an object.");let f=null;if(h.locale&&(f=r.parse(h.locale,1,Pt),!f))return null;let y=null;if(h.currency&&(y=r.parse(h.currency,1,Pt),!y))return null;let x=null;if(h["min-fraction-digits"]&&(x=r.parse(h["min-fraction-digits"],1,Ue),!x))return null;let C=null;return h["max-fraction-digits"]&&(C=r.parse(h["max-fraction-digits"],1,Ue),!C)?null:new Mc(s,f,y,x,C)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class ll{constructor(t){this.type=Yi,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const s=t[1];if(!Array.isArray(s)&&typeof s=="object")return r.error("First argument must be an image or text section.");const h=[];let f=!1;for(let y=1;y<=t.length-1;++y){const x=t[y];if(f&&typeof x=="object"&&!Array.isArray(x)){f=!1;let C=null;if(x["font-scale"]&&(C=r.parse(x["font-scale"],1,Ue),!C))return null;let E=null;if(x["text-font"]&&(E=r.parse(x["text-font"],1,k(Pt)),!E))return null;let M=null;if(x["text-color"]&&(M=r.parse(x["text-color"],1,Yn),!M))return null;const I=h[h.length-1];I.scale=C,I.font=E,I.textColor=M}else{const C=r.parse(t[y],1,At);if(!C)return null;const E=C.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,h.push({content:C,scale:null,font:null,textColor:null})}}return new ll(h)}evaluate(t){return new Fn(this.sections.map(r=>{const s=r.content.evaluate(t);return _t(s)===Fi?new Qi("",s,null,null,null):new Qi(Zt(s),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)}))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}}class Ic{constructor(t){this.type=Fi,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const s=r.parse(t[1],1,Pt);return s?new Ic(s):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),s=Mn.fromString(r);return s&&t.availableImages&&(s.available=t.availableImages.indexOf(r)>-1),s}eachChild(t){t(this.input)}outputDefined(){return!1}}class Pc{constructor(t){this.type=Ue,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const s=r.parse(t[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${L(s.type)} instead.`):new Pc(s):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new It(`Expected value to be of type string or array, but found ${L(_t(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Ba=8192;function Dc(i,t){const r=(180+i[0])/360,s=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,h=Math.pow(2,t.z);return[Math.round(r*h*Ba),Math.round(s*h*Ba)]}function ho(i,t){const r=Math.pow(2,t.z);return[(h=(i[0]/Ba+t.x)/r,360*h-180),(s=(i[1]/Ba+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90)];var s,h}function Vt(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function rs(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function mf(i,t,r){const s=i[0]-t[0],h=i[1]-t[1],f=i[0]-r[0],y=i[1]-r[1];return s*y-f*h==0&&s*f<=0&&h*y<=0}function cl(i,t,r,s){return(h=[s[0]-r[0],s[1]-r[1]])[0]*(f=[t[0]-i[0],t[1]-i[1]])[1]-h[1]*f[0]!=0&&!(!Vd(i,t,r,s)||!Vd(r,s,i,t));var h,f}function gf(i,t,r){for(const s of r)for(let h=0;h<s.length-1;++h)if(cl(i,t,s[h],s[h+1]))return!0;return!1}function po(i,t,r=!1){let s=!1;for(const x of t)for(let C=0;C<x.length-1;C++){if(mf(i,x[C],x[C+1]))return r;(f=x[C])[1]>(h=i)[1]!=(y=x[C+1])[1]>h[1]&&h[0]<(y[0]-f[0])*(h[1]-f[1])/(y[1]-f[1])+f[0]&&(s=!s)}var h,f,y;return s}function yf(i,t){for(const r of t)if(po(i,r))return!0;return!1}function jd(i,t){for(const r of i)if(!po(r,t))return!1;for(let r=0;r<i.length-1;++r)if(gf(i[r],i[r+1],t))return!1;return!0}function _f(i,t){for(const r of t)if(jd(i,r))return!0;return!1}function Vd(i,t,r,s){const h=s[0]-r[0],f=s[1]-r[1],y=(i[0]-r[0])*f-h*(i[1]-r[1]),x=(t[0]-r[0])*f-h*(t[1]-r[1]);return y>0&&x<0||y<0&&x>0}function zc(i,t,r){const s=[];for(let h=0;h<i.length;h++){const f=[];for(let y=0;y<i[h].length;y++){const x=Dc(i[h][y],r);Vt(t,x),f.push(x)}s.push(f)}return s}function Ud(i,t,r){const s=[];for(let h=0;h<i.length;h++){const f=zc(i[h],t,r);s.push(f)}return s}function qd(i,t,r,s){if(i[0]<r[0]||i[0]>r[2]){const h=.5*s;let f=i[0]-r[0]>h?-s:r[0]-i[0]>h?s:0;f===0&&(f=i[0]-r[2]>h?-s:r[2]-i[0]>h?s:0),i[0]+=f}Vt(t,i)}function Gd(i,t,r,s){const h=Math.pow(2,s.z)*Ba,f=[s.x*Ba,s.y*Ba],y=[];for(const x of i)for(const C of x){const E=[C.x+f[0],C.y+f[1]];qd(E,t,r,h),y.push(E)}return y}function Hd(i,t,r,s){const h=Math.pow(2,s.z)*Ba,f=[s.x*Ba,s.y*Ba],y=[];for(const C of i){const E=[];for(const M of C){const I=[M.x+f[0],M.y+f[1]];Vt(t,I),E.push(I)}y.push(E)}if(t[2]-t[0]<=h/2){(x=t)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const C of y)for(const E of C)qd(E,t,r,h)}var x;return y}class Or{constructor(t,r){this.type=yt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Oa(t[1])){const s=t[1];if(s.type==="FeatureCollection"){const h=[];for(const f of s.features){const{type:y,coordinates:x}=f.geometry;y==="Polygon"&&h.push(x),y==="MultiPolygon"&&h.push(...x)}if(h.length)return new Or(s,{type:"MultiPolygon",coordinates:h})}else if(s.type==="Feature"){const h=s.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Or(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Or(s,s)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,s){const h=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],y=r.canonicalID();if(s.type==="Polygon"){const x=zc(s.coordinates,f,y),C=Gd(r.geometry(),h,f,y);if(!rs(h,f))return!1;for(const E of C)if(!po(E,x))return!1}if(s.type==="MultiPolygon"){const x=Ud(s.coordinates,f,y),C=Gd(r.geometry(),h,f,y);if(!rs(h,f))return!1;for(const E of C)if(!yf(E,x))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,s){const h=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],y=r.canonicalID();if(s.type==="Polygon"){const x=zc(s.coordinates,f,y),C=Hd(r.geometry(),h,f,y);if(!rs(h,f))return!1;for(const E of C)if(!jd(E,x))return!1}if(s.type==="MultiPolygon"){const x=Ud(s.coordinates,f,y),C=Hd(r.geometry(),h,f,y);if(!rs(h,f))return!1;for(const E of C)if(!_f(E,x))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let $d=class{constructor(i=[],t=(r,s)=>r<s?-1:r>s?1:0){if(this.data=i,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:t,compare:r}=this,s=t[i];for(;i>0;){const h=i-1>>1,f=t[h];if(r(s,f)>=0)break;t[i]=f,i=h}t[i]=s}_down(i){const{data:t,compare:r}=this,s=this.length>>1,h=t[i];for(;i<s;){let f=1+(i<<1);const y=f+1;if(y<this.length&&r(t[y],t[f])<0&&(f=y),r(t[f],h)>=0)break;t[i]=t[f],i=f}t[i]=h}};function vf(i,t,r,s,h){Zd(i,t,r,s||i.length-1,h||xf)}function Zd(i,t,r,s,h){for(;s>r;){if(s-r>600){var f=s-r+1,y=t-r+1,x=Math.log(f),C=.5*Math.exp(2*x/3),E=.5*Math.sqrt(x*C*(f-C)/f)*(y-f/2<0?-1:1);Zd(i,t,Math.max(r,Math.floor(t-y*C/f+E)),Math.min(s,Math.floor(t+(f-y)*C/f+E)),h)}var M=i[t],I=r,R=s;for(os(i,r,t),h(i[s],M)>0&&os(i,r,s);I<R;){for(os(i,I,R),I++,R--;h(i[I],M)<0;)I++;for(;h(i[R],M)>0;)R--}h(i[r],M)===0?os(i,r,R):os(i,++R,s),R<=t&&(r=R+1),t<=R&&(s=R-1)}}function os(i,t,r){var s=i[t];i[t]=i[r],i[r]=s}function xf(i,t){return i<t?-1:i>t?1:0}function ul(i,t){if(i.length<=1)return[i];const r=[];let s,h;for(const f of i){const y=wf(f);y!==0&&(f.area=Math.abs(y),h===void 0&&(h=y<0),h===y<0?(s&&r.push(s),s=[f]):s.push(f))}if(s&&r.push(s),t>1)for(let f=0;f<r.length;f++)r[f].length<=t||(vf(r[f],t,1,r[f].length-1,bf),r[f]=r[f].slice(0,t));return r}function bf(i,t){return t.area-i.area}function wf(i){let t=0;for(let r,s,h=0,f=i.length,y=f-1;h<f;y=h++)r=i[h],s=i[y],t+=(s.x-r.x)*(r.y+s.y);return t}const Wd=1/298.257223563,Xd=Wd*(2-Wd),Kd=Math.PI/180;class Rc{constructor(t){const r=6378.137*Kd*1e3,s=Math.cos(t*Kd),h=1/(1-Xd*(1-s*s)),f=Math.sqrt(h);this.kx=r*f*s,this.ky=r*f*h*(1-Xd)}distance(t,r){const s=this.wrap(t[0]-r[0])*this.kx,h=(t[1]-r[1])*this.ky;return Math.sqrt(s*s+h*h)}pointOnLine(t,r){let s,h,f,y,x=1/0;for(let C=0;C<t.length-1;C++){let E=t[C][0],M=t[C][1],I=this.wrap(t[C+1][0]-E)*this.kx,R=(t[C+1][1]-M)*this.ky,O=0;I===0&&R===0||(O=(this.wrap(r[0]-E)*this.kx*I+(r[1]-M)*this.ky*R)/(I*I+R*R),O>1?(E=t[C+1][0],M=t[C+1][1]):O>0&&(E+=I/this.kx*O,M+=R/this.ky*O)),I=this.wrap(r[0]-E)*this.kx,R=(r[1]-M)*this.ky;const F=I*I+R*R;F<x&&(x=F,s=E,h=M,f=C,y=O)}return{point:[s,h],index:f,t:Math.max(0,Math.min(1,y))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Jd(i,t){return t[0]-i[0]}function dl(i){return i[1]-i[0]+1}function Qa(i,t){return i[1]>=i[0]&&i[1]<t}function kc(i,t){if(i[0]>i[1])return[null,null];const r=dl(i);if(t){if(r===2)return[i,null];const h=Math.floor(r/2);return[[i[0],i[0]+h],[i[0]+h,i[1]]]}if(r===1)return[i,null];const s=Math.floor(r/2)-1;return[[i[0],i[0]+s],[i[0]+s+1,i[1]]]}function ss(i,t){if(!Qa(t,i.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let s=t[0];s<=t[1];++s)Vt(r,i[s]);return r}function Lc(i){const t=[1/0,1/0,-1/0,-1/0];for(const r of i)for(const s of r)Vt(t,s);return t}function Yd(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function Oc(i,t,r){if(!Yd(i)||!Yd(t))return NaN;let s=0,h=0;return i[2]<t[0]&&(s=t[0]-i[2]),i[0]>t[2]&&(s=i[0]-t[2]),i[1]>t[3]&&(h=i[1]-t[3]),i[3]<t[1]&&(h=t[1]-i[3]),r.distance([0,0],[s,h])}function Br(i,t,r){const s=r.pointOnLine(t,i);return r.distance(i,s.point)}function vn(i,t,r,s,h){const f=Math.min(Br(i,[r,s],h),Br(t,[r,s],h)),y=Math.min(Br(r,[i,t],h),Br(s,[i,t],h));return Math.min(f,y)}function Cf(i,t,r,s,h){if(!Qa(t,i.length)||!Qa(s,r.length))return 1/0;let f=1/0;for(let y=t[0];y<t[1];++y){const x=i[y],C=i[y+1];for(let E=s[0];E<s[1];++E){const M=r[E],I=r[E+1];if(cl(x,C,M,I))return 0;f=Math.min(f,vn(x,C,M,I,h))}}return f}function Lt(i,t,r,s,h){if(!Qa(t,i.length)||!Qa(s,r.length))return NaN;let f=1/0;for(let y=t[0];y<=t[1];++y)for(let x=s[0];x<=s[1];++x)if(f=Math.min(f,h.distance(i[y],r[x])),f===0)return f;return f}function Bc(i,t,r){if(po(i,t,!0))return 0;let s=1/0;for(const h of t){const f=h[0],y=h[h.length-1];if(f!==y&&(s=Math.min(s,Br(i,[y,f],r)),s===0))return s;const x=r.pointOnLine(h,i);if(s=Math.min(s,r.distance(i,x.point)),s===0)return s}return s}function dn(i,t,r,s){if(!Qa(t,i.length))return NaN;for(let f=t[0];f<=t[1];++f)if(po(i[f],r,!0))return 0;let h=1/0;for(let f=t[0];f<t[1];++f){const y=i[f],x=i[f+1];for(const C of r)for(let E=0,M=C.length,I=M-1;E<M;I=E++){const R=C[I],O=C[E];if(cl(y,x,R,O))return 0;h=Math.min(h,vn(y,x,R,O,s))}}return h}function en(i,t){for(const r of i)for(const s of r)if(po(s,t,!0))return!0;return!1}function hl(i,t,r,s=1/0){const h=Lc(i),f=Lc(t);if(s!==1/0&&Oc(h,f,r)>=s)return s;if(rs(h,f)){if(en(i,t))return 0}else if(en(t,i))return 0;let y=1/0;for(const x of i)for(let C=0,E=x.length,M=E-1;C<E;M=C++){const I=x[M],R=x[C];for(const O of t)for(let F=0,U=O.length,J=U-1;F<U;J=F++){const ne=O[J],ye=O[F];if(cl(I,R,ne,ye))return 0;y=Math.min(y,vn(I,R,ne,ye,r))}}return y}function Fc(i,t,r,s,h,f){if(!f)return;const y=Oc(ss(s,f),h,r);y<t&&i.push([y,f,[0,0]])}function ls(i,t,r,s,h,f,y){if(!f||!y)return;const x=Oc(ss(s,f),ss(h,y),r);x<t&&i.push([x,f,y])}function pl(i,t,r,s,h=1/0){let f=Math.min(s.distance(i[0],r[0][0]),h);if(f===0)return f;const y=new $d([[0,[0,i.length-1],[0,0]]],Jd),x=Lc(r);for(;y.length>0;){const C=y.pop();if(C[0]>=f)continue;const E=C[1],M=t?50:100;if(dl(E)<=M){if(!Qa(E,i.length))return NaN;if(t){const I=dn(i,E,r,s);if(isNaN(I)||I===0)return I;f=Math.min(f,I)}else for(let I=E[0];I<=E[1];++I){const R=Bc(i[I],r,s);if(f=Math.min(f,R),f===0)return 0}}else{const I=kc(E,t);Fc(y,f,s,i,x,I[0]),Fc(y,f,s,i,x,I[1])}}return f}function fl(i,t,r,s,h,f=1/0){let y=Math.min(f,h.distance(i[0],r[0]));if(y===0)return y;const x=new $d([[0,[0,i.length-1],[0,r.length-1]]],Jd);for(;x.length>0;){const C=x.pop();if(C[0]>=y)continue;const E=C[1],M=C[2],I=t?50:100,R=s?50:100;if(dl(E)<=I&&dl(M)<=R){if(!Qa(E,i.length)&&Qa(M,r.length))return NaN;let O;if(t&&s)O=Cf(i,E,r,M,h),y=Math.min(y,O);else if(t&&!s){const F=i.slice(E[0],E[1]+1);for(let U=M[0];U<=M[1];++U)if(O=Br(r[U],F,h),y=Math.min(y,O),y===0)return y}else if(!t&&s){const F=r.slice(M[0],M[1]+1);for(let U=E[0];U<=E[1];++U)if(O=Br(i[U],F,h),y=Math.min(y,O),y===0)return y}else O=Lt(i,E,r,M,h),y=Math.min(y,O)}else{const O=kc(E,t),F=kc(M,s);ls(x,y,h,i,r,O[0],F[0]),ls(x,y,h,i,r,O[0],F[1]),ls(x,y,h,i,r,O[1],F[0]),ls(x,y,h,i,r,O[1],F[1])}}return y}function Nc(i){return i.type==="MultiPolygon"?i.coordinates.map(t=>({type:"Polygon",coordinates:t})):i.type==="MultiLineString"?i.coordinates.map(t=>({type:"LineString",coordinates:t})):i.type==="MultiPoint"?i.coordinates.map(t=>({type:"Point",coordinates:t})):[i]}class Fr{constructor(t,r){this.type=Ue,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Oa(t[1])){const s=t[1];if(s.type==="FeatureCollection")return new Fr(s,s.features.map(h=>Nc(h.geometry)).flat());if(s.type==="Feature")return new Fr(s,Nc(s.geometry));if("type"in s&&"coordinates"in s)return new Fr(s,Nc(s))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(r,s){const h=r.geometry(),f=h.flat().map(C=>ho([C.x,C.y],r.canonical));if(h.length===0)return NaN;const y=new Rc(f[0][1]);let x=1/0;for(const C of s){switch(C.type){case"Point":x=Math.min(x,fl(f,!1,[C.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,fl(f,!1,C.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,pl(f,!1,C.coordinates,y,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="LineString")return function(r,s){const h=r.geometry(),f=h.flat().map(C=>ho([C.x,C.y],r.canonical));if(h.length===0)return NaN;const y=new Rc(f[0][1]);let x=1/0;for(const C of s){switch(C.type){case"Point":x=Math.min(x,fl(f,!0,[C.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,fl(f,!0,C.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,pl(f,!0,C.coordinates,y,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="Polygon")return function(r,s){const h=r.geometry();if(h.length===0||h[0].length===0)return NaN;const f=ul(h,0).map(C=>C.map(E=>E.map(M=>ho([M.x,M.y],r.canonical)))),y=new Rc(f[0][0][0][1]);let x=1/0;for(const C of s)for(const E of f){switch(C.type){case"Point":x=Math.min(x,pl([C.coordinates],!1,E,y,x));break;case"LineString":x=Math.min(x,pl(C.coordinates,!0,E,y,x));break;case"Polygon":x=Math.min(x,hl(E,C.coordinates,y,x))}if(x===0)return x}return x}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Nr={"==":Bd,"!=":hf,">":Fd,"<":pf,">=":ff,"<=":Nd,array:pi,at:Tc,boolean:pi,case:al,coalesce:ol,collator:sl,format:ll,image:Ic,in:ts,"index-of":nl,interpolate:ji,"interpolate-hcl":ji,"interpolate-lab":ji,length:Pc,let:$t,literal:In,match:il,number:pi,"number-format":Mc,object:pi,slice:rl,step:uo,string:pi,"to-boolean":gr,"to-color":gr,"to-number":gr,"to-string":gr,var:tl,within:Or,distance:Fr};class Vi{constructor(t,r,s,h){this.name=t,this.type=r,this._evaluate=s,this.args=h}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const s=t[0],h=Vi.definitions[s];if(!h)return r.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter(([E])=>!Array.isArray(E)||E.length===t.length-1);let C=null;for(const[E,M]of x){C=new yr(r.registry,ml,r.path,null,r.scope);const I=[];let R=!1;for(let O=1;O<t.length;O++){const F=t[O],U=Array.isArray(E)?E[O-1]:E.type,J=C.parse(F,1+I.length,U);if(!J){R=!0;break}I.push(J)}if(!R)if(Array.isArray(E)&&E.length!==I.length)C.error(`Expected ${E.length} arguments, but found ${I.length} instead.`);else{for(let O=0;O<I.length;O++){const F=Array.isArray(E)?E[O]:E.type,U=I[O];C.concat(O+1).checkSubtype(F,U.type)}if(C.errors.length===0)return new Vi(s,f,M,I)}}if(x.length===1)r.errors.push(...C.errors);else{const E=(x.length?x:y).map(([I])=>{return R=I,Array.isArray(R)?`(${R.map(L).join(", ")})`:`(${L(R.type)}...)`;var R}).join(" | "),M=[];for(let I=1;I<t.length;I++){const R=r.parse(t[I],1+M.length);if(!R)return null;M.push(L(R.type))}r.error(`Expected arguments of type ${E}, but found (${M.join(", ")}) instead.`)}return null}static register(t,r){Vi.definitions=r;for(const s in r)t[s]=Vi}}function jc(i,[t,r,s,h]){t=t.evaluate(i),r=r.evaluate(i),s=s.evaluate(i);const f=h?h.evaluate(i):1,y=Ya(t,r,s,f);if(y)throw new It(y);return new St(t/255,r/255,s/255,f,!1)}function Vc(i,t){return i in t}function cs(i,t){const r=t[i];return r===void 0?null:r}function jr(i){return{type:i}}function ml(i){if(i instanceof tl)return ml(i.boundExpression);if(i instanceof Vi&&i.name==="error"||i instanceof sl||i instanceof Or||i instanceof Fr)return!1;const t=i instanceof gr||i instanceof pi;let r=!0;return i.eachChild(s=>{r=t?r&&ml(s):r&&s instanceof In}),!!r&&gl(i)&&yl(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gl(i){if(i instanceof Vi&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Or||i instanceof Fr)return!1;let t=!0;return i.eachChild(r=>{t&&!gl(r)&&(t=!1)}),t}function us(i){if(i instanceof Vi&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(r=>{t&&!us(r)&&(t=!1)}),t}function yl(i,t){if(i instanceof Vi&&t.indexOf(i.name)>=0)return!1;let r=!0;return i.eachChild(s=>{r&&!yl(s,t)&&(r=!1)}),r}function Qd(i){return{result:"success",value:i}}function fo(i){return{result:"error",value:i}}function mo(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Uc(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function _l(i){return!!i.expression&&i.expression.interpolated}function jt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function vl(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function eh(i){return i}function qc(i,t){const r=t.type==="color",s=i.stops&&typeof i.stops[0][0]=="object",h=s||!(s||i.property!==void 0),f=i.type||(_l(t)?"exponential":"interval");if(r||t.type==="padding"){const M=r?St.parse:Nn.parse;(i=wi({},i)).stops&&(i.stops=i.stops.map(I=>[I[0],M(I[1])])),i.default=M(i.default?i.default:t.default)}if(i.colorSpace&&(y=i.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var y;let x,C,E;if(f==="exponential")x=hs;else if(f==="interval")x=xl;else if(f==="categorical"){x=Gc,C=Object.create(null);for(const M of i.stops)C[M[0]]=M[1];E=typeof i.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);x=th}if(s){const M={},I=[];for(let F=0;F<i.stops.length;F++){const U=i.stops[F],J=U[0].zoom;M[J]===void 0&&(M[J]={zoom:J,type:i.type,property:i.property,default:i.default,stops:[]},I.push(J)),M[J].stops.push([U[0].value,U[1]])}const R=[];for(const F of I)R.push([M[F].zoom,qc(M[F],t)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:ji.interpolationFactor.bind(void 0,O),zoomStops:R.map(F=>F[0]),evaluate:({zoom:F},U)=>hs({stops:R,base:i.base},t,F).evaluate(F,U)}}if(h){const M=f==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:ji.interpolationFactor.bind(void 0,M),zoomStops:i.stops.map(I=>I[0]),evaluate:({zoom:I})=>x(i,t,I,C,E)}}return{kind:"source",evaluate(M,I){const R=I&&I.properties?I.properties[i.property]:void 0;return R===void 0?ds(i.default,t.default):x(i,t,R,C,E)}}}function ds(i,t,r){return i!==void 0?i:t!==void 0?t:r!==void 0?r:void 0}function Gc(i,t,r,s,h){return ds(typeof r===h?s[r]:void 0,i.default,t.default)}function xl(i,t,r){if(jt(r)!=="number")return ds(i.default,t.default);const s=i.stops.length;if(s===1||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[s-1][0])return i.stops[s-1][1];const h=ns(i.stops.map(f=>f[0]),r);return i.stops[h][1]}function hs(i,t,r){const s=i.base!==void 0?i.base:1;if(jt(r)!=="number")return ds(i.default,t.default);const h=i.stops.length;if(h===1||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[h-1][0])return i.stops[h-1][1];const f=ns(i.stops.map(M=>M[0]),r),y=function(M,I,R,O){const F=O-R,U=M-R;return F===0?0:I===1?U/F:(Math.pow(I,U)-1)/(Math.pow(I,F)-1)}(r,s,i.stops[f][0],i.stops[f+1][0]),x=i.stops[f][1],C=i.stops[f+1][1],E=Ni[t.type]||eh;return typeof x.evaluate=="function"?{evaluate(...M){const I=x.evaluate.apply(void 0,M),R=C.evaluate.apply(void 0,M);if(I!==void 0&&R!==void 0)return E(I,R,y,i.colorSpace)}}:E(x,C,y,i.colorSpace)}function th(i,t,r){switch(t.type){case"color":r=St.parse(r);break;case"formatted":r=Fn.fromString(r.toString());break;case"resolvedImage":r=Mn.fromString(r.toString());break;case"padding":r=Nn.parse(r);break;default:jt(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0)}return ds(r,i.default,t.default)}Vi.register(Nr,{error:[{kind:"error"},[Pt],(i,[t])=>{throw new It(t.evaluate(i))}],typeof:[Pt,[At],(i,[t])=>L(_t(t.evaluate(i)))],"to-rgba":[k(Ue,4),[Yn],(i,[t])=>{const[r,s,h,f]=t.evaluate(i).rgb;return[255*r,255*s,255*h,f]}],rgb:[Yn,[Ue,Ue,Ue],jc],rgba:[Yn,[Ue,Ue,Ue,Ue],jc],has:{type:yt,overloads:[[[Pt],(i,[t])=>Vc(t.evaluate(i),i.properties())],[[Pt,Ci],(i,[t,r])=>Vc(t.evaluate(i),r.evaluate(i))]]},get:{type:At,overloads:[[[Pt],(i,[t])=>cs(t.evaluate(i),i.properties())],[[Pt,Ci],(i,[t,r])=>cs(t.evaluate(i),r.evaluate(i))]]},"feature-state":[At,[Pt],(i,[t])=>cs(t.evaluate(i),i.featureState||{})],properties:[Ci,[],i=>i.properties()],"geometry-type":[Pt,[],i=>i.geometryType()],id:[At,[],i=>i.id()],zoom:[Ue,[],i=>i.globals.zoom],"heatmap-density":[Ue,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ue,[],i=>i.globals.lineProgress||0],accumulated:[At,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ue,jr(Ue),(i,t)=>{let r=0;for(const s of t)r+=s.evaluate(i);return r}],"*":[Ue,jr(Ue),(i,t)=>{let r=1;for(const s of t)r*=s.evaluate(i);return r}],"-":{type:Ue,overloads:[[[Ue,Ue],(i,[t,r])=>t.evaluate(i)-r.evaluate(i)],[[Ue],(i,[t])=>-t.evaluate(i)]]},"/":[Ue,[Ue,Ue],(i,[t,r])=>t.evaluate(i)/r.evaluate(i)],"%":[Ue,[Ue,Ue],(i,[t,r])=>t.evaluate(i)%r.evaluate(i)],ln2:[Ue,[],()=>Math.LN2],pi:[Ue,[],()=>Math.PI],e:[Ue,[],()=>Math.E],"^":[Ue,[Ue,Ue],(i,[t,r])=>Math.pow(t.evaluate(i),r.evaluate(i))],sqrt:[Ue,[Ue],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[Ue,[Ue],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[Ue,[Ue],(i,[t])=>Math.log(t.evaluate(i))],log2:[Ue,[Ue],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[Ue,[Ue],(i,[t])=>Math.sin(t.evaluate(i))],cos:[Ue,[Ue],(i,[t])=>Math.cos(t.evaluate(i))],tan:[Ue,[Ue],(i,[t])=>Math.tan(t.evaluate(i))],asin:[Ue,[Ue],(i,[t])=>Math.asin(t.evaluate(i))],acos:[Ue,[Ue],(i,[t])=>Math.acos(t.evaluate(i))],atan:[Ue,[Ue],(i,[t])=>Math.atan(t.evaluate(i))],min:[Ue,jr(Ue),(i,t)=>Math.min(...t.map(r=>r.evaluate(i)))],max:[Ue,jr(Ue),(i,t)=>Math.max(...t.map(r=>r.evaluate(i)))],abs:[Ue,[Ue],(i,[t])=>Math.abs(t.evaluate(i))],round:[Ue,[Ue],(i,[t])=>{const r=t.evaluate(i);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ue,[Ue],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[Ue,[Ue],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[yt,[Pt,At],(i,[t,r])=>i.properties()[t.value]===r.value],"filter-id-==":[yt,[At],(i,[t])=>i.id()===t.value],"filter-type-==":[yt,[Pt],(i,[t])=>i.geometryType()===t.value],"filter-<":[yt,[Pt,At],(i,[t,r])=>{const s=i.properties()[t.value],h=r.value;return typeof s==typeof h&&s<h}],"filter-id-<":[yt,[At],(i,[t])=>{const r=i.id(),s=t.value;return typeof r==typeof s&&r<s}],"filter->":[yt,[Pt,At],(i,[t,r])=>{const s=i.properties()[t.value],h=r.value;return typeof s==typeof h&&s>h}],"filter-id->":[yt,[At],(i,[t])=>{const r=i.id(),s=t.value;return typeof r==typeof s&&r>s}],"filter-<=":[yt,[Pt,At],(i,[t,r])=>{const s=i.properties()[t.value],h=r.value;return typeof s==typeof h&&s<=h}],"filter-id-<=":[yt,[At],(i,[t])=>{const r=i.id(),s=t.value;return typeof r==typeof s&&r<=s}],"filter->=":[yt,[Pt,At],(i,[t,r])=>{const s=i.properties()[t.value],h=r.value;return typeof s==typeof h&&s>=h}],"filter-id->=":[yt,[At],(i,[t])=>{const r=i.id(),s=t.value;return typeof r==typeof s&&r>=s}],"filter-has":[yt,[At],(i,[t])=>t.value in i.properties()],"filter-has-id":[yt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[yt,[k(Pt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[yt,[k(At)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[yt,[Pt,k(At)],(i,[t,r])=>r.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[yt,[Pt,k(At)],(i,[t,r])=>function(s,h,f,y){for(;f<=y;){const x=f+y>>1;if(h[x]===s)return!0;h[x]>s?y=x-1:f=x+1}return!1}(i.properties()[t.value],r.value,0,r.value.length-1)],all:{type:yt,overloads:[[[yt,yt],(i,[t,r])=>t.evaluate(i)&&r.evaluate(i)],[jr(yt),(i,t)=>{for(const r of t)if(!r.evaluate(i))return!1;return!0}]]},any:{type:yt,overloads:[[[yt,yt],(i,[t,r])=>t.evaluate(i)||r.evaluate(i)],[jr(yt),(i,t)=>{for(const r of t)if(r.evaluate(i))return!0;return!1}]]},"!":[yt,[yt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[yt,[Pt],(i,[t])=>{const r=i.globals&&i.globals.isSupportedScript;return!r||r(t.evaluate(i))}],upcase:[Pt,[Pt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Pt,[Pt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Pt,jr(At),(i,t)=>t.map(r=>Zt(r.evaluate(i))).join("")],"resolved-locale":[Pt,[Ji],(i,[t])=>t.evaluate(i).resolvedLocale()]});class ps{constructor(t,r){var s;this.expression=t,this._warningHistory={},this._evaluator=new es,this._defaultValue=r?(s=r).type==="color"&&vl(s.default)?new St(0,0,0,0):s.type==="color"?St.parse(s.default)||null:s.type==="padding"?Nn.parse(s.default)||null:s.type==="variableAnchorOffsetCollection"?mn.parse(s.default)||null:s.default===void 0?null:s.default:null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,s,h,f,y){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=s,this._evaluator.canonical=h,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(t,r,s,h,f,y){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=s||null,this._evaluator.canonical=h,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=y||null;try{const x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new It(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function fs(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Nr}function ms(i,t){const r=new yr(Nr,ml,[],t?function(h){const f={color:Yn,string:Pt,number:Ue,enum:Pt,boolean:yt,formatted:Yi,padding:Bi,resolvedImage:Fi,variableAnchorOffsetCollection:Q};return h.type==="array"?k(f[h.value]||At,h.length):f[h.type]}(t):void 0),s=r.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return s?Qd(new ps(s,t)):fo(r.errors)}class go{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!us(r.expression)}evaluateWithoutErrorHandling(t,r,s,h,f,y){return this._styleExpression.evaluateWithoutErrorHandling(t,r,s,h,f,y)}evaluate(t,r,s,h,f,y){return this._styleExpression.evaluate(t,r,s,h,f,y)}}class Hc{constructor(t,r,s,h){this.kind=t,this.zoomStops=s,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!us(r.expression),this.interpolationType=h}evaluateWithoutErrorHandling(t,r,s,h,f,y){return this._styleExpression.evaluateWithoutErrorHandling(t,r,s,h,f,y)}evaluate(t,r,s,h,f,y){return this._styleExpression.evaluate(t,r,s,h,f,y)}interpolationFactor(t,r,s){return this.interpolationType?ji.interpolationFactor(this.interpolationType,t,r,s):0}}function nh(i,t){const r=ms(i,t);if(r.result==="error")return r;const s=r.value.expression,h=gl(s);if(!h&&!mo(t))return fo([new fn("","data expressions not supported")]);const f=yl(s,["zoom"]);if(!f&&!Uc(t))return fo([new fn("","zoom expressions not supported")]);const y=wl(s);return y||f?y instanceof fn?fo([y]):y instanceof ji&&!_l(t)?fo([new fn("",'"interpolate" expressions cannot be used with this property')]):Qd(y?new Hc(h?"camera":"composite",r.value,y.labels,y instanceof ji?y.interpolation:void 0):new go(h?"constant":"source",r.value)):fo([new fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class bl{constructor(t,r){this._parameters=t,this._specification=r,wi(this,qc(this._parameters,this._specification))}static deserialize(t){return new bl(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function wl(i){let t=null;if(i instanceof $t)t=wl(i.result);else if(i instanceof ol){for(const r of i.args)if(t=wl(r),t)break}else(i instanceof uo||i instanceof ji)&&i.input instanceof Vi&&i.input.name==="zoom"&&(t=i);return t instanceof fn||i.eachChild(r=>{const s=wl(r);s instanceof fn?t=s:!t&&s?t=new fn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&s&&t!==s&&(t=new fn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function $c(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!$c(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Cl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yo(i){if(i==null)return{filter:()=>!0,needGeometry:!1};$c(i)||(i=gs(i));const t=ms(i,Cl);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));return{filter:(r,s,h)=>t.value.evaluate(r,s,{},h),needGeometry:_o(i)}}function Ui(i,t){return i<t?-1:i>t?1:0}function _o(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let t=1;t<i.length;t++)if(_o(i[t]))return!0;return!1}function gs(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?Zc(i[1],i[2],"=="):t==="!="?ys(Zc(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Zc(i[1],i[2],t):t==="any"?(r=i.slice(1),["any"].concat(r.map(gs))):t==="all"?["all"].concat(i.slice(1).map(gs)):t==="none"?["all"].concat(i.slice(1).map(gs).map(ys)):t==="in"?ih(i[1],i.slice(2)):t==="!in"?ys(ih(i[1],i.slice(2))):t==="has"?vo(i[1]):t!=="!has"||ys(vo(i[1]));var r}function Zc(i,t,r){switch(i){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,i,t]}}function ih(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(r=>typeof r!=typeof t[0])?["filter-in-large",i,["literal",t.sort(Ui)]]:["filter-in-small",i,["literal",t]]}}function vo(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function ys(i){return["!",i]}function _s(i){const t=typeof i;if(t==="number"||t==="boolean"||t==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let h="[";for(const f of i)h+=`${_s(f)},`;return`${h}]`}const r=Object.keys(i).sort();let s="{";for(let h=0;h<r.length;h++)s+=`${JSON.stringify(r[h])}:${_s(i[r[h]])},`;return`${s}}`}function Af(i){let t="";for(const r of Ka)t+=`/${_s(i[r])}`;return t}function Al(i){const t=i.value;return t?[new Ne(i.key,t,"constants have been deprecated as of v8")]:[]}function An(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function fa(i){if(Array.isArray(i))return i.map(fa);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const r in i)t[r]=fa(i[r]);return t}return An(i)}function ea(i){const t=i.key,r=i.value,s=i.valueSpec||{},h=i.objectElementValidators||{},f=i.style,y=i.styleSpec,x=i.validateSpec;let C=[];const E=jt(r);if(E!=="object")return[new Ne(t,r,`object expected, ${E} found`)];for(const M in r){const I=M.split(".")[0],R=s[I]||s["*"];let O;if(h[I])O=h[I];else if(s[I])O=x;else if(h["*"])O=h["*"];else{if(!s["*"]){C.push(new Ne(t,r[M],`unknown property "${M}"`));continue}O=x}C=C.concat(O({key:(t&&`${t}.`)+M,value:r[M],valueSpec:R,style:f,styleSpec:y,object:r,objectKey:M,validateSpec:x},r))}for(const M in s)h[M]||s[M].required&&s[M].default===void 0&&r[M]===void 0&&C.push(new Ne(t,r,`missing required property "${M}"`));return C}function vs(i){const t=i.value,r=i.valueSpec,s=i.style,h=i.styleSpec,f=i.key,y=i.arrayElementValidator||i.validateSpec;if(jt(t)!=="array")return[new Ne(f,t,`array expected, ${jt(t)} found`)];if(r.length&&t.length!==r.length)return[new Ne(f,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new Ne(f,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let x={type:r.value,values:r.values};h.$version<7&&(x.function=r.function),jt(r.value)==="object"&&(x=r.value);let C=[];for(let E=0;E<t.length;E++)C=C.concat(y({array:t,arrayIndex:E,value:t[E],valueSpec:x,validateSpec:i.validateSpec,style:s,styleSpec:h,key:`${f}[${E}]`}));return C}function Sl(i){const t=i.key,r=i.value,s=i.valueSpec;let h=jt(r);return h==="number"&&r!=r&&(h="NaN"),h!=="number"?[new Ne(t,r,`number expected, ${h} found`)]:"minimum"in s&&r<s.minimum?[new Ne(t,r,`${r} is less than the minimum value ${s.minimum}`)]:"maximum"in s&&r>s.maximum?[new Ne(t,r,`${r} is greater than the maximum value ${s.maximum}`)]:[]}function El(i){const t=i.valueSpec,r=An(i.value.type);let s,h,f,y={};const x=r!=="categorical"&&i.value.property===void 0,C=!x,E=jt(i.value.stops)==="array"&&jt(i.value.stops[0])==="array"&&jt(i.value.stops[0][0])==="object",M=ea({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(O){if(r==="identity")return[new Ne(O.key,O.value,'identity function may not have a "stops" property')];let F=[];const U=O.value;return F=F.concat(vs({key:O.key,value:U,valueSpec:O.valueSpec,validateSpec:O.validateSpec,style:O.style,styleSpec:O.styleSpec,arrayElementValidator:I})),jt(U)==="array"&&U.length===0&&F.push(new Ne(O.key,U,"array must have at least one stop")),F},default:function(O){return O.validateSpec({key:O.key,value:O.value,valueSpec:t,validateSpec:O.validateSpec,style:O.style,styleSpec:O.styleSpec})}}});return r==="identity"&&x&&M.push(new Ne(i.key,i.value,'missing required property "property"')),r==="identity"||i.value.stops||M.push(new Ne(i.key,i.value,'missing required property "stops"')),r==="exponential"&&i.valueSpec.expression&&!_l(i.valueSpec)&&M.push(new Ne(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(C&&!mo(i.valueSpec)?M.push(new Ne(i.key,i.value,"property functions not supported")):x&&!Uc(i.valueSpec)&&M.push(new Ne(i.key,i.value,"zoom functions not supported"))),r!=="categorical"&&!E||i.value.property!==void 0||M.push(new Ne(i.key,i.value,'"property" property is required')),M;function I(O){let F=[];const U=O.value,J=O.key;if(jt(U)!=="array")return[new Ne(J,U,`array expected, ${jt(U)} found`)];if(U.length!==2)return[new Ne(J,U,`array length 2 expected, length ${U.length} found`)];if(E){if(jt(U[0])!=="object")return[new Ne(J,U,`object expected, ${jt(U[0])} found`)];if(U[0].zoom===void 0)return[new Ne(J,U,"object stop key must have zoom")];if(U[0].value===void 0)return[new Ne(J,U,"object stop key must have value")];if(f&&f>An(U[0].zoom))return[new Ne(J,U[0].zoom,"stop zoom values must appear in ascending order")];An(U[0].zoom)!==f&&(f=An(U[0].zoom),h=void 0,y={}),F=F.concat(ea({key:`${J}[0]`,value:U[0],valueSpec:{zoom:{}},validateSpec:O.validateSpec,style:O.style,styleSpec:O.styleSpec,objectElementValidators:{zoom:Sl,value:R}}))}else F=F.concat(R({key:`${J}[0]`,value:U[0],valueSpec:{},validateSpec:O.validateSpec,style:O.style,styleSpec:O.styleSpec},U));return fs(fa(U[1]))?F.concat([new Ne(`${J}[1]`,U[1],"expressions are not allowed in function stops.")]):F.concat(O.validateSpec({key:`${J}[1]`,value:U[1],valueSpec:t,validateSpec:O.validateSpec,style:O.style,styleSpec:O.styleSpec}))}function R(O,F){const U=jt(O.value),J=An(O.value),ne=O.value!==null?O.value:F;if(s){if(U!==s)return[new Ne(O.key,ne,`${U} stop domain type must match previous stop domain type ${s}`)]}else s=U;if(U!=="number"&&U!=="string"&&U!=="boolean")return[new Ne(O.key,ne,"stop domain value must be a number, string, or boolean")];if(U!=="number"&&r!=="categorical"){let ye=`number expected, ${U} found`;return mo(t)&&r===void 0&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ne(O.key,ne,ye)]}return r!=="categorical"||U!=="number"||isFinite(J)&&Math.floor(J)===J?r!=="categorical"&&U==="number"&&h!==void 0&&J<h?[new Ne(O.key,ne,"stop domain values must appear in ascending order")]:(h=J,r==="categorical"&&J in y?[new Ne(O.key,ne,"stop domain values must be unique")]:(y[J]=!0,[])):[new Ne(O.key,ne,`integer expected, found ${J}`)]}}function Vr(i){const t=(i.expressionContext==="property"?nh:ms)(fa(i.value),i.valueSpec);if(t.result==="error")return t.value.map(s=>new Ne(`${i.key}${s.key}`,i.value,s.message));const r=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!r.outputDefined())return[new Ne(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!us(r))return[new Ne(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!us(r))return[new Ne(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!yl(r,["zoom","feature-state"]))return[new Ne(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!gl(r))return[new Ne(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xo(i){const t=i.key,r=i.value,s=i.valueSpec,h=[];return Array.isArray(s.values)?s.values.indexOf(An(r))===-1&&h.push(new Ne(t,r,`expected one of [${s.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(s.values).indexOf(An(r))===-1&&h.push(new Ne(t,r,`expected one of [${Object.keys(s.values).join(", ")}], ${JSON.stringify(r)} found`)),h}function Wc(i){return $c(fa(i.value))?Vr(wi({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Tl(i)}function Tl(i){const t=i.value,r=i.key;if(jt(t)!=="array")return[new Ne(r,t,`array expected, ${jt(t)} found`)];const s=i.styleSpec;let h,f=[];if(t.length<1)return[new Ne(r,t,"filter array must have at least 1 element")];switch(f=f.concat(xo({key:`${r}[0]`,value:t[0],valueSpec:s.filter_operator,style:i.style,styleSpec:i.styleSpec})),An(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&An(t[1])==="$type"&&f.push(new Ne(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&f.push(new Ne(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(h=jt(t[1]),h!=="string"&&f.push(new Ne(`${r}[1]`,t[1],`string expected, ${h} found`)));for(let y=2;y<t.length;y++)h=jt(t[y]),An(t[1])==="$type"?f=f.concat(xo({key:`${r}[${y}]`,value:t[y],valueSpec:s.geometry_type,style:i.style,styleSpec:i.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&f.push(new Ne(`${r}[${y}]`,t[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<t.length;y++)f=f.concat(Tl({key:`${r}[${y}]`,value:t[y],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":h=jt(t[1]),t.length!==2?f.push(new Ne(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):h!=="string"&&f.push(new Ne(`${r}[1]`,t[1],`string expected, ${h} found`))}return f}function xs(i,t){const r=i.key,s=i.validateSpec,h=i.style,f=i.styleSpec,y=i.value,x=i.objectKey,C=f[`${t}_${i.layerType}`];if(!C)return[];const E=x.match(/^(.*)-transition$/);if(t==="paint"&&E&&C[E[1]]&&C[E[1]].transition)return s({key:r,value:y,valueSpec:f.transition,style:h,styleSpec:f});const M=i.valueSpec||C[x];if(!M)return[new Ne(r,y,`unknown property "${x}"`)];let I;if(jt(y)==="string"&&mo(M)&&!M.tokens&&(I=/^{([^}]+)}$/.exec(y)))return[new Ne(r,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(I[1])} }\`.`)];const R=[];return i.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&R.push(new Ne(r,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&vl(fa(y))&&An(y.type)==="identity"&&R.push(new Ne(r,y,'"text-font" does not support identity functions'))),R.concat(s({key:i.key,value:y,valueSpec:M,style:h,styleSpec:f,expressionContext:"property",propertyType:t,propertyKey:x}))}function Xc(i){return xs(i,"paint")}function Kc(i){return xs(i,"layout")}function Jc(i){let t=[];const r=i.value,s=i.key,h=i.style,f=i.styleSpec;r.type||r.ref||t.push(new Ne(s,r,'either "type" or "ref" is required'));let y=An(r.type);const x=An(r.ref);if(r.id){const C=An(r.id);for(let E=0;E<i.arrayIndex;E++){const M=h.layers[E];An(M.id)===C&&t.push(new Ne(s,r.id,`duplicate layer id "${r.id}", previously used at line ${M.id.__line__}`))}}if("ref"in r){let C;["type","source","source-layer","filter","layout"].forEach(E=>{E in r&&t.push(new Ne(s,r[E],`"${E}" is prohibited for ref layers`))}),h.layers.forEach(E=>{An(E.id)===x&&(C=E)}),C?C.ref?t.push(new Ne(s,r.ref,"ref cannot reference another ref layer")):y=An(C.type):t.push(new Ne(s,r.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(r.source){const C=h.sources&&h.sources[r.source],E=C&&An(C.type);C?E==="vector"&&y==="raster"?t.push(new Ne(s,r.source,`layer "${r.id}" requires a raster source`)):E!=="raster-dem"&&y==="hillshade"?t.push(new Ne(s,r.source,`layer "${r.id}" requires a raster-dem source`)):E==="raster"&&y!=="raster"?t.push(new Ne(s,r.source,`layer "${r.id}" requires a vector source`)):E!=="vector"||r["source-layer"]?E==="raster-dem"&&y!=="hillshade"?t.push(new Ne(s,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!r.paint||!r.paint["line-gradient"]||E==="geojson"&&C.lineMetrics||t.push(new Ne(s,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ne(s,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new Ne(s,r.source,`source "${r.source}" not found`))}else t.push(new Ne(s,r,'missing required property "source"'));return t=t.concat(ea({key:s,value:r,valueSpec:f.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${s}.type`,value:r.type,valueSpec:f.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:r,objectKey:"type"}),filter:Wc,layout:C=>ea({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":E=>Kc(wi({layerType:y},E))}}),paint:C=>ea({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":E=>Xc(wi({layerType:y},E))}})}})),t}function vr(i){const t=i.value,r=i.key,s=jt(t);return s!=="string"?[new Ne(r,t,`string expected, ${s} found`)]:[]}const Ml={promoteId:function({key:i,value:t}){if(jt(t)==="string")return vr({key:i,value:t});{const r=[];for(const s in t)r.push(...vr({key:`${i}.${s}`,value:t[s]}));return r}}};function Yc(i){const t=i.value,r=i.key,s=i.styleSpec,h=i.style,f=i.validateSpec;if(!t.type)return[new Ne(r,t,'"type" is required')];const y=An(t.type);let x;switch(y){case"vector":case"raster":return x=ea({key:r,value:t,valueSpec:s[`source_${y.replace("-","_")}`],style:i.style,styleSpec:s,objectElementValidators:Ml,validateSpec:f}),x;case"raster-dem":return x=function(C){var E;const M=(E=C.sourceName)!==null&&E!==void 0?E:"",I=C.value,R=C.styleSpec,O=R.source_raster_dem,F=C.style;let U=[];const J=jt(I);if(I===void 0)return U;if(J!=="object")return U.push(new Ne("source_raster_dem",I,`object expected, ${J} found`)),U;const ne=An(I.encoding)==="custom",ye=["redFactor","greenFactor","blueFactor","baseShift"],le=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const fe in I)!ne&&ye.includes(fe)?U.push(new Ne(fe,I[fe],`In "${M}": "${fe}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):O[fe]?U=U.concat(C.validateSpec({key:fe,value:I[fe],valueSpec:O[fe],validateSpec:C.validateSpec,style:F,styleSpec:R})):U.push(new Ne(fe,I[fe],`unknown property "${fe}"`));return U}({sourceName:r,value:t,style:i.style,styleSpec:s,validateSpec:f}),x;case"geojson":if(x=ea({key:r,value:t,valueSpec:s.source_geojson,style:h,styleSpec:s,validateSpec:f,objectElementValidators:Ml}),t.cluster)for(const C in t.clusterProperties){const[E,M]=t.clusterProperties[C],I=typeof E=="string"?[E,["accumulated"],["get",C]]:E;x.push(...Vr({key:`${r}.${C}.map`,value:M,validateSpec:f,expressionContext:"cluster-map"})),x.push(...Vr({key:`${r}.${C}.reduce`,value:I,validateSpec:f,expressionContext:"cluster-reduce"}))}return x;case"video":return ea({key:r,value:t,valueSpec:s.source_video,style:h,validateSpec:f,styleSpec:s});case"image":return ea({key:r,value:t,valueSpec:s.source_image,style:h,validateSpec:f,styleSpec:s});case"canvas":return[new Ne(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xo({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,validateSpec:f,styleSpec:s})}}function ah(i){const t=i.value,r=i.styleSpec,s=r.light,h=i.style;let f=[];const y=jt(t);if(t===void 0)return f;if(y!=="object")return f=f.concat([new Ne("light",t,`object expected, ${y} found`)]),f;for(const x in t){const C=x.match(/^(.*)-transition$/);f=f.concat(C&&s[C[1]]&&s[C[1]].transition?i.validateSpec({key:x,value:t[x],valueSpec:r.transition,validateSpec:i.validateSpec,style:h,styleSpec:r}):s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],validateSpec:i.validateSpec,style:h,styleSpec:r}):[new Ne(x,t[x],`unknown property "${x}"`)])}return f}function Qc(i){const t=i.value,r=i.styleSpec,s=r.sky,h=i.style,f=jt(t);if(t===void 0)return[];if(f!=="object")return[new Ne("sky",t,`object expected, ${f} found`)];let y=[];for(const x in t)y=y.concat(s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],style:h,styleSpec:r}):[new Ne(x,t[x],`unknown property "${x}"`)]);return y}function rh(i){const t=i.value,r=i.styleSpec,s=r.terrain,h=i.style;let f=[];const y=jt(t);if(t===void 0)return f;if(y!=="object")return f=f.concat([new Ne("terrain",t,`object expected, ${y} found`)]),f;for(const x in t)f=f.concat(s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],validateSpec:i.validateSpec,style:h,styleSpec:r}):[new Ne(x,t[x],`unknown property "${x}"`)]);return f}function eu(i){let t=[];const r=i.value,s=i.key;if(Array.isArray(r)){const h=[],f=[];for(const y in r)r[y].id&&h.includes(r[y].id)&&t.push(new Ne(s,r,`all the sprites' ids must be unique, but ${r[y].id} is duplicated`)),h.push(r[y].id),r[y].url&&f.includes(r[y].url)&&t.push(new Ne(s,r,`all the sprites' URLs must be unique, but ${r[y].url} is duplicated`)),f.push(r[y].url),t=t.concat(ea({key:`${s}[${y}]`,value:r[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return t}return vr({key:s,value:r})}const tu={"*":()=>[],array:vs,boolean:function(i){const t=i.value,r=i.key,s=jt(t);return s!=="boolean"?[new Ne(r,t,`boolean expected, ${s} found`)]:[]},number:Sl,color:function(i){const t=i.key,r=i.value,s=jt(r);return s!=="string"?[new Ne(t,r,`color expected, ${s} found`)]:St.parse(String(r))?[]:[new Ne(t,r,`color expected, "${r}" found`)]},constants:Al,enum:xo,filter:Wc,function:El,layer:Jc,object:ea,source:Yc,light:ah,sky:Qc,terrain:rh,projection:function(i){const t=i.value,r=i.styleSpec,s=r.projection,h=i.style,f=jt(t);if(t===void 0)return[];if(f!=="object")return[new Ne("projection",t,`object expected, ${f} found`)];let y=[];for(const x in t)y=y.concat(s[x]?i.validateSpec({key:x,value:t[x],valueSpec:s[x],style:h,styleSpec:r}):[new Ne(x,t[x],`unknown property "${x}"`)]);return y},string:vr,formatted:function(i){return vr(i).length===0?[]:Vr(i)},resolvedImage:function(i){return vr(i).length===0?[]:Vr(i)},padding:function(i){const t=i.key,r=i.value;if(jt(r)==="array"){if(r.length<1||r.length>4)return[new Ne(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const s={type:"number"};let h=[];for(let f=0;f<r.length;f++)h=h.concat(i.validateSpec({key:`${t}[${f}]`,value:r[f],validateSpec:i.validateSpec,valueSpec:s}));return h}return Sl({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const t=i.key,r=i.value,s=jt(r),h=i.styleSpec;if(s!=="array"||r.length<1||r.length%2!=0)return[new Ne(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let f=[];for(let y=0;y<r.length;y+=2)f=f.concat(xo({key:`${t}[${y}]`,value:r[y],valueSpec:h.layout_symbol["text-anchor"]})),f=f.concat(vs({key:`${t}[${y+1}]`,value:r[y+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:h}));return f},sprite:eu};function bo(i){const t=i.value,r=i.valueSpec,s=i.styleSpec;return i.validateSpec=bo,r.expression&&vl(An(t))?El(i):r.expression&&fs(fa(t))?Vr(i):r.type&&tu[r.type]?tu[r.type](i):ea(wi({},i,{valueSpec:r.type?s[r.type]:r}))}function oh(i){const t=i.value,r=i.key,s=vr(i);return s.length||(t.indexOf("{fontstack}")===-1&&s.push(new Ne(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&s.push(new Ne(r,t,'"glyphs" url must include a "{range}" token'))),s}function ma(i,t=be){let r=[];return r=r.concat(bo({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,validateSpec:bo,objectElementValidators:{glyphs:oh,"*":()=>[]}})),i.constants&&(r=r.concat(Al({key:"constants",value:i.constants,style:i,styleSpec:t,validateSpec:bo}))),nu(r)}function ga(i){return function(t){return i({...t,validateSpec:bo})}}function nu(i){return[].concat(i).sort((t,r)=>t.line-r.line)}function ya(i){return function(...t){return nu(i.apply(this,t))}}ma.source=ya(ga(Yc)),ma.sprite=ya(ga(eu)),ma.glyphs=ya(ga(oh)),ma.light=ya(ga(ah)),ma.sky=ya(ga(Qc)),ma.terrain=ya(ga(rh)),ma.layer=ya(ga(Jc)),ma.filter=ya(ga(Wc)),ma.paintProperty=ya(ga(Xc)),ma.layoutProperty=ya(ga(Kc));const Ur=ma,Il=Ur.light,Sf=Ur.sky,iu=Ur.paintProperty,Ef=Ur.layoutProperty;function sh(i,t){let r=!1;if(t&&t.length)for(const s of t)i.fire(new pn(new Error(s.message))),r=!0;return r}class wo{constructor(t,r,s){const h=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const y=new Int32Array(this.arrayBuffer);t=y[0],this.d=(r=y[1])+2*(s=y[2]);for(let C=0;C<this.d*this.d;C++){const E=y[3+C],M=y[3+C+1];h.push(E===M?null:y.subarray(E,M))}const x=y[3+h.length+1];this.keys=y.subarray(y[3+h.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=r+2*s;for(let y=0;y<this.d*this.d;y++)h.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=s,this.scale=r/t,this.uid=0;const f=s/r*t;this.min=-f,this.max=t+f}insert(t,r,s,h,f){this._forEachCell(r,s,h,f,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(f)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,s,h,f,y){this.cells[f].push(y)}query(t,r,s,h,f){const y=this.min,x=this.max;if(t<=y&&r<=y&&x<=s&&x<=h&&!f)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(t,r,s,h,this._queryCell,C,{},f),C}}_queryCell(t,r,s,h,f,y,x,C){const E=this.cells[f];if(E!==null){const M=this.keys,I=this.bboxes;for(let R=0;R<E.length;R++){const O=E[R];if(x[O]===void 0){const F=4*O;(C?C(I[F+0],I[F+1],I[F+2],I[F+3]):t<=I[F+2]&&r<=I[F+3]&&s>=I[F+0]&&h>=I[F+1])?(x[O]=!0,y.push(M[O])):x[O]=!1}}}}_forEachCell(t,r,s,h,f,y,x,C){const E=this._convertToCellCoord(t),M=this._convertToCellCoord(r),I=this._convertToCellCoord(s),R=this._convertToCellCoord(h);for(let O=E;O<=I;O++)for(let F=M;F<=R;F++){const U=this.d*F+O;if((!C||C(this._convertFromCellCoord(O),this._convertFromCellCoord(F),this._convertFromCellCoord(O+1),this._convertFromCellCoord(F+1)))&&f.call(this,t,r,s,h,U,y,x,C))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,r=3+this.cells.length+1+1;let s=0;for(let y=0;y<this.cells.length;y++)s+=this.cells[y].length;const h=new Int32Array(r+s+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;let f=r;for(let y=0;y<t.length;y++){const x=t[y];h[3+y]=f,h.set(x,f),f+=x.length}return h[3+t.length]=f,h.set(this.keys,f),f+=this.keys.length,h[3+t.length+1]=f,h.set(this.bboxes,f),f+=this.bboxes.length,h.buffer}static serialize(t,r){const s=t.toArrayBuffer();return r&&r.push(s),{buffer:s}}static deserialize(t){return new wo(t.buffer)}}const Fa={};function et(i,t,r={}){if(Fa[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),Fa[i]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}et("Object",Object),et("TransferableGridIndex",wo),et("Color",St),et("Error",Error),et("AJAXError",rn),et("ResolvedImage",Mn),et("StylePropertyFunction",bl),et("StyleExpression",ps,{omit:["_evaluator"]}),et("ZoomDependentExpression",Hc),et("ZoomConstantExpression",go),et("CompoundExpression",Vi,{omit:["_evaluate"]});for(const i in Nr)Nr[i]._classRegistryKey||et(`Expression_${i}`,Nr[i]);function lh(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function au(i){return i.$name||i.constructor._classRegistryKey}function ch(i){return!function(t){if(t===null||typeof t!="object")return!1;const r=au(t);return!(!r||r==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||lh(i)||Un(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function bs(i,t){if(ch(i))return(lh(i)||Un(i))&&t&&t.push(i),ArrayBuffer.isView(i)&&t&&t.push(i.buffer),i instanceof ImageData&&t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const f=[];for(const y of i)f.push(bs(y,t));return f}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const r=au(i);if(!r)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!Fa[r])throw new Error(`${r} is not registered.`);const{klass:s}=Fa[r],h=s.serialize?s.serialize(i,t):{};if(s.serialize){if(t&&h===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const f in i){if(!i.hasOwnProperty(f)||Fa[r].omit.indexOf(f)>=0)continue;const y=i[f];h[f]=Fa[r].shallow.indexOf(f)>=0?y:bs(y,t)}i instanceof Error&&(h.message=i.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(h.$name=r),h}function ws(i){if(ch(i))return i;if(Array.isArray(i))return i.map(ws);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const t=au(i)||"Object";if(!Fa[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=Fa[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(i);const s=Object.create(r.prototype);for(const h of Object.keys(i)){if(h==="$name")continue;const f=i[h];s[h]=Fa[t].shallow.indexOf(h)>=0?f:ws(f)}return s}class qr{constructor(){this.first=!0}update(t,r){const s=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=r),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=s,!0))}}const Bt={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function ru(i){for(const t of i)if(er(t.charCodeAt(0)))return!0;return!1}function Tf(i){for(const t of i)if(!Mf(t.charCodeAt(0)))return!1;return!0}function ou(i){const t=i.map(r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}}).filter(r=>r);return new RegExp(t.join("|"),"u")}const uh=ou(["Arab","Dupl","Mong","Ougr","Syrc"]);function Mf(i){return!uh.test(String.fromCodePoint(i))}const dh=ou(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function er(i){return!(i!==746&&i!==747&&(i<4352||!(Bt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Bt["CJK Compatibility"](i)||Bt["CJK Strokes"](i)||!(!Bt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Bt["Enclosed CJK Letters and Months"](i)||Bt["Ideographic Description Characters"](i)||Bt.Kanbun(i)||Bt.Katakana(i)&&i!==12540||!(!Bt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Bt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Bt["Vertical Forms"](i)||Bt["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||dh.test(String.fromCodePoint(i)))))}function su(i){return!(er(i)||function(t){return!!(Bt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Bt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Bt["Letterlike Symbols"](t)||Bt["Number Forms"](t)||Bt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Bt["Control Pictures"](t)&&t!==9251||Bt["Optical Character Recognition"](t)||Bt["Enclosed Alphanumerics"](t)||Bt["Geometric Shapes"](t)||Bt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Bt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Bt["CJK Symbols and Punctuation"](t)||Bt.Katakana(t)||Bt["Private Use Area"](t)||Bt["CJK Compatibility Forms"](t)||Bt["Small Form Variants"](t)||Bt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}const lu=ou(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function cu(i){return lu.test(String.fromCodePoint(i))}function uu(i,t){return!(!t&&cu(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Bt.Khmer(i))}function If(i){for(const t of i)if(cu(t.charCodeAt(0)))return!0;return!1}const Na=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Kt{constructor(t,r){this.zoom=t,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qr,this.transition={})}isSupportedScript(t){return function(r,s){for(const h of r)if(!uu(h.charCodeAt(0),s))return!1;return!0}(t,Na.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,r=t-Math.floor(t),s=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*r}}}class Pl{constructor(t,r){this.property=t,this.value=r,this.expression=function(s,h){if(vl(s))return new bl(s,h);if(fs(s)){const f=nh(s,h);if(f.result==="error")throw new Error(f.value.map(y=>`${y.key}: ${y.message}`).join(", "));return f.value}{let f=s;return h.type==="color"&&typeof s=="string"?f=St.parse(s):h.type!=="padding"||typeof s!="number"&&!Array.isArray(s)?h.type==="variableAnchorOffsetCollection"&&Array.isArray(s)&&(f=mn.parse(s)):f=Nn.parse(s),{kind:"constant",evaluate:()=>f}}}(r===void 0?t.specification.default:r,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,r,s){return this.property.possiblyEvaluate(this,t,r,s)}}class Dl{constructor(t){this.property=t,this.value=new Pl(t,void 0)}transitioned(t,r){return new hh(this.property,this.value,r,Qe({},t.transition,this.transition),t.now)}untransitioned(){return new hh(this.property,this.value,null,{},0)}}class Co{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return ot(this._values[t].value.value)}setValue(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Dl(this._values[t].property)),this._values[t].value=new Pl(this._values[t].property,r===null?void 0:ot(r))}getTransition(t){return ot(this._values[t].transition)}setTransition(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Dl(this._values[t].property)),this._values[t].transition=ot(r)||void 0}serialize(){const t={};for(const r of Object.keys(this._values)){const s=this.getValue(r);s!==void 0&&(t[r]=s);const h=this.getTransition(r);h!==void 0&&(t[`${r}-transition`]=h)}return t}transitioned(t,r){const s=new ph(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].transitioned(t,r._values[h]);return s}untransitioned(){const t=new ph(this._properties);for(const r of Object.keys(this._values))t._values[r]=this._values[r].untransitioned();return t}}class hh{constructor(t,r,s,h,f){this.property=t,this.value=r,this.begin=f+h.delay||0,this.end=this.begin+h.duration||0,t.specification.transition&&(h.delay||h.duration)&&(this.prior=s)}possiblyEvaluate(t,r,s){const h=t.now||0,f=this.value.possiblyEvaluate(t,r,s),y=this.prior;if(y){if(h>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(h<this.begin)return y.possiblyEvaluate(t,r,s);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(t,r,s),f,function(C){if(C<=0)return 0;if(C>=1)return 1;const E=C*C,M=E*C;return 4*(C<.5?M:3*(C-E)+M-.75)}(x))}}return f}}class ph{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,r,s){const h=new m(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].possiblyEvaluate(t,r,s);return h}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class fh{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ot(this._values[t].value)}setValue(t,r){this._values[t]=new Pl(this._values[t].property,r===null?void 0:ot(r))}serialize(){const t={};for(const r of Object.keys(this._values)){const s=this.getValue(r);s!==void 0&&(t[r]=s)}return t}possiblyEvaluate(t,r,s){const h=new m(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].possiblyEvaluate(t,r,s);return h}}class ja{constructor(t,r,s){this.property=t,this.value=r,this.parameters=s}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,s,h){return this.property.evaluate(this.value,this.parameters,t,r,s,h)}}class m{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class e{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,s){const h=Ni[this.specification.type];return h?h(t,r,s):t}}class o{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,s,h){return new ja(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(r,null,{},s,h)}:t.expression,r)}interpolate(t,r,s){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new ja(this,{kind:"constant",value:void 0},t.parameters);const h=Ni[this.specification.type];if(h){const f=h(t.value.value,r.value.value,s);return new ja(this,{kind:"constant",value:f},t.parameters)}return t}evaluate(t,r,s,h,f,y){return t.kind==="constant"?t.value:t.evaluate(r,s,h,f,y)}}class c extends o{possiblyEvaluate(t,r,s,h){if(t.value===void 0)return new ja(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){const f=t.expression.evaluate(r,null,{},s,h),y=t.property.specification.type==="resolvedImage"&&typeof f!="string"?f.name:f,x=this._calculate(y,y,y,r);return new ja(this,{kind:"constant",value:x},r)}if(t.expression.kind==="camera"){const f=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new ja(this,{kind:"constant",value:f},r)}return new ja(this,t.expression,r)}evaluate(t,r,s,h,f,y){if(t.kind==="source"){const x=t.evaluate(r,s,h,f,y);return this._calculate(x,x,x,r)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},s,h),t.evaluate({zoom:Math.floor(r.zoom)},s,h),t.evaluate({zoom:Math.floor(r.zoom)+1},s,h),r):t.value}_calculate(t,r,s,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:s,to:r}}interpolate(t){return t}}class d{constructor(t){this.specification=t}possiblyEvaluate(t,r,s,h){if(t.value!==void 0){if(t.expression.kind==="constant"){const f=t.expression.evaluate(r,null,{},s,h);return this._calculate(f,f,f,r)}return this._calculate(t.expression.evaluate(new Kt(Math.floor(r.zoom-1),r)),t.expression.evaluate(new Kt(Math.floor(r.zoom),r)),t.expression.evaluate(new Kt(Math.floor(r.zoom+1),r)),r)}}_calculate(t,r,s,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:s,to:r}}interpolate(t){return t}}class g{constructor(t){this.specification=t}possiblyEvaluate(t,r,s,h){return!!t.expression.evaluate(r,null,{},s,h)}interpolate(){return!1}}class w{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in t){const s=t[r];s.specification.overridable&&this.overridableProperties.push(r);const h=this.defaultPropertyValues[r]=new Pl(s,void 0),f=this.defaultTransitionablePropertyValues[r]=new Dl(s);this.defaultTransitioningPropertyValues[r]=f.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=h.possiblyEvaluate({})}}}et("DataDrivenProperty",o),et("DataConstantProperty",e),et("CrossFadedDataDrivenProperty",c),et("CrossFadedProperty",d),et("ColorRampProperty",g);const A="-transition";class S extends Li{constructor(t,r){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),r.layout&&(this._unevaluatedLayout=new fh(r.layout)),r.paint)){this._transitionablePaint=new Co(r.paint);for(const s in t.paint)this.setPaintProperty(s,t.paint[s],{validate:!1});for(const s in t.layout)this.setLayoutProperty(s,t.layout[s],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new m(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,r,s={}){r!=null&&this._validate(Ef,`layers.${this.id}.layout.${t}`,t,r,s)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,r):this.visibility=r)}getPaintProperty(t){return t.endsWith(A)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,r,s={}){if(r!=null&&this._validate(iu,`layers.${this.id}.paint.${t}`,t,r,s))return!1;if(t.endsWith(A))return this._transitionablePaint.setTransition(t.slice(0,-11),r||void 0),!1;{const h=this._transitionablePaint._values[t],f=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),x=h.value;this._transitionablePaint.setValue(t,r),this._handleSpecialPaintPropertyUpdate(t);const C=this._transitionablePaint._values[t].value;return C.isDataDriven()||y||f||this._handleOverridablePaintPropertyUpdate(t,x,C)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,r,s){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,r){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,r)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ct(t,(r,s)=>!(r===void 0||s==="layout"&&!Object.keys(r).length||s==="paint"&&!Object.keys(r).length))}_validate(t,r,s,h,f={}){return(!f||f.validate!==!1)&&sh(this,t.call(Ur,{key:r,layerType:this.type,objectKey:s,value:h,styleSpec:be,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const r=this.paint.get(t);if(r instanceof ja&&mo(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}const T={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class D{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class P{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function B(i,t=1){let r=0,s=0;return{members:i.map(h=>{const f=T[h.type].BYTES_PER_ELEMENT,y=r=G(r,Math.max(t,f)),x=h.components||1;return s=Math.max(s,f),r+=f*x,{name:h.name,type:h.type,components:x,offset:y}}),size:G(r,Math.max(s,t)),alignment:t}}function G(i,t){return Math.ceil(i/t)*t}class H extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,r)}emplace(t,r,s){const h=2*t;return this.int16[h+0]=r,this.int16[h+1]=s,t}}H.prototype.bytesPerElement=4,et("StructArrayLayout2i4",H);class Y extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,s)}emplace(t,r,s,h){const f=3*t;return this.int16[f+0]=r,this.int16[f+1]=s,this.int16[f+2]=h,t}}Y.prototype.bytesPerElement=6,et("StructArrayLayout3i6",Y);class Z extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,s,h)}emplace(t,r,s,h,f){const y=4*t;return this.int16[y+0]=r,this.int16[y+1]=s,this.int16[y+2]=h,this.int16[y+3]=f,t}}Z.prototype.bytesPerElement=8,et("StructArrayLayout4i8",Z);class te extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,s,h,f,y)}emplace(t,r,s,h,f,y,x){const C=6*t;return this.int16[C+0]=r,this.int16[C+1]=s,this.int16[C+2]=h,this.int16[C+3]=f,this.int16[C+4]=y,this.int16[C+5]=x,t}}te.prototype.bytesPerElement=12,et("StructArrayLayout2i4i12",te);class oe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,s,h,f,y)}emplace(t,r,s,h,f,y,x){const C=4*t,E=8*t;return this.int16[C+0]=r,this.int16[C+1]=s,this.uint8[E+4]=h,this.uint8[E+5]=f,this.uint8[E+6]=y,this.uint8[E+7]=x,t}}oe.prototype.bytesPerElement=8,et("StructArrayLayout2i4ub8",oe);class K extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,r)}emplace(t,r,s){const h=2*t;return this.float32[h+0]=r,this.float32[h+1]=s,t}}K.prototype.bytesPerElement=8,et("StructArrayLayout2f8",K);class he extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y,x,C,E,M){const I=this.length;return this.resize(I+1),this.emplace(I,t,r,s,h,f,y,x,C,E,M)}emplace(t,r,s,h,f,y,x,C,E,M,I){const R=10*t;return this.uint16[R+0]=r,this.uint16[R+1]=s,this.uint16[R+2]=h,this.uint16[R+3]=f,this.uint16[R+4]=y,this.uint16[R+5]=x,this.uint16[R+6]=C,this.uint16[R+7]=E,this.uint16[R+8]=M,this.uint16[R+9]=I,t}}he.prototype.bytesPerElement=20,et("StructArrayLayout10ui20",he);class ge extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y,x,C,E,M,I,R){const O=this.length;return this.resize(O+1),this.emplace(O,t,r,s,h,f,y,x,C,E,M,I,R)}emplace(t,r,s,h,f,y,x,C,E,M,I,R,O){const F=12*t;return this.int16[F+0]=r,this.int16[F+1]=s,this.int16[F+2]=h,this.int16[F+3]=f,this.uint16[F+4]=y,this.uint16[F+5]=x,this.uint16[F+6]=C,this.uint16[F+7]=E,this.int16[F+8]=M,this.int16[F+9]=I,this.int16[F+10]=R,this.int16[F+11]=O,t}}ge.prototype.bytesPerElement=24,et("StructArrayLayout4i4ui4i24",ge);class _e extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,s)}emplace(t,r,s,h){const f=3*t;return this.float32[f+0]=r,this.float32[f+1]=s,this.float32[f+2]=h,t}}_e.prototype.bytesPerElement=12,et("StructArrayLayout3f12",_e);class Pe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint32[1*t+0]=r,t}}Pe.prototype.bytesPerElement=4,et("StructArrayLayout1ul4",Pe);class Be extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y,x,C,E){const M=this.length;return this.resize(M+1),this.emplace(M,t,r,s,h,f,y,x,C,E)}emplace(t,r,s,h,f,y,x,C,E,M){const I=10*t,R=5*t;return this.int16[I+0]=r,this.int16[I+1]=s,this.int16[I+2]=h,this.int16[I+3]=f,this.int16[I+4]=y,this.int16[I+5]=x,this.uint32[R+3]=C,this.uint16[I+8]=E,this.uint16[I+9]=M,t}}Be.prototype.bytesPerElement=20,et("StructArrayLayout6i1ul2ui20",Be);class Je extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,s,h,f,y)}emplace(t,r,s,h,f,y,x){const C=6*t;return this.int16[C+0]=r,this.int16[C+1]=s,this.int16[C+2]=h,this.int16[C+3]=f,this.int16[C+4]=y,this.int16[C+5]=x,t}}Je.prototype.bytesPerElement=12,et("StructArrayLayout2i2i2i12",Je);class Ye extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,t,r,s,h,f)}emplace(t,r,s,h,f,y){const x=4*t,C=8*t;return this.float32[x+0]=r,this.float32[x+1]=s,this.float32[x+2]=h,this.int16[C+6]=f,this.int16[C+7]=y,t}}Ye.prototype.bytesPerElement=16,et("StructArrayLayout2f1f2i16",Ye);class Fe extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,r,s,h,f,y)}emplace(t,r,s,h,f,y,x){const C=16*t,E=4*t,M=8*t;return this.uint8[C+0]=r,this.uint8[C+1]=s,this.float32[E+1]=h,this.float32[E+2]=f,this.int16[M+6]=y,this.int16[M+7]=x,t}}Fe.prototype.bytesPerElement=16,et("StructArrayLayout2ub2f2i16",Fe);class je extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,s)}emplace(t,r,s,h){const f=3*t;return this.uint16[f+0]=r,this.uint16[f+1]=s,this.uint16[f+2]=h,t}}je.prototype.bytesPerElement=6,et("StructArrayLayout3ui6",je);class lt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y,x,C,E,M,I,R,O,F,U,J,ne){const ye=this.length;return this.resize(ye+1),this.emplace(ye,t,r,s,h,f,y,x,C,E,M,I,R,O,F,U,J,ne)}emplace(t,r,s,h,f,y,x,C,E,M,I,R,O,F,U,J,ne,ye){const le=24*t,fe=12*t,Se=48*t;return this.int16[le+0]=r,this.int16[le+1]=s,this.uint16[le+2]=h,this.uint16[le+3]=f,this.uint32[fe+2]=y,this.uint32[fe+3]=x,this.uint32[fe+4]=C,this.uint16[le+10]=E,this.uint16[le+11]=M,this.uint16[le+12]=I,this.float32[fe+7]=R,this.float32[fe+8]=O,this.uint8[Se+36]=F,this.uint8[Se+37]=U,this.uint8[Se+38]=J,this.uint32[fe+10]=ne,this.int16[le+22]=ye,t}}lt.prototype.bytesPerElement=48,et("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",lt);class Et extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s,h,f,y,x,C,E,M,I,R,O,F,U,J,ne,ye,le,fe,Se,Re,Ke,vt,We,$e,ht,rt){const tt=this.length;return this.resize(tt+1),this.emplace(tt,t,r,s,h,f,y,x,C,E,M,I,R,O,F,U,J,ne,ye,le,fe,Se,Re,Ke,vt,We,$e,ht,rt)}emplace(t,r,s,h,f,y,x,C,E,M,I,R,O,F,U,J,ne,ye,le,fe,Se,Re,Ke,vt,We,$e,ht,rt,tt){const Ie=32*t,ft=16*t;return this.int16[Ie+0]=r,this.int16[Ie+1]=s,this.int16[Ie+2]=h,this.int16[Ie+3]=f,this.int16[Ie+4]=y,this.int16[Ie+5]=x,this.int16[Ie+6]=C,this.int16[Ie+7]=E,this.uint16[Ie+8]=M,this.uint16[Ie+9]=I,this.uint16[Ie+10]=R,this.uint16[Ie+11]=O,this.uint16[Ie+12]=F,this.uint16[Ie+13]=U,this.uint16[Ie+14]=J,this.uint16[Ie+15]=ne,this.uint16[Ie+16]=ye,this.uint16[Ie+17]=le,this.uint16[Ie+18]=fe,this.uint16[Ie+19]=Se,this.uint16[Ie+20]=Re,this.uint16[Ie+21]=Ke,this.uint16[Ie+22]=vt,this.uint32[ft+12]=We,this.float32[ft+13]=$e,this.float32[ft+14]=ht,this.uint16[Ie+30]=rt,this.uint16[Ie+31]=tt,t}}Et.prototype.bytesPerElement=64,et("StructArrayLayout8i15ui1ul2f2ui64",Et);class He extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.float32[1*t+0]=r,t}}He.prototype.bytesPerElement=4,et("StructArrayLayout1f4",He);class Ze extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,s)}emplace(t,r,s,h){const f=3*t;return this.uint16[6*t+0]=r,this.float32[f+1]=s,this.float32[f+2]=h,t}}Ze.prototype.bytesPerElement=12,et("StructArrayLayout1ui2f12",Ze);class wt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,s){const h=this.length;return this.resize(h+1),this.emplace(h,t,r,s)}emplace(t,r,s,h){const f=4*t;return this.uint32[2*t+0]=r,this.uint16[f+2]=s,this.uint16[f+3]=h,t}}wt.prototype.bytesPerElement=8,et("StructArrayLayout1ul2ui8",wt);class tn extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){const s=this.length;return this.resize(s+1),this.emplace(s,t,r)}emplace(t,r,s){const h=2*t;return this.uint16[h+0]=r,this.uint16[h+1]=s,t}}tn.prototype.bytesPerElement=4,et("StructArrayLayout2ui4",tn);class Dt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint16[1*t+0]=r,t}}Dt.prototype.bytesPerElement=2,et("StructArrayLayout1ui2",Dt);class kt extends P{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,s,h)}emplace(t,r,s,h,f){const y=4*t;return this.float32[y+0]=r,this.float32[y+1]=s,this.float32[y+2]=h,this.float32[y+3]=f,t}}kt.prototype.bytesPerElement=16,et("StructArrayLayout4f16",kt);class on extends D{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new j(this.anchorPointX,this.anchorPointY)}}on.prototype.size=20;class ii extends Be{get(t){return new on(this,t)}}et("CollisionBoxArray",ii);class _a extends D{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}_a.prototype.size=48;class sn extends lt{get(t){return new _a(this,t)}}et("PlacedSymbolArray",sn);class Si extends D{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Si.prototype.size=64;class fi extends Et{get(t){return new Si(this,t)}}et("SymbolInstanceArray",fi);class ai extends He{getoffsetX(t){return this.float32[1*t+0]}}et("GlyphOffsetArray",ai);class ri extends Y{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}et("SymbolLineVertexArray",ri);class va extends D{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}va.prototype.size=12;class Gr extends Ze{get(t){return new va(this,t)}}et("TextAnchorOffsetArray",Gr);class Cs extends D{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Cs.prototype.size=8;class Hr extends wt{get(t){return new Cs(this,t)}}et("FeatureIndexArray",Hr);class xr extends H{}class zl extends H{}class du extends H{}class ta extends te{}class xa extends oe{}class br extends K{}class ba extends he{}class mi extends ge{}class oi extends _e{}class qi extends Pe{}class xn extends Je{}class Ao extends Fe{}class wr extends je{}class As extends tn{}const Pf=B([{name:"a_pos",components:2,type:"Int16"}],4),{members:Df}=Pf;class Qn{constructor(t=[]){this.segments=t}prepareSegment(t,r,s,h){let f=this.segments[this.segments.length-1];return t>Qn.MAX_VERTEX_ARRAY_LENGTH&&Ft(`Max vertices per segment is ${Qn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!f||f.vertexLength+t>Qn.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==h)&&(f={vertexOffset:r.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},h!==void 0&&(f.sortKey=h),this.segments.push(f)),f}get(){return this.segments}destroy(){for(const t of this.segments)for(const r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,s,h){return new Qn([{vertexOffset:t,primitiveOffset:r,vertexLength:s,primitiveLength:h,vaos:{},sortKey:0}])}}function Cr(i,t){return 256*(i=ke(Math.floor(i),0,255))+ke(Math.floor(t),0,255)}Qn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,et("SegmentVector",Qn);const Ss=B([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Es={exports:{}},hu={exports:{}};hu.exports=function(i,t){var r,s,h,f,y,x,C,E;for(s=i.length-(r=3&i.length),h=t,y=3432918353,x=461845907,E=0;E<s;)C=255&i.charCodeAt(E)|(255&i.charCodeAt(++E))<<8|(255&i.charCodeAt(++E))<<16|(255&i.charCodeAt(++E))<<24,++E,h=27492+(65535&(f=5*(65535&(h=(h^=C=(65535&(C=(C=(65535&C)*y+(((C>>>16)*y&65535)<<16)&4294967295)<<15|C>>>17))*x+(((C>>>16)*x&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(f>>>16)&65535)<<16);switch(C=0,r){case 3:C^=(255&i.charCodeAt(E+2))<<16;case 2:C^=(255&i.charCodeAt(E+1))<<8;case 1:h^=C=(65535&(C=(C=(65535&(C^=255&i.charCodeAt(E)))*y+(((C>>>16)*y&65535)<<16)&4294967295)<<15|C>>>17))*x+(((C>>>16)*x&65535)<<16)&4294967295}return h^=i.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var pu=hu.exports,fu={exports:{}};fu.exports=function(i,t){for(var r,s=i.length,h=t^s,f=0;s>=4;)r=1540483477*(65535&(r=255&i.charCodeAt(f)|(255&i.charCodeAt(++f))<<8|(255&i.charCodeAt(++f))<<16|(255&i.charCodeAt(++f))<<24))+((1540483477*(r>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),s-=4,++f;switch(s){case 3:h^=(255&i.charCodeAt(f+2))<<16;case 2:h^=(255&i.charCodeAt(f+1))<<8;case 1:h=1540483477*(65535&(h^=255&i.charCodeAt(f)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var Rl=pu,aw=fu.exports;Es.exports=Rl,Es.exports.murmur3=Rl,Es.exports.murmur2=aw;var zf=z(Es.exports);class mh{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,s,h){this.ids.push(Wy(t)),this.positions.push(r,s,h)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=Wy(t);let s=0,h=this.ids.length-1;for(;s<h;){const y=s+h>>1;this.ids[y]>=r?h=y:s=y+1}const f=[];for(;this.ids[s]===r;)f.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return f}static serialize(t,r){const s=new Float64Array(t.ids),h=new Uint32Array(t.positions);return Rf(s,h,0,s.length-1),r&&r.push(s.buffer,h.buffer),{ids:s,positions:h}}static deserialize(t){const r=new mh;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}function Wy(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:zf(String(i))}function Rf(i,t,r,s){for(;r<s;){const h=i[r+s>>1];let f=r-1,y=s+1;for(;;){do f++;while(i[f]<h);do y--;while(i[y]>h);if(f>=y)break;gh(i,f,y),gh(t,3*f,3*y),gh(t,3*f+1,3*y+1),gh(t,3*f+2,3*y+2)}y-r<s-y?(Rf(i,t,r,y),r=y+1):(Rf(i,t,y+1,s),s=y)}}function gh(i,t,r){const s=i[t];i[t]=i[r],i[r]=s}et("FeaturePositionMap",mh);class Ts{constructor(t,r){this.gl=t.gl,this.location=r}}class yh extends Ts{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Xy extends Ts{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Ky extends Ts{constructor(t,r){super(t,r),this.current=St.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const rw=new Float32Array(16);function kf(i){return[Cr(255*i.r,255*i.g),Cr(255*i.b,255*i.a)]}class mu{constructor(t,r,s){this.value=t,this.uniformNames=r.map(h=>`u_${h}`),this.type=s}setUniform(t,r,s){t.set(s.constantOr(this.value))}getBinding(t,r,s){return this.type==="color"?new Ky(t,r):new yh(t,r)}}class kl{constructor(t,r){this.uniformNames=r.map(s=>`u_${s}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setUniform(t,r,s,h){const f=h==="u_pattern_to"?this.patternTo:h==="u_pattern_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;f&&t.set(f)}getBinding(t,r,s){return s.substr(0,9)==="u_pattern"?new Xy(t,r):new yh(t,r)}}class $r{constructor(t,r,s,h){this.expression=t,this.type=s,this.maxValue=0,this.paintVertexAttributes=r.map(f=>({name:`a_${f}`,type:"Float32",components:s==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(t,r,s,h,f){const y=this.paintVertexArray.length,x=this.expression.evaluate(new Kt(0),r,{},h,[],f);this.paintVertexArray.resize(t),this._setPaintValue(y,t,x)}updatePaintArray(t,r,s,h){const f=this.expression.evaluate({zoom:0},s,h);this._setPaintValue(t,r,f)}_setPaintValue(t,r,s){if(this.type==="color"){const h=kf(s);for(let f=t;f<r;f++)this.paintVertexArray.emplace(f,h[0],h[1])}else{for(let h=t;h<r;h++)this.paintVertexArray.emplace(h,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class tr{constructor(t,r,s,h,f,y){this.expression=t,this.uniformNames=r.map(x=>`u_${x}_t`),this.type=s,this.useIntegerZoom=h,this.zoom=f,this.maxValue=0,this.paintVertexAttributes=r.map(x=>({name:`a_${x}`,type:"Float32",components:s==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(t,r,s,h,f){const y=this.expression.evaluate(new Kt(this.zoom),r,{},h,[],f),x=this.expression.evaluate(new Kt(this.zoom+1),r,{},h,[],f),C=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(C,t,y,x)}updatePaintArray(t,r,s,h){const f=this.expression.evaluate({zoom:this.zoom},s,h),y=this.expression.evaluate({zoom:this.zoom+1},s,h);this._setPaintValue(t,r,f,y)}_setPaintValue(t,r,s,h){if(this.type==="color"){const f=kf(s),y=kf(h);for(let x=t;x<r;x++)this.paintVertexArray.emplace(x,f[0],f[1],y[0],y[1])}else{for(let f=t;f<r;f++)this.paintVertexArray.emplace(f,s,h);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(h))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){const s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,h=ke(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);t.set(h)}getBinding(t,r,s){return new yh(t,r)}}class So{constructor(t,r,s,h,f,y){this.expression=t,this.type=r,this.useIntegerZoom=s,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new f,this.zoomOutPaintVertexArray=new f}populatePaintArray(t,r,s){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(h,t,r.patterns&&r.patterns[this.layerId],s)}updatePaintArray(t,r,s,h,f){this._setPaintValues(t,r,s.patterns&&s.patterns[this.layerId],f)}_setPaintValues(t,r,s,h){if(!h||!s)return;const{min:f,mid:y,max:x}=s,C=h[f],E=h[y],M=h[x];if(C&&E&&M)for(let I=t;I<r;I++)this.zoomInPaintVertexArray.emplace(I,E.tl[0],E.tl[1],E.br[0],E.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],E.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(I,E.tl[0],E.tl[1],E.br[0],E.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],E.pixelRatio,M.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ss.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ss.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Jy{constructor(t,r,s){this.binders={},this._buffers=[];const h=[];for(const f in t.paint._values){if(!s(f))continue;const y=t.paint.get(f);if(!(y instanceof ja&&mo(y.property.specification)))continue;const x=ow(f,t.type),C=y.value,E=y.property.specification.type,M=y.property.useIntegerZoom,I=y.property.specification["property-type"],R=I==="cross-faded"||I==="cross-faded-data-driven";if(C.kind==="constant")this.binders[f]=R?new kl(C.value,x):new mu(C.value,x,E),h.push(`/u_${f}`);else if(C.kind==="source"||R){const O=Yy(f,E,"source");this.binders[f]=R?new So(C,E,M,r,O,t.id):new $r(C,x,E,O),h.push(`/a_${f}`)}else{const O=Yy(f,E,"composite");this.binders[f]=new tr(C,x,E,M,r,O),h.push(`/z_${f}`)}}this.cacheKey=h.sort().join("")}getMaxValue(t){const r=this.binders[t];return r instanceof $r||r instanceof tr?r.maxValue:0}populatePaintArrays(t,r,s,h,f){for(const y in this.binders){const x=this.binders[y];(x instanceof $r||x instanceof tr||x instanceof So)&&x.populatePaintArray(t,r,s,h,f)}}setConstantPatternPositions(t,r){for(const s in this.binders){const h=this.binders[s];h instanceof kl&&h.setConstantPatternPositions(t,r)}}updatePaintArrays(t,r,s,h,f){let y=!1;for(const x in t){const C=r.getPositions(x);for(const E of C){const M=s.feature(E.index);for(const I in this.binders){const R=this.binders[I];if((R instanceof $r||R instanceof tr||R instanceof So)&&R.expression.isStateDependent===!0){const O=h.paint.get(I);R.expression=O.value,R.updatePaintArray(E.start,E.end,M,t[x],f),y=!0}}}}return y}defines(){const t=[];for(const r in this.binders){const s=this.binders[r];(s instanceof mu||s instanceof kl)&&t.push(...s.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return t}getBinderAttributes(){const t=[];for(const r in this.binders){const s=this.binders[r];if(s instanceof $r||s instanceof tr)for(let h=0;h<s.paintVertexAttributes.length;h++)t.push(s.paintVertexAttributes[h].name);else if(s instanceof So)for(let h=0;h<Ss.members.length;h++)t.push(Ss.members[h].name)}return t}getBinderUniforms(){const t=[];for(const r in this.binders){const s=this.binders[r];if(s instanceof mu||s instanceof kl||s instanceof tr)for(const h of s.uniformNames)t.push(h)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){const s=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof mu||f instanceof kl||f instanceof tr){for(const y of f.uniformNames)if(r[y]){const x=f.getBinding(t,r[y],y);s.push({name:y,property:h,binding:x})}}}return s}setUniforms(t,r,s,h){for(const{name:f,property:y,binding:x}of r)this.binders[y].setUniform(x,h,s.get(y),f)}updatePaintBuffers(t){this._buffers=[];for(const r in this.binders){const s=this.binders[r];if(t&&s instanceof So){const h=t.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(s instanceof $r||s instanceof tr)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(t){for(const r in this.binders){const s=this.binders[r];(s instanceof $r||s instanceof tr||s instanceof So)&&s.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const r=this.binders[t];(r instanceof $r||r instanceof tr||r instanceof So)&&r.destroy()}}}class Ms{constructor(t,r,s=()=>!0){this.programConfigurations={};for(const h of t)this.programConfigurations[h.id]=new Jy(h,r,s);this.needsUpload=!1,this._featureMap=new mh,this._bufferOffset=0}populatePaintArrays(t,r,s,h,f,y){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(t,r,h,f,y);r.id!==void 0&&this._featureMap.add(r.id,s,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,s,h){for(const f of s)this.needsUpload=this.programConfigurations[f.id].updatePaintArrays(t,this._featureMap,r,f,h)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function ow(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function Yy(i,t,r){const s={color:{source:K,composite:kt},number:{source:He,composite:K}},h=function(f){return{"line-pattern":{source:ba,composite:ba},"fill-pattern":{source:ba,composite:ba},"fill-extrusion-pattern":{source:ba,composite:ba}}[f]}(i);return h&&h[r]||s[t][r]}et("ConstantBinder",mu),et("CrossFadedConstantBinder",kl),et("SourceExpressionBinder",$r),et("CrossFadedCompositeBinder",So),et("CompositeExpressionBinder",tr),et("ProgramConfiguration",Jy,{omit:["_buffers"]}),et("ProgramConfigurationSet",Ms);const jn=8192,Lf=Math.pow(2,14)-1,Qy=-Lf-1;function Is(i){const t=jn/i.extent,r=i.loadGeometry();for(let s=0;s<r.length;s++){const h=r[s];for(let f=0;f<h.length;f++){const y=h[f],x=Math.round(y.x*t),C=Math.round(y.y*t);y.x=ke(x,Qy,Lf),y.y=ke(C,Qy,Lf),(x<y.x||x>y.x+1||C<y.y||C>y.y+1)&&Ft("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Ps(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?Is(i):[]}}function _h(i,t,r,s,h){i.emplaceBack(2*t+(s+1)/2,2*r+(h+1)/2)}class Of{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new zl,this.indexArray=new wr,this.segments=new Qn,this.programConfigurations=new Ms(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,s){const h=this.layers[0],f=[];let y=null,x=!1;h.type==="circle"&&(y=h.layout.get("circle-sort-key"),x=!y.isConstant());for(const{feature:C,id:E,index:M,sourceLayerIndex:I}of t){const R=this.layers[0]._featureFilter.needGeometry,O=Ps(C,R);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),O,s))continue;const F=x?y.evaluate(O,{},s):void 0,U={id:E,properties:C.properties,type:C.type,sourceLayerIndex:I,index:M,geometry:R?O.geometry:Is(C),patterns:{},sortKey:F};f.push(U)}x&&f.sort((C,E)=>C.sortKey-E.sortKey);for(const C of f){const{geometry:E,index:M,sourceLayerIndex:I}=C,R=t[M].feature;this.addFeature(C,E,M,s),r.featureIndex.insert(R,E,M,I,this.index)}}update(t,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Df),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,s,h){for(const f of r)for(const y of f){const x=y.x,C=y.y;if(x<0||x>=jn||C<0||C>=jn)continue;const E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),M=E.vertexLength;_h(this.layoutVertexArray,x,C,-1,-1),_h(this.layoutVertexArray,x,C,1,-1),_h(this.layoutVertexArray,x,C,1,1),_h(this.layoutVertexArray,x,C,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),E.vertexLength+=4,E.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,{},h)}}function e_(i,t){for(let r=0;r<i.length;r++)if(Ll(t,i[r]))return!0;for(let r=0;r<t.length;r++)if(Ll(i,t[r]))return!0;return!!Bf(i,t)}function sw(i,t,r){return!!Ll(i,t)||!!Ff(t,i,r)}function t_(i,t){if(i.length===1)return i_(t,i[0]);for(let r=0;r<t.length;r++){const s=t[r];for(let h=0;h<s.length;h++)if(Ll(i,s[h]))return!0}for(let r=0;r<i.length;r++)if(i_(t,i[r]))return!0;for(let r=0;r<t.length;r++)if(Bf(i,t[r]))return!0;return!1}function lw(i,t,r){if(i.length>1){if(Bf(i,t))return!0;for(let s=0;s<t.length;s++)if(Ff(t[s],i,r))return!0}for(let s=0;s<i.length;s++)if(Ff(i[s],t,r))return!0;return!1}function Bf(i,t){if(i.length===0||t.length===0)return!1;for(let r=0;r<i.length-1;r++){const s=i[r],h=i[r+1];for(let f=0;f<t.length-1;f++)if(cw(s,h,t[f],t[f+1]))return!0}return!1}function cw(i,t,r,s){return Ot(i,r,s)!==Ot(t,r,s)&&Ot(i,t,r)!==Ot(i,t,s)}function Ff(i,t,r){const s=r*r;if(t.length===1)return i.distSqr(t[0])<s;for(let h=1;h<t.length;h++)if(n_(i,t[h-1],t[h])<s)return!0;return!1}function n_(i,t,r){const s=t.distSqr(r);if(s===0)return i.distSqr(t);const h=((i.x-t.x)*(r.x-t.x)+(i.y-t.y)*(r.y-t.y))/s;return i.distSqr(h<0?t:h>1?r:r.sub(t)._mult(h)._add(t))}function i_(i,t){let r,s,h,f=!1;for(let y=0;y<i.length;y++){r=i[y];for(let x=0,C=r.length-1;x<r.length;C=x++)s=r[x],h=r[C],s.y>t.y!=h.y>t.y&&t.x<(h.x-s.x)*(t.y-s.y)/(h.y-s.y)+s.x&&(f=!f)}return f}function Ll(i,t){let r=!1;for(let s=0,h=i.length-1;s<i.length;h=s++){const f=i[s],y=i[h];f.y>t.y!=y.y>t.y&&t.x<(y.x-f.x)*(t.y-f.y)/(y.y-f.y)+f.x&&(r=!r)}return r}function uw(i,t,r){const s=r[0],h=r[2];if(i.x<s.x&&t.x<s.x||i.x>h.x&&t.x>h.x||i.y<s.y&&t.y<s.y||i.y>h.y&&t.y>h.y)return!1;const f=Ot(i,t,r[0]);return f!==Ot(i,t,r[1])||f!==Ot(i,t,r[2])||f!==Ot(i,t,r[3])}function gu(i,t,r){const s=t.paint.get(i).value;return s.kind==="constant"?s.value:r.programConfigurations.get(t.id).getMaxValue(i)}function vh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function xh(i,t,r,s,h){if(!t[0]&&!t[1])return i;const f=j.convert(t)._mult(h);r==="viewport"&&f._rotate(-s);const y=[];for(let x=0;x<i.length;x++)y.push(i[x].sub(f));return y}let a_,r_;et("CircleBucket",Of,{omit:["layers"]});var dw={get paint(){return r_=r_||new w({"circle-radius":new o(be.paint_circle["circle-radius"]),"circle-color":new o(be.paint_circle["circle-color"]),"circle-blur":new o(be.paint_circle["circle-blur"]),"circle-opacity":new o(be.paint_circle["circle-opacity"]),"circle-translate":new e(be.paint_circle["circle-translate"]),"circle-translate-anchor":new e(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new e(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new e(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new o(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new o(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new o(be.paint_circle["circle-stroke-opacity"])})},get layout(){return a_=a_||new w({"circle-sort-key":new o(be.layout_circle["circle-sort-key"])})}},Ei=1e-6,Ol=typeof Float32Array<"u"?Float32Array:Array;function Nf(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function o_(i,t,r){var s=t[0],h=t[1],f=t[2],y=t[3],x=t[4],C=t[5],E=t[6],M=t[7],I=t[8],R=t[9],O=t[10],F=t[11],U=t[12],J=t[13],ne=t[14],ye=t[15],le=r[0],fe=r[1],Se=r[2],Re=r[3];return i[0]=le*s+fe*x+Se*I+Re*U,i[1]=le*h+fe*C+Se*R+Re*J,i[2]=le*f+fe*E+Se*O+Re*ne,i[3]=le*y+fe*M+Se*F+Re*ye,i[4]=(le=r[4])*s+(fe=r[5])*x+(Se=r[6])*I+(Re=r[7])*U,i[5]=le*h+fe*C+Se*R+Re*J,i[6]=le*f+fe*E+Se*O+Re*ne,i[7]=le*y+fe*M+Se*F+Re*ye,i[8]=(le=r[8])*s+(fe=r[9])*x+(Se=r[10])*I+(Re=r[11])*U,i[9]=le*h+fe*C+Se*R+Re*J,i[10]=le*f+fe*E+Se*O+Re*ne,i[11]=le*y+fe*M+Se*F+Re*ye,i[12]=(le=r[12])*s+(fe=r[13])*x+(Se=r[14])*I+(Re=r[15])*U,i[13]=le*h+fe*C+Se*R+Re*J,i[14]=le*f+fe*E+Se*O+Re*ne,i[15]=le*y+fe*M+Se*F+Re*ye,i}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var yu,hw=o_;function bh(i,t,r){var s=t[0],h=t[1],f=t[2],y=t[3];return i[0]=r[0]*s+r[4]*h+r[8]*f+r[12]*y,i[1]=r[1]*s+r[5]*h+r[9]*f+r[13]*y,i[2]=r[2]*s+r[6]*h+r[10]*f+r[14]*y,i[3]=r[3]*s+r[7]*h+r[11]*f+r[15]*y,i}yu=new Ol(4),Ol!=Float32Array&&(yu[0]=0,yu[1]=0,yu[2]=0,yu[3]=0);class pw extends S{constructor(t){super(t,dw)}createBucket(t){return new Of(t)}queryRadius(t){const r=t;return gu("circle-radius",this,r)+gu("circle-stroke-width",this,r)+vh(this.paint.get("circle-translate"))}queryIntersectsFeature(t,r,s,h,f,y,x,C){const E=xh(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,x),M=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s),I=this.paint.get("circle-pitch-alignment")==="map",R=I?E:function(F,U){return F.map(J=>s_(J,U))}(E,C),O=I?M*x:M;for(const F of h)for(const U of F){const J=I?U:s_(U,C);let ne=O;const ye=bh([],[U.x,U.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ne*=ye[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ne*=y.cameraToCenterDistance/ye[3]),sw(R,J,ne))return!0}return!1}}function s_(i,t){const r=bh([],[i.x,i.y,0,1],t);return new j(r[0]/r[3],r[1]/r[3])}class l_ extends Of{}let c_;et("HeatmapBucket",l_,{omit:["layers"]});var fw={get paint(){return c_=c_||new w({"heatmap-radius":new o(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new o(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new e(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new g(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new e(be.paint_heatmap["heatmap-opacity"])})}};function jf(i,{width:t,height:r},s,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==t*r*s)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${t*r*s}`)}else h=new Uint8Array(t*r*s);return i.width=t,i.height=r,i.data=h,i}function u_(i,{width:t,height:r},s){if(t===i.width&&r===i.height)return;const h=jf({},{width:t,height:r},s);Vf(i,h,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,r)},s),i.width=t,i.height=r,i.data=h.data}function Vf(i,t,r,s,h,f){if(h.width===0||h.height===0)return t;if(h.width>i.width||h.height>i.height||r.x>i.width-h.width||r.y>i.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>t.width||h.height>t.height||s.x>t.width-h.width||s.y>t.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=i.data,x=t.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<h.height;C++){const E=((r.y+C)*i.width+r.x)*f,M=((s.y+C)*t.width+s.x)*f;for(let I=0;I<h.width*f;I++)x[M+I]=y[E+I]}return t}class _u{constructor(t,r){jf(this,t,1,r)}resize(t){u_(this,t,1)}clone(){return new _u({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,s,h,f){Vf(t,r,s,h,f,1)}}class wa{constructor(t,r){jf(this,t,4,r)}resize(t){u_(this,t,4)}replace(t,r){r?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,s,h,f){Vf(t,r,s,h,f,4)}}function d_(i){const t={},r=i.resolution||256,s=i.clips?i.clips.length:1,h=i.image||new wa({width:r,height:s});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const f=(y,x,C)=>{t[i.evaluationKey]=C;const E=i.expression.evaluate(t);h.data[y+x+0]=Math.floor(255*E.r/E.a),h.data[y+x+1]=Math.floor(255*E.g/E.a),h.data[y+x+2]=Math.floor(255*E.b/E.a),h.data[y+x+3]=Math.floor(255*E.a)};if(i.clips)for(let y=0,x=0;y<s;++y,x+=4*r)for(let C=0,E=0;C<r;C++,E+=4){const M=C/(r-1),{start:I,end:R}=i.clips[y];f(x,E,I*(1-M)+R*M)}else for(let y=0,x=0;y<r;y++,x+=4)f(0,x,y/(r-1));return h}et("AlphaImage",_u),et("RGBAImage",wa);class mw extends S{createBucket(t){return new l_(t)}constructor(t){super(t,fw),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=d_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let h_;var gw={get paint(){return h_=h_||new w({"hillshade-illumination-direction":new e(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new e(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new e(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new e(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new e(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new e(be.paint_hillshade["hillshade-accent-color"])})}};class yw extends S{constructor(t){super(t,gw)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const _w=B([{name:"a_pos",components:2,type:"Int16"}],4),{members:vw}=_w;function p_(i,t,r=2){const s=t&&t.length,h=s?t[0]*r:i.length;let f=f_(i,0,h,r,!0);const y=[];if(!f||f.next===f.prev)return y;let x,C,E;if(s&&(f=function(M,I,R,O){const F=[];for(let U=0,J=I.length;U<J;U++){const ne=f_(M,I[U]*O,U<J-1?I[U+1]*O:M.length,O,!1);ne===ne.next&&(ne.steiner=!0),F.push(Tw(ne))}F.sort(Aw);for(let U=0;U<F.length;U++)R=Sw(F[U],R);return R}(i,t,f,r)),i.length>80*r){x=1/0,C=1/0;let M=-1/0,I=-1/0;for(let R=r;R<h;R+=r){const O=i[R],F=i[R+1];O<x&&(x=O),F<C&&(C=F),O>M&&(M=O),F>I&&(I=F)}E=Math.max(M-x,I-C),E=E!==0?32767/E:0}return vu(f,y,r,x,C,E,0),y}function f_(i,t,r,s,h){let f;if(h===function(y,x,C,E){let M=0;for(let I=x,R=C-E;I<C;I+=E)M+=(y[R]-y[I])*(y[I+1]+y[R+1]),R=I;return M}(i,t,r,s)>0)for(let y=t;y<r;y+=s)f=y_(y/s|0,i[y],i[y+1],f);else for(let y=r-s;y>=t;y-=s)f=y_(y/s|0,i[y],i[y+1],f);return f&&wh(f,f.next)&&(bu(f),f=f.next),f}function Ds(i,t){if(!i)return i;t||(t=i);let r,s=i;do if(r=!1,s.steiner||!wh(s,s.next)&&Pn(s.prev,s,s.next)!==0)s=s.next;else{if(bu(s),s=t=s.prev,s===s.next)break;r=!0}while(r||s!==t);return t}function vu(i,t,r,s,h,f,y){if(!i)return;!y&&f&&function(C,E,M,I){let R=C;do R.z===0&&(R.z=Uf(R.x,R.y,E,M,I)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==C);R.prevZ.nextZ=null,R.prevZ=null,function(O){let F,U=1;do{let J,ne=O;O=null;let ye=null;for(F=0;ne;){F++;let le=ne,fe=0;for(let Re=0;Re<U&&(fe++,le=le.nextZ,le);Re++);let Se=U;for(;fe>0||Se>0&&le;)fe!==0&&(Se===0||!le||ne.z<=le.z)?(J=ne,ne=ne.nextZ,fe--):(J=le,le=le.nextZ,Se--),ye?ye.nextZ=J:O=J,J.prevZ=ye,ye=J;ne=le}ye.nextZ=null,U*=2}while(F>1)}(R)}(i,s,h,f);let x=i;for(;i.prev!==i.next;){const C=i.prev,E=i.next;if(f?bw(i,s,h,f):xw(i))t.push(C.i,i.i,E.i),bu(i),i=E.next,x=E.next;else if((i=E)===x){y?y===1?vu(i=ww(Ds(i),t),t,r,s,h,f,2):y===2&&Cw(i,t,r,s,h,f):vu(Ds(i),t,r,s,h,f,1);break}}}function xw(i){const t=i.prev,r=i,s=i.next;if(Pn(t,r,s)>=0)return!1;const h=t.x,f=r.x,y=s.x,x=t.y,C=r.y,E=s.y,M=h<f?h<y?h:y:f<y?f:y,I=x<C?x<E?x:E:C<E?C:E,R=h>f?h>y?h:y:f>y?f:y,O=x>C?x>E?x:E:C>E?C:E;let F=s.next;for(;F!==t;){if(F.x>=M&&F.x<=R&&F.y>=I&&F.y<=O&&Bl(h,x,f,C,y,E,F.x,F.y)&&Pn(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function bw(i,t,r,s){const h=i.prev,f=i,y=i.next;if(Pn(h,f,y)>=0)return!1;const x=h.x,C=f.x,E=y.x,M=h.y,I=f.y,R=y.y,O=x<C?x<E?x:E:C<E?C:E,F=M<I?M<R?M:R:I<R?I:R,U=x>C?x>E?x:E:C>E?C:E,J=M>I?M>R?M:R:I>R?I:R,ne=Uf(O,F,t,r,s),ye=Uf(U,J,t,r,s);let le=i.prevZ,fe=i.nextZ;for(;le&&le.z>=ne&&fe&&fe.z<=ye;){if(le.x>=O&&le.x<=U&&le.y>=F&&le.y<=J&&le!==h&&le!==y&&Bl(x,M,C,I,E,R,le.x,le.y)&&Pn(le.prev,le,le.next)>=0||(le=le.prevZ,fe.x>=O&&fe.x<=U&&fe.y>=F&&fe.y<=J&&fe!==h&&fe!==y&&Bl(x,M,C,I,E,R,fe.x,fe.y)&&Pn(fe.prev,fe,fe.next)>=0))return!1;fe=fe.nextZ}for(;le&&le.z>=ne;){if(le.x>=O&&le.x<=U&&le.y>=F&&le.y<=J&&le!==h&&le!==y&&Bl(x,M,C,I,E,R,le.x,le.y)&&Pn(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;fe&&fe.z<=ye;){if(fe.x>=O&&fe.x<=U&&fe.y>=F&&fe.y<=J&&fe!==h&&fe!==y&&Bl(x,M,C,I,E,R,fe.x,fe.y)&&Pn(fe.prev,fe,fe.next)>=0)return!1;fe=fe.nextZ}return!0}function ww(i,t){let r=i;do{const s=r.prev,h=r.next.next;!wh(s,h)&&m_(s,r,r.next,h)&&xu(s,h)&&xu(h,s)&&(t.push(s.i,r.i,h.i),bu(r),bu(r.next),r=i=h),r=r.next}while(r!==i);return Ds(r)}function Cw(i,t,r,s,h,f){let y=i;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&Mw(y,x)){let C=g_(y,x);return y=Ds(y,y.next),C=Ds(C,C.next),vu(y,t,r,s,h,f,0),void vu(C,t,r,s,h,f,0)}x=x.next}y=y.next}while(y!==i)}function Aw(i,t){return i.x-t.x}function Sw(i,t){const r=function(h,f){let y=f;const x=h.x,C=h.y;let E,M=-1/0;do{if(C<=y.y&&C>=y.next.y&&y.next.y!==y.y){const U=y.x+(C-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(U<=x&&U>M&&(M=U,E=y.x<y.next.x?y:y.next,U===x))return E}y=y.next}while(y!==f);if(!E)return null;const I=E,R=E.x,O=E.y;let F=1/0;y=E;do{if(x>=y.x&&y.x>=R&&x!==y.x&&Bl(C<O?x:M,C,R,O,C<O?M:x,C,y.x,y.y)){const U=Math.abs(C-y.y)/(x-y.x);xu(y,h)&&(U<F||U===F&&(y.x>E.x||y.x===E.x&&Ew(E,y)))&&(E=y,F=U)}y=y.next}while(y!==I);return E}(i,t);if(!r)return t;const s=g_(r,i);return Ds(s,s.next),Ds(r,r.next)}function Ew(i,t){return Pn(i.prev,i,t.prev)<0&&Pn(t.next,i,i.next)<0}function Uf(i,t,r,s,h){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-r)*h|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-s)*h|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Tw(i){let t=i,r=i;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==i);return r}function Bl(i,t,r,s,h,f,y,x){return(h-y)*(t-x)>=(i-y)*(f-x)&&(i-y)*(s-x)>=(r-y)*(t-x)&&(r-y)*(f-x)>=(h-y)*(s-x)}function Mw(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(r,s){let h=r;do{if(h.i!==r.i&&h.next.i!==r.i&&h.i!==s.i&&h.next.i!==s.i&&m_(h,h.next,r,s))return!0;h=h.next}while(h!==r);return!1}(i,t)&&(xu(i,t)&&xu(t,i)&&function(r,s){let h=r,f=!1;const y=(r.x+s.x)/2,x=(r.y+s.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(f=!f),h=h.next;while(h!==r);return f}(i,t)&&(Pn(i.prev,i,t.prev)||Pn(i,t.prev,t))||wh(i,t)&&Pn(i.prev,i,i.next)>0&&Pn(t.prev,t,t.next)>0)}function Pn(i,t,r){return(t.y-i.y)*(r.x-t.x)-(t.x-i.x)*(r.y-t.y)}function wh(i,t){return i.x===t.x&&i.y===t.y}function m_(i,t,r,s){const h=Ah(Pn(i,t,r)),f=Ah(Pn(i,t,s)),y=Ah(Pn(r,s,i)),x=Ah(Pn(r,s,t));return h!==f&&y!==x||!(h!==0||!Ch(i,r,t))||!(f!==0||!Ch(i,s,t))||!(y!==0||!Ch(r,i,s))||!(x!==0||!Ch(r,t,s))}function Ch(i,t,r){return t.x<=Math.max(i.x,r.x)&&t.x>=Math.min(i.x,r.x)&&t.y<=Math.max(i.y,r.y)&&t.y>=Math.min(i.y,r.y)}function Ah(i){return i>0?1:i<0?-1:0}function xu(i,t){return Pn(i.prev,i,i.next)<0?Pn(i,t,i.next)>=0&&Pn(i,i.prev,t)>=0:Pn(i,t,i.prev)<0||Pn(i,i.next,t)<0}function g_(i,t){const r=qf(i.i,i.x,i.y),s=qf(t.i,t.x,t.y),h=i.next,f=t.prev;return i.next=t,t.prev=i,r.next=h,h.prev=r,s.next=r,r.prev=s,f.next=s,s.prev=f,s}function y_(i,t,r,s){const h=qf(i,t,r);return s?(h.next=s.next,h.prev=s,s.next.prev=h,s.next=h):(h.prev=h,h.next=h),h}function bu(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function qf(i,t,r){return{i,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Gf(i,t,r){const s=r.patternDependencies;let h=!1;for(const f of t){const y=f.paint.get(`${i}-pattern`);y.isConstant()||(h=!0);const x=y.constantOr(null);x&&(h=!0,s[x.to]=!0,s[x.from]=!0)}return h}function Hf(i,t,r,s,h){const f=h.patternDependencies;for(const y of t){const x=y.paint.get(`${i}-pattern`).value;if(x.kind!=="constant"){let C=x.evaluate({zoom:s-1},r,{},h.availableImages),E=x.evaluate({zoom:s},r,{},h.availableImages),M=x.evaluate({zoom:s+1},r,{},h.availableImages);C=C&&C.name?C.name:C,E=E&&E.name?E.name:E,M=M&&M.name?M.name:M,f[C]=!0,f[E]=!0,f[M]=!0,r.patterns[y.id]={min:C,mid:E,max:M}}}return r}class $f{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new du,this.indexArray=new wr,this.indexArray2=new As,this.programConfigurations=new Ms(t.layers,t.zoom),this.segments=new Qn,this.segments2=new Qn,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,s){this.hasPattern=Gf("fill",this.layers,r);const h=this.layers[0].layout.get("fill-sort-key"),f=!h.isConstant(),y=[];for(const{feature:x,id:C,index:E,sourceLayerIndex:M}of t){const I=this.layers[0]._featureFilter.needGeometry,R=Ps(x,I);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),R,s))continue;const O=f?h.evaluate(R,{},s,r.availableImages):void 0,F={id:C,properties:x.properties,type:x.type,sourceLayerIndex:M,index:E,geometry:I?R.geometry:Is(x),patterns:{},sortKey:O};y.push(F)}f&&y.sort((x,C)=>x.sortKey-C.sortKey);for(const x of y){const{geometry:C,index:E,sourceLayerIndex:M}=x;if(this.hasPattern){const I=Hf("fill",this.layers,x,this.zoom,r);this.patternFeatures.push(I)}else this.addFeature(x,C,E,s,{});r.featureIndex.insert(t[E].feature,C,E,M,this.index)}}update(t,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,s)}addFeatures(t,r,s){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,r,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,vw),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,s,h,f){for(const y of ul(r,500)){let x=0;for(const O of y)x+=O.length;const C=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),E=C.vertexLength,M=[],I=[];for(const O of y){if(O.length===0)continue;O!==y[0]&&I.push(M.length/2);const F=this.segments2.prepareSegment(O.length,this.layoutVertexArray,this.indexArray2),U=F.vertexLength;this.layoutVertexArray.emplaceBack(O[0].x,O[0].y),this.indexArray2.emplaceBack(U+O.length-1,U),M.push(O[0].x),M.push(O[0].y);for(let J=1;J<O.length;J++)this.layoutVertexArray.emplaceBack(O[J].x,O[J].y),this.indexArray2.emplaceBack(U+J-1,U+J),M.push(O[J].x),M.push(O[J].y);F.vertexLength+=O.length,F.primitiveLength+=O.length}const R=p_(M,I);for(let O=0;O<R.length;O+=3)this.indexArray.emplaceBack(E+R[O],E+R[O+1],E+R[O+2]);C.vertexLength+=x,C.primitiveLength+=R.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,f,h)}}let __,v_;et("FillBucket",$f,{omit:["layers","patternFeatures"]});var Iw={get paint(){return v_=v_||new w({"fill-antialias":new e(be.paint_fill["fill-antialias"]),"fill-opacity":new o(be.paint_fill["fill-opacity"]),"fill-color":new o(be.paint_fill["fill-color"]),"fill-outline-color":new o(be.paint_fill["fill-outline-color"]),"fill-translate":new e(be.paint_fill["fill-translate"]),"fill-translate-anchor":new e(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new c(be.paint_fill["fill-pattern"])})},get layout(){return __=__||new w({"fill-sort-key":new o(be.layout_fill["fill-sort-key"])})}};class Pw extends S{constructor(t){super(t,Iw)}recalculate(t,r){super.recalculate(t,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new $f(t)}queryRadius(){return vh(this.paint.get("fill-translate"))}queryIntersectsFeature(t,r,s,h,f,y,x){return t_(xh(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,x),h)}isTileClipped(){return!0}}const Dw=B([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),zw=B([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Rw}=Dw;var Eo={},kw=V,x_=Fl;function Fl(i,t,r,s,h){this.properties={},this.extent=r,this.type=0,this._pbf=i,this._geometry=-1,this._keys=s,this._values=h,i.readFields(Lw,this,t)}function Lw(i,t,r){i==1?t.id=r.readVarint():i==2?function(s,h){for(var f=s.readVarint()+s.pos;s.pos<f;){var y=h._keys[s.readVarint()],x=h._values[s.readVarint()];h.properties[y]=x}}(r,t):i==3?t.type=r.readVarint():i==4&&(t._geometry=r.pos)}function Ow(i){for(var t,r,s=0,h=0,f=i.length,y=f-1;h<f;y=h++)s+=((r=i[y]).x-(t=i[h]).x)*(t.y+r.y);return s}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,r=i.readVarint()+i.pos,s=1,h=0,f=0,y=0,x=[];i.pos<r;){if(h<=0){var C=i.readVarint();s=7&C,h=C>>3}if(h--,s===1||s===2)f+=i.readSVarint(),y+=i.readSVarint(),s===1&&(t&&x.push(t),t=[]),t.push(new kw(f,y));else{if(s!==7)throw new Error("unknown command "+s);t&&t.push(t[0].clone())}}return t&&x.push(t),x},Fl.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,r=1,s=0,h=0,f=0,y=1/0,x=-1/0,C=1/0,E=-1/0;i.pos<t;){if(s<=0){var M=i.readVarint();r=7&M,s=M>>3}if(s--,r===1||r===2)(h+=i.readSVarint())<y&&(y=h),h>x&&(x=h),(f+=i.readSVarint())<C&&(C=f),f>E&&(E=f);else if(r!==7)throw new Error("unknown command "+r)}return[y,C,x,E]},Fl.prototype.toGeoJSON=function(i,t,r){var s,h,f=this.extent*Math.pow(2,r),y=this.extent*i,x=this.extent*t,C=this.loadGeometry(),E=Fl.types[this.type];function M(O){for(var F=0;F<O.length;F++){var U=O[F];O[F]=[360*(U.x+y)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(U.y+x)/f)*Math.PI/180))-90]}}switch(this.type){case 1:var I=[];for(s=0;s<C.length;s++)I[s]=C[s][0];M(C=I);break;case 2:for(s=0;s<C.length;s++)M(C[s]);break;case 3:for(C=function(O){var F=O.length;if(F<=1)return[O];for(var U,J,ne=[],ye=0;ye<F;ye++){var le=Ow(O[ye]);le!==0&&(J===void 0&&(J=le<0),J===le<0?(U&&ne.push(U),U=[O[ye]]):U.push(O[ye]))}return U&&ne.push(U),ne}(C),s=0;s<C.length;s++)for(h=0;h<C[s].length;h++)M(C[s][h])}C.length===1?C=C[0]:E="Multi"+E;var R={type:"Feature",geometry:{type:E,coordinates:C},properties:this.properties};return"id"in this&&(R.id=this.id),R};var Bw=x_,b_=w_;function w_(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Fw,this,t),this.length=this._features.length}function Fw(i,t,r){i===15?t.version=r.readVarint():i===1?t.name=r.readString():i===5?t.extent=r.readVarint():i===2?t._features.push(r.pos):i===3?t._keys.push(r.readString()):i===4&&t._values.push(function(s){for(var h=null,f=s.readVarint()+s.pos;s.pos<f;){var y=s.readVarint()>>3;h=y===1?s.readString():y===2?s.readFloat():y===3?s.readDouble():y===4?s.readVarint64():y===5?s.readVarint():y===6?s.readSVarint():y===7?s.readBoolean():null}return h}(r))}w_.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new Bw(this._pbf,t,this.extent,this._keys,this._values)};var Nw=b_;function jw(i,t,r){if(i===3){var s=new Nw(r,r.readVarint()+r.pos);s.length&&(t[s.name]=s)}}Eo.VectorTile=function(i,t){this.layers=i.readFields(jw,{},t)},Eo.VectorTileFeature=x_,Eo.VectorTileLayer=b_;const Vw=Eo.VectorTileFeature.types,Zf=Math.pow(2,13);function wu(i,t,r,s,h,f,y,x){i.emplaceBack(t,r,2*Math.floor(s*Zf)+y,h*Zf*2,f*Zf*2,Math.round(x))}class Wf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ta,this.centroidVertexArray=new xr,this.indexArray=new wr,this.programConfigurations=new Ms(t.layers,t.zoom),this.segments=new Qn,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,s){this.features=[],this.hasPattern=Gf("fill-extrusion",this.layers,r);for(const{feature:h,id:f,index:y,sourceLayerIndex:x}of t){const C=this.layers[0]._featureFilter.needGeometry,E=Ps(h,C);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),E,s))continue;const M={id:f,sourceLayerIndex:x,index:y,geometry:C?E.geometry:Is(h),properties:h.properties,type:h.type,patterns:{}};this.hasPattern?this.features.push(Hf("fill-extrusion",this.layers,M,this.zoom,r)):this.addFeature(M,M.geometry,y,s,{}),r.featureIndex.insert(h,M.geometry,y,x,this.index,!0)}}addFeatures(t,r,s){for(const h of this.features){const{geometry:f}=h;this.addFeature(h,f,h.index,r,s)}}update(t,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,s)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rw),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,zw.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,s,h,f){for(const y of ul(r,500)){const x={x:0,y:0,vertexCount:0};let C=0;for(const F of y)C+=F.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const F of y){if(F.length===0||qw(F))continue;let U=0;for(let J=0;J<F.length;J++){const ne=F[J];if(J>=1){const ye=F[J-1];if(!Uw(ne,ye)){E.vertexLength+4>Qn.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const le=ne.sub(ye)._perp()._unit(),fe=ye.dist(ne);U+fe>32768&&(U=0),wu(this.layoutVertexArray,ne.x,ne.y,le.x,le.y,0,0,U),wu(this.layoutVertexArray,ne.x,ne.y,le.x,le.y,0,1,U),x.x+=2*ne.x,x.y+=2*ne.y,x.vertexCount+=2,U+=fe,wu(this.layoutVertexArray,ye.x,ye.y,le.x,le.y,0,0,U),wu(this.layoutVertexArray,ye.x,ye.y,le.x,le.y,0,1,U),x.x+=2*ye.x,x.y+=2*ye.y,x.vertexCount+=2;const Se=E.vertexLength;this.indexArray.emplaceBack(Se,Se+2,Se+1),this.indexArray.emplaceBack(Se+1,Se+2,Se+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+C>Qn.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),Vw[t.type]!=="Polygon")continue;const M=[],I=[],R=E.vertexLength;for(const F of y)if(F.length!==0){F!==y[0]&&I.push(M.length/2);for(let U=0;U<F.length;U++){const J=F[U];wu(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),x.x+=J.x,x.y+=J.y,x.vertexCount+=1,M.push(J.x),M.push(J.y)}}const O=p_(M,I);for(let F=0;F<O.length;F+=3)this.indexArray.emplaceBack(R+O[F],R+O[F+2],R+O[F+1]);E.primitiveLength+=O.length/3,E.vertexLength+=C;for(let F=0;F<x.vertexCount;F++){const U=Math.floor(x.x/x.vertexCount),J=Math.floor(x.y/x.vertexCount);this.centroidVertexArray.emplaceBack(U,J)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,f,h)}}function Uw(i,t){return i.x===t.x&&(i.x<0||i.x>jn)||i.y===t.y&&(i.y<0||i.y>jn)}function qw(i){return i.every(t=>t.x<0)||i.every(t=>t.x>jn)||i.every(t=>t.y<0)||i.every(t=>t.y>jn)}let C_;et("FillExtrusionBucket",Wf,{omit:["layers","features"]});var Gw={get paint(){return C_=C_||new w({"fill-extrusion-opacity":new e(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new o(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new e(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new e(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new c(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new o(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new o(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new e(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Hw extends S{constructor(t){super(t,Gw)}createBucket(t){return new Wf(t)}queryRadius(){return vh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,r,s,h,f,y,x,C){const E=xh(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,x),M=this.paint.get("fill-extrusion-height").evaluate(r,s),I=this.paint.get("fill-extrusion-base").evaluate(r,s),R=function(F,U,J,ne){const ye=[];for(const le of F){const fe=[le.x,le.y,0,1];bh(fe,fe,U),ye.push(new j(fe[0]/fe[3],fe[1]/fe[3]))}return ye}(E,C),O=function(F,U,J,ne){const ye=[],le=[],fe=ne[8]*U,Se=ne[9]*U,Re=ne[10]*U,Ke=ne[11]*U,vt=ne[8]*J,We=ne[9]*J,$e=ne[10]*J,ht=ne[11]*J;for(const rt of F){const tt=[],Ie=[];for(const ft of rt){const dt=ft.x,Ct=ft.y,Qt=ne[0]*dt+ne[4]*Ct+ne[12],Yt=ne[1]*dt+ne[5]*Ct+ne[13],Zn=ne[2]*dt+ne[6]*Ct+ne[14],Va=ne[3]*dt+ne[7]*Ct+ne[15],li=Zn+Re,Wn=Va+Ke,Ti=Qt+vt,Mi=Yt+We,Ii=Zn+$e,Sn=Va+ht,Xn=new j((Qt+fe)/Wn,(Yt+Se)/Wn);Xn.z=li/Wn,tt.push(Xn);const gi=new j(Ti/Sn,Mi/Sn);gi.z=Ii/Sn,Ie.push(gi)}ye.push(tt),le.push(Ie)}return[ye,le]}(h,I,M,C);return function(F,U,J){let ne=1/0;t_(J,U)&&(ne=A_(J,U[0]));for(let ye=0;ye<U.length;ye++){const le=U[ye],fe=F[ye];for(let Se=0;Se<le.length-1;Se++){const Re=le[Se],Ke=[Re,le[Se+1],fe[Se+1],fe[Se],Re];e_(J,Ke)&&(ne=Math.min(ne,A_(J,Ke)))}}return ne!==1/0&&ne}(O[0],O[1],R)}}function Cu(i,t){return i.x*t.x+i.y*t.y}function A_(i,t){if(i.length===1){let r=0;const s=t[r++];let h;for(;!h||s.equals(h);)if(h=t[r++],!h)return 1/0;for(;r<t.length;r++){const f=t[r],y=i[0],x=h.sub(s),C=f.sub(s),E=y.sub(s),M=Cu(x,x),I=Cu(x,C),R=Cu(C,C),O=Cu(E,x),F=Cu(E,C),U=M*R-I*I,J=(R*O-I*F)/U,ne=(M*F-I*O)/U,ye=s.z*(1-J-ne)+h.z*J+f.z*ne;if(isFinite(ye))return ye}return 1/0}{let r=1/0;for(const s of t)r=Math.min(r,s.z);return r}}const $w=B([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Zw}=$w,Ww=B([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Xw}=Ww,Kw=Eo.VectorTileFeature.types,Jw=Math.cos(Math.PI/180*37.5),S_=Math.pow(2,14)/.5;class Xf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new xa,this.layoutVertexArray2=new br,this.indexArray=new wr,this.programConfigurations=new Ms(t.layers,t.zoom),this.segments=new Qn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,s){this.hasPattern=Gf("line",this.layers,r);const h=this.layers[0].layout.get("line-sort-key"),f=!h.isConstant(),y=[];for(const{feature:x,id:C,index:E,sourceLayerIndex:M}of t){const I=this.layers[0]._featureFilter.needGeometry,R=Ps(x,I);if(!this.layers[0]._featureFilter.filter(new Kt(this.zoom),R,s))continue;const O=f?h.evaluate(R,{},s):void 0,F={id:C,properties:x.properties,type:x.type,sourceLayerIndex:M,index:E,geometry:I?R.geometry:Is(x),patterns:{},sortKey:O};y.push(F)}f&&y.sort((x,C)=>x.sortKey-C.sortKey);for(const x of y){const{geometry:C,index:E,sourceLayerIndex:M}=x;if(this.hasPattern){const I=Hf("line",this.layers,x,this.zoom,r);this.patternFeatures.push(I)}else this.addFeature(x,C,E,s,{});r.featureIndex.insert(t[E].feature,C,E,M,this.index)}}update(t,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,s)}addFeatures(t,r,s){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,r,s)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Xw)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Zw),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,r,s,h,f){const y=this.layers[0].layout,x=y.get("line-join").evaluate(t,{}),C=y.get("line-cap"),E=y.get("line-miter-limit"),M=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const I of r)this.addLine(I,t,x,C,E,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,s,f,h)}addLine(t,r,s,h,f,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<t.length-1;ne++)this.totalDistance+=t[ne].dist(t[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=Kw[r.type]==="Polygon";let C=t.length;for(;C>=2&&t[C-1].equals(t[C-2]);)C--;let E=0;for(;E<C-1&&t[E].equals(t[E+1]);)E++;if(C<(x?3:2))return;s==="bevel"&&(f=1.05);const M=this.overscaling<=16?15*jn/(512*this.overscaling):0,I=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let R,O,F,U,J;this.e1=this.e2=-1,x&&(R=t[C-2],J=t[E].sub(R)._unit()._perp());for(let ne=E;ne<C;ne++){if(F=ne===C-1?x?t[E+1]:void 0:t[ne+1],F&&t[ne].equals(F))continue;J&&(U=J),R&&(O=R),R=t[ne],J=F?F.sub(R)._unit()._perp():U,U=U||J;let ye=U.add(J);ye.x===0&&ye.y===0||ye._unit();const le=U.x*J.x+U.y*J.y,fe=ye.x*J.x+ye.y*J.y,Se=fe!==0?1/fe:1/0,Re=2*Math.sqrt(2-2*fe),Ke=fe<Jw&&O&&F,vt=U.x*J.y-U.y*J.x>0;if(Ke&&ne>E){const ht=R.dist(O);if(ht>2*M){const rt=R.sub(R.sub(O)._mult(M/ht)._round());this.updateDistance(O,rt),this.addCurrentVertex(rt,U,0,0,I),O=rt}}const We=O&&F;let $e=We?s:x?"butt":h;if(We&&$e==="round"&&(Se<y?$e="miter":Se<=2&&($e="fakeround")),$e==="miter"&&Se>f&&($e="bevel"),$e==="bevel"&&(Se>2&&($e="flipbevel"),Se<f&&($e="miter")),O&&this.updateDistance(O,R),$e==="miter")ye._mult(Se),this.addCurrentVertex(R,ye,0,0,I);else if($e==="flipbevel"){if(Se>100)ye=J.mult(-1);else{const ht=Se*U.add(J).mag()/U.sub(J).mag();ye._perp()._mult(ht*(vt?-1:1))}this.addCurrentVertex(R,ye,0,0,I),this.addCurrentVertex(R,ye.mult(-1),0,0,I)}else if($e==="bevel"||$e==="fakeround"){const ht=-Math.sqrt(Se*Se-1),rt=vt?ht:0,tt=vt?0:ht;if(O&&this.addCurrentVertex(R,U,rt,tt,I),$e==="fakeround"){const Ie=Math.round(180*Re/Math.PI/20);for(let ft=1;ft<Ie;ft++){let dt=ft/Ie;if(dt!==.5){const Qt=dt-.5;dt+=dt*Qt*(dt-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*Qt*Qt+(.848013+le*(.215638*le-1.06021)))}const Ct=J.sub(U)._mult(dt)._add(U)._unit()._mult(vt?-1:1);this.addHalfVertex(R,Ct.x,Ct.y,!1,vt,0,I)}}F&&this.addCurrentVertex(R,J,-rt,-tt,I)}else if($e==="butt")this.addCurrentVertex(R,ye,0,0,I);else if($e==="square"){const ht=O?1:-1;this.addCurrentVertex(R,ye,ht,ht,I)}else $e==="round"&&(O&&(this.addCurrentVertex(R,U,0,0,I),this.addCurrentVertex(R,U,1,1,I,!0)),F&&(this.addCurrentVertex(R,J,-1,-1,I,!0),this.addCurrentVertex(R,J,0,0,I)));if(Ke&&ne<C-1){const ht=R.dist(F);if(ht>2*M){const rt=R.add(F.sub(R)._mult(M/ht)._round());this.updateDistance(R,rt),this.addCurrentVertex(rt,J,0,0,I),R=rt}}}}addCurrentVertex(t,r,s,h,f,y=!1){const x=r.y*h-r.x,C=-r.y-r.x*h;this.addHalfVertex(t,r.x+r.y*s,r.y-r.x*s,y,!1,s,f),this.addHalfVertex(t,x,C,y,!0,-h,f),this.distance>S_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,s,h,f,y))}addHalfVertex({x:t,y:r},s,h,f,y,x,C){const E=.5*(this.lineClips?this.scaledDistance*(S_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(f?1:0),(r<<1)+(y?1:0),Math.round(63*s)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),C.primitiveLength++),y?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}}let E_,T_;et("LineBucket",Xf,{omit:["layers","patternFeatures"]});var M_={get paint(){return T_=T_||new w({"line-opacity":new o(be.paint_line["line-opacity"]),"line-color":new o(be.paint_line["line-color"]),"line-translate":new e(be.paint_line["line-translate"]),"line-translate-anchor":new e(be.paint_line["line-translate-anchor"]),"line-width":new o(be.paint_line["line-width"]),"line-gap-width":new o(be.paint_line["line-gap-width"]),"line-offset":new o(be.paint_line["line-offset"]),"line-blur":new o(be.paint_line["line-blur"]),"line-dasharray":new d(be.paint_line["line-dasharray"]),"line-pattern":new c(be.paint_line["line-pattern"]),"line-gradient":new g(be.paint_line["line-gradient"])})},get layout(){return E_=E_||new w({"line-cap":new e(be.layout_line["line-cap"]),"line-join":new o(be.layout_line["line-join"]),"line-miter-limit":new e(be.layout_line["line-miter-limit"]),"line-round-limit":new e(be.layout_line["line-round-limit"]),"line-sort-key":new o(be.layout_line["line-sort-key"])})}};class Yw extends o{possiblyEvaluate(t,r){return r=new Kt(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(t,r)}evaluate(t,r,s,h){return r=Qe({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(t,r,s,h)}}let Sh;class Qw extends S{constructor(t){super(t,M_),this.gradientVersion=0,Sh||(Sh=new Yw(M_.paint.properties["line-width"].specification),Sh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!function(s){return s._styleExpression!==void 0}(r)&&r._styleExpression.expression instanceof uo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,r){super.recalculate(t,r),this.paint._values["line-floorwidth"]=Sh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Xf(t)}queryRadius(t){const r=t,s=I_(gu("line-width",this,r),gu("line-gap-width",this,r)),h=gu("line-offset",this,r);return s/2+Math.abs(h)+vh(this.paint.get("line-translate"))}queryIntersectsFeature(t,r,s,h,f,y,x){const C=xh(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,x),E=x/2*I_(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),M=this.paint.get("line-offset").evaluate(r,s);return M&&(h=function(I,R){const O=[];for(let F=0;F<I.length;F++){const U=I[F],J=[];for(let ne=0;ne<U.length;ne++){const ye=U[ne-1],le=U[ne],fe=U[ne+1],Se=ne===0?new j(0,0):le.sub(ye)._unit()._perp(),Re=ne===U.length-1?new j(0,0):fe.sub(le)._unit()._perp(),Ke=Se._add(Re)._unit(),vt=Ke.x*Re.x+Ke.y*Re.y;vt!==0&&Ke._mult(1/vt),J.push(Ke._mult(R)._add(le))}O.push(J)}return O}(h,M*x)),function(I,R,O){for(let F=0;F<R.length;F++){const U=R[F];if(I.length>=3){for(let J=0;J<U.length;J++)if(Ll(I,U[J]))return!0}if(lw(I,U,O))return!0}return!1}(C,h,E)}isTileClipped(){return!0}}function I_(i,t){return t>0?t+2*i:i}const e2=B([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),t2=B([{name:"a_projected_pos",components:3,type:"Float32"}],4);B([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const n2=B([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);B([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const P_=B([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),i2=B([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function a2(i,t,r){return i.sections.forEach(s=>{s.text=function(h,f,y){const x=f.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),Na.applyArabicShaping&&(h=Na.applyArabicShaping(h)),h}(s.text,t,r)}),i}B([{name:"triangle",components:3,type:"Uint16"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),B([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),B([{type:"Float32",name:"offsetX"}]),B([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),B([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Au={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Gn=24,D_=Jt,z_=function(i,t,r,s,h){var f,y,x=8*h-s-1,C=(1<<x)-1,E=C>>1,M=-7,I=h-1,R=-1,O=i[t+I];for(I+=R,f=O&(1<<-M)-1,O>>=-M,M+=x;M>0;f=256*f+i[t+I],I+=R,M-=8);for(y=f&(1<<-M)-1,f>>=-M,M+=s;M>0;y=256*y+i[t+I],I+=R,M-=8);if(f===0)f=1-E;else{if(f===C)return y?NaN:1/0*(O?-1:1);y+=Math.pow(2,s),f-=E}return(O?-1:1)*y*Math.pow(2,f-s)},R_=function(i,t,r,s,h,f){var y,x,C,E=8*f-h-1,M=(1<<E)-1,I=M>>1,R=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=0,F=1,U=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,y=M):(y=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-y))<1&&(y--,C*=2),(t+=y+I>=1?R/C:R*Math.pow(2,1-I))*C>=2&&(y++,C/=2),y+I>=M?(x=0,y=M):y+I>=1?(x=(t*C-1)*Math.pow(2,h),y+=I):(x=t*Math.pow(2,I-1)*Math.pow(2,h),y=0));h>=8;i[r+O]=255&x,O+=F,x/=256,h-=8);for(y=y<<h|x,E+=h;E>0;i[r+O]=255&y,O+=F,y/=256,E-=8);i[r+O-F]|=128*U};function Jt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Jt.Varint=0,Jt.Fixed64=1,Jt.Bytes=2,Jt.Fixed32=5;var Kf=4294967296,k_=1/Kf,L_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Zr(i){return i.type===Jt.Bytes?i.readVarint()+i.pos:i.pos+1}function Nl(i,t,r){return r?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function O_(i,t,r){var s=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(s);for(var h=r.pos-1;h>=i;h--)r.buf[h+s]=r.buf[h]}function r2(i,t){for(var r=0;r<i.length;r++)t.writeVarint(i[r])}function o2(i,t){for(var r=0;r<i.length;r++)t.writeSVarint(i[r])}function s2(i,t){for(var r=0;r<i.length;r++)t.writeFloat(i[r])}function l2(i,t){for(var r=0;r<i.length;r++)t.writeDouble(i[r])}function c2(i,t){for(var r=0;r<i.length;r++)t.writeBoolean(i[r])}function u2(i,t){for(var r=0;r<i.length;r++)t.writeFixed32(i[r])}function d2(i,t){for(var r=0;r<i.length;r++)t.writeSFixed32(i[r])}function h2(i,t){for(var r=0;r<i.length;r++)t.writeFixed64(i[r])}function p2(i,t){for(var r=0;r<i.length;r++)t.writeSFixed64(i[r])}function Eh(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function jl(i,t,r){i[r]=t,i[r+1]=t>>>8,i[r+2]=t>>>16,i[r+3]=t>>>24}function B_(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}Jt.prototype={destroy:function(){this.buf=null},readFields:function(i,t,r){for(r=r||this.length;this.pos<r;){var s=this.readVarint(),h=s>>3,f=this.pos;this.type=7&s,i(h,t,this),this.pos===f&&this.skip(s)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=Eh(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=B_(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Eh(this.buf,this.pos)+Eh(this.buf,this.pos+4)*Kf;return this.pos+=8,i},readSFixed64:function(){var i=Eh(this.buf,this.pos)+B_(this.buf,this.pos+4)*Kf;return this.pos+=8,i},readFloat:function(){var i=z_(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=z_(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,r,s=this.buf;return t=127&(r=s[this.pos++]),r<128?t:(t|=(127&(r=s[this.pos++]))<<7,r<128?t:(t|=(127&(r=s[this.pos++]))<<14,r<128?t:(t|=(127&(r=s[this.pos++]))<<21,r<128?t:function(h,f,y){var x,C,E=y.buf;if(x=(112&(C=E[y.pos++]))>>4,C<128||(x|=(127&(C=E[y.pos++]))<<3,C<128)||(x|=(127&(C=E[y.pos++]))<<10,C<128)||(x|=(127&(C=E[y.pos++]))<<17,C<128)||(x|=(127&(C=E[y.pos++]))<<24,C<128)||(x|=(1&(C=E[y.pos++]))<<31,C<128))return Nl(h,x,f);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=s[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&L_?function(r,s,h){return L_.decode(r.subarray(s,h))}(this.buf,t,i):function(r,s,h){for(var f="",y=s;y<h;){var x,C,E,M=r[y],I=null,R=M>239?4:M>223?3:M>191?2:1;if(y+R>h)break;R===1?M<128&&(I=M):R===2?(192&(x=r[y+1]))==128&&(I=(31&M)<<6|63&x)<=127&&(I=null):R===3?(C=r[y+2],(192&(x=r[y+1]))==128&&(192&C)==128&&((I=(15&M)<<12|(63&x)<<6|63&C)<=2047||I>=55296&&I<=57343)&&(I=null)):R===4&&(C=r[y+2],E=r[y+3],(192&(x=r[y+1]))==128&&(192&C)==128&&(192&E)==128&&((I=(15&M)<<18|(63&x)<<12|(63&C)<<6|63&E)<=65535||I>=1114112)&&(I=null)),I===null?(I=65533,R=1):I>65535&&(I-=65536,f+=String.fromCharCode(I>>>10&1023|55296),I=56320|1023&I),f+=String.fromCharCode(I),y+=R}return f}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==Jt.Bytes)return i.push(this.readVarint(t));var r=Zr(this);for(i=i||[];this.pos<r;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSVarint());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Jt.Bytes)return i.push(this.readBoolean());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFloat());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Jt.Bytes)return i.push(this.readDouble());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFixed32());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSFixed32());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Jt.Bytes)return i.push(this.readFixed64());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Jt.Bytes)return i.push(this.readSFixed64());var t=Zr(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===Jt.Varint)for(;this.buf[this.pos++]>127;);else if(t===Jt.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Jt.Fixed32)this.pos+=4;else{if(t!==Jt.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),jl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),jl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),jl(this.buf,-1&i,this.pos),jl(this.buf,Math.floor(i*k_),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),jl(this.buf,-1&i,this.pos),jl(this.buf,Math.floor(i*k_),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,r){var s,h;if(t>=0?(s=t%4294967296|0,h=t/4294967296|0):(h=~(-t/4294967296),4294967295^(s=~(-t%4294967296))?s=s+1|0:(s=0,h=h+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(f,y,x){x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,f>>>=7,x.buf[x.pos++]=127&f|128,x.buf[x.pos]=127&(f>>>=7)}(s,0,r),function(f,y){var x=(7&f)<<4;y.buf[y.pos++]|=x|((f>>>=3)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f|((f>>>=7)?128:0),f&&(y.buf[y.pos++]=127&f)))))}(h,r)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(s,h,f){for(var y,x,C=0;C<h.length;C++){if((y=h.charCodeAt(C))>55295&&y<57344){if(!x){y>56319||C+1===h.length?(s[f++]=239,s[f++]=191,s[f++]=189):x=y;continue}if(y<56320){s[f++]=239,s[f++]=191,s[f++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(s[f++]=239,s[f++]=191,s[f++]=189,x=null);y<128?s[f++]=y:(y<2048?s[f++]=y>>6|192:(y<65536?s[f++]=y>>12|224:(s[f++]=y>>18|240,s[f++]=y>>12&63|128),s[f++]=y>>6&63|128),s[f++]=63&y|128)}return f}(this.buf,i,this.pos);var r=this.pos-t;r>=128&&O_(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(i){this.realloc(4),R_(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),R_(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=i[r]},writeRawMessage:function(i,t){this.pos++;var r=this.pos;i(t,this);var s=this.pos-r;s>=128&&O_(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeMessage:function(i,t,r){this.writeTag(i,Jt.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,r2,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,o2,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,c2,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,s2,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,l2,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,u2,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,d2,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,h2,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,p2,t)},writeBytesField:function(i,t){this.writeTag(i,Jt.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,Jt.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,Jt.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,Jt.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,Jt.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,Jt.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,Jt.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,Jt.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,Jt.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,Jt.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,!!t)}};var Jf=z(D_);const Yf=3;function f2(i,t,r){i===1&&r.readMessage(m2,t)}function m2(i,t,r){if(i===3){const{id:s,bitmap:h,width:f,height:y,left:x,top:C,advance:E}=r.readMessage(g2,{});t.push({id:s,bitmap:new _u({width:f+2*Yf,height:y+2*Yf},h),metrics:{width:f,height:y,left:x,top:C,advance:E}})}}function g2(i,t,r){i===1?t.id=r.readVarint():i===2?t.bitmap=r.readBytes():i===3?t.width=r.readVarint():i===4?t.height=r.readVarint():i===5?t.left=r.readSVarint():i===6?t.top=r.readSVarint():i===7&&(t.advance=r.readVarint())}const F_=Yf;function N_(i){let t=0,r=0;for(const y of i)t+=y.w*y.h,r=Math.max(r,y.w);i.sort((y,x)=>x.h-y.h);const s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let h=0,f=0;for(const y of i)for(let x=s.length-1;x>=0;x--){const C=s[x];if(!(y.w>C.w||y.h>C.h)){if(y.x=C.x,y.y=C.y,f=Math.max(f,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===C.w&&y.h===C.h){const E=s.pop();x<s.length&&(s[x]=E)}else y.h===C.h?(C.x+=y.w,C.w-=y.w):y.w===C.w?(C.y+=y.h,C.h-=y.h):(s.push({x:C.x+y.w,y:C.y,w:C.w-y.w,h:y.h}),C.y+=y.h,C.h-=y.h);break}}return{w:h,h:f,fill:t/(h*f)||0}}const Gi=1;class Qf{constructor(t,{pixelRatio:r,version:s,stretchX:h,stretchY:f,content:y,textFitWidth:x,textFitHeight:C}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=h,this.stretchY=f,this.content=y,this.version=s,this.textFitWidth=x,this.textFitHeight=C}get tl(){return[this.paddedRect.x+Gi,this.paddedRect.y+Gi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Gi,this.paddedRect.y+this.paddedRect.h-Gi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Gi)/this.pixelRatio,(this.paddedRect.h-2*Gi)/this.pixelRatio]}}class j_{constructor(t,r){const s={},h={};this.haveRenderCallbacks=[];const f=[];this.addImages(t,s,f),this.addImages(r,h,f);const{w:y,h:x}=N_(f),C=new wa({width:y||1,height:x||1});for(const E in t){const M=t[E],I=s[E].paddedRect;wa.copy(M.data,C,{x:0,y:0},{x:I.x+Gi,y:I.y+Gi},M.data)}for(const E in r){const M=r[E],I=h[E].paddedRect,R=I.x+Gi,O=I.y+Gi,F=M.data.width,U=M.data.height;wa.copy(M.data,C,{x:0,y:0},{x:R,y:O},M.data),wa.copy(M.data,C,{x:0,y:U-1},{x:R,y:O-1},{width:F,height:1}),wa.copy(M.data,C,{x:0,y:0},{x:R,y:O+U},{width:F,height:1}),wa.copy(M.data,C,{x:F-1,y:0},{x:R-1,y:O},{width:1,height:U}),wa.copy(M.data,C,{x:0,y:0},{x:R+F,y:O},{width:1,height:U})}this.image=C,this.iconPositions=s,this.patternPositions=h}addImages(t,r,s){for(const h in t){const f=t[h],y={x:0,y:0,w:f.data.width+2*Gi,h:f.data.height+2*Gi};s.push(y),r[h]=new Qf(y,f),f.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const s in t.updatedImages)this.patchUpdatedImage(this.iconPositions[s],t.getImage(s),r),this.patchUpdatedImage(this.patternPositions[s],t.getImage(s),r)}patchUpdatedImage(t,r,s){if(!t||!r||t.version===r.version)return;t.version=r.version;const[h,f]=t.tl;s.update(r.data,void 0,{x:h,y:f})}}var To;et("ImagePosition",Qf),et("ImageAtlas",j_),v.ah=void 0,(To=v.ah||(v.ah={}))[To.none=0]="none",To[To.horizontal=1]="horizontal",To[To.vertical=2]="vertical",To[To.horizontalOnly=3]="horizontalOnly";const Su=-17;class Eu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,r){const s=new Eu;return s.scale=t||1,s.fontStack=r,s}static forImage(t){const r=new Eu;return r.imageName=t,r}}class Vl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,r){const s=new Vl;for(let h=0;h<t.sections.length;h++){const f=t.sections[h];f.image?s.addImageSection(f):s.addTextSection(f,r)}return s}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let r="";for(let s=0;s<t.length;s++){const h=t.charCodeAt(s+1)||null,f=t.charCodeAt(s-1)||null;r+=h&&su(h)&&!Au[t[s+1]]||f&&su(f)&&!Au[t[s-1]]||!Au[t[s]]?t[s]:Au[t[s]]}return r}(this.text)}trim(){let t=0;for(let s=0;s<this.text.length&&Mh[this.text.charCodeAt(s)];s++)t++;let r=this.text.length;for(let s=this.text.length-1;s>=0&&s>=t&&Mh[this.text.charCodeAt(s)];s--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)}substring(t,r){const s=new Vl;return s.text=this.text.substring(t,r),s.sectionIndex=this.sectionIndex.slice(t,r),s.sections=this.sections,s}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,r)=>Math.max(t,this.sections[r].scale),0)}addTextSection(t,r){this.text+=t.text,this.sections.push(Eu.forText(t.scale,t.fontStack||r));const s=this.sections.length-1;for(let h=0;h<t.text.length;++h)this.sectionIndex.push(s)}addImageSection(t){const r=t.image?t.image.name:"";if(r.length===0)return void Ft("Can't add FormattedSection with an empty image.");const s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Eu.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Ft("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Th(i,t,r,s,h,f,y,x,C,E,M,I,R,O,F){const U=Vl.fromFeature(i,h);let J;I===v.ah.vertical&&U.verticalizePunctuation();const{processBidirectionalText:ne,processStyledBidirectionalText:ye}=Na;if(ne&&U.sections.length===1){J=[];const Se=ne(U.toString(),em(U,E,f,t,s,O));for(const Re of Se){const Ke=new Vl;Ke.text=Re,Ke.sections=U.sections;for(let vt=0;vt<Re.length;vt++)Ke.sectionIndex.push(0);J.push(Ke)}}else if(ye){J=[];const Se=ye(U.text,U.sectionIndex,em(U,E,f,t,s,O));for(const Re of Se){const Ke=new Vl;Ke.text=Re[0],Ke.sectionIndex=Re[1],Ke.sections=U.sections,J.push(Ke)}}else J=function(Se,Re){const Ke=[],vt=Se.text;let We=0;for(const $e of Re)Ke.push(Se.substring(We,$e)),We=$e;return We<vt.length&&Ke.push(Se.substring(We,vt.length)),Ke}(U,em(U,E,f,t,s,O));const le=[],fe={positionedLines:le,text:U.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:I,iconsInText:!1,verticalizable:!1};return function(Se,Re,Ke,vt,We,$e,ht,rt,tt,Ie,ft,dt){let Ct=0,Qt=Su,Yt=0,Zn=0;const Va=rt==="right"?1:rt==="left"?0:.5;let li=0;for(const Sn of We){Sn.trim();const Xn=Sn.getMaxScale(),gi=(Xn-1)*Gn,ci={positionedGlyphs:[],lineOffset:0};Se.positionedLines[li]=ci;const Pi=ci.positionedGlyphs;let ui=0;if(!Sn.length()){Qt+=$e,++li;continue}for(let Hi=0;Hi<Sn.length();Hi++){const Ht=Sn.getSection(Hi),nn=Sn.getSectionIndex(Hi),ln=Sn.getCharCode(Hi);let na=0,bn=null,Hl=null,Sr=null,Er=Gn;const Ua=!(tt===v.ah.horizontal||!ft&&!er(ln)||ft&&(Mh[ln]||(Wn=ln,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Wn)))));if(Ht.imageName){const Sa=vt[Ht.imageName];if(!Sa)continue;Sr=Ht.imageName,Se.iconsInText=Se.iconsInText||!0,Hl=Sa.paddedRect;const ei=Sa.displaySize;Ht.scale=Ht.scale*Gn/dt,bn={width:ei[0],height:ei[1],left:Gi,top:-F_,advance:Ua?ei[1]:ei[0]},na=gi+(Gn-ei[1]*Ht.scale),Er=bn.advance;const Wr=Ua?ei[0]*Ht.scale-Gn*Xn:ei[1]*Ht.scale-Gn*Xn;Wr>0&&Wr>ui&&(ui=Wr)}else{const Sa=Ke[Ht.fontStack],ei=Sa&&Sa[ln];if(ei&&ei.rect)Hl=ei.rect,bn=ei.metrics;else{const Wr=Re[Ht.fontStack],zu=Wr&&Wr[ln];if(!zu)continue;bn=zu.metrics}na=(Xn-Ht.scale)*Gn}Ua?(Se.verticalizable=!0,Pi.push({glyph:ln,imageName:Sr,x:Ct,y:Qt+na,vertical:Ua,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:nn,metrics:bn,rect:Hl}),Ct+=Er*Ht.scale+Ie):(Pi.push({glyph:ln,imageName:Sr,x:Ct,y:Qt+na,vertical:Ua,scale:Ht.scale,fontStack:Ht.fontStack,sectionIndex:nn,metrics:bn,rect:Hl}),Ct+=bn.advance*Ht.scale+Ie)}Pi.length!==0&&(Yt=Math.max(Ct-Ie,Yt),x2(Pi,0,Pi.length-1,Va,ui)),Ct=0;const Aa=$e*Xn+ui;ci.lineOffset=Math.max(ui,gi),Qt+=Aa,Zn=Math.max(Aa,Zn),++li}var Wn;const Ti=Qt-Su,{horizontalAlign:Mi,verticalAlign:Ii}=tm(ht);(function(Sn,Xn,gi,ci,Pi,ui,Aa,Hi,Ht){const nn=(Xn-gi)*Pi;let ln=0;ln=ui!==Aa?-Hi*ci-Su:(-ci*Ht+.5)*Aa;for(const na of Sn)for(const bn of na.positionedGlyphs)bn.x+=nn,bn.y+=ln})(Se.positionedLines,Va,Mi,Ii,Yt,Zn,$e,Ti,We.length),Se.top+=-Ii*Ti,Se.bottom=Se.top+Ti,Se.left+=-Mi*Yt,Se.right=Se.left+Yt}(fe,t,r,s,J,y,x,C,I,E,R,F),!function(Se){for(const Re of Se)if(Re.positionedGlyphs.length!==0)return!1;return!0}(le)&&fe}const Mh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},y2={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},_2={40:!0};function V_(i,t,r,s,h,f){if(t.imageName){const y=s[t.imageName];return y?y.displaySize[0]*t.scale*Gn/f+h:0}{const y=r[t.fontStack],x=y&&y[i];return x?x.metrics.advance*t.scale+h:0}}function U_(i,t,r,s){const h=Math.pow(i-t,2);return s?i<t?h/2:2*h:h+Math.abs(r)*r}function v2(i,t,r){let s=0;return i===10&&(s-=1e4),r&&(s+=150),i!==40&&i!==65288||(s+=50),t!==41&&t!==65289||(s+=50),s}function q_(i,t,r,s,h,f){let y=null,x=U_(t,r,h,f);for(const C of s){const E=U_(t-C.x,r,h,f)+C.badness;E<=x&&(y=C,x=E)}return{index:i,x:t,priorBreak:y,badness:x}}function G_(i){return i?G_(i.priorBreak).concat(i.index):[]}function em(i,t,r,s,h,f){if(!i)return[];const y=[],x=function(I,R,O,F,U,J){let ne=0;for(let ye=0;ye<I.length();ye++){const le=I.getSection(ye);ne+=V_(I.getCharCode(ye),le,F,U,R,J)}return ne/Math.max(1,Math.ceil(ne/O))}(i,t,r,s,h,f),C=i.text.indexOf("​")>=0;let E=0;for(let I=0;I<i.length();I++){const R=i.getSection(I),O=i.getCharCode(I);if(Mh[O]||(E+=V_(O,R,s,h,t,f)),I<i.length()-1){const F=!((M=O)<11904)&&(!!Bt["CJK Compatibility Forms"](M)||!!Bt["CJK Compatibility"](M)||!!Bt["CJK Strokes"](M)||!!Bt["CJK Symbols and Punctuation"](M)||!!Bt["Enclosed CJK Letters and Months"](M)||!!Bt["Halfwidth and Fullwidth Forms"](M)||!!Bt["Ideographic Description Characters"](M)||!!Bt["Vertical Forms"](M)||dh.test(String.fromCodePoint(M)));(y2[O]||F||R.imageName||I!==i.length()-2&&_2[i.getCharCode(I+1)])&&y.push(q_(I+1,E,x,y,v2(O,i.getCharCode(I+1),F&&C),!1))}}var M;return G_(q_(i.length(),E,x,y,0,!0))}function tm(i){let t=.5,r=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function x2(i,t,r,s,h){if(!s&&!h)return;const f=i[r],y=(i[r].x+f.metrics.advance*f.scale)*s;for(let x=t;x<=r;x++)i[x].x-=y,i[x].y+=h}function b2(i,t,r){const{horizontalAlign:s,verticalAlign:h}=tm(r),f=t[0]-i.displaySize[0]*s,y=t[1]-i.displaySize[1]*h;return{image:i,top:y,bottom:y+i.displaySize[1],left:f,right:f+i.displaySize[0]}}function H_(i){var t,r;let s=i.left,h=i.top,f=i.right-s,y=i.bottom-h;const x=(t=i.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",C=(r=i.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",E=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(C==="proportional"){if(x==="stretchOnly"&&f/y<E||x==="proportional"){const M=Math.ceil(y*E);s*=M/f,f=M}}else if(x==="proportional"&&C==="stretchOnly"&&E!==0&&f/y>E){const M=Math.ceil(f/E);h*=M/y,y=M}return{x1:s,y1:h,x2:s+f,y2:h+y}}function $_(i,t,r,s,h,f){const y=i.image;let x;if(y.content){const J=y.content,ne=y.pixelRatio||1;x=[J[0]/ne,J[1]/ne,y.displaySize[0]-J[2]/ne,y.displaySize[1]-J[3]/ne]}const C=t.left*f,E=t.right*f;let M,I,R,O;r==="width"||r==="both"?(O=h[0]+C-s[3],I=h[0]+E+s[1]):(O=h[0]+(C+E-y.displaySize[0])/2,I=O+y.displaySize[0]);const F=t.top*f,U=t.bottom*f;return r==="height"||r==="both"?(M=h[1]+F-s[0],R=h[1]+U+s[2]):(M=h[1]+(F+U-y.displaySize[1])/2,R=M+y.displaySize[1]),{image:y,top:M,right:I,bottom:R,left:O,collisionPadding:x}}const Tu=255,Ar=128,Mo=Tu*Ar;function Z_(i,t){const{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new Kt(i+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:s,interpolationType:h}=r;let f=0;for(;f<s.length&&s[f]<=i;)f++;f=Math.max(0,f-1);let y=f;for(;y<s.length&&s[y]<i+1;)y++;y=Math.min(s.length-1,y);const x=s[f],C=s[y];return r.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:C,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:C,minSize:r.evaluate(new Kt(x)),maxSize:r.evaluate(new Kt(C)),interpolationType:h}}}function nm(i,t,r){let s="never";const h=i.get(t);return h?s=h:i.get(r)&&(s="always"),s}const w2=Eo.VectorTileFeature.types,C2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ih(i,t,r,s,h,f,y,x,C,E,M,I,R){const O=x?Math.min(Mo,Math.round(x[0])):0,F=x?Math.min(Mo,Math.round(x[1])):0;i.emplaceBack(t,r,Math.round(32*s),Math.round(32*h),f,y,(O<<1)+(C?1:0),F,16*E,16*M,256*I,256*R)}function im(i,t,r){i.emplaceBack(t.x,t.y,r),i.emplaceBack(t.x,t.y,r),i.emplaceBack(t.x,t.y,r),i.emplaceBack(t.x,t.y,r)}function A2(i){for(const t of i.sections)if(If(t.text))return!0;return!1}class am{constructor(t){this.layoutVertexArray=new mi,this.indexArray=new wr,this.programConfigurations=t,this.segments=new Qn,this.dynamicLayoutVertexArray=new oi,this.opacityVertexArray=new qi,this.hasVisibleVertices=!1,this.placedSymbolArray=new sn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,s,h){this.isEmpty()||(s&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,e2.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,t2.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,C2,!0),this.opacityVertexBuffer.itemSize=1),(s||h)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}et("SymbolBuffers",am);class rm{constructor(t,r,s){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new s,this.segments=new Qn,this.collisionVertexArray=new Ao}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,n2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}et("CollisionBuffers",rm);class Ul{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(y=>y.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Nf([]),this.placementViewportMatrix=Nf([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Z_(this.zoom,r["text-size"]),this.iconSizeData=Z_(this.zoom,r["icon-size"]);const s=this.layers[0].layout,h=s.get("symbol-sort-key"),f=s.get("symbol-z-order");this.canOverlap=nm(s,"text-overlap","text-allow-overlap")!=="never"||nm(s,"icon-overlap","icon-allow-overlap")!=="never"||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&!h.isConstant(),this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(y=>v.ah[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=t.sourceID}createArrays(){this.text=new am(new Ms(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new am(new Ms(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new ai,this.lineVertexArray=new ri,this.symbolInstances=new fi,this.textAnchorOffsets=new Gr}calculateGlyphDependencies(t,r,s,h,f){for(let y=0;y<t.length;y++)if(r[t.charCodeAt(y)]=!0,(s||h)&&f){const x=Au[t.charAt(y)];x&&(r[x.charCodeAt(0)]=!0)}}populate(t,r,s){const h=this.layers[0],f=h.layout,y=f.get("text-font"),x=f.get("text-field"),C=f.get("icon-image"),E=(x.value.kind!=="constant"||x.value.value instanceof Fn&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),M=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,I=f.get("symbol-sort-key");if(this.features=[],!E&&!M)return;const R=r.iconDependencies,O=r.glyphDependencies,F=r.availableImages,U=new Kt(this.zoom);for(const{feature:J,id:ne,index:ye,sourceLayerIndex:le}of t){const fe=h._featureFilter.needGeometry,Se=Ps(J,fe);if(!h._featureFilter.filter(U,Se,s))continue;let Re,Ke;if(fe||(Se.geometry=Is(J)),E){const We=h.getValueAndResolveTokens("text-field",Se,s,F),$e=Fn.factory(We),ht=this.hasRTLText=this.hasRTLText||A2($e);(!ht||Na.getRTLTextPluginStatus()==="unavailable"||ht&&Na.isParsed())&&(Re=a2($e,h,Se))}if(M){const We=h.getValueAndResolveTokens("icon-image",Se,s,F);Ke=We instanceof Mn?We:Mn.fromString(We)}if(!Re&&!Ke)continue;const vt=this.sortFeaturesByKey?I.evaluate(Se,{},s):void 0;if(this.features.push({id:ne,text:Re,icon:Ke,index:ye,sourceLayerIndex:le,geometry:Se.geometry,properties:J.properties,type:w2[J.type],sortKey:vt}),Ke&&(R[Ke.name]=!0),Re){const We=y.evaluate(Se,{},s).join(","),$e=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.ah.vertical)>=0;for(const ht of Re.sections)if(ht.image)R[ht.image.name]=!0;else{const rt=ru(Re.toString()),tt=ht.fontStack||We,Ie=O[tt]=O[tt]||{};this.calculateGlyphDependencies(ht.text,Ie,$e,this.allowVerticalPlacement,rt)}}}f.get("symbol-placement")==="line"&&(this.features=function(J){const ne={},ye={},le=[];let fe=0;function Se(We){le.push(J[We]),fe++}function Re(We,$e,ht){const rt=ye[We];return delete ye[We],ye[$e]=rt,le[rt].geometry[0].pop(),le[rt].geometry[0]=le[rt].geometry[0].concat(ht[0]),rt}function Ke(We,$e,ht){const rt=ne[$e];return delete ne[$e],ne[We]=rt,le[rt].geometry[0].shift(),le[rt].geometry[0]=ht[0].concat(le[rt].geometry[0]),rt}function vt(We,$e,ht){const rt=ht?$e[0][$e[0].length-1]:$e[0][0];return`${We}:${rt.x}:${rt.y}`}for(let We=0;We<J.length;We++){const $e=J[We],ht=$e.geometry,rt=$e.text?$e.text.toString():null;if(!rt){Se(We);continue}const tt=vt(rt,ht),Ie=vt(rt,ht,!0);if(tt in ye&&Ie in ne&&ye[tt]!==ne[Ie]){const ft=Ke(tt,Ie,ht),dt=Re(tt,Ie,le[ft].geometry);delete ne[tt],delete ye[Ie],ye[vt(rt,le[dt].geometry,!0)]=dt,le[ft].geometry=null}else tt in ye?Re(tt,Ie,ht):Ie in ne?Ke(tt,Ie,ht):(Se(We),ne[tt]=fe-1,ye[Ie]=fe-1)}return le.filter(We=>We.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ne)=>J.sortKey-ne.sortKey)}update(t,r,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,s),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,s))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){const s=this.lineVertexArray.length;if(t.segment!==void 0){let h=t.dist(r[t.segment+1]),f=t.dist(r[t.segment]);const y={};for(let x=t.segment+1;x<r.length;x++)y[x]={x:r[x].x,y:r[x].y,tileUnitDistanceFromAnchor:h},x<r.length-1&&(h+=r[x+1].dist(r[x]));for(let x=t.segment||0;x>=0;x--)y[x]={x:r[x].x,y:r[x].y,tileUnitDistanceFromAnchor:f},x>0&&(f+=r[x-1].dist(r[x]));for(let x=0;x<r.length;x++){const C=y[x];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}}addSymbols(t,r,s,h,f,y,x,C,E,M,I,R){const O=t.indexArray,F=t.layoutVertexArray,U=t.segments.prepareSegment(4*r.length,F,O,this.canOverlap?y.sortKey:void 0),J=this.glyphOffsetArray.length,ne=U.vertexLength,ye=this.allowVerticalPlacement&&x===v.ah.vertical?Math.PI/2:0,le=y.text&&y.text.sections;for(let fe=0;fe<r.length;fe++){const{tl:Se,tr:Re,bl:Ke,br:vt,tex:We,pixelOffsetTL:$e,pixelOffsetBR:ht,minFontScaleX:rt,minFontScaleY:tt,glyphOffset:Ie,isSDF:ft,sectionIndex:dt}=r[fe],Ct=U.vertexLength,Qt=Ie[1];Ih(F,C.x,C.y,Se.x,Qt+Se.y,We.x,We.y,s,ft,$e.x,$e.y,rt,tt),Ih(F,C.x,C.y,Re.x,Qt+Re.y,We.x+We.w,We.y,s,ft,ht.x,$e.y,rt,tt),Ih(F,C.x,C.y,Ke.x,Qt+Ke.y,We.x,We.y+We.h,s,ft,$e.x,ht.y,rt,tt),Ih(F,C.x,C.y,vt.x,Qt+vt.y,We.x+We.w,We.y+We.h,s,ft,ht.x,ht.y,rt,tt),im(t.dynamicLayoutVertexArray,C,ye),O.emplaceBack(Ct,Ct+1,Ct+2),O.emplaceBack(Ct+1,Ct+2,Ct+3),U.vertexLength+=4,U.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ie[0]),fe!==r.length-1&&dt===r[fe+1].sectionIndex||t.programConfigurations.populatePaintArrays(F.length,y,y.index,{},R,le&&le[dt])}t.placedSymbolArray.emplaceBack(C.x,C.y,J,this.glyphOffsetArray.length-J,ne,E,M,C.segment,s?s[0]:0,s?s[1]:0,h[0],h[1],x,0,!1,0,I)}_addCollisionDebugVertex(t,r,s,h,f,y){return r.emplaceBack(0,0),t.emplaceBack(s.x,s.y,h,f,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(t,r,s,h,f,y,x){const C=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),E=C.vertexLength,M=f.layoutVertexArray,I=f.collisionVertexArray,R=x.anchorX,O=x.anchorY;this._addCollisionDebugVertex(M,I,y,R,O,new j(t,r)),this._addCollisionDebugVertex(M,I,y,R,O,new j(s,r)),this._addCollisionDebugVertex(M,I,y,R,O,new j(s,h)),this._addCollisionDebugVertex(M,I,y,R,O,new j(t,h)),C.vertexLength+=4;const F=f.indexArray;F.emplaceBack(E,E+1),F.emplaceBack(E+1,E+2),F.emplaceBack(E+2,E+3),F.emplaceBack(E+3,E),C.primitiveLength+=4}addDebugCollisionBoxes(t,r,s,h){for(let f=t;f<r;f++){const y=this.collisionBoxArray.get(f);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,s)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new rm(xn,P_.members,As),this.iconCollisionBox=new rm(xn,P_.members,As);for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,s,h,f,y,x,C,E){const M={};for(let I=r;I<s;I++){const R=t.get(I);M.textBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.textFeatureIndex=R.featureIndex;break}for(let I=h;I<f;I++){const R=t.get(I);M.verticalTextBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.verticalTextFeatureIndex=R.featureIndex;break}for(let I=y;I<x;I++){const R=t.get(I);M.iconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.iconFeatureIndex=R.featureIndex;break}for(let I=C;I<E;I++){const R=t.get(I);M.verticalIconBox={x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,anchorPointX:R.anchorPointX,anchorPointY:R.anchorPointY},M.verticalIconFeatureIndex=R.featureIndex;break}return M}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const s=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){const s=t.placedSymbolArray.get(r),h=s.vertexStartIndex+4*s.numGlyphs;for(let f=s.vertexStartIndex;f<h;f+=4)t.indexArray.emplaceBack(f,f+1,f+2),t.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(t),s=Math.cos(t),h=[],f=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);const C=this.symbolInstances.get(x);h.push(0|Math.round(r*C.anchorX+s*C.anchorY)),f.push(C.featureIndex)}return y.sort((x,C)=>h[x]-h[C]||f[C]-f[x]),y}addToSortKeyRanges(t,r){const s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===r?s.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const s=this.symbolInstances.get(r);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach((h,f,y)=>{h>=0&&y.indexOf(h)===f&&this.addIndicesForPlacedSymbol(this.text,h)}),s.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),s.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),s.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let W_,X_;et("SymbolBucket",Ul,{omit:["layers","collisionBoxArray","features","compareText"]}),Ul.MAX_GLYPHS=65535,Ul.addDynamicAttributes=im;var om={get paint(){return X_=X_||new w({"icon-opacity":new o(be.paint_symbol["icon-opacity"]),"icon-color":new o(be.paint_symbol["icon-color"]),"icon-halo-color":new o(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new o(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new o(be.paint_symbol["icon-halo-blur"]),"icon-translate":new e(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new e(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new o(be.paint_symbol["text-opacity"]),"text-color":new o(be.paint_symbol["text-color"],{runtimeType:Yn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new o(be.paint_symbol["text-halo-color"]),"text-halo-width":new o(be.paint_symbol["text-halo-width"]),"text-halo-blur":new o(be.paint_symbol["text-halo-blur"]),"text-translate":new e(be.paint_symbol["text-translate"]),"text-translate-anchor":new e(be.paint_symbol["text-translate-anchor"])})},get layout(){return W_=W_||new w({"symbol-placement":new e(be.layout_symbol["symbol-placement"]),"symbol-spacing":new e(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new e(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new o(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new e(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new e(be.layout_symbol["icon-allow-overlap"]),"icon-overlap":new e(be.layout_symbol["icon-overlap"]),"icon-ignore-placement":new e(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new e(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new e(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new o(be.layout_symbol["icon-size"]),"icon-text-fit":new e(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new e(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new o(be.layout_symbol["icon-image"]),"icon-rotate":new o(be.layout_symbol["icon-rotate"]),"icon-padding":new o(be.layout_symbol["icon-padding"]),"icon-keep-upright":new e(be.layout_symbol["icon-keep-upright"]),"icon-offset":new o(be.layout_symbol["icon-offset"]),"icon-anchor":new o(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new e(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new e(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new e(be.layout_symbol["text-rotation-alignment"]),"text-field":new o(be.layout_symbol["text-field"]),"text-font":new o(be.layout_symbol["text-font"]),"text-size":new o(be.layout_symbol["text-size"]),"text-max-width":new o(be.layout_symbol["text-max-width"]),"text-line-height":new e(be.layout_symbol["text-line-height"]),"text-letter-spacing":new o(be.layout_symbol["text-letter-spacing"]),"text-justify":new o(be.layout_symbol["text-justify"]),"text-radial-offset":new o(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new e(be.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new o(be.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new o(be.layout_symbol["text-anchor"]),"text-max-angle":new e(be.layout_symbol["text-max-angle"]),"text-writing-mode":new e(be.layout_symbol["text-writing-mode"]),"text-rotate":new o(be.layout_symbol["text-rotate"]),"text-padding":new e(be.layout_symbol["text-padding"]),"text-keep-upright":new e(be.layout_symbol["text-keep-upright"]),"text-transform":new o(be.layout_symbol["text-transform"]),"text-offset":new o(be.layout_symbol["text-offset"]),"text-allow-overlap":new e(be.layout_symbol["text-allow-overlap"]),"text-overlap":new e(be.layout_symbol["text-overlap"]),"text-ignore-placement":new e(be.layout_symbol["text-ignore-placement"]),"text-optional":new e(be.layout_symbol["text-optional"])})}};class K_{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:pa,this.defaultValue=t}evaluate(t){if(t.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}et("FormatSectionOverride",K_,{omit:["defaultValue"]});class Ph extends S{constructor(t){super(t,om)}recalculate(t,r){if(super.recalculate(t,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const s=this.layout.get("text-writing-mode");if(s){const h=[];for(const f of s)h.indexOf(f)<0&&h.push(f);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,r,s,h){const f=this.layout.get(t).evaluate(r,{},s,h),y=this._unevaluatedLayout._values[t];return y.isDataDriven()||fs(y.value)||!f?f:function(x,C){return C.replace(/{([^{}]+)}/g,(E,M)=>x&&M in x?String(x[M]):"")}(r.properties,f)}createBucket(t){return new Ul(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of om.paint.overridableProperties){if(!Ph.hasPaintOverride(this.layout,t))continue;const r=this.paint.get(t),s=new K_(r),h=new ps(s,r.property.specification);let f=null;f=r.value.kind==="constant"||r.value.kind==="source"?new go("source",h):new Hc("composite",h,r.value.zoomStops),this.paint._values[t]=new ja(r.property,f,r.parameters)}}_handleOverridablePaintPropertyUpdate(t,r,s){return!(!this.layout||r.isDataDriven()||s.isDataDriven())&&Ph.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,r){const s=t.get("text-field"),h=om.paint.properties[r];let f=!1;const y=x=>{for(const C of x)if(h.overrides&&h.overrides.hasOverride(C))return void(f=!0)};if(s.value.kind==="constant"&&s.value.value instanceof Fn)y(s.value.value.sections);else if(s.value.kind==="source"){const x=E=>{f||(E instanceof In&&_t(E.value)===Yi?y(E.value.sections):E instanceof ll?y(E.sections):E.eachChild(x))},C=s.value;C._styleExpression&&x(C._styleExpression.expression)}return f}}let J_;var S2={get paint(){return J_=J_||new w({"background-color":new e(be.paint_background["background-color"]),"background-pattern":new d(be.paint_background["background-pattern"]),"background-opacity":new e(be.paint_background["background-opacity"])})}};class E2 extends S{constructor(t){super(t,S2)}}let Y_;var T2={get paint(){return Y_=Y_||new w({"raster-opacity":new e(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new e(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new e(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new e(be.paint_raster["raster-brightness-max"]),"raster-saturation":new e(be.paint_raster["raster-saturation"]),"raster-contrast":new e(be.paint_raster["raster-contrast"]),"raster-resampling":new e(be.paint_raster["raster-resampling"]),"raster-fade-duration":new e(be.paint_raster["raster-fade-duration"])})}};class M2 extends S{constructor(t){super(t,T2)}}class I2 extends S{constructor(t){super(t,{}),this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class P2{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const sm=63710088e-1;class Io{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Io(Xe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const r=Math.PI/180,s=this.lat*r,h=t.lat*r,f=Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos((t.lng-this.lng)*r);return sm*Math.acos(Math.min(f,1))}static convert(t){if(t instanceof Io)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Io(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Io(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Q_=2*Math.PI*sm;function e0(i){return Q_*Math.cos(i*Math.PI/180)}function t0(i){return(180+i)/360}function n0(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function i0(i,t){return i/e0(t)}function lm(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Mu{constructor(t,r,s=0){this.x=+t,this.y=+r,this.z=+s}static fromLngLat(t,r=0){const s=Io.convert(t);return new Mu(t0(s.lng),n0(s.lat),i0(r,s.lat))}toLngLat(){return new Io(360*this.x-180,lm(this.y))}toAltitude(){return this.z*e0(lm(this.y))}meterInMercatorCoordinateUnits(){return 1/Q_*(t=lm(this.y),1/Math.cos(t*Math.PI/180));var t}}function a0(i,t,r){var s=2*Math.PI*6378137/256/Math.pow(2,r);return[i*s-2*Math.PI*6378137/2,t*s-2*Math.PI*6378137/2]}class cm{constructor(t,r,s){if(!function(h,f,y){return!(h<0||h>25||y<0||y>=Math.pow(2,h)||f<0||f>=Math.pow(2,h))}(t,r,s))throw new Error(`x=${r}, y=${s}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=r,this.y=s,this.key=Iu(0,t,t,r,s)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,s){const h=(y=this.y,x=this.z,C=a0(256*(f=this.x),256*(y=Math.pow(2,x)-y-1),x),E=a0(256*(f+1),256*(y+1),x),C[0]+","+C[1]+","+E[0]+","+E[1]);var f,y,x,C,E;const M=function(I,R,O){let F,U="";for(let J=I;J>0;J--)F=1<<J-1,U+=(R&F?1:0)+(O&F?2:0);return U}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,h)}isChildOf(t){const r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){const r=Math.pow(2,this.z);return new j((t.x*r-this.x)*jn,(t.y*r-this.y)*jn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class r0{constructor(t,r){this.wrap=t,this.canonical=r,this.key=Iu(t,r.z,r.z,r.x,r.y)}}class Ca{constructor(t,r,s,h,f){if(t<s)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${s}`);this.overscaledZ=t,this.wrap=r,this.canonical=new cm(s,+h,+f),this.key=Iu(r,t,s,h,f)}clone(){return new Ca(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?new Ca(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ca(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?Iu(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):Iu(this.wrap*+r,t,t,this.canonical.x>>s,this.canonical.y>>s)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new Ca(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,s=2*this.canonical.x,h=2*this.canonical.y;return[new Ca(r,this.wrap,r,s,h),new Ca(r,this.wrap,r,s+1,h),new Ca(r,this.wrap,r,s,h+1),new Ca(r,this.wrap,r,s+1,h+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Ca(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Ca(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new r0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Mu(t.x-this.wrap,t.y))}}function Iu(i,t,r,s,h){(i*=2)<0&&(i=-1*i-1);const f=1<<r;return(f*f*i+f*h+s).toString(36)+r.toString(36)+t.toString(36)}et("CanonicalTileID",cm),et("OverscaledTileID",Ca,{omit:["posMatrix"]});class o0{constructor(t,r,s,h=1,f=1,y=1,x=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(s&&!["mapbox","terrarium","custom"].includes(s))return void Ft(`"${s}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const C=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),s){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=h,this.greenFactor=f,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let E=0;E<C;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(C,E)]=this.data[this._idx(C-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,C)]=this.data[this._idx(E,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let E=0;E<C;E++)for(let M=0;M<C;M++){const I=this.get(E,M);I>this.max&&(this.max=I),I<this.min&&(this.min=I)}}get(t,r){const s=new Uint8Array(this.data.buffer),h=4*this._idx(t,r);return this.unpack(s[h],s[h+1],s[h+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,s){return t*this.redFactor+r*this.greenFactor+s*this.blueFactor-this.baseShift}getPixels(){return new wa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,s){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let h=r*this.dim,f=r*this.dim+this.dim,y=s*this.dim,x=s*this.dim+this.dim;switch(r){case-1:h=f-1;break;case 1:f=h+1}switch(s){case-1:y=x-1;break;case 1:x=y+1}const C=-r*this.dim,E=-s*this.dim;for(let M=y;M<x;M++)for(let I=h;I<f;I++)this.data[this._idx(I,M)]=t.data[this._idx(I+C,M+E)]}}et("DEMData",o0);class s0{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){const s=t[r];this._stringToNumber[s]=r,this._numberToString[r]=s}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class l0{constructor(t,r,s,h,f){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=s,t._y=h,this.properties=t.properties,this.id=f}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(t[r]=this[r]);return t}}class c0{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new wo(jn,16,0),this.grid3D=new wo(jn,16,0),this.featureIndexArray=new Hr,this.promoteId=r}insert(t,r,s,h,f,y){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,h,f);const C=y?this.grid3D:this.grid;for(let E=0;E<r.length;E++){const M=r[E],I=[1/0,1/0,-1/0,-1/0];for(let R=0;R<M.length;R++){const O=M[R];I[0]=Math.min(I[0],O.x),I[1]=Math.min(I[1],O.y),I[2]=Math.max(I[2],O.x),I[3]=Math.max(I[3],O.y)}I[0]<jn&&I[1]<jn&&I[2]>=0&&I[3]>=0&&C.insert(x,I[0],I[1],I[2],I[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Eo.VectorTile(new Jf(this.rawTileData)).layers,this.sourceLayerCoder=new s0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,s,h){this.loadVTLayers();const f=t.params||{},y=jn/t.tileSize/t.scale,x=yo(f.filter),C=t.queryGeometry,E=t.queryPadding*y,M=d0(C),I=this.grid.query(M.minX-E,M.minY-E,M.maxX+E,M.maxY+E),R=d0(t.cameraQueryGeometry),O=this.grid3D.query(R.minX-E,R.minY-E,R.maxX+E,R.maxY+E,(J,ne,ye,le)=>function(fe,Se,Re,Ke,vt){for(const $e of fe)if(Se<=$e.x&&Re<=$e.y&&Ke>=$e.x&&vt>=$e.y)return!0;const We=[new j(Se,Re),new j(Se,vt),new j(Ke,vt),new j(Ke,Re)];if(fe.length>2){for(const $e of We)if(Ll(fe,$e))return!0}for(let $e=0;$e<fe.length-1;$e++)if(uw(fe[$e],fe[$e+1],We))return!0;return!1}(t.cameraQueryGeometry,J-E,ne-E,ye+E,le+E));for(const J of O)I.push(J);I.sort(D2);const F={};let U;for(let J=0;J<I.length;J++){const ne=I[J];if(ne===U)continue;U=ne;const ye=this.featureIndexArray.get(ne);let le=null;this.loadMatchingFeature(F,ye.bucketIndex,ye.sourceLayerIndex,ye.featureIndex,x,f.layers,f.availableImages,r,s,h,(fe,Se,Re)=>(le||(le=Is(fe)),Se.queryIntersectsFeature(C,fe,Re,le,this.z,t.transform,y,t.pixelPosMatrix)))}return F}loadMatchingFeature(t,r,s,h,f,y,x,C,E,M,I){const R=this.bucketLayerIDs[r];if(y&&!function(J,ne){for(let ye=0;ye<J.length;ye++)if(ne.indexOf(J[ye])>=0)return!0;return!1}(y,R))return;const O=this.sourceLayerCoder.decode(s),F=this.vtLayers[O].feature(h);if(f.needGeometry){const J=Ps(F,!0);if(!f.filter(new Kt(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!f.filter(new Kt(this.tileID.overscaledZ),F))return;const U=this.getId(F,O);for(let J=0;J<R.length;J++){const ne=R[J];if(y&&y.indexOf(ne)<0)continue;const ye=C[ne];if(!ye)continue;let le={};U&&M&&(le=M.getState(ye.sourceLayer||"_geojsonTileLayer",U));const fe=Qe({},E[ne]);fe.paint=u0(fe.paint,ye.paint,F,le,x),fe.layout=u0(fe.layout,ye.layout,F,le,x);const Se=!I||I(F,ye,le);if(!Se)continue;const Re=new l0(F,this.z,this.x,this.y,U);Re.layer=fe;let Ke=t[ne];Ke===void 0&&(Ke=t[ne]=[]),Ke.push({featureIndex:h,feature:Re,intersectionZ:Se})}}lookupSymbolFeatures(t,r,s,h,f,y,x,C){const E={};this.loadVTLayers();const M=yo(f);for(const I of t)this.loadMatchingFeature(E,s,h,I,M,y,x,C,r);return E}hasLayer(t){for(const r of this.bucketLayerIDs)for(const s of r)if(t===s)return!0;return!1}getId(t,r){let s=t.id;return this.promoteId&&(s=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof s=="boolean"&&(s=Number(s))),s}}function u0(i,t,r,s,h){return pt(i,(f,y)=>{const x=t instanceof m?t.get(y):null;return x&&x.evaluate?x.evaluate(r,s,h):x})}function d0(i){let t=1/0,r=1/0,s=-1/0,h=-1/0;for(const f of i)t=Math.min(t,f.x),r=Math.min(r,f.y),s=Math.max(s,f.x),h=Math.max(h,f.y);return{minX:t,minY:r,maxX:s,maxY:h}}function D2(i,t){return t-i}function h0(i,t,r,s,h){const f=[];for(let y=0;y<i.length;y++){const x=i[y];let C;for(let E=0;E<x.length-1;E++){let M=x[E],I=x[E+1];M.x<t&&I.x<t||(M.x<t?M=new j(t,M.y+(t-M.x)/(I.x-M.x)*(I.y-M.y))._round():I.x<t&&(I=new j(t,M.y+(t-M.x)/(I.x-M.x)*(I.y-M.y))._round()),M.y<r&&I.y<r||(M.y<r?M=new j(M.x+(r-M.y)/(I.y-M.y)*(I.x-M.x),r)._round():I.y<r&&(I=new j(M.x+(r-M.y)/(I.y-M.y)*(I.x-M.x),r)._round()),M.x>=s&&I.x>=s||(M.x>=s?M=new j(s,M.y+(s-M.x)/(I.x-M.x)*(I.y-M.y))._round():I.x>=s&&(I=new j(s,M.y+(s-M.x)/(I.x-M.x)*(I.y-M.y))._round()),M.y>=h&&I.y>=h||(M.y>=h?M=new j(M.x+(h-M.y)/(I.y-M.y)*(I.x-M.x),h)._round():I.y>=h&&(I=new j(M.x+(h-M.y)/(I.y-M.y)*(I.x-M.x),h)._round()),C&&M.equals(C[C.length-1])||(C=[M],f.push(C)),C.push(I)))))}}return f}et("FeatureIndex",c0,{omit:["rawTileData","sourceLayerCoder"]});class Po extends j{constructor(t,r,s,h){super(t,r),this.angle=s,h!==void 0&&(this.segment=h)}clone(){return new Po(this.x,this.y,this.angle,this.segment)}}function p0(i,t,r,s,h){if(t.segment===void 0||r===0)return!0;let f=t,y=t.segment+1,x=0;for(;x>-r/2;){if(y--,y<0)return!1;x-=i[y].dist(f),f=i[y]}x+=i[y].dist(i[y+1]),y++;const C=[];let E=0;for(;x<r/2;){const M=i[y],I=i[y+1];if(!I)return!1;let R=i[y-1].angleTo(M)-M.angleTo(I);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:x,angleDelta:R}),E+=R;x-C[0].distance>s;)E-=C.shift().angleDelta;if(E>h)return!1;y++,x+=M.dist(I)}return!0}function f0(i){let t=0;for(let r=0;r<i.length-1;r++)t+=i[r].dist(i[r+1]);return t}function m0(i,t,r){return i?.6*t*r:0}function g0(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function z2(i,t,r,s,h,f){const y=m0(r,h,f),x=g0(r,s)*f;let C=0;const E=f0(i)/2;for(let M=0;M<i.length-1;M++){const I=i[M],R=i[M+1],O=I.dist(R);if(C+O>E){const F=(E-C)/O,U=Ni.number(I.x,R.x,F),J=Ni.number(I.y,R.y,F),ne=new Po(U,J,R.angleTo(I),M);return ne._round(),!y||p0(i,ne,x,y,t)?ne:void 0}C+=O}}function R2(i,t,r,s,h,f,y,x,C){const E=m0(s,f,y),M=g0(s,h),I=M*y,R=i[0].x===0||i[0].x===C||i[0].y===0||i[0].y===C;return t-I<t/4&&(t=I+t/4),y0(i,R?t/2*x%t:(M/2+2*f)*y*x%t,t,E,r,I,R,!1,C)}function y0(i,t,r,s,h,f,y,x,C){const E=f/2,M=f0(i);let I=0,R=t-r,O=[];for(let F=0;F<i.length-1;F++){const U=i[F],J=i[F+1],ne=U.dist(J),ye=J.angleTo(U);for(;R+r<I+ne;){R+=r;const le=(R-I)/ne,fe=Ni.number(U.x,J.x,le),Se=Ni.number(U.y,J.y,le);if(fe>=0&&fe<C&&Se>=0&&Se<C&&R-E>=0&&R+E<=M){const Re=new Po(fe,Se,ye,F);Re._round(),s&&!p0(i,Re,f,s,h)||O.push(Re)}}I+=ne}return x||O.length||y||(O=y0(i,I/2,r,s,h,f,y,!0,C)),O}et("Anchor",Po);const ql=Gi;function _0(i,t,r,s){const h=[],f=i.image,y=f.pixelRatio,x=f.paddedRect.w-2*ql,C=f.paddedRect.h-2*ql;let E={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const M=f.stretchX||[[0,x]],I=f.stretchY||[[0,C]],R=(Ie,ft)=>Ie+ft[1]-ft[0],O=M.reduce(R,0),F=I.reduce(R,0),U=x-O,J=C-F;let ne=0,ye=O,le=0,fe=F,Se=0,Re=U,Ke=0,vt=J;if(f.content&&s){const Ie=f.content,ft=Ie[2]-Ie[0],dt=Ie[3]-Ie[1];(f.textFitWidth||f.textFitHeight)&&(E=H_(i)),ne=Dh(M,0,Ie[0]),le=Dh(I,0,Ie[1]),ye=Dh(M,Ie[0],Ie[2]),fe=Dh(I,Ie[1],Ie[3]),Se=Ie[0]-ne,Ke=Ie[1]-le,Re=ft-ye,vt=dt-fe}const We=E.x1,$e=E.y1,ht=E.x2-We,rt=E.y2-$e,tt=(Ie,ft,dt,Ct)=>{const Qt=zh(Ie.stretch-ne,ye,ht,We),Yt=Rh(Ie.fixed-Se,Re,Ie.stretch,O),Zn=zh(ft.stretch-le,fe,rt,$e),Va=Rh(ft.fixed-Ke,vt,ft.stretch,F),li=zh(dt.stretch-ne,ye,ht,We),Wn=Rh(dt.fixed-Se,Re,dt.stretch,O),Ti=zh(Ct.stretch-le,fe,rt,$e),Mi=Rh(Ct.fixed-Ke,vt,Ct.stretch,F),Ii=new j(Qt,Zn),Sn=new j(li,Zn),Xn=new j(li,Ti),gi=new j(Qt,Ti),ci=new j(Yt/y,Va/y),Pi=new j(Wn/y,Mi/y),ui=t*Math.PI/180;if(ui){const Ht=Math.sin(ui),nn=Math.cos(ui),ln=[nn,-Ht,Ht,nn];Ii._matMult(ln),Sn._matMult(ln),gi._matMult(ln),Xn._matMult(ln)}const Aa=Ie.stretch+Ie.fixed,Hi=ft.stretch+ft.fixed;return{tl:Ii,tr:Sn,bl:gi,br:Xn,tex:{x:f.paddedRect.x+ql+Aa,y:f.paddedRect.y+ql+Hi,w:dt.stretch+dt.fixed-Aa,h:Ct.stretch+Ct.fixed-Hi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ci,pixelOffsetBR:Pi,minFontScaleX:Re/y/ht,minFontScaleY:vt/y/rt,isSDF:r}};if(s&&(f.stretchX||f.stretchY)){const Ie=v0(M,U,O),ft=v0(I,J,F);for(let dt=0;dt<Ie.length-1;dt++){const Ct=Ie[dt],Qt=Ie[dt+1];for(let Yt=0;Yt<ft.length-1;Yt++)h.push(tt(Ct,ft[Yt],Qt,ft[Yt+1]))}}else h.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:C+1}));return h}function Dh(i,t,r){let s=0;for(const h of i)s+=Math.max(t,Math.min(r,h[1]))-Math.max(t,Math.min(r,h[0]));return s}function v0(i,t,r){const s=[{fixed:-ql,stretch:0}];for(const[h,f]of i){const y=s[s.length-1];s.push({fixed:h-y.stretch,stretch:y.stretch}),s.push({fixed:h-y.stretch,stretch:y.stretch+(f-h)})}return s.push({fixed:t+ql,stretch:r}),s}function zh(i,t,r,s){return i/t*r+s}function Rh(i,t,r,s){return i-t*r/s}class kh{constructor(t,r,s,h,f,y,x,C,E,M){var I;if(this.boxStartIndex=t.length,E){let R=y.top,O=y.bottom;const F=y.collisionPadding;F&&(R-=F[1],O+=F[3]);let U=O-R;U>0&&(U=Math.max(10,U),this.circleDiameter=U)}else{const R=!((I=y.image)===null||I===void 0)&&I.content&&(y.image.textFitWidth||y.image.textFitHeight)?H_(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};R.y1=R.y1*x-C[0],R.y2=R.y2*x+C[2],R.x1=R.x1*x-C[3],R.x2=R.x2*x+C[1];const O=y.collisionPadding;if(O&&(R.x1-=O[0]*x,R.y1-=O[1]*x,R.x2+=O[2]*x,R.y2+=O[3]*x),M){const F=new j(R.x1,R.y1),U=new j(R.x2,R.y1),J=new j(R.x1,R.y2),ne=new j(R.x2,R.y2),ye=M*Math.PI/180;F._rotate(ye),U._rotate(ye),J._rotate(ye),ne._rotate(ye),R.x1=Math.min(F.x,U.x,J.x,ne.x),R.x2=Math.max(F.x,U.x,J.x,ne.x),R.y1=Math.min(F.y,U.y,J.y,ne.y),R.y2=Math.max(F.y,U.y,J.y,ne.y)}t.emplaceBack(r.x,r.y,R.x1,R.y1,R.x2,R.y2,s,h,f)}this.boxEndIndex=t.length}}class k2{constructor(t=[],r=(s,h)=>s<h?-1:s>h?1:0){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:s}=this,h=r[t];for(;t>0;){const f=t-1>>1,y=r[f];if(s(h,y)>=0)break;r[t]=y,t=f}r[t]=h}_down(t){const{data:r,compare:s}=this,h=this.length>>1,f=r[t];for(;t<h;){let y=1+(t<<1);const x=y+1;if(x<this.length&&s(r[x],r[y])<0&&(y=x),s(r[y],f)>=0)break;r[t]=r[y],t=y}r[t]=f}}function L2(i,t=1,r=!1){let s=1/0,h=1/0,f=-1/0,y=-1/0;const x=i[0];for(let O=0;O<x.length;O++){const F=x[O];(!O||F.x<s)&&(s=F.x),(!O||F.y<h)&&(h=F.y),(!O||F.x>f)&&(f=F.x),(!O||F.y>y)&&(y=F.y)}const C=Math.min(f-s,y-h);let E=C/2;const M=new k2([],O2);if(C===0)return new j(s,h);for(let O=s;O<f;O+=C)for(let F=h;F<y;F+=C)M.push(new Gl(O+E,F+E,E,i));let I=function(O){let F=0,U=0,J=0;const ne=O[0];for(let ye=0,le=ne.length,fe=le-1;ye<le;fe=ye++){const Se=ne[ye],Re=ne[fe],Ke=Se.x*Re.y-Re.x*Se.y;U+=(Se.x+Re.x)*Ke,J+=(Se.y+Re.y)*Ke,F+=3*Ke}return new Gl(U/F,J/F,0,O)}(i),R=M.length;for(;M.length;){const O=M.pop();(O.d>I.d||!I.d)&&(I=O,r&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,R)),O.max-I.d<=t||(E=O.h/2,M.push(new Gl(O.p.x-E,O.p.y-E,E,i)),M.push(new Gl(O.p.x+E,O.p.y-E,E,i)),M.push(new Gl(O.p.x-E,O.p.y+E,E,i)),M.push(new Gl(O.p.x+E,O.p.y+E,E,i)),R+=4)}return r&&(console.log(`num probes: ${R}`),console.log(`best distance: ${I.d}`)),I.p}function O2(i,t){return t.max-i.max}function Gl(i,t,r,s){this.p=new j(i,t),this.h=r,this.d=function(h,f){let y=!1,x=1/0;for(let C=0;C<f.length;C++){const E=f[C];for(let M=0,I=E.length,R=I-1;M<I;R=M++){const O=E[M],F=E[R];O.y>h.y!=F.y>h.y&&h.x<(F.x-O.x)*(h.y-O.y)/(F.y-O.y)+O.x&&(y=!y),x=Math.min(x,n_(h,O,F))}}return(y?1:-1)*Math.sqrt(x)}(this.p,s),this.max=this.d+this.h*Math.SQRT2}var si;v.aq=void 0,(si=v.aq||(v.aq={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const Do=7,um=Number.POSITIVE_INFINITY;function x0(i,t){return t[1]!==um?function(r,s,h){let f=0,y=0;switch(s=Math.abs(s),h=Math.abs(h),r){case"top-right":case"top-left":case"top":y=h-Do;break;case"bottom-right":case"bottom-left":case"bottom":y=-h+Do}switch(r){case"top-right":case"bottom-right":case"right":f=-s;break;case"top-left":case"bottom-left":case"left":f=s}return[f,y]}(i,t[0],t[1]):function(r,s){let h=0,f=0;s<0&&(s=0);const y=s/Math.SQRT2;switch(r){case"top-right":case"top-left":f=y-Do;break;case"bottom-right":case"bottom-left":f=-y+Do;break;case"bottom":f=-s+Do;break;case"top":f=s-Do}switch(r){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=s;break;case"right":h=-s}return[h,f]}(i,t[0])}function b0(i,t,r){var s;const h=i.layout,f=(s=h.get("text-variable-anchor-offset"))===null||s===void 0?void 0:s.evaluate(t,{},r);if(f){const x=f.values,C=[];for(let E=0;E<x.length;E+=2){const M=C[E]=x[E],I=x[E+1].map(R=>R*Gn);M.startsWith("top")?I[1]-=Do:M.startsWith("bottom")&&(I[1]+=Do),C[E+1]=I}return new mn(C)}const y=h.get("text-variable-anchor");if(y){let x;x=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[h.get("text-radial-offset").evaluate(t,{},r)*Gn,um]:h.get("text-offset").evaluate(t,{},r).map(E=>E*Gn);const C=[];for(const E of y)C.push(E,x0(E,x));return new mn(C)}return null}function dm(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function B2(i,t,r,s,h,f,y,x,C,E,M){let I=f.textMaxSize.evaluate(t,{});I===void 0&&(I=y);const R=i.layers[0].layout,O=R.get("icon-offset").evaluate(t,{},M),F=C0(r.horizontal),U=y/24,J=i.tilePixelRatio*U,ne=i.tilePixelRatio*I/24,ye=i.tilePixelRatio*x,le=i.tilePixelRatio*R.get("symbol-spacing"),fe=R.get("text-padding")*i.tilePixelRatio,Se=function(Ie,ft,dt,Ct=1){const Qt=Ie.get("icon-padding").evaluate(ft,{},dt),Yt=Qt&&Qt.values;return[Yt[0]*Ct,Yt[1]*Ct,Yt[2]*Ct,Yt[3]*Ct]}(R,t,M,i.tilePixelRatio),Re=R.get("text-max-angle")/180*Math.PI,Ke=R.get("text-rotation-alignment")!=="viewport"&&R.get("symbol-placement")!=="point",vt=R.get("icon-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",We=R.get("symbol-placement"),$e=le/2,ht=R.get("icon-text-fit");let rt;s&&ht!=="none"&&(i.allowVerticalPlacement&&r.vertical&&(rt=$_(s,r.vertical,ht,R.get("icon-text-fit-padding"),O,U)),F&&(s=$_(s,F,ht,R.get("icon-text-fit-padding"),O,U)));const tt=(Ie,ft)=>{ft.x<0||ft.x>=jn||ft.y<0||ft.y>=jn||function(dt,Ct,Qt,Yt,Zn,Va,li,Wn,Ti,Mi,Ii,Sn,Xn,gi,ci,Pi,ui,Aa,Hi,Ht,nn,ln,na,bn,Hl){const Sr=dt.addToLineVertexArray(Ct,Qt);let Er,Ua,Sa,ei,Wr=0,zu=0,T0=0,M0=0,vm=-1,xm=-1;const Xr={};let I0=zf("");if(dt.allowVerticalPlacement&&Yt.vertical){const yi=Wn.layout.get("text-rotate").evaluate(nn,{},bn)+90;Sa=new kh(Ti,Ct,Mi,Ii,Sn,Yt.vertical,Xn,gi,ci,yi),li&&(ei=new kh(Ti,Ct,Mi,Ii,Sn,li,ui,Aa,ci,yi))}if(Zn){const yi=Wn.layout.get("icon-rotate").evaluate(nn,{}),Ea=Wn.layout.get("icon-text-fit")!=="none",zs=_0(Zn,yi,na,Ea),ir=li?_0(li,yi,na,Ea):void 0;Ua=new kh(Ti,Ct,Mi,Ii,Sn,Zn,ui,Aa,!1,yi),Wr=4*zs.length;const Rs=dt.iconSizeData;let Tr=null;Rs.kind==="source"?(Tr=[Ar*Wn.layout.get("icon-size").evaluate(nn,{})],Tr[0]>Mo&&Ft(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Tu}. Reduce your "icon-size".`)):Rs.kind==="composite"&&(Tr=[Ar*ln.compositeIconSizes[0].evaluate(nn,{},bn),Ar*ln.compositeIconSizes[1].evaluate(nn,{},bn)],(Tr[0]>Mo||Tr[1]>Mo)&&Ft(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Tu}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,zs,Tr,Ht,Hi,nn,v.ah.none,Ct,Sr.lineStartIndex,Sr.lineLength,-1,bn),vm=dt.icon.placedSymbolArray.length-1,ir&&(zu=4*ir.length,dt.addSymbols(dt.icon,ir,Tr,Ht,Hi,nn,v.ah.vertical,Ct,Sr.lineStartIndex,Sr.lineLength,-1,bn),xm=dt.icon.placedSymbolArray.length-1)}const P0=Object.keys(Yt.horizontal);for(const yi of P0){const Ea=Yt.horizontal[yi];if(!Er){I0=zf(Ea.text);const ir=Wn.layout.get("text-rotate").evaluate(nn,{},bn);Er=new kh(Ti,Ct,Mi,Ii,Sn,Ea,Xn,gi,ci,ir)}const zs=Ea.positionedLines.length===1;if(T0+=w0(dt,Ct,Ea,Va,Wn,ci,nn,Pi,Sr,Yt.vertical?v.ah.horizontal:v.ah.horizontalOnly,zs?P0:[yi],Xr,vm,ln,bn),zs)break}Yt.vertical&&(M0+=w0(dt,Ct,Yt.vertical,Va,Wn,ci,nn,Pi,Sr,v.ah.vertical,["vertical"],Xr,xm,ln,bn));const j2=Er?Er.boxStartIndex:dt.collisionBoxArray.length,V2=Er?Er.boxEndIndex:dt.collisionBoxArray.length,U2=Sa?Sa.boxStartIndex:dt.collisionBoxArray.length,q2=Sa?Sa.boxEndIndex:dt.collisionBoxArray.length,G2=Ua?Ua.boxStartIndex:dt.collisionBoxArray.length,H2=Ua?Ua.boxEndIndex:dt.collisionBoxArray.length,$2=ei?ei.boxStartIndex:dt.collisionBoxArray.length,Z2=ei?ei.boxEndIndex:dt.collisionBoxArray.length;let nr=-1;const Oh=(yi,Ea)=>yi&&yi.circleDiameter?Math.max(yi.circleDiameter,Ea):Ea;nr=Oh(Er,nr),nr=Oh(Sa,nr),nr=Oh(Ua,nr),nr=Oh(ei,nr);const D0=nr>-1?1:0;D0&&(nr*=Hl/Gn),dt.glyphOffsetArray.length>=Ul.MAX_GLYPHS&&Ft("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),nn.sortKey!==void 0&&dt.addToSortKeyRanges(dt.symbolInstances.length,nn.sortKey);const W2=b0(Wn,nn,bn),[X2,K2]=function(yi,Ea){const zs=yi.length,ir=Ea==null?void 0:Ea.values;if((ir==null?void 0:ir.length)>0)for(let Rs=0;Rs<ir.length;Rs+=2){const Tr=ir[Rs+1];yi.emplaceBack(v.aq[ir[Rs]],Tr[0],Tr[1])}return[zs,yi.length]}(dt.textAnchorOffsets,W2);dt.symbolInstances.emplaceBack(Ct.x,Ct.y,Xr.right>=0?Xr.right:-1,Xr.center>=0?Xr.center:-1,Xr.left>=0?Xr.left:-1,Xr.vertical||-1,vm,xm,I0,j2,V2,U2,q2,G2,H2,$2,Z2,Mi,T0,M0,Wr,zu,D0,0,Xn,nr,X2,K2)}(i,ft,Ie,r,s,h,rt,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,J,[fe,fe,fe,fe],Ke,C,ye,Se,vt,O,t,f,E,M,y)};if(We==="line")for(const Ie of h0(t.geometry,0,0,jn,jn)){const ft=R2(Ie,le,Re,r.vertical||F,s,24,ne,i.overscaling,jn);for(const dt of ft)F&&F2(i,F.text,$e,dt)||tt(Ie,dt)}else if(We==="line-center"){for(const Ie of t.geometry)if(Ie.length>1){const ft=z2(Ie,Re,r.vertical||F,s,24,ne);ft&&tt(Ie,ft)}}else if(t.type==="Polygon")for(const Ie of ul(t.geometry,0)){const ft=L2(Ie,16);tt(Ie[0],new Po(ft.x,ft.y,0))}else if(t.type==="LineString")for(const Ie of t.geometry)tt(Ie,new Po(Ie[0].x,Ie[0].y,0));else if(t.type==="Point")for(const Ie of t.geometry)for(const ft of Ie)tt([ft],new Po(ft.x,ft.y,0))}function w0(i,t,r,s,h,f,y,x,C,E,M,I,R,O,F){const U=function(ye,le,fe,Se,Re,Ke,vt,We){const $e=Se.layout.get("text-rotate").evaluate(Ke,{})*Math.PI/180,ht=[];for(const rt of le.positionedLines)for(const tt of rt.positionedGlyphs){if(!tt.rect)continue;const Ie=tt.rect||{};let ft=F_+1,dt=!0,Ct=1,Qt=0;const Yt=(Re||We)&&tt.vertical,Zn=tt.metrics.advance*tt.scale/2;if(We&&le.verticalizable&&(Qt=rt.lineOffset/2-(tt.imageName?-(Gn-tt.metrics.width*tt.scale)/2:(tt.scale-1)*Gn)),tt.imageName){const Ht=vt[tt.imageName];dt=Ht.sdf,Ct=Ht.pixelRatio,ft=Gi/Ct}const Va=Re?[tt.x+Zn,tt.y]:[0,0];let li=Re?[0,0]:[tt.x+Zn+fe[0],tt.y+fe[1]-Qt],Wn=[0,0];Yt&&(Wn=li,li=[0,0]);const Ti=tt.metrics.isDoubleResolution?2:1,Mi=(tt.metrics.left-ft)*tt.scale-Zn+li[0],Ii=(-tt.metrics.top-ft)*tt.scale+li[1],Sn=Mi+Ie.w/Ti*tt.scale/Ct,Xn=Ii+Ie.h/Ti*tt.scale/Ct,gi=new j(Mi,Ii),ci=new j(Sn,Ii),Pi=new j(Mi,Xn),ui=new j(Sn,Xn);if(Yt){const Ht=new j(-Zn,Zn-Su),nn=-Math.PI/2,ln=Gn/2-Zn,na=new j(5-Su-ln,-(tt.imageName?ln:0)),bn=new j(...Wn);gi._rotateAround(nn,Ht)._add(na)._add(bn),ci._rotateAround(nn,Ht)._add(na)._add(bn),Pi._rotateAround(nn,Ht)._add(na)._add(bn),ui._rotateAround(nn,Ht)._add(na)._add(bn)}if($e){const Ht=Math.sin($e),nn=Math.cos($e),ln=[nn,-Ht,Ht,nn];gi._matMult(ln),ci._matMult(ln),Pi._matMult(ln),ui._matMult(ln)}const Aa=new j(0,0),Hi=new j(0,0);ht.push({tl:gi,tr:ci,bl:Pi,br:ui,tex:Ie,writingMode:le.writingMode,glyphOffset:Va,sectionIndex:tt.sectionIndex,isSDF:dt,pixelOffsetTL:Aa,pixelOffsetBR:Hi,minFontScaleX:0,minFontScaleY:0})}return ht}(0,r,x,h,f,y,s,i.allowVerticalPlacement),J=i.textSizeData;let ne=null;J.kind==="source"?(ne=[Ar*h.layout.get("text-size").evaluate(y,{})],ne[0]>Mo&&Ft(`${i.layerIds[0]}: Value for "text-size" is >= ${Tu}. Reduce your "text-size".`)):J.kind==="composite"&&(ne=[Ar*O.compositeTextSizes[0].evaluate(y,{},F),Ar*O.compositeTextSizes[1].evaluate(y,{},F)],(ne[0]>Mo||ne[1]>Mo)&&Ft(`${i.layerIds[0]}: Value for "text-size" is >= ${Tu}. Reduce your "text-size".`)),i.addSymbols(i.text,U,ne,x,f,y,E,t,C.lineStartIndex,C.lineLength,R,F);for(const ye of M)I[ye]=i.text.placedSymbolArray.length-1;return 4*U.length}function C0(i){for(const t in i)return i[t];return null}function F2(i,t,r,s){const h=i.compareText;if(t in h){const f=h[t];for(let y=f.length-1;y>=0;y--)if(s.dist(f[y])<r)return!0}else h[t]=[];return h[t].push(s),!1}const A0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class hm{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,s]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=s>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const f=A0[15&s];if(!f)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(t,2,1),[x]=new Uint32Array(t,4,1);return new hm(x,y,f,t)}constructor(t,r=64,s=Float64Array,h){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=s,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const f=A0.indexOf(this.ArrayType),y=2*t*this.ArrayType.BYTES_PER_ELEMENT,x=t*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-x%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${s}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+C,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+C),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+C,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=t,this.coords[this._pos++]=r,s}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return pm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:y,nodeSize:x}=this,C=[0,f.length-1,0],E=[];for(;C.length;){const M=C.pop()||0,I=C.pop()||0,R=C.pop()||0;if(I-R<=x){for(let J=R;J<=I;J++){const ne=y[2*J],ye=y[2*J+1];ne>=t&&ne<=s&&ye>=r&&ye<=h&&E.push(f[J])}continue}const O=R+I>>1,F=y[2*O],U=y[2*O+1];F>=t&&F<=s&&U>=r&&U<=h&&E.push(f[O]),(M===0?t<=F:r<=U)&&(C.push(R),C.push(O-1),C.push(1-M)),(M===0?s>=F:h>=U)&&(C.push(O+1),C.push(I),C.push(1-M))}return E}within(t,r,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:f,nodeSize:y}=this,x=[0,h.length-1,0],C=[],E=s*s;for(;x.length;){const M=x.pop()||0,I=x.pop()||0,R=x.pop()||0;if(I-R<=y){for(let J=R;J<=I;J++)E0(f[2*J],f[2*J+1],t,r)<=E&&C.push(h[J]);continue}const O=R+I>>1,F=f[2*O],U=f[2*O+1];E0(F,U,t,r)<=E&&C.push(h[O]),(M===0?t-s<=F:r-s<=U)&&(x.push(R),x.push(O-1),x.push(1-M)),(M===0?t+s>=F:r+s>=U)&&(x.push(O+1),x.push(I),x.push(1-M))}return C}}function pm(i,t,r,s,h,f){if(h-s<=r)return;const y=s+h>>1;S0(i,t,y,s,h,f),pm(i,t,r,s,y-1,1-f),pm(i,t,r,y+1,h,1-f)}function S0(i,t,r,s,h,f){for(;h>s;){if(h-s>600){const E=h-s+1,M=r-s+1,I=Math.log(E),R=.5*Math.exp(2*I/3),O=.5*Math.sqrt(I*R*(E-R)/E)*(M-E/2<0?-1:1);S0(i,t,r,Math.max(s,Math.floor(r-M*R/E+O)),Math.min(h,Math.floor(r+(E-M)*R/E+O)),f)}const y=t[2*r+f];let x=s,C=h;for(Pu(i,t,s,r),t[2*h+f]>y&&Pu(i,t,s,h);x<C;){for(Pu(i,t,x,C),x++,C--;t[2*x+f]<y;)x++;for(;t[2*C+f]>y;)C--}t[2*s+f]===y?Pu(i,t,s,C):(C++,Pu(i,t,C,h)),C<=r&&(s=C+1),r<=C&&(h=C-1)}}function Pu(i,t,r,s){fm(i,r,s),fm(t,2*r,2*s),fm(t,2*r+1,2*s+1)}function fm(i,t,r){const s=i[t];i[t]=i[r],i[r]=s}function E0(i,t,r,s){const h=i-r,f=t-s;return h*h+f*f}var mm;v.bf=void 0,(mm=v.bf||(v.bf={})).create="create",mm.load="load",mm.fullLoad="fullLoad";let Lh=null,Du=[];const gm=1e3/60,ym="loadTime",_m="fullLoadTime",N2={mark(i){performance.mark(i)},frame(i){const t=i;Lh!=null&&Du.push(t-Lh),Lh=t},clearMetrics(){Lh=null,Du=[],performance.clearMeasures(ym),performance.clearMeasures(_m);for(const i in v.bf)performance.clearMarks(v.bf[i])},getPerformanceMetrics(){performance.measure(ym,v.bf.create,v.bf.load),performance.measure(_m,v.bf.create,v.bf.fullLoad);const i=performance.getEntriesByName(ym)[0].duration,t=performance.getEntriesByName(_m)[0].duration,r=Du.length,s=1/(Du.reduce((f,y)=>f+y,0)/r/1e3),h=Du.filter(f=>f>gm).reduce((f,y)=>f+(y-gm)/gm,0);return{loadTime:i,fullLoadTime:t,fps:s,percentDroppedFrames:h/(r+h)*100,totalFrames:r}}};v.$=class extends Z{},v.A=Ol,v.B=Sf,v.C=function(i){if($n==null){const t=i.navigator?i.navigator.userAgent:null;$n=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return $n},v.D=e,v.E=Li,v.F=class{constructor(i,t){this.target=i,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new P2(()=>this.process()),this.subscription=function(r,s,h,f){return r.addEventListener(s,h,!1),{unsubscribe:()=>{r.removeEventListener(s,h,!1)}}}(this.target,"message",r=>this.receive(r)),this.globalScope=Ln(self)?i:window}registerMessageHandler(i,t){this.messageHandlers[i]=t}sendAsync(i,t){return new Promise((r,s)=>{const h=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[h]={resolve:r,reject:s},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[h];const x={id:h,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(x)},{once:!0});const f=[],y=Object.assign(Object.assign({},i),{id:h,sourceMapId:this.mapId,origin:location.origin,data:bs(i.data,f)});this.target.postMessage(y,{transfer:f})})}receive(i){const t=i.data,r=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[r];const s=this.abortControllers[r];return delete this.abortControllers[r],void(s&&s.abort())}if(Ln(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){return u(this,void 0,void 0,function*(){if(t.type==="<response>"){const h=this.resolveRejects[i];return delete this.resolveRejects[i],h?void(t.error?h.reject(ws(t.error)):h.resolve(ws(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=ws(t.data),s=new AbortController;this.abortControllers[i]=s;try{const h=yield this.messageHandlers[t.type](t.sourceMapId,r,s);this.completeTask(i,null,h)}catch(h){this.completeTask(i,h)}})}completeTask(i,t,r){const s=[];delete this.abortControllers[i];const h={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?bs(t):null,data:bs(r,s)};this.target.postMessage(h,{transfer:s})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},v.G=hn,v.H=function(){var i=new Ol(16);return Ol!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},v.I=Qf,v.J=function(i,t,r){var s,h,f,y,x,C,E,M,I,R,O,F,U=r[0],J=r[1],ne=r[2];return t===i?(i[12]=t[0]*U+t[4]*J+t[8]*ne+t[12],i[13]=t[1]*U+t[5]*J+t[9]*ne+t[13],i[14]=t[2]*U+t[6]*J+t[10]*ne+t[14],i[15]=t[3]*U+t[7]*J+t[11]*ne+t[15]):(h=t[1],f=t[2],y=t[3],x=t[4],C=t[5],E=t[6],M=t[7],I=t[8],R=t[9],O=t[10],F=t[11],i[0]=s=t[0],i[1]=h,i[2]=f,i[3]=y,i[4]=x,i[5]=C,i[6]=E,i[7]=M,i[8]=I,i[9]=R,i[10]=O,i[11]=F,i[12]=s*U+x*J+I*ne+t[12],i[13]=h*U+C*J+R*ne+t[13],i[14]=f*U+E*J+O*ne+t[14],i[15]=y*U+M*J+F*ne+t[15]),i},v.K=function(i,t,r){var s=r[0],h=r[1],f=r[2];return i[0]=t[0]*s,i[1]=t[1]*s,i[2]=t[2]*s,i[3]=t[3]*s,i[4]=t[4]*h,i[5]=t[5]*h,i[6]=t[6]*h,i[7]=t[7]*h,i[8]=t[8]*f,i[9]=t[9]*f,i[10]=t[10]*f,i[11]=t[11]*f,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},v.L=o_,v.M=function(i,t){const r={};for(let s=0;s<t.length;s++){const h=t[s];h in i&&(r[h]=i[h])}return r},v.N=Io,v.O=t0,v.P=j,v.Q=n0,v.R=wa,v.S=Ca,v.T=Co,v.U=re,v.V=ie,v.W=ut,v.X=jn,v.Y=B,v.Z=Mu,v._=u,v.a=yn,v.a$=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},v.a0=Qn,v.a1=cm,v.a2=Ne,v.a3=i=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(r=>{t.onloadstart=()=>{r(t)};for(const s of i){const h=window.document.createElement("source");la(s)||(t.crossOrigin="Anonymous"),h.src=s,t.appendChild(h)}})},v.a4=function(){return pe++},v.a5=ii,v.a6=Ul,v.a7=yo,v.a8=Ps,v.a9=l0,v.aA=function(i){if(i.type==="custom")return new I2(i);switch(i.type){case"background":return new E2(i);case"circle":return new pw(i);case"fill":return new Pw(i);case"fill-extrusion":return new Hw(i);case"heatmap":return new mw(i);case"hillshade":return new yw(i);case"line":return new Qw(i);case"raster":return new M2(i);case"symbol":return new Ph(i)}},v.aB=ot,v.aC=function(i,t){if(!i)return[{command:"setStyle",args:[t]}];let r=[];try{if(!qt(i.version,t.version))return[{command:"setStyle",args:[t]}];qt(i.center,t.center)||r.push({command:"setCenter",args:[t.center]}),qt(i.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),qt(i.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),qt(i.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),qt(i.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),qt(i.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),qt(i.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),qt(i.light,t.light)||r.push({command:"setLight",args:[t.light]}),qt(i.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),qt(i.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),qt(i.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const s={},h=[];(function(y,x,C,E){let M;for(M in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,M)&&(Object.prototype.hasOwnProperty.call(x,M)||La(M,C,E));for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(y,M)?qt(y[M],x[M])||(y[M].type==="geojson"&&x[M].type==="geojson"&&fr(y,x,M)?un(C,{command:"setGeoJSONSourceData",args:[M,x[M].data]}):ua(M,x,C,E)):pr(M,x,C))})(i.sources,t.sources,h,s);const f=[];i.layers&&i.layers.forEach(y=>{"source"in y&&s[y.source]?r.push({command:"removeLayer",args:[y.id]}):f.push(y)}),r=r.concat(h),function(y,x,C){x=x||[];const E=(y=y||[]).map(da),M=x.map(da),I=y.reduce(ha,{}),R=x.reduce(ha,{}),O=E.slice(),F=Object.create(null);let U,J,ne,ye,le;for(let fe=0,Se=0;fe<E.length;fe++)U=E[fe],Object.prototype.hasOwnProperty.call(R,U)?Se++:(un(C,{command:"removeLayer",args:[U]}),O.splice(O.indexOf(U,Se),1));for(let fe=0,Se=0;fe<M.length;fe++)U=M[M.length-1-fe],O[O.length-1-fe]!==U&&(Object.prototype.hasOwnProperty.call(I,U)?(un(C,{command:"removeLayer",args:[U]}),O.splice(O.lastIndexOf(U,O.length-Se),1)):Se++,ye=O[O.length-fe],un(C,{command:"addLayer",args:[R[U],ye]}),O.splice(O.length-fe,0,U),F[U]=!0);for(let fe=0;fe<M.length;fe++)if(U=M[fe],J=I[U],ne=R[U],!F[U]&&!qt(J,ne))if(qt(J.source,ne.source)&&qt(J["source-layer"],ne["source-layer"])&&qt(J.type,ne.type)){for(le in bi(J.layout,ne.layout,C,U,null,"setLayoutProperty"),bi(J.paint,ne.paint,C,U,null,"setPaintProperty"),qt(J.filter,ne.filter)||un(C,{command:"setFilter",args:[U,ne.filter]}),qt(J.minzoom,ne.minzoom)&&qt(J.maxzoom,ne.maxzoom)||un(C,{command:"setLayerZoomRange",args:[U,ne.minzoom,ne.maxzoom]}),J)Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?bi(J[le],ne[le],C,U,le.slice(6),"setPaintProperty"):qt(J[le],ne[le])||un(C,{command:"setLayerProperty",args:[U,le,ne[le]]}));for(le in ne)Object.prototype.hasOwnProperty.call(ne,le)&&!Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?bi(J[le],ne[le],C,U,le.slice(6),"setPaintProperty"):qt(J[le],ne[le])||un(C,{command:"setLayerProperty",args:[U,le,ne[le]]}))}else un(C,{command:"removeLayer",args:[U]}),ye=O[O.lastIndexOf(U)+1],un(C,{command:"addLayer",args:[ne,ye]})}(f,t.layers,r)}catch(s){console.warn("Unable to compute style diff:",s),r=[{command:"setStyle",args:[t]}]}return r},v.aD=function(i){const t=[],r=i.id;return r===void 0&&t.push({message:`layers.${r}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${r}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},v.aE=function i(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],r[s]))return!1;return!0}if(typeof t=="object"&&t!==null&&r!==null){if(typeof r!="object"||Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(!i(t[s],r[s]))return!1;return!0}return t===r},v.aF=pt,v.aG=ct,v.aH=class extends Ts{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},v.aI=yh,v.aJ=class extends Ts{constructor(i,t){super(i,t),this.current=rw}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},v.aK=Xy,v.aL=Ky,v.aM=St,v.aN=class extends Ts{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},v.aO=class extends Ts{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},v.aP=function(i,t,r,s,h,f,y){var x=1/(t-r),C=1/(s-h),E=1/(f-y);return i[0]=-2*x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*C,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*E,i[11]=0,i[12]=(t+r)*x,i[13]=(h+s)*C,i[14]=(y+f)*E,i[15]=1,i},v.aQ=hw,v.aR=class extends Ye{},v.aS=i2,v.aT=class extends je{},v.aU=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},v.aV=d_,v.aW=xr,v.aX=wr,v.aY=class extends Dt{},v.aZ=function(i,t){return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]&&i[4]===t[4]&&i[5]===t[5]&&i[6]===t[6]&&i[7]===t[7]&&i[8]===t[8]&&i[9]===t[9]&&i[10]===t[10]&&i[11]===t[11]&&i[12]===t[12]&&i[13]===t[13]&&i[14]===t[14]&&i[15]===t[15]},v.a_=function(i,t){var r=i[0],s=i[1],h=i[2],f=i[3],y=i[4],x=i[5],C=i[6],E=i[7],M=i[8],I=i[9],R=i[10],O=i[11],F=i[12],U=i[13],J=i[14],ne=i[15],ye=t[0],le=t[1],fe=t[2],Se=t[3],Re=t[4],Ke=t[5],vt=t[6],We=t[7],$e=t[8],ht=t[9],rt=t[10],tt=t[11],Ie=t[12],ft=t[13],dt=t[14],Ct=t[15];return Math.abs(r-ye)<=Ei*Math.max(1,Math.abs(r),Math.abs(ye))&&Math.abs(s-le)<=Ei*Math.max(1,Math.abs(s),Math.abs(le))&&Math.abs(h-fe)<=Ei*Math.max(1,Math.abs(h),Math.abs(fe))&&Math.abs(f-Se)<=Ei*Math.max(1,Math.abs(f),Math.abs(Se))&&Math.abs(y-Re)<=Ei*Math.max(1,Math.abs(y),Math.abs(Re))&&Math.abs(x-Ke)<=Ei*Math.max(1,Math.abs(x),Math.abs(Ke))&&Math.abs(C-vt)<=Ei*Math.max(1,Math.abs(C),Math.abs(vt))&&Math.abs(E-We)<=Ei*Math.max(1,Math.abs(E),Math.abs(We))&&Math.abs(M-$e)<=Ei*Math.max(1,Math.abs(M),Math.abs($e))&&Math.abs(I-ht)<=Ei*Math.max(1,Math.abs(I),Math.abs(ht))&&Math.abs(R-rt)<=Ei*Math.max(1,Math.abs(R),Math.abs(rt))&&Math.abs(O-tt)<=Ei*Math.max(1,Math.abs(O),Math.abs(tt))&&Math.abs(F-Ie)<=Ei*Math.max(1,Math.abs(F),Math.abs(Ie))&&Math.abs(U-ft)<=Ei*Math.max(1,Math.abs(U),Math.abs(ft))&&Math.abs(J-dt)<=Ei*Math.max(1,Math.abs(J),Math.abs(dt))&&Math.abs(ne-Ct)<=Ei*Math.max(1,Math.abs(ne),Math.abs(Ct))},v.aa=function(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,s,h,f)=>{const y=h||f;return t[s]=!y||y.toLowerCase(),""}),t["max-age"]){const r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t},v.ab=function(i,t){const r=[];for(const s in i)s in t||r.push(s);return r},v.ac=ke,v.ad=function(i,t,r){var s=Math.sin(r),h=Math.cos(r),f=t[0],y=t[1],x=t[2],C=t[3],E=t[4],M=t[5],I=t[6],R=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=f*h+E*s,i[1]=y*h+M*s,i[2]=x*h+I*s,i[3]=C*h+R*s,i[4]=E*h-f*s,i[5]=M*h-y*s,i[6]=I*h-x*s,i[7]=R*h-C*s,i},v.ae=function(i){var t=new Ol(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},v.af=bh,v.ag=function(i,t){let r=0,s=0;if(i.kind==="constant")s=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:h,minZoom:f,maxZoom:y}=i,x=h?ke(ji.interpolationFactor(h,t,f,y),0,1):0;i.kind==="camera"?s=Ni.number(i.minSize,i.maxSize,x):r=x}return{uSizeT:r,uSize:s}},v.ai=function(i,{uSize:t,uSizeT:r},{lowerSize:s,upperSize:h}){return i.kind==="source"?s/Ar:i.kind==="composite"?Ni.number(s/Ar,h/Ar,r):t},v.aj=im,v.ak=function(i,t,r,s){const h=t.y-i.y,f=t.x-i.x,y=s.y-r.y,x=s.x-r.x,C=y*f-x*h;if(C===0)return null;const E=(x*(i.y-r.y)-y*(i.x-r.x))/C;return new j(i.x+E*f,i.y+E*h)},v.al=h0,v.am=e_,v.an=Nf,v.ao=function(i){let t=1/0,r=1/0,s=-1/0,h=-1/0;for(const f of i)t=Math.min(t,f.x),r=Math.min(r,f.y),s=Math.max(s,f.x),h=Math.max(h,f.y);return[t,r,s,h]},v.ap=Gn,v.ar=nm,v.as=function(i,t){var r=t[0],s=t[1],h=t[2],f=t[3],y=t[4],x=t[5],C=t[6],E=t[7],M=t[8],I=t[9],R=t[10],O=t[11],F=t[12],U=t[13],J=t[14],ne=t[15],ye=r*x-s*y,le=r*C-h*y,fe=r*E-f*y,Se=s*C-h*x,Re=s*E-f*x,Ke=h*E-f*C,vt=M*U-I*F,We=M*J-R*F,$e=M*ne-O*F,ht=I*J-R*U,rt=I*ne-O*U,tt=R*ne-O*J,Ie=ye*tt-le*rt+fe*ht+Se*$e-Re*We+Ke*vt;return Ie?(i[0]=(x*tt-C*rt+E*ht)*(Ie=1/Ie),i[1]=(h*rt-s*tt-f*ht)*Ie,i[2]=(U*Ke-J*Re+ne*Se)*Ie,i[3]=(R*Re-I*Ke-O*Se)*Ie,i[4]=(C*$e-y*tt-E*We)*Ie,i[5]=(r*tt-h*$e+f*We)*Ie,i[6]=(J*fe-F*Ke-ne*le)*Ie,i[7]=(M*Ke-R*fe+O*le)*Ie,i[8]=(y*rt-x*$e+E*vt)*Ie,i[9]=(s*$e-r*rt-f*vt)*Ie,i[10]=(F*Re-U*fe+ne*ye)*Ie,i[11]=(I*fe-M*Re-O*ye)*Ie,i[12]=(x*We-y*ht-C*vt)*Ie,i[13]=(r*ht-s*We+h*vt)*Ie,i[14]=(U*le-F*Se-J*ye)*Ie,i[15]=(M*Se-I*le+R*ye)*Ie,i):null},v.at=dm,v.au=tm,v.av=hm,v.aw=function(){const i={},t=be.$version;for(const r in be.$root){const s=be.$root[r];if(s.required){let h=null;h=r==="version"?t:s.type==="array"?[]:{},h!=null&&(i[r]=h)}}return i},v.ax=qr,v.ay=qn,v.az=function(i){i=i.slice();const t=Object.create(null);for(let r=0;r<i.length;r++)t[i[r].id]=i[r];for(let r=0;r<i.length;r++)"ref"in i[r]&&(i[r]=Oi(i[r],t[i[r].ref]));return i},v.b=Un,v.b0=function(i,t,r){return i[0]=t[0]*r[0],i[1]=t[1]*r[1],i[2]=t[2]*r[2],i[3]=t[3]*r[3],i},v.b1=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]*t[3]},v.b2=Xe,v.b3=r0,v.b4=i0,v.b5=function(i,t,r,s,h){var f,y=1/Math.tan(t/2);return i[0]=y/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,h!=null&&h!==1/0?(i[10]=(h+s)*(f=1/(s-h)),i[14]=2*h*s*f):(i[10]=-1,i[14]=-2*s),i},v.b6=function(i,t,r){var s=Math.sin(r),h=Math.cos(r),f=t[4],y=t[5],x=t[6],C=t[7],E=t[8],M=t[9],I=t[10],R=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=f*h+E*s,i[5]=y*h+M*s,i[6]=x*h+I*s,i[7]=C*h+R*s,i[8]=E*h-f*s,i[9]=M*h-y*s,i[10]=I*h-x*s,i[11]=R*h-C*s,i},v.b7=ce,v.b8=Ee,v.b9=function(i){return i*Math.PI/180},v.bA=function(i){return i.message===Nt},v.bB=ms,v.bC=Na,v.ba=function(i,t){const{x:r,y:s}=Mu.fromLngLat(t);return!(i<0||i>25||s<0||s>=1||r<0||r>=1)},v.bb=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},v.bc=class extends Y{},v.bd=sm,v.be=N2,v.bg=rn,v.bh=function(i,t){yn.REGISTERED_PROTOCOLS[i]=t},v.bi=function(i){delete yn.REGISTERED_PROTOCOLS[i]},v.bj=function(i,t){const r={};for(let h=0;h<i.length;h++){const f=t&&t[i[h].id]||Af(i[h]);t&&(t[i[h].id]=f);let y=r[f];y||(y=r[f]=[]),y.push(i[h])}const s=[];for(const h in r)s.push(r[h]);return s},v.bk=et,v.bl=s0,v.bm=c0,v.bn=j_,v.bo=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=jn/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0],r=t.layout,s=t._unevaluatedLayout._values,h={layoutIconSize:s["icon-size"].possiblyEvaluate(new Kt(i.bucket.zoom+1),i.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new Kt(i.bucket.zoom+1),i.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new Kt(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:E,maxZoom:M}=i.bucket.textSizeData;h.compositeTextSizes=[s["text-size"].possiblyEvaluate(new Kt(E),i.canonical),s["text-size"].possiblyEvaluate(new Kt(M),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:E,maxZoom:M}=i.bucket.iconSizeData;h.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new Kt(E),i.canonical),s["icon-size"].possiblyEvaluate(new Kt(M),i.canonical)]}const f=r.get("text-line-height")*Gn,y=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",x=r.get("text-keep-upright"),C=r.get("text-size");for(const E of i.bucket.features){const M=r.get("text-font").evaluate(E,{},i.canonical).join(","),I=C.evaluate(E,{},i.canonical),R=h.layoutTextSize.evaluate(E,{},i.canonical),O=h.layoutIconSize.evaluate(E,{},i.canonical),F={horizontal:{},vertical:void 0},U=E.text;let J,ne=[0,0];if(U){const fe=U.toString(),Se=r.get("text-letter-spacing").evaluate(E,{},i.canonical)*Gn,Re=Tf(fe)?Se:0,Ke=r.get("text-anchor").evaluate(E,{},i.canonical),vt=b0(t,E,i.canonical);if(!vt){const rt=r.get("text-radial-offset").evaluate(E,{},i.canonical);ne=rt?x0(Ke,[rt*Gn,um]):r.get("text-offset").evaluate(E,{},i.canonical).map(tt=>tt*Gn)}let We=y?"center":r.get("text-justify").evaluate(E,{},i.canonical);const $e=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(E,{},i.canonical)*Gn:1/0,ht=()=>{i.bucket.allowVerticalPlacement&&ru(fe)&&(F.vertical=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,$e,f,Ke,"left",Re,ne,v.ah.vertical,!0,R,I))};if(!y&&vt){const rt=new Set;if(We==="auto")for(let Ie=0;Ie<vt.values.length;Ie+=2)rt.add(dm(vt.values[Ie]));else rt.add(We);let tt=!1;for(const Ie of rt)if(!F.horizontal[Ie])if(tt)F.horizontal[Ie]=F.horizontal[0];else{const ft=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,$e,f,"center",Ie,Re,ne,v.ah.horizontal,!1,R,I);ft&&(F.horizontal[Ie]=ft,tt=ft.positionedLines.length===1)}ht()}else{We==="auto"&&(We=dm(Ke));const rt=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,$e,f,Ke,We,Re,ne,v.ah.horizontal,!1,R,I);rt&&(F.horizontal[We]=rt),ht(),ru(fe)&&y&&x&&(F.vertical=Th(U,i.glyphMap,i.glyphPositions,i.imagePositions,M,$e,f,Ke,We,Re,ne,v.ah.vertical,!1,R,I))}}let ye=!1;if(E.icon&&E.icon.name){const fe=i.imageMap[E.icon.name];fe&&(J=b2(i.imagePositions[E.icon.name],r.get("icon-offset").evaluate(E,{},i.canonical),r.get("icon-anchor").evaluate(E,{},i.canonical)),ye=!!fe.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=ye:i.bucket.sdfIcons!==ye&&Ft("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(fe.pixelRatio!==i.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const le=C0(F.horizontal)||F.vertical;i.bucket.iconsInText=!!le&&le.iconsInText,(le||J)&&B2(i.bucket,E,F,J,i.imageMap,h,R,O,ne,ye,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},v.bp=Xf,v.bq=$f,v.br=Wf,v.bs=Eo,v.bt=Jf,v.bu=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},v.bv=function(i,t,r,s,h){return u(this,void 0,void 0,function*(){if(ie())try{return yield ut(i,t,r,s,h)}catch{}return function(f,y,x,C,E){const M=f.width,I=f.height;bt&&Rt||(bt=new OffscreenCanvas(M,I),Rt=bt.getContext("2d",{willReadFrequently:!0})),bt.width=M,bt.height=I,Rt.drawImage(f,0,0,M,I);const R=Rt.getImageData(y,x,C,E);return Rt.clearRect(0,0,M,I),R.data}(i,t,r,s,h)})},v.bw=o0,v.bx=z,v.by=V,v.bz=D_,v.c=Tn,v.d=i=>u(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),v.e=Qe,v.f=i=>new Promise((t,r)=>{const s=new Image;s.onload=()=>{t(s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=at})},s.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(i)],{type:"image/png"});s.src=i.byteLength?URL.createObjectURL(h):at}),v.g=On,v.h=(i,t)=>Xa(Qe(i,{type:"json"}),t),v.i=Ln,v.j=pn,v.k=ka,v.l=(i,t)=>Xa(Qe(i,{type:"arrayBuffer"}),t),v.m=Xa,v.n=function(i){return new Jf(i).readFields(f2,[])},v.o=_u,v.p=N_,v.q=w,v.r=Il,v.s=la,v.t=sh,v.u=Ur,v.v=be,v.w=Ft,v.x=function([i,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(r),y:i*Math.sin(t)*Math.sin(r),z:i*Math.cos(r)}},v.y=Ni,v.z=Kt}),_("worker",["./shared"],function(v){class u{constructor(k){this.keyCache={},k&&this.replace(k)}replace(k){this._layerConfigs={},this._layers={},this.update(k,[])}update(k,L){for(const X of k){this._layerConfigs[X.id]=X;const se=this._layers[X.id]=v.aA(X);se._featureFilter=v.a7(se.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(const X of L)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};const q=v.bj(Object.values(this._layerConfigs),this.keyCache);for(const X of q){const se=X.map(ve=>this._layers[ve.id]),de=se[0];if(de.visibility==="none")continue;const me=de.source||"";let ae=this.familiesBySource[me];ae||(ae=this.familiesBySource[me]={});const Ae=de.sourceLayer||"_geojsonTileLayer";let De=ae[Ae];De||(De=ae[Ae]=[]),De.push(se)}}}class z{constructor(k){const L={},q=[];for(const me in k){const ae=k[me],Ae=L[me]={};for(const De in ae){const ve=ae[+De];if(!ve||ve.bitmap.width===0||ve.bitmap.height===0)continue;const $={x:0,y:0,w:ve.bitmap.width+2,h:ve.bitmap.height+2};q.push($),Ae[De]={rect:$,metrics:ve.metrics}}}const{w:X,h:se}=v.p(q),de=new v.o({width:X||1,height:se||1});for(const me in k){const ae=k[me];for(const Ae in ae){const De=ae[+Ae];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const ve=L[me][Ae].rect;v.o.copy(De.bitmap,de,{x:0,y:0},{x:ve.x+1,y:ve.y+1},De.bitmap)}}this.image=de,this.positions=L}}v.bk("GlyphAtlas",z);class V{constructor(k){this.tileID=new v.S(k.tileID.overscaledZ,k.tileID.wrap,k.tileID.canonical.z,k.tileID.canonical.x,k.tileID.canonical.y),this.uid=k.uid,this.zoom=k.zoom,this.pixelRatio=k.pixelRatio,this.tileSize=k.tileSize,this.source=k.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=k.showCollisionBoxes,this.collectResourceTiming=!!k.collectResourceTiming,this.returnDependencies=!!k.returnDependencies,this.promoteId=k.promoteId,this.inFlightDependencies=[]}parse(k,L,q,X){return v._(this,void 0,void 0,function*(){this.status="parsing",this.data=k,this.collisionBoxArray=new v.a5;const se=new v.bl(Object.keys(k.layers).sort()),de=new v.bm(this.tileID,this.promoteId);de.bucketLayerIDs=[];const me={},ae={featureIndex:de,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},Ae=L.familiesBySource[this.source];for(const Ve in Ae){const st=k.layers[Ve];if(!st)continue;st.version===1&&v.w(`Vector tile source "${this.source}" layer "${Ve}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xt=se.encode(Ve),Tt=[];for(let zt=0;zt<st.length;zt++){const Mt=st.feature(zt),_n=de.getId(Mt,Ve);Tt.push({feature:Mt,id:_n,index:zt,sourceLayerIndex:xt})}for(const zt of Ae[Ve]){const Mt=zt[0];Mt.source!==this.source&&v.w(`layer.source = ${Mt.source} does not equal this.source = ${this.source}`),Mt.minzoom&&this.zoom<Math.floor(Mt.minzoom)||Mt.maxzoom&&this.zoom>=Mt.maxzoom||Mt.visibility!=="none"&&(W(zt,this.zoom,q),(me[Mt.id]=Mt.createBucket({index:de.bucketLayerIDs.length,layers:zt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xt,sourceID:this.source})).populate(Tt,ae,this.tileID.canonical),de.bucketLayerIDs.push(zt.map(_n=>_n.id)))}}const De=v.aF(ae.glyphDependencies,Ve=>Object.keys(Ve).map(Number));this.inFlightDependencies.forEach(Ve=>Ve==null?void 0:Ve.abort()),this.inFlightDependencies=[];let ve=Promise.resolve({});if(Object.keys(De).length){const Ve=new AbortController;this.inFlightDependencies.push(Ve),ve=X.sendAsync({type:"GG",data:{stacks:De,source:this.source,tileID:this.tileID,type:"glyphs"}},Ve)}const $=Object.keys(ae.iconDependencies);let ee=Promise.resolve({});if($.length){const Ve=new AbortController;this.inFlightDependencies.push(Ve),ee=X.sendAsync({type:"GI",data:{icons:$,source:this.source,tileID:this.tileID,type:"icons"}},Ve)}const ue=Object.keys(ae.patternDependencies);let xe=Promise.resolve({});if(ue.length){const Ve=new AbortController;this.inFlightDependencies.push(Ve),xe=X.sendAsync({type:"GI",data:{icons:ue,source:this.source,tileID:this.tileID,type:"patterns"}},Ve)}const[Le,ze,nt]=yield Promise.all([ve,ee,xe]),Oe=new z(Le),gt=new v.bn(ze,nt);for(const Ve in me){const st=me[Ve];st instanceof v.a6?(W(st.layers,this.zoom,q),v.bo({bucket:st,glyphMap:Le,glyphPositions:Oe.positions,imageMap:ze,imagePositions:gt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):st.hasPattern&&(st instanceof v.bp||st instanceof v.bq||st instanceof v.br)&&(W(st.layers,this.zoom,q),st.addFeatures(ae,this.tileID.canonical,gt.patternPositions))}return this.status="done",{buckets:Object.values(me).filter(Ve=>!Ve.isEmpty()),featureIndex:de,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Oe.image,imageAtlas:gt,glyphMap:this.returnDependencies?Le:null,iconMap:this.returnDependencies?ze:null,glyphPositions:this.returnDependencies?Oe.positions:null}})}}function W(Q,k,L){const q=new v.z(k);for(const X of Q)X.recalculate(q,L)}class j{constructor(k,L,q){this.actor=k,this.layerIndex=L,this.availableImages=q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(k,L){return v._(this,void 0,void 0,function*(){const q=yield v.l(k.request,L);try{return{vectorTile:new v.bs.VectorTile(new v.bt(q.data)),rawData:q.data,cacheControl:q.cacheControl,expires:q.expires}}catch(X){const se=new Uint8Array(q.data);let de=`Unable to parse the tile at ${k.request.url}, `;throw de+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${X.message}`,new Error(de)}})}loadTile(k){return v._(this,void 0,void 0,function*(){const L=k.uid,q=!!(k&&k.request&&k.request.collectResourceTiming)&&new v.bu(k.request),X=new V(k);this.loading[L]=X;const se=new AbortController;X.abort=se;try{const de=yield this.loadVectorTile(k,se);if(delete this.loading[L],!de)return null;const me=de.rawData,ae={};de.expires&&(ae.expires=de.expires),de.cacheControl&&(ae.cacheControl=de.cacheControl);const Ae={};if(q){const ve=q.finish();ve&&(Ae.resourceTiming=JSON.parse(JSON.stringify(ve)))}X.vectorTile=de.vectorTile;const De=X.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[L]=X,this.fetching[L]={rawTileData:me,cacheControl:ae,resourceTiming:Ae};try{const ve=yield De;return v.e({rawTileData:me.slice(0)},ve,ae,Ae)}finally{delete this.fetching[L]}}catch(de){throw delete this.loading[L],X.status="done",this.loaded[L]=X,de}})}reloadTile(k){return v._(this,void 0,void 0,function*(){const L=k.uid;if(!this.loaded||!this.loaded[L])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const q=this.loaded[L];if(q.showCollisionBoxes=k.showCollisionBoxes,q.status==="parsing"){const X=yield q.parse(q.vectorTile,this.layerIndex,this.availableImages,this.actor);let se;if(this.fetching[L]){const{rawTileData:de,cacheControl:me,resourceTiming:ae}=this.fetching[L];delete this.fetching[L],se=v.e({rawTileData:de.slice(0)},X,me,ae)}else se=X;return se}if(q.status==="done"&&q.vectorTile)return q.parse(q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(k){return v._(this,void 0,void 0,function*(){const L=this.loading,q=k.uid;L&&L[q]&&L[q].abort&&(L[q].abort.abort(),delete L[q])})}removeTile(k){return v._(this,void 0,void 0,function*(){this.loaded&&this.loaded[k.uid]&&delete this.loaded[k.uid]})}}class N{constructor(){this.loaded={}}loadTile(k){return v._(this,void 0,void 0,function*(){const{uid:L,encoding:q,rawImageData:X,redFactor:se,greenFactor:de,blueFactor:me,baseShift:ae}=k,Ae=X.width+2,De=X.height+2,ve=v.b(X)?new v.R({width:Ae,height:De},yield v.bv(X,-1,-1,Ae,De)):X,$=new v.bw(L,ve,q,se,de,me,ae);return this.loaded=this.loaded||{},this.loaded[L]=$,$})}removeTile(k){const L=this.loaded,q=k.uid;L&&L[q]&&delete L[q]}}function Te(Q,k){if(Q.length!==0){Ce(Q[0],k);for(var L=1;L<Q.length;L++)Ce(Q[L],!k)}}function Ce(Q,k){for(var L=0,q=0,X=0,se=Q.length,de=se-1;X<se;de=X++){var me=(Q[X][0]-Q[de][0])*(Q[de][1]+Q[X][1]),ae=L+me;q+=Math.abs(L)>=Math.abs(me)?L-ae+me:me-ae+L,L=ae}L+q>=0!=!!k&&Q.reverse()}var we=v.bx(function Q(k,L){var q,X=k&&k.type;if(X==="FeatureCollection")for(q=0;q<k.features.length;q++)Q(k.features[q],L);else if(X==="GeometryCollection")for(q=0;q<k.geometries.length;q++)Q(k.geometries[q],L);else if(X==="Feature")Q(k.geometry,L);else if(X==="Polygon")Te(k.coordinates,L);else if(X==="MultiPolygon")for(q=0;q<k.coordinates.length;q++)Te(k.coordinates[q],L);return k});const Ge=v.bs.VectorTileFeature.prototype.toGeoJSON;var re={exports:{}},ie=v.by,ce=v.bs.VectorTileFeature,Ee=ke;function ke(Q,k){this.options=k||{},this.features=Q,this.length=Q.length}function Xe(Q,k){this.id=typeof Q.id=="number"?Q.id:void 0,this.type=Q.type,this.rawGeometry=Q.type===1?[Q.geometry]:Q.geometry,this.properties=Q.tags,this.extent=k||4096}ke.prototype.feature=function(Q){return new Xe(this.features[Q],this.options.extent)},Xe.prototype.loadGeometry=function(){var Q=this.rawGeometry;this.geometry=[];for(var k=0;k<Q.length;k++){for(var L=Q[k],q=[],X=0;X<L.length;X++)q.push(new ie(L[X][0],L[X][1]));this.geometry.push(q)}return this.geometry},Xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Q=this.geometry,k=1/0,L=-1/0,q=1/0,X=-1/0,se=0;se<Q.length;se++)for(var de=Q[se],me=0;me<de.length;me++){var ae=de[me];k=Math.min(k,ae.x),L=Math.max(L,ae.x),q=Math.min(q,ae.y),X=Math.max(X,ae.y)}return[k,q,L,X]},Xe.prototype.toGeoJSON=ce.prototype.toGeoJSON;var Qe=v.bz,pe=Ee;function pt(Q){var k=new Qe;return function(L,q){for(var X in L.layers)q.writeMessage(3,ct,L.layers[X])}(Q,k),k.finish()}function ct(Q,k){var L;k.writeVarintField(15,Q.version||1),k.writeStringField(1,Q.name||""),k.writeVarintField(5,Q.extent||4096);var q={keys:[],values:[],keycache:{},valuecache:{}};for(L=0;L<Q.length;L++)q.feature=Q.feature(L),k.writeMessage(2,ot,q);var X=q.keys;for(L=0;L<X.length;L++)k.writeStringField(3,X[L]);var se=q.values;for(L=0;L<se.length;L++)k.writeMessage(4,$n,se[L])}function ot(Q,k){var L=Q.feature;L.id!==void 0&&k.writeVarintField(1,L.id),k.writeMessage(2,Xt,Q),k.writeVarintField(3,L.type),k.writeMessage(4,Ln,L)}function Xt(Q,k){var L=Q.feature,q=Q.keys,X=Q.values,se=Q.keycache,de=Q.valuecache;for(var me in L.properties){var ae=L.properties[me],Ae=se[me];if(ae!==null){Ae===void 0&&(q.push(me),se[me]=Ae=q.length-1),k.writeVarint(Ae);var De=typeof ae;De!=="string"&&De!=="boolean"&&De!=="number"&&(ae=JSON.stringify(ae));var ve=De+":"+ae,$=de[ve];$===void 0&&(X.push(ae),de[ve]=$=X.length-1),k.writeVarint($)}}}function Ft(Q,k){return(k<<3)+(7&Q)}function Ot(Q){return Q<<1^Q>>31}function Ln(Q,k){for(var L=Q.loadGeometry(),q=Q.type,X=0,se=0,de=L.length,me=0;me<de;me++){var ae=L[me],Ae=1;q===1&&(Ae=ae.length),k.writeVarint(Ft(1,Ae));for(var De=q===3?ae.length-1:ae.length,ve=0;ve<De;ve++){ve===1&&q!==1&&k.writeVarint(Ft(2,De-1));var $=ae[ve].x-X,ee=ae[ve].y-se;k.writeVarint(Ot($)),k.writeVarint(Ot(ee)),X+=$,se+=ee}q===3&&k.writeVarint(Ft(7,1))}}function $n(Q,k){var L=typeof Q;L==="string"?k.writeStringField(1,Q):L==="boolean"?k.writeBooleanField(7,Q):L==="number"&&(Q%1!=0?k.writeDoubleField(3,Q):Q<0?k.writeSVarintField(6,Q):k.writeVarintField(5,Q))}re.exports=pt,re.exports.fromVectorTileJs=pt,re.exports.fromGeojsonVt=function(Q,k){k=k||{};var L={};for(var q in Q)L[q]=new pe(Q[q].features,k),L[q].name=q,L[q].version=k.version,L[q].extent=k.extent;return pt({layers:L})},re.exports.GeoJSONWrapper=pe;var Un=v.bx(re.exports);const at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Q=>Q},ut=Math.fround||(bt=new Float32Array(1),Q=>(bt[0]=+Q,bt[0]));var bt;const Rt=3,Nt=5,Tn=6;class yn{constructor(k){this.options=Object.assign(Object.create(at),k),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(k){const{log:L,minZoom:q,maxZoom:X}=this.options;L&&console.time("total time");const se=`prepare ${k.length} points`;L&&console.time(se),this.points=k;const de=[];for(let ae=0;ae<k.length;ae++){const Ae=k[ae];if(!Ae.geometry)continue;const[De,ve]=Ae.geometry.coordinates,$=ut(rn(De)),ee=ut(qn(ve));de.push($,ee,1/0,ae,-1,1),this.options.reduce&&de.push(0)}let me=this.trees[X+1]=this._createTree(de);L&&console.timeEnd(se);for(let ae=X;ae>=q;ae--){const Ae=+Date.now();me=this.trees[ae]=this._createTree(this._cluster(me,ae)),L&&console.log("z%d: %d clusters in %dms",ae,me.numItems,+Date.now()-Ae)}return L&&console.timeEnd("total time"),this}getClusters(k,L){let q=((k[0]+180)%360+360)%360-180;const X=Math.max(-90,Math.min(90,k[1]));let se=k[2]===180?180:((k[2]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,k[3]));if(k[2]-k[0]>=360)q=-180,se=180;else if(q>se){const ve=this.getClusters([q,X,180,de],L),$=this.getClusters([-180,X,se,de],L);return ve.concat($)}const me=this.trees[this._limitZoom(L)],ae=me.range(rn(q),qn(de),rn(se),qn(X)),Ae=me.data,De=[];for(const ve of ae){const $=this.stride*ve;De.push(Ae[$+Nt]>1?On(Ae,$,this.clusterProps):this.points[Ae[$+Rt]])}return De}getChildren(k){const L=this._getOriginId(k),q=this._getOriginZoom(k),X="No cluster with the specified id.",se=this.trees[q];if(!se)throw new Error(X);const de=se.data;if(L*this.stride>=de.length)throw new Error(X);const me=this.options.radius/(this.options.extent*Math.pow(2,q-1)),ae=se.within(de[L*this.stride],de[L*this.stride+1],me),Ae=[];for(const De of ae){const ve=De*this.stride;de[ve+4]===k&&Ae.push(de[ve+Nt]>1?On(de,ve,this.clusterProps):this.points[de[ve+Rt]])}if(Ae.length===0)throw new Error(X);return Ae}getLeaves(k,L,q){const X=[];return this._appendLeaves(X,k,L=L||10,q=q||0,0),X}getTile(k,L,q){const X=this.trees[this._limitZoom(k)],se=Math.pow(2,k),{extent:de,radius:me}=this.options,ae=me/de,Ae=(q-ae)/se,De=(q+1+ae)/se,ve={features:[]};return this._addTileFeatures(X.range((L-ae)/se,Ae,(L+1+ae)/se,De),X.data,L,q,se,ve),L===0&&this._addTileFeatures(X.range(1-ae/se,Ae,1,De),X.data,se,q,se,ve),L===se-1&&this._addTileFeatures(X.range(0,Ae,ae/se,De),X.data,-1,q,se,ve),ve.features.length?ve:null}getClusterExpansionZoom(k){let L=this._getOriginZoom(k)-1;for(;L<=this.options.maxZoom;){const q=this.getChildren(k);if(L++,q.length!==1)break;k=q[0].properties.cluster_id}return L}_appendLeaves(k,L,q,X,se){const de=this.getChildren(L);for(const me of de){const ae=me.properties;if(ae&&ae.cluster?se+ae.point_count<=X?se+=ae.point_count:se=this._appendLeaves(k,ae.cluster_id,q,X,se):se<X?se++:k.push(me),k.length===q)break}return se}_createTree(k){const L=new v.av(k.length/this.stride|0,this.options.nodeSize,Float32Array);for(let q=0;q<k.length;q+=this.stride)L.add(k[q],k[q+1]);return L.finish(),L.data=k,L}_addTileFeatures(k,L,q,X,se,de){for(const me of k){const ae=me*this.stride,Ae=L[ae+Nt]>1;let De,ve,$;if(Ae)De=hn(L,ae,this.clusterProps),ve=L[ae],$=L[ae+1];else{const xe=this.points[L[ae+Rt]];De=xe.properties;const[Le,ze]=xe.geometry.coordinates;ve=rn(Le),$=qn(ze)}const ee={type:1,geometry:[[Math.round(this.options.extent*(ve*se-q)),Math.round(this.options.extent*($*se-X))]],tags:De};let ue;ue=Ae||this.options.generateId?L[ae+Rt]:this.points[L[ae+Rt]].id,ue!==void 0&&(ee.id=ue),de.features.push(ee)}}_limitZoom(k){return Math.max(this.options.minZoom,Math.min(Math.floor(+k),this.options.maxZoom+1))}_cluster(k,L){const{radius:q,extent:X,reduce:se,minPoints:de}=this.options,me=q/(X*Math.pow(2,L)),ae=k.data,Ae=[],De=this.stride;for(let ve=0;ve<ae.length;ve+=De){if(ae[ve+2]<=L)continue;ae[ve+2]=L;const $=ae[ve],ee=ae[ve+1],ue=k.within(ae[ve],ae[ve+1],me),xe=ae[ve+Nt];let Le=xe;for(const ze of ue){const nt=ze*De;ae[nt+2]>L&&(Le+=ae[nt+Nt])}if(Le>xe&&Le>=de){let ze,nt=$*xe,Oe=ee*xe,gt=-1;const Ve=((ve/De|0)<<5)+(L+1)+this.points.length;for(const st of ue){const xt=st*De;if(ae[xt+2]<=L)continue;ae[xt+2]=L;const Tt=ae[xt+Nt];nt+=ae[xt]*Tt,Oe+=ae[xt+1]*Tt,ae[xt+4]=Ve,se&&(ze||(ze=this._map(ae,ve,!0),gt=this.clusterProps.length,this.clusterProps.push(ze)),se(ze,this._map(ae,xt)))}ae[ve+4]=Ve,Ae.push(nt/Le,Oe/Le,1/0,Ve,-1,Le),se&&Ae.push(gt)}else{for(let ze=0;ze<De;ze++)Ae.push(ae[ve+ze]);if(Le>1)for(const ze of ue){const nt=ze*De;if(!(ae[nt+2]<=L)){ae[nt+2]=L;for(let Oe=0;Oe<De;Oe++)Ae.push(ae[nt+Oe])}}}}return Ae}_getOriginId(k){return k-this.points.length>>5}_getOriginZoom(k){return(k-this.points.length)%32}_map(k,L,q){if(k[L+Nt]>1){const de=this.clusterProps[k[L+Tn]];return q?Object.assign({},de):de}const X=this.points[k[L+Rt]].properties,se=this.options.map(X);return q&&se===X?Object.assign({},se):se}}function On(Q,k,L){return{type:"Feature",id:Q[k+Rt],properties:hn(Q,k,L),geometry:{type:"Point",coordinates:[(q=Q[k],360*(q-.5)),Xa(Q[k+1])]}};var q}function hn(Q,k,L){const q=Q[k+Nt],X=q>=1e4?`${Math.round(q/1e3)}k`:q>=1e3?Math.round(q/100)/10+"k":q,se=Q[k+Tn],de=se===-1?{}:Object.assign({},L[se]);return Object.assign(de,{cluster:!0,cluster_id:Q[k+Rt],point_count:q,point_count_abbreviated:X})}function rn(Q){return Q/360+.5}function qn(Q){const k=Math.sin(Q*Math.PI/180),L=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return L<0?0:L>1?1:L}function Xa(Q){const k=(180-360*Q)*Math.PI/180;return 360*Math.atan(Math.exp(k))/Math.PI-90}function la(Q,k,L,q){let X=q;const se=k+(L-k>>1);let de,me=L-k;const ae=Q[k],Ae=Q[k+1],De=Q[L],ve=Q[L+1];for(let $=k+3;$<L;$+=3){const ee=Rr(Q[$],Q[$+1],ae,Ae,De,ve);if(ee>X)de=$,X=ee;else if(ee===X){const ue=Math.abs($-se);ue<me&&(de=$,me=ue)}}X>q&&(de-k>3&&la(Q,k,de,q),Q[de+2]=X,L-de>3&&la(Q,de,L,q))}function Rr(Q,k,L,q,X,se){let de=X-L,me=se-q;if(de!==0||me!==0){const ae=((Q-L)*de+(k-q)*me)/(de*de+me*me);ae>1?(L=X,q=se):ae>0&&(L+=de*ae,q+=me*ae)}return de=Q-L,me=k-q,de*de+me*me}function ca(Q,k,L,q){const X={id:Q??null,type:k,geometry:L,tags:q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(k==="Point"||k==="MultiPoint"||k==="LineString")ka(X,L);else if(k==="Polygon")ka(X,L[0]);else if(k==="MultiLineString")for(const se of L)ka(X,se);else if(k==="MultiPolygon")for(const se of L)ka(X,se[0]);return X}function ka(Q,k){for(let L=0;L<k.length;L+=3)Q.minX=Math.min(Q.minX,k[L]),Q.minY=Math.min(Q.minY,k[L+1]),Q.maxX=Math.max(Q.maxX,k[L]),Q.maxY=Math.max(Q.maxY,k[L+1])}function pn(Q,k,L,q){if(!k.geometry)return;const X=k.geometry.coordinates;if(X&&X.length===0)return;const se=k.geometry.type,de=Math.pow(L.tolerance/((1<<L.maxZoom)*L.extent),2);let me=[],ae=k.id;if(L.promoteId?ae=k.properties[L.promoteId]:L.generateId&&(ae=q||0),se==="Point")Li(X,me);else if(se==="MultiPoint")for(const Ae of X)Li(Ae,me);else if(se==="LineString")be(X,me,de,!1);else if(se==="MultiLineString"){if(L.lineMetrics){for(const Ae of X)me=[],be(Ae,me,de,!1),Q.push(ca(ae,"LineString",me,k.properties));return}Ka(X,me,de,!1)}else if(se==="Polygon")Ka(X,me,de,!0);else{if(se!=="MultiPolygon"){if(se==="GeometryCollection"){for(const Ae of k.geometry.geometries)pn(Q,{id:ae,geometry:Ae,properties:k.properties},L,q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ae of X){const De=[];Ka(Ae,De,de,!0),me.push(De)}}Q.push(ca(ae,se,me,k.properties))}function Li(Q,k){k.push(Oi(Q[0]),qt(Q[1]),0)}function be(Q,k,L,q){let X,se,de=0;for(let ae=0;ae<Q.length;ae++){const Ae=Oi(Q[ae][0]),De=qt(Q[ae][1]);k.push(Ae,De,0),ae>0&&(de+=q?(X*De-Ae*se)/2:Math.sqrt(Math.pow(Ae-X,2)+Math.pow(De-se,2))),X=Ae,se=De}const me=k.length-3;k[2]=1,la(k,0,me,L),k[me+2]=1,k.size=Math.abs(de),k.start=0,k.end=k.size}function Ka(Q,k,L,q){for(let X=0;X<Q.length;X++){const se=[];be(Q[X],se,L,q),k.push(se)}}function Oi(Q){return Q/360+.5}function qt(Q){const k=Math.sin(Q*Math.PI/180),L=.5-.25*Math.log((1+k)/(1-k))/Math.PI;return L<0?0:L>1?1:L}function un(Q,k,L,q,X,se,de,me){if(q/=k,se>=(L/=k)&&de<q)return Q;if(de<L||se>=q)return null;const ae=[];for(const Ae of Q){const De=Ae.geometry;let ve=Ae.type;const $=X===0?Ae.minX:Ae.minY,ee=X===0?Ae.maxX:Ae.maxY;if($>=L&&ee<q){ae.push(Ae);continue}if(ee<L||$>=q)continue;let ue=[];if(ve==="Point"||ve==="MultiPoint")pr(De,ue,L,q,X);else if(ve==="LineString")La(De,ue,L,q,X,!1,me.lineMetrics);else if(ve==="MultiLineString")fr(De,ue,L,q,X,!1);else if(ve==="Polygon")fr(De,ue,L,q,X,!0);else if(ve==="MultiPolygon")for(const xe of De){const Le=[];fr(xe,Le,L,q,X,!0),Le.length&&ue.push(Le)}if(ue.length){if(me.lineMetrics&&ve==="LineString"){for(const xe of ue)ae.push(ca(Ae.id,ve,xe,Ae.tags));continue}ve!=="LineString"&&ve!=="MultiLineString"||(ue.length===1?(ve="LineString",ue=ue[0]):ve="MultiLineString"),ve!=="Point"&&ve!=="MultiPoint"||(ve=ue.length===3?"Point":"MultiPoint"),ae.push(ca(Ae.id,ve,ue,Ae.tags))}}return ae.length?ae:null}function pr(Q,k,L,q,X){for(let se=0;se<Q.length;se+=3){const de=Q[se+X];de>=L&&de<=q&&bi(k,Q[se],Q[se+1],Q[se+2])}}function La(Q,k,L,q,X,se,de){let me=ua(Q);const ae=X===0?da:ha;let Ae,De,ve=Q.start;for(let Le=0;Le<Q.length-3;Le+=3){const ze=Q[Le],nt=Q[Le+1],Oe=Q[Le+2],gt=Q[Le+3],Ve=Q[Le+4],st=X===0?ze:nt,xt=X===0?gt:Ve;let Tt=!1;de&&(Ae=Math.sqrt(Math.pow(ze-gt,2)+Math.pow(nt-Ve,2))),st<L?xt>L&&(De=ae(me,ze,nt,gt,Ve,L),de&&(me.start=ve+Ae*De)):st>q?xt<q&&(De=ae(me,ze,nt,gt,Ve,q),de&&(me.start=ve+Ae*De)):bi(me,ze,nt,Oe),xt<L&&st>=L&&(De=ae(me,ze,nt,gt,Ve,L),Tt=!0),xt>q&&st<=q&&(De=ae(me,ze,nt,gt,Ve,q),Tt=!0),!se&&Tt&&(de&&(me.end=ve+Ae*De),k.push(me),me=ua(Q)),de&&(ve+=Ae)}let $=Q.length-3;const ee=Q[$],ue=Q[$+1],xe=X===0?ee:ue;xe>=L&&xe<=q&&bi(me,ee,ue,Q[$+2]),$=me.length-3,se&&$>=3&&(me[$]!==me[0]||me[$+1]!==me[1])&&bi(me,me[0],me[1],me[2]),me.length&&k.push(me)}function ua(Q){const k=[];return k.size=Q.size,k.start=Q.start,k.end=Q.end,k}function fr(Q,k,L,q,X,se){for(const de of Q)La(de,k,L,q,X,se,!1)}function bi(Q,k,L,q){Q.push(k,L,q)}function da(Q,k,L,q,X,se){const de=(se-k)/(q-k);return bi(Q,se,L+(X-L)*de,1),de}function ha(Q,k,L,q,X,se){const de=(se-L)/(X-L);return bi(Q,k+(q-k)*de,se,1),de}function Ne(Q,k){const L=[];for(let q=0;q<Q.length;q++){const X=Q[q],se=X.type;let de;if(se==="Point"||se==="MultiPoint"||se==="LineString")de=wi(X.geometry,k);else if(se==="MultiLineString"||se==="Polygon"){de=[];for(const me of X.geometry)de.push(wi(me,k))}else if(se==="MultiPolygon"){de=[];for(const me of X.geometry){const ae=[];for(const Ae of me)ae.push(wi(Ae,k));de.push(ae)}}L.push(ca(X.id,se,de,X.tags))}return L}function wi(Q,k){const L=[];L.size=Q.size,Q.start!==void 0&&(L.start=Q.start,L.end=Q.end);for(let q=0;q<Q.length;q+=3)L.push(Q[q]+k,Q[q+1],Q[q+2]);return L}function fn(Q,k){if(Q.transformed)return Q;const L=1<<Q.z,q=Q.x,X=Q.y;for(const se of Q.features){const de=se.geometry,me=se.type;if(se.geometry=[],me===1)for(let ae=0;ae<de.length;ae+=2)se.geometry.push(Bn(de[ae],de[ae+1],k,L,q,X));else for(let ae=0;ae<de.length;ae++){const Ae=[];for(let De=0;De<de[ae].length;De+=2)Ae.push(Bn(de[ae][De],de[ae][De+1],k,L,q,X));se.geometry.push(Ae)}}return Q.transformed=!0,Q}function Bn(Q,k,L,q,X,se){return[Math.round(L*(Q*q-X)),Math.round(L*(k*q-se))]}function pa(Q,k,L,q,X){const se=k===X.maxZoom?0:X.tolerance/((1<<k)*X.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:Q.length,source:null,x:L,y:q,z:k,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const me of Q)Ue(de,me,se,X);return de}function Ue(Q,k,L,q){const X=k.geometry,se=k.type,de=[];if(Q.minX=Math.min(Q.minX,k.minX),Q.minY=Math.min(Q.minY,k.minY),Q.maxX=Math.max(Q.maxX,k.maxX),Q.maxY=Math.max(Q.maxY,k.maxY),se==="Point"||se==="MultiPoint")for(let me=0;me<X.length;me+=3)de.push(X[me],X[me+1]),Q.numPoints++,Q.numSimplified++;else if(se==="LineString")Pt(de,X,Q,L,!1,!1);else if(se==="MultiLineString"||se==="Polygon")for(let me=0;me<X.length;me++)Pt(de,X[me],Q,L,se==="Polygon",me===0);else if(se==="MultiPolygon")for(let me=0;me<X.length;me++){const ae=X[me];for(let Ae=0;Ae<ae.length;Ae++)Pt(de,ae[Ae],Q,L,!0,Ae===0)}if(de.length){let me=k.tags||null;if(se==="LineString"&&q.lineMetrics){me={};for(const Ae in k.tags)me[Ae]=k.tags[Ae];me.mapbox_clip_start=X.start/X.size,me.mapbox_clip_end=X.end/X.size}const ae={geometry:de,type:se==="Polygon"||se==="MultiPolygon"?3:se==="LineString"||se==="MultiLineString"?2:1,tags:me};k.id!==null&&(ae.id=k.id),Q.features.push(ae)}}function Pt(Q,k,L,q,X,se){const de=q*q;if(q>0&&k.size<(X?de:q))return void(L.numPoints+=k.length/3);const me=[];for(let ae=0;ae<k.length;ae+=3)(q===0||k[ae+2]>de)&&(L.numSimplified++,me.push(k[ae],k[ae+1])),L.numPoints++;X&&function(ae,Ae){let De=0;for(let ve=0,$=ae.length,ee=$-2;ve<$;ee=ve,ve+=2)De+=(ae[ve]-ae[ee])*(ae[ve+1]+ae[ee+1]);if(De>0===Ae)for(let ve=0,$=ae.length;ve<$/2;ve+=2){const ee=ae[ve],ue=ae[ve+1];ae[ve]=ae[$-2-ve],ae[ve+1]=ae[$-1-ve],ae[$-2-ve]=ee,ae[$-1-ve]=ue}}(me,se),Q.push(me)}const yt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Yn{constructor(k,L){const q=(L=this.options=function(se,de){for(const me in de)se[me]=de[me];return se}(Object.create(yt),L)).debug;if(q&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");let X=function(se,de){const me=[];if(se.type==="FeatureCollection")for(let ae=0;ae<se.features.length;ae++)pn(me,se.features[ae],de,ae);else pn(me,se.type==="Feature"?se:{geometry:se},de);return me}(k,L);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(se,de){const me=de.buffer/de.extent;let ae=se;const Ae=un(se,1,-1-me,me,0,-1,2,de),De=un(se,1,1-me,2+me,0,-1,2,de);return(Ae||De)&&(ae=un(se,1,-me,1+me,0,-1,2,de)||[],Ae&&(ae=Ne(Ae,1).concat(ae)),De&&(ae=ae.concat(Ne(De,-1)))),ae}(X,L),X.length&&this.splitTile(X,0,0,0),q&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(k,L,q,X,se,de,me){const ae=[k,L,q,X],Ae=this.options,De=Ae.debug;for(;ae.length;){X=ae.pop(),q=ae.pop(),L=ae.pop(),k=ae.pop();const ve=1<<L,$=Ci(L,q,X);let ee=this.tiles[$];if(!ee&&(De>1&&console.time("creation"),ee=this.tiles[$]=pa(k,L,q,X,Ae),this.tileCoords.push({z:L,x:q,y:X}),De)){De>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,q,X,ee.numFeatures,ee.numPoints,ee.numSimplified),console.timeEnd("creation"));const Tt=`z${L}`;this.stats[Tt]=(this.stats[Tt]||0)+1,this.total++}if(ee.source=k,se==null){if(L===Ae.indexMaxZoom||ee.numPoints<=Ae.indexMaxPoints)continue}else{if(L===Ae.maxZoom||L===se)continue;if(se!=null){const Tt=se-L;if(q!==de>>Tt||X!==me>>Tt)continue}}if(ee.source=null,k.length===0)continue;De>1&&console.time("clipping");const ue=.5*Ae.buffer/Ae.extent,xe=.5-ue,Le=.5+ue,ze=1+ue;let nt=null,Oe=null,gt=null,Ve=null,st=un(k,ve,q-ue,q+Le,0,ee.minX,ee.maxX,Ae),xt=un(k,ve,q+xe,q+ze,0,ee.minX,ee.maxX,Ae);k=null,st&&(nt=un(st,ve,X-ue,X+Le,1,ee.minY,ee.maxY,Ae),Oe=un(st,ve,X+xe,X+ze,1,ee.minY,ee.maxY,Ae),st=null),xt&&(gt=un(xt,ve,X-ue,X+Le,1,ee.minY,ee.maxY,Ae),Ve=un(xt,ve,X+xe,X+ze,1,ee.minY,ee.maxY,Ae),xt=null),De>1&&console.timeEnd("clipping"),ae.push(nt||[],L+1,2*q,2*X),ae.push(Oe||[],L+1,2*q,2*X+1),ae.push(gt||[],L+1,2*q+1,2*X),ae.push(Ve||[],L+1,2*q+1,2*X+1)}}getTile(k,L,q){k=+k,L=+L,q=+q;const X=this.options,{extent:se,debug:de}=X;if(k<0||k>24)return null;const me=1<<k,ae=Ci(k,L=L+me&me-1,q);if(this.tiles[ae])return fn(this.tiles[ae],se);de>1&&console.log("drilling down to z%d-%d-%d",k,L,q);let Ae,De=k,ve=L,$=q;for(;!Ae&&De>0;)De--,ve>>=1,$>>=1,Ae=this.tiles[Ci(De,ve,$)];return Ae&&Ae.source?(de>1&&(console.log("found parent tile z%d-%d-%d",De,ve,$),console.time("drilling down")),this.splitTile(Ae.source,De,ve,$,k,L,q),de>1&&console.timeEnd("drilling down"),this.tiles[ae]?fn(this.tiles[ae],se):null):null}}function Ci(Q,k,L){return 32*((1<<Q)*L+k)+Q}function At(Q,k){return k?Q.properties[k]:Q.id}function Ji(Q,k){if(Q==null)return!0;if(Q.type==="Feature")return At(Q,k)!=null;if(Q.type==="FeatureCollection"){const L=new Set;for(const q of Q.features){const X=At(q,k);if(X==null||L.has(X))return!1;L.add(X)}return!0}return!1}function Yi(Q,k){const L=new Map;if(Q!=null)if(Q.type==="Feature")L.set(At(Q,k),Q);else for(const q of Q.features)L.set(At(q,k),q);return L}class Bi extends j{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(k,L){return v._(this,void 0,void 0,function*(){const q=k.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const X=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!X)return null;const se=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=v.X,this.length=me.length,this._features=me}feature(me){return new class{constructor(ae){this._feature=ae,this.extent=v.X,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const Ae of this._feature.geometry)ae.push([new v.P(Ae[0],Ae[1])]);return ae}{const ae=[];for(const Ae of this._feature.geometry){const De=[];for(const ve of Ae)De.push(new v.P(ve[0],ve[1]));ae.push(De)}return ae}}toGeoJSON(ae,Ae,De){return Ge.call(this,ae,Ae,De)}}(this._features[me])}}(X.features);let de=Un(se);return de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),{vectorTile:se,rawData:de.buffer}})}loadData(k){return v._(this,void 0,void 0,function*(){var L;(L=this._pendingRequest)===null||L===void 0||L.abort();const q=!!(k&&k.request&&k.request.collectResourceTiming)&&new v.bu(k.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(k,this._pendingRequest),this._geoJSONIndex=k.cluster?new yn(function({superclusterOptions:de,clusterProperties:me}){if(!me||!de)return de;const ae={},Ae={},De={accumulated:null,zoom:0},ve={properties:null},$=Object.keys(me);for(const ee of $){const[ue,xe]=me[ee],Le=v.bB(xe),ze=v.bB(typeof ue=="string"?[ue,["accumulated"],["get",ee]]:ue);ae[ee]=Le.value,Ae[ee]=ze.value}return de.map=ee=>{ve.properties=ee;const ue={};for(const xe of $)ue[xe]=ae[xe].evaluate(De,ve);return ue},de.reduce=(ee,ue)=>{ve.properties=ue;for(const xe of $)De.accumulated=ee[xe],ee[xe]=Ae[xe].evaluate(De,ve)},de}(k)).load((yield this._pendingData).features):(X=yield this._pendingData,new Yn(X,k.geojsonVtOptions)),this.loaded={};const se={};if(q){const de=q.finish();de&&(se.resourceTiming={},se.resourceTiming[k.source]=JSON.parse(JSON.stringify(de)))}return se}catch(se){if(delete this._pendingRequest,v.bA(se))return{abandoned:!0};throw se}var X})}getData(){return v._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(k){const L=this.loaded;return L&&L[k.uid]?super.reloadTile(k):this.loadTile(k)}loadAndProcessGeoJSON(k,L){return v._(this,void 0,void 0,function*(){let q=yield this.loadGeoJSON(k,L);if(delete this._pendingRequest,typeof q!="object")throw new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`);if(we(q,!0),k.filter){const X=v.bB(k.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(X.result==="error")throw new Error(X.value.map(de=>`${de.key}: ${de.message}`).join(", "));q={type:"FeatureCollection",features:q.features.filter(de=>X.value.evaluate({zoom:0},de))}}return q})}loadGeoJSON(k,L){return v._(this,void 0,void 0,function*(){const{promoteId:q}=k;if(k.request){const X=yield v.h(k.request,L);return this._dataUpdateable=Ji(X.data,q)?Yi(X.data,q):void 0,X.data}if(typeof k.data=="string")try{const X=JSON.parse(k.data);return this._dataUpdateable=Ji(X,q)?Yi(X,q):void 0,X}catch{throw new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`)}if(!k.dataDiff)throw new Error(`Input data given to '${k.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${k.source}`);return function(X,se,de){var me,ae,Ae,De;if(se.removeAll&&X.clear(),se.remove)for(const ve of se.remove)X.delete(ve);if(se.add)for(const ve of se.add){const $=At(ve,de);$!=null&&X.set($,ve)}if(se.update)for(const ve of se.update){let $=X.get(ve.id);if($==null)continue;const ee=!ve.removeAllProperties&&(((me=ve.removeProperties)===null||me===void 0?void 0:me.length)>0||((ae=ve.addOrUpdateProperties)===null||ae===void 0?void 0:ae.length)>0);if((ve.newGeometry||ve.removeAllProperties||ee)&&($=Object.assign({},$),X.set(ve.id,$),ee&&($.properties=Object.assign({},$.properties))),ve.newGeometry&&($.geometry=ve.newGeometry),ve.removeAllProperties)$.properties={};else if(((Ae=ve.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(const ue of ve.removeProperties)Object.prototype.hasOwnProperty.call($.properties,ue)&&delete $.properties[ue];if(((De=ve.addOrUpdateProperties)===null||De===void 0?void 0:De.length)>0)for(const{key:ue,value:xe}of ve.addOrUpdateProperties)$.properties[ue]=xe}}(this._dataUpdateable,k.dataDiff,q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(k){return v._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(k){return this._geoJSONIndex.getClusterExpansionZoom(k.clusterId)}getClusterChildren(k){return this._geoJSONIndex.getChildren(k.clusterId)}getClusterLeaves(k){return this._geoJSONIndex.getLeaves(k.clusterId,k.limit,k.offset)}}class Fi{constructor(k){this.self=k,this.actor=new v.F(k),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(L,q)=>{if(this.externalWorkerSourceTypes[L])throw new Error(`Worker source with name "${L}" already registered.`);this.externalWorkerSourceTypes[L]=q},this.self.addProtocol=v.bh,this.self.removeProtocol=v.bi,this.self.registerRTLTextPlugin=L=>{if(v.bC.isParsed())throw new Error("RTL text plugin already registered.");v.bC.setMethods(L)},this.actor.registerMessageHandler("LDT",(L,q)=>this._getDEMWorkerSource(L,q.source).loadTile(q)),this.actor.registerMessageHandler("RDT",(L,q)=>v._(this,void 0,void 0,function*(){this._getDEMWorkerSource(L,q.source).removeTile(q)})),this.actor.registerMessageHandler("GCEZ",(L,q)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(L,q.type,q.source).getClusterExpansionZoom(q)})),this.actor.registerMessageHandler("GCC",(L,q)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(L,q.type,q.source).getClusterChildren(q)})),this.actor.registerMessageHandler("GCL",(L,q)=>v._(this,void 0,void 0,function*(){return this._getWorkerSource(L,q.type,q.source).getClusterLeaves(q)})),this.actor.registerMessageHandler("LD",(L,q)=>this._getWorkerSource(L,q.type,q.source).loadData(q)),this.actor.registerMessageHandler("GD",(L,q)=>this._getWorkerSource(L,q.type,q.source).getData()),this.actor.registerMessageHandler("LT",(L,q)=>this._getWorkerSource(L,q.type,q.source).loadTile(q)),this.actor.registerMessageHandler("RT",(L,q)=>this._getWorkerSource(L,q.type,q.source).reloadTile(q)),this.actor.registerMessageHandler("AT",(L,q)=>this._getWorkerSource(L,q.type,q.source).abortTile(q)),this.actor.registerMessageHandler("RMT",(L,q)=>this._getWorkerSource(L,q.type,q.source).removeTile(q)),this.actor.registerMessageHandler("RS",(L,q)=>v._(this,void 0,void 0,function*(){if(!this.workerSources[L]||!this.workerSources[L][q.type]||!this.workerSources[L][q.type][q.source])return;const X=this.workerSources[L][q.type][q.source];delete this.workerSources[L][q.type][q.source],X.removeSource!==void 0&&X.removeSource(q)})),this.actor.registerMessageHandler("RM",L=>v._(this,void 0,void 0,function*(){delete this.layerIndexes[L],delete this.availableImages[L],delete this.workerSources[L],delete this.demWorkerSources[L]})),this.actor.registerMessageHandler("SR",(L,q)=>v._(this,void 0,void 0,function*(){this.referrer=q})),this.actor.registerMessageHandler("SRPS",(L,q)=>this._syncRTLPluginState(L,q)),this.actor.registerMessageHandler("IS",(L,q)=>v._(this,void 0,void 0,function*(){this.self.importScripts(q)})),this.actor.registerMessageHandler("SI",(L,q)=>this._setImages(L,q)),this.actor.registerMessageHandler("UL",(L,q)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(L).update(q.layers,q.removedIds)})),this.actor.registerMessageHandler("SL",(L,q)=>v._(this,void 0,void 0,function*(){this._getLayerIndex(L).replace(q)}))}_setImages(k,L){return v._(this,void 0,void 0,function*(){this.availableImages[k]=L;for(const q in this.workerSources[k]){const X=this.workerSources[k][q];for(const se in X)X[se].availableImages=L}})}_syncRTLPluginState(k,L){return v._(this,void 0,void 0,function*(){if(v.bC.isParsed())return v.bC.getState();if(L.pluginStatus!=="loading")return v.bC.setState(L),L;const q=L.pluginURL;if(this.self.importScripts(q),v.bC.isParsed()){const X={pluginStatus:"loaded",pluginURL:q};return v.bC.setState(X),X}throw v.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${q}`)})}_getAvailableImages(k){let L=this.availableImages[k];return L||(L=[]),L}_getLayerIndex(k){let L=this.layerIndexes[k];return L||(L=this.layerIndexes[k]=new u),L}_getWorkerSource(k,L,q){if(this.workerSources[k]||(this.workerSources[k]={}),this.workerSources[k][L]||(this.workerSources[k][L]={}),!this.workerSources[k][L][q]){const X={sendAsync:(se,de)=>(se.targetMapId=k,this.actor.sendAsync(se,de))};switch(L){case"vector":this.workerSources[k][L][q]=new j(X,this._getLayerIndex(k),this._getAvailableImages(k));break;case"geojson":this.workerSources[k][L][q]=new Bi(X,this._getLayerIndex(k),this._getAvailableImages(k));break;default:this.workerSources[k][L][q]=new this.externalWorkerSourceTypes[L](X,this._getLayerIndex(k),this._getAvailableImages(k))}}return this.workerSources[k][L][q]}_getDEMWorkerSource(k,L){return this.demWorkerSources[k]||(this.demWorkerSources[k]={}),this.demWorkerSources[k][L]||(this.demWorkerSources[k][L]=new N),this.demWorkerSources[k][L]}}return v.i(self)&&(self.worker=new Fi(self)),Fi}),_("index",["exports","./shared"],function(v,u){var z="4.6.0";let V,W;const j={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:m=>new Promise((e,o)=>{const c=requestAnimationFrame(e);m.signal.addEventListener("abort",()=>{cancelAnimationFrame(c),o(u.c())})}),getImageData(m,e=0){return this.getImageCanvasContext(m).getImageData(-e,-e,m.width+2*e,m.height+2*e)},getImageCanvasContext(m){const e=window.document.createElement("canvas"),o=e.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return e.width=m.width,e.height=m.height,o.drawImage(m,0,0,m.width,m.height),o},resolveURL:m=>(V||(V=document.createElement("a")),V.href=m,V.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(W==null&&(W=matchMedia("(prefers-reduced-motion: reduce)")),W.matches)}};class N{static testProp(e){if(!N.docStyle)return e[0];for(let o=0;o<e.length;o++)if(e[o]in N.docStyle)return e[o];return e[0]}static create(e,o,c){const d=window.document.createElement(e);return o!==void 0&&(d.className=o),c&&c.appendChild(d),d}static createNS(e,o){return window.document.createElementNS(e,o)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(e,o){e.style[N.transformProp]=o}static addEventListener(e,o,c,d={}){e.addEventListener(o,c,"passive"in d?d:d.capture)}static removeEventListener(e,o,c,d={}){e.removeEventListener(o,c,"passive"in d?d:d.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",N.suppressClickInternal,!0)},0)}static getScale(e){const o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}static getPoint(e,o,c){const d=o.boundingClientRect;return new u.P((c.clientX-d.left)/o.x-e.clientLeft,(c.clientY-d.top)/o.y-e.clientTop)}static mousePos(e,o){const c=N.getScale(e);return N.getPoint(e,c,o)}static touchPos(e,o){const c=[],d=N.getScale(e);for(let g=0;g<o.length;g++)c.push(N.getPoint(e,d,o[g]));return c}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}N.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);const Te={supported:!1,testSupport:function(m){!Ge&&we&&(re?ie(m):Ce=m)}};let Ce,we,Ge=!1,re=!1;function ie(m){const e=m.createTexture();m.bindTexture(m.TEXTURE_2D,e);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,we),m.isContextLost())return;Te.supported=!0}catch{}m.deleteTexture(e),Ge=!0}var ce;typeof document<"u"&&(we=document.createElement("img"),we.onload=()=>{Ce&&ie(Ce),Ce=null,re=!0},we.onerror=()=>{Ge=!0,Ce=null},we.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let e,o,c,d;m.resetRequestQueue=()=>{e=[],o=0,c=0,d={}},m.addThrottleControl=S=>{const T=c++;return d[T]=S,T},m.removeThrottleControl=S=>{delete d[S],w()},m.getImage=(S,T,D=!0)=>new Promise((P,B)=>{Te.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*"),u.e(S,{type:"image"}),e.push({abortController:T,requestParameters:S,supportImageRefresh:D,state:"queued",onError:G=>{B(G)},onSuccess:G=>{P(G)}}),w()});const g=S=>u._(this,void 0,void 0,function*(){S.state="running";const{requestParameters:T,supportImageRefresh:D,onError:P,onSuccess:B,abortController:G}=S,H=D===!1&&!u.i(self)&&!u.g(T.url)&&(!T.headers||Object.keys(T.headers).reduce((te,oe)=>te&&oe==="accept",!0));o++;const Y=H?A(T,G):u.m(T,G);try{const te=yield Y;delete S.abortController,S.state="completed",te.data instanceof HTMLImageElement||u.b(te.data)?B(te):te.data&&B({data:yield(Z=te.data,typeof createImageBitmap=="function"?u.d(Z):u.f(Z)),cacheControl:te.cacheControl,expires:te.expires})}catch(te){delete S.abortController,P(te)}finally{o--,w()}var Z}),w=()=>{const S=(()=>{for(const T of Object.keys(d))if(d[T]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let T=o;T<S&&e.length>0;T++){const D=e.shift();D.abortController.signal.aborted?T--:g(D)}},A=(S,T)=>new Promise((D,P)=>{const B=new Image,G=S.url,H=S.credentials;H&&H==="include"?B.crossOrigin="use-credentials":(H&&H==="same-origin"||!u.s(G))&&(B.crossOrigin="anonymous"),T.signal.addEventListener("abort",()=>{B.src="",P(u.c())}),B.fetchPriority="high",B.onload=()=>{B.onerror=B.onload=null,D({data:B})},B.onerror=()=>{B.onerror=B.onload=null,T.signal.aborted||P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},B.src=G})}(ce||(ce={})),ce.resetRequestQueue();class Ee{constructor(e){this._transformRequestFn=e}transformRequest(e,o){return this._transformRequestFn&&this._transformRequestFn(e,o)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ke(m){var e=new u.A(3);return e[0]=m[0],e[1]=m[1],e[2]=m[2],e}var Xe,Qe=function(m,e,o){return m[0]=e[0]-o[0],m[1]=e[1]-o[1],m[2]=e[2]-o[2],m};Xe=new u.A(3),u.A!=Float32Array&&(Xe[0]=0,Xe[1]=0,Xe[2]=0);var pe=function(m){var e=m[0],o=m[1];return e*e+o*o};function pt(m){const e=[];if(typeof m=="string")e.push({id:"default",url:m});else if(m&&m.length>0){const o=[];for(const{id:c,url:d}of m){const g=`${c}${d}`;o.indexOf(g)===-1&&(o.push(g),e.push({id:c,url:d}))}}return e}function ct(m,e,o){const c=m.split("?");return c[0]+=`${e}${o}`,c.join("?")}(function(){var m=new u.A(2);u.A!=Float32Array&&(m[0]=0,m[1]=0)})();class ot{constructor(e,o,c,d){this.context=e,this.format=c,this.texture=e.gl.createTexture(),this.update(o,d)}update(e,o,c){const{width:d,height:g}=e,w=!(this.size&&this.size[0]===d&&this.size[1]===g||c),{context:A}=this,{gl:S}=A;if(this.useMipmap=!!(o&&o.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!o||o.premultiply!==!1)),w)this.size=[d,g],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,d,g,0,this.format,S.UNSIGNED_BYTE,e.data);else{const{x:T,y:D}=c||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?S.texSubImage2D(S.TEXTURE_2D,0,T,D,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,T,D,d,g,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)}bind(e,o,c){const{context:d}=this,{gl:g}=d;g.bindTexture(g.TEXTURE_2D,this.texture),c!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=g.LINEAR),e!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,e),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,c||e),this.filter=e),o!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function Xt(m){const{userImage:e}=m;return!!(e&&e.render&&e.render())&&(m.data.replace(new Uint8Array(e.data.buffer)),!0)}class Ft extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:o,promiseResolve:c}of this.requestors)c(this._getImagesForIds(o));this.requestors=[]}}getImage(e){const o=this.images[e];if(o&&!o.data&&o.spriteData){const c=o.spriteData;o.data=new u.R({width:c.width,height:c.height},c.context.getImageData(c.x,c.y,c.width,c.height).data),o.spriteData=null}return o}addImage(e,o){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,o)&&(this.images[e]=o)}_validate(e,o){let c=!0;const d=o.data||o.spriteData;return this._validateStretch(o.stretchX,d&&d.width)||(this.fire(new u.j(new Error(`Image "${e}" has invalid "stretchX" value`))),c=!1),this._validateStretch(o.stretchY,d&&d.height)||(this.fire(new u.j(new Error(`Image "${e}" has invalid "stretchY" value`))),c=!1),this._validateContent(o.content,o)||(this.fire(new u.j(new Error(`Image "${e}" has invalid "content" value`))),c=!1),c}_validateStretch(e,o){if(!e)return!0;let c=0;for(const d of e){if(d[0]<c||d[1]<d[0]||o<d[1])return!1;c=d[1]}return!0}_validateContent(e,o){if(!e)return!0;if(e.length!==4)return!1;const c=o.spriteData,d=c&&c.width||o.data.width,g=c&&c.height||o.data.height;return!(e[0]<0||d<e[0]||e[1]<0||g<e[1]||e[2]<0||d<e[2]||e[3]<0||g<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,o,c=!0){const d=this.getImage(e);if(c&&(d.data.width!==o.data.width||d.data.height!==o.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=d.version+1,this.images[e]=o,this.updatedImages[e]=!0}removeImage(e){const o=this.images[e];delete this.images[e],delete this.patterns[e],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((o,c)=>{let d=!0;if(!this.isLoaded())for(const g of e)this.images[g]||(d=!1);this.isLoaded()||d?o(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:o})})}_getImagesForIds(e){const o={};for(const c of e){let d=this.getImage(c);d||(this.fire(new u.k("styleimagemissing",{id:c})),d=this.getImage(c)),d?o[c]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:u.w(`Image "${c}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:e,height:o}=this.atlasImage;return{width:e,height:o}}getPattern(e){const o=this.patterns[e],c=this.getImage(e);if(!c)return null;if(o&&o.position.version===c.version)return o.position;if(o)o.position.version=c.version;else{const d={w:c.data.width+2,h:c.data.height+2,x:0,y:0},g=new u.I(d,c);this.patterns[e]={bin:d,position:g}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const o=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ot(e,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const g in this.patterns)e.push(this.patterns[g].bin);const{w:o,h:c}=u.p(e),d=this.atlasImage;d.resize({width:o||1,height:c||1});for(const g in this.patterns){const{bin:w}=this.patterns[g],A=w.x+1,S=w.y+1,T=this.getImage(g).data,D=T.width,P=T.height;u.R.copy(T,d,{x:0,y:0},{x:A,y:S},{width:D,height:P}),u.R.copy(T,d,{x:0,y:P-1},{x:A,y:S-1},{width:D,height:1}),u.R.copy(T,d,{x:0,y:0},{x:A,y:S+P},{width:D,height:1}),u.R.copy(T,d,{x:D-1,y:0},{x:A-1,y:S},{width:1,height:P}),u.R.copy(T,d,{x:0,y:0},{x:A+D,y:S},{width:1,height:P})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const o of e){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const c=this.getImage(o);c||u.w(`Image with ID: "${o}" was not found`),Xt(c)&&this.updateImage(o,c)}}}const Ot=1e20;function Ln(m,e,o,c,d,g,w,A,S){for(let T=e;T<e+c;T++)$n(m,o*g+T,g,d,w,A,S);for(let T=o;T<o+d;T++)$n(m,T*g+e,1,c,w,A,S)}function $n(m,e,o,c,d,g,w){g[0]=0,w[0]=-Ot,w[1]=Ot,d[0]=m[e];for(let A=1,S=0,T=0;A<c;A++){d[A]=m[e+A*o];const D=A*A;do{const P=g[S];T=(d[A]-d[P]+D-P*P)/(A-P)/2}while(T<=w[S]&&--S>-1);S++,g[S]=A,w[S]=T,w[S+1]=Ot}for(let A=0,S=0;A<c;A++){for(;w[S+1]<A;)S++;const T=g[S],D=A-T;m[e+A*o]=d[T]+D*D}}class Un{constructor(e,o){this.requestManager=e,this.localIdeographFontFamily=o,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return u._(this,void 0,void 0,function*(){const o=[];for(const g in e)for(const w of e[g])o.push(this._getAndCacheGlyphsPromise(g,w));const c=yield Promise.all(o),d={};for(const{stack:g,id:w,glyph:A}of c)d[g]||(d[g]={}),d[g][w]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return d})}_getAndCacheGlyphsPromise(e,o){return u._(this,void 0,void 0,function*(){let c=this.entries[e];c||(c=this.entries[e]={glyphs:{},requests:{},ranges:{}});let d=c.glyphs[o];if(d!==void 0)return{stack:e,id:o,glyph:d};if(d=this._tinySDF(c,e,o),d)return c.glyphs[o]=d,{stack:e,id:o,glyph:d};const g=Math.floor(o/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(c.ranges[g])return{stack:e,id:o,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!c.requests[g]){const A=Un.loadGlyphRange(e,g,this.url,this.requestManager);c.requests[g]=A}const w=yield c.requests[g];for(const A in w)this._doesCharSupportLocalGlyph(+A)||(c.glyphs[+A]=w[+A]);return c.ranges[g]=!0,{stack:e,id:o,glyph:w[o]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))}_tinySDF(e,o,c){const d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(c))return;let g=e.tinySDF;if(!g){let A="400";/bold/i.test(o)?A="900":/medium/i.test(o)?A="500":/light/i.test(o)&&(A="200"),g=e.tinySDF=new Un.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:A})}const w=g.draw(String.fromCharCode(c));return{id:c,bitmap:new u.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Un.loadGlyphRange=function(m,e,o,c){return u._(this,void 0,void 0,function*(){const d=256*e,g=d+255,w=c.transformRequest(o.replace("{fontstack}",m).replace("{range}",`${d}-${g}`),"Glyphs"),A=yield u.l(w,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${e}, ${d}-${g}`);const S={};for(const T of u.n(A.data))S[T.id]=T;return S})},Un.TinySDF=class{constructor({fontSize:m=24,buffer:e=3,radius:o=8,cutoff:c=.25,fontFamily:d="sans-serif",fontWeight:g="normal",fontStyle:w="normal"}={}){this.buffer=e,this.cutoff=c,this.radius=o;const A=this.size=m+4*e,S=this._createCanvas(A),T=this.ctx=S.getContext("2d",{willReadFrequently:!0});T.font=`${w} ${g} ${m}px ${d}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(m){const e=document.createElement("canvas");return e.width=e.height=m,e}draw(m){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:c,actualBoundingBoxLeft:d,actualBoundingBoxRight:g}=this.ctx.measureText(m),w=Math.ceil(o),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-d))),S=Math.min(this.size-this.buffer,w+Math.ceil(c)),T=A+2*this.buffer,D=S+2*this.buffer,P=Math.max(T*D,0),B=new Uint8ClampedArray(P),G={data:B,width:T,height:D,glyphWidth:A,glyphHeight:S,glyphTop:w,glyphLeft:0,glyphAdvance:e};if(A===0||S===0)return G;const{ctx:H,buffer:Y,gridInner:Z,gridOuter:te}=this;H.clearRect(Y,Y,A,S),H.fillText(m,Y,Y+w);const oe=H.getImageData(Y,Y,A,S);te.fill(Ot,0,P),Z.fill(0,0,P);for(let K=0;K<S;K++)for(let he=0;he<A;he++){const ge=oe.data[4*(K*A+he)+3]/255;if(ge===0)continue;const _e=(K+Y)*T+he+Y;if(ge===1)te[_e]=0,Z[_e]=Ot;else{const Pe=.5-ge;te[_e]=Pe>0?Pe*Pe:0,Z[_e]=Pe<0?Pe*Pe:0}}Ln(te,0,0,T,D,T,this.f,this.v,this.z),Ln(Z,Y,Y,A,S,T,this.f,this.v,this.z);for(let K=0;K<P;K++){const he=Math.sqrt(te[K])-Math.sqrt(Z[K]);B[K]=Math.round(255-255*(he/this.radius+this.cutoff))}return G}};class at{constructor(){this.specification=u.v.light.position}possiblyEvaluate(e,o){return u.x(e.expression.evaluate(o))}interpolate(e,o,c){return{x:u.y.number(e.x,o.x,c),y:u.y.number(e.y,o.y,c),z:u.y.number(e.z,o.z,c)}}}let ut;class bt extends u.E{constructor(e){super(),ut=ut||new u.q({anchor:new u.D(u.v.light.anchor),position:new at,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(ut),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,o={}){if(!this._validate(u.r,e,o))for(const c in e){const d=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),d):this._transitionable.setValue(c,d)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,c){return(!c||c.validate!==!1)&&u.t(this,e.call(u.u,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Rt=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Nt extends u.E{constructor(e){super(),this._transitionable=new u.T(Rt),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(e,o={}){if(!this._validate(u.B,e,o)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent"});for(const c in e){const d=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),d):this._transitionable.setValue(c,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,c={}){return(c==null?void 0:c.validate)!==!1&&u.t(this,e.call(u.u,u.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Tn{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,o){const c=e.join(",")+String(o);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(e,o)),this.dashEntry[c]}getDashRanges(e,o,c){const d=[];let g=e.length%2==1?-e[e.length-1]*c:0,w=e[0]*c,A=!0;d.push({left:g,right:w,isDash:A,zeroLength:e[0]===0});let S=e[0];for(let T=1;T<e.length;T++){A=!A;const D=e[T];g=S*c,S+=D,w=S*c,d.push({left:g,right:w,isDash:A,zeroLength:D===0})}return d}addRoundDash(e,o,c){const d=o/2;for(let g=-c;g<=c;g++){const w=this.width*(this.nextRow+c+g);let A=0,S=e[A];for(let T=0;T<this.width;T++){T/S.right>1&&(S=e[++A]);const D=Math.abs(T-S.left),P=Math.abs(T-S.right),B=Math.min(D,P);let G;const H=g/c*(d+1);if(S.isDash){const Y=d-Math.abs(H);G=Math.sqrt(B*B+Y*Y)}else G=d-Math.sqrt(B*B+H*H);this.data[w+T]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(e){for(let A=e.length-1;A>=0;--A){const S=e[A],T=e[A+1];S.zeroLength?e.splice(A,1):T&&T.isDash===S.isDash&&(T.left=S.left,e.splice(A,1))}const o=e[0],c=e[e.length-1];o.isDash===c.isDash&&(o.left=c.left-this.width,c.right=o.right+this.width);const d=this.width*this.nextRow;let g=0,w=e[g];for(let A=0;A<this.width;A++){A/w.right>1&&(w=e[++g]);const S=Math.abs(A-w.left),T=Math.abs(A-w.right),D=Math.min(S,T);this.data[d+A]=Math.max(0,Math.min(255,(w.isDash?D:-D)+128))}}addDash(e,o){const c=o?7:0,d=2*c+1;if(this.nextRow+d>this.height)return u.w("LineAtlas out of space"),null;let g=0;for(let A=0;A<e.length;A++)g+=e[A];if(g!==0){const A=this.width/g,S=this.getDashRanges(e,this.width,A);o?this.addRoundDash(S,A,c):this.addRegularDash(S)}const w={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:g};return this.nextRow+=d,this.dirty=!0,w}bind(e){const o=e.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const yn="maplibre_preloaded_worker_pool";class On{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<On.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[yn]}numActive(){return Object.keys(this.active).length}}const hn=Math.floor(j.hardwareConcurrency/2);let rn,qn;function Xa(){return rn||(rn=new On),rn}On.workerCount=u.C(globalThis)?Math.max(Math.min(hn,3),1):1;class la{constructor(e,o){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=o;const c=this.workerPool.acquire(o);for(let d=0;d<c.length;d++){const g=new u.F(c[d],o);g.name=`Worker ${d}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,o){const c=[];for(const d of this.actors)c.push(d.sendAsync({type:e,data:o}));return Promise.all(c)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,o){for(const c of this.actors)c.registerMessageHandler(e,o)}}function Rr(){return qn||(qn=new la(Xa(),u.G),qn.registerMessageHandler("GR",(m,e,o)=>u.m(e,o))),qn}function ca(m,e){const o=u.H();return u.J(o,o,[1,1,0]),u.K(o,o,[.5*m.width,.5*m.height,1]),u.L(o,o,m.calculatePosMatrix(e.toUnwrapped()))}function ka(m,e,o,c,d,g){const w=function(P,B,G){if(P)for(const H of P){const Y=B[H];if(Y&&Y.source===G&&Y.type==="fill-extrusion")return!0}else for(const H in B){const Y=B[H];if(Y.source===G&&Y.type==="fill-extrusion")return!0}return!1}(d&&d.layers,e,m.id),A=g.maxPitchScaleFactor(),S=m.tilesIn(c,A,w);S.sort(pn);const T=[];for(const P of S)T.push({wrappedTileID:P.tileID.wrapped().key,queryResults:P.tile.queryRenderedFeatures(e,o,m._state,P.queryGeometry,P.cameraQueryGeometry,P.scale,d,g,A,ca(m.transform,P.tileID))});const D=function(P){const B={},G={};for(const H of P){const Y=H.queryResults,Z=H.wrappedTileID,te=G[Z]=G[Z]||{};for(const oe in Y){const K=Y[oe],he=te[oe]=te[oe]||{},ge=B[oe]=B[oe]||[];for(const _e of K)he[_e.featureIndex]||(he[_e.featureIndex]=!0,ge.push(_e))}}return B}(T);for(const P in D)D[P].forEach(B=>{const G=B.feature,H=m.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=H});return D}function pn(m,e){const o=m.tileID,c=e.tileID;return o.overscaledZ-c.overscaledZ||o.canonical.y-c.canonical.y||o.wrap-c.wrap||o.canonical.x-c.canonical.x}function Li(m,e,o){return u._(this,void 0,void 0,function*(){let c=m;if(m.url?c=(yield u.h(e.transformRequest(m.url,"Source"),o)).data:yield j.frameAsync(o),!c)return null;const d=u.M(u.e(c,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in c&&c.vector_layers&&(d.vectorLayerIds=c.vector_layers.map(g=>g.id)),d})}class be{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof u.N?new u.N(e.lng,e.lat):u.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof u.N?new u.N(e.lng,e.lat):u.N.convert(e),this}extend(e){const o=this._sw,c=this._ne;let d,g;if(e instanceof u.N)d=e,g=e;else{if(!(e instanceof be))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(be.convert(e)):this.extend(u.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(u.N.convert(e)):this;if(d=e._sw,g=e._ne,!d||!g)return this}return o||c?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),c.lng=Math.max(g.lng,c.lng),c.lat=Math.max(g.lat,c.lat)):(this._sw=new u.N(d.lng,d.lat),this._ne=new u.N(g.lng,g.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:c}=u.N.convert(e);let d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&d}static convert(e){return e instanceof be?e:e&&new be(e)}static fromLngLat(e,o=0){const c=360*o/40075017,d=c/Math.cos(Math.PI/180*e.lat);return new be(new u.N(e.lng-d,e.lat-c),new u.N(e.lng+d,e.lat+c))}}class Ka{constructor(e,o,c){this.bounds=be.convert(this.validateBounds(e)),this.minzoom=o||0,this.maxzoom=c||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const o=Math.pow(2,e.z),c=Math.floor(u.O(this.bounds.getWest())*o),d=Math.floor(u.Q(this.bounds.getNorth())*o),g=Math.ceil(u.O(this.bounds.getEast())*o),w=Math.ceil(u.Q(this.bounds.getSouth())*o);return e.x>=c&&e.x<g&&e.y>=d&&e.y<w}}class Oi extends u.E{constructor(e,o,c,d){if(super(),this.id=e,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(o,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(u.e(this,e),e.bounds&&(this.tileBounds=new Ka(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.j(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c={request:this.map._requestManager.transformRequest(o,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((g,w)=>{e.reloadPromise={resolve:g,reject:w}})}else e.actor=this.dispatcher.getActor(),d="LT";e.abortController=new AbortController;try{const g=yield e.actor.sendAsync({type:d,data:c},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,g)}catch(g){if(delete e.abortController,e.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,o){if(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),e.reloadPromise){const c=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(c.resolve).catch(c.reject)}}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class qt extends u.E{constructor(e,o,c,d){super(),this.id=e,this.dispatcher=c,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},o),u.e(this,u.M(o,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(u.e(this,e),e.bounds&&(this.tileBounds=new Ka(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.j(e))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return u.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const c=yield ce.getImage(this.map._requestManager.transformRequest(o,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(c&&c.data){this.map._refreshExpiredTiles&&c.cacheControl&&c.expires&&e.setExpiryData({cacheControl:c.cacheControl,expires:c.expires});const d=this.map.painter.context,g=d.gl,w=c.data;e.texture=this.map.painter.getTileTexture(w.width),e.texture?e.texture.update(w,{useMipmap:!0}):(e.texture=new ot(d,w,g.RGBA,{useMipmap:!0}),e.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(c){if(delete e.abortController,e.aborted)e.state="unloaded";else if(c)throw e.state="errored",c}})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class un extends qt{constructor(e,o,c,d){super(e,o,c,d),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c=this.map._requestManager.transformRequest(o,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const d=yield ce.getImage(c,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(d&&d.data){const g=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&e.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const w=u.b(g)&&u.U()?g:yield this.readImageNow(g),A={type:this.type,uid:e.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const S=yield e.actor.sendAsync({type:"LDT",data:A});e.dem=S,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(d){if(delete e.abortController,e.aborted)e.state="unloaded";else if(d)throw e.state="errored",d}})}readImageNow(e){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const o=e.width+2,c=e.height+2;try{return new u.R({width:o,height:c},yield u.W(e,-1,-1,o,c))}catch{}}return j.getImageData(e,1)})}_getNeighboringTiles(e){const o=e.canonical,c=Math.pow(2,o.z),d=(o.x-1+c)%c,g=o.x===0?e.wrap-1:e.wrap,w=(o.x+1+c)%c,A=o.x+1===c?e.wrap+1:e.wrap,S={};return S[new u.S(e.overscaledZ,g,o.z,d,o.y).key]={backfilled:!1},S[new u.S(e.overscaledZ,A,o.z,w,o.y).key]={backfilled:!1},o.y>0&&(S[new u.S(e.overscaledZ,g,o.z,d,o.y-1).key]={backfilled:!1},S[new u.S(e.overscaledZ,e.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},S[new u.S(e.overscaledZ,A,o.z,w,o.y-1).key]={backfilled:!1}),o.y+1<c&&(S[new u.S(e.overscaledZ,g,o.z,d,o.y+1).key]={backfilled:!1},S[new u.S(e.overscaledZ,e.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},S[new u.S(e.overscaledZ,A,o.z,w,o.y+1).key]={backfilled:!1}),S}unloadTile(e){return u._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class pr extends u.E{constructor(e,o,c,d){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(d),this._data=o.data,this._options=u.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const g=u.X/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*g,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*g,extent:u.X,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:u.X,radius:(o.clusterRadius||50)*g,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return u._(this,void 0,void 0,function*(){const e=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,o,c){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:o,offset:c}})}_updateWorkerData(e){return u._(this,void 0,void 0,function*(){const o=u.e({type:this.type},this.workerOptions);e?o.dataDiff=e:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(j.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||c.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let d=null;c.resourceTiming&&c.resourceTiming[this.id]&&(d=c.resourceTiming[this.id].slice(0));const g={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&u.e(g,{resourceTiming:d}),this.fire(new u.k("data",Object.assign(Object.assign({},g),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},g),{sourceDataType:"content"})))}catch(c){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(c))}})}loaded(){return this._pendingLoads===0}loadTile(e){return u._(this,void 0,void 0,function*(){const o=e.actor?"RT":"LT";e.actor=this.actor;const c={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const d=yield this.actor.sendAsync({type:o,data:c},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(d,this.map.painter,o==="RT")})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var La=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ua extends u.E{constructor(e,o,c,d){super(),this.id=e,this.dispatcher=c,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=o}load(e){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield ce.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,e&&(this.coordinates=e),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new u.j(o))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const o=e.map(u.Z.fromLngLat);this.tileID=function(d){let g=1/0,w=1/0,A=-1/0,S=-1/0;for(const B of d)g=Math.min(g,B.x),w=Math.min(w,B.y),A=Math.max(A,B.x),S=Math.max(S,B.y);const T=Math.max(A-g,S-w),D=Math.max(0,Math.floor(-Math.log(T)/Math.LN2)),P=Math.pow(2,D);return new u.a1(D,Math.floor((g+A)/2*P),Math.floor((w+S)/2*P))}(o),this.minzoom=this.maxzoom=this.tileID.z;const c=o.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(c[0].x,c[0].y,0,0),this._boundsArray.emplaceBack(c[1].x,c[1].y,u.X,0),this._boundsArray.emplaceBack(c[3].x,c[3].y,0,u.X),this._boundsArray.emplaceBack(c[2].x,c[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,La.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ot(e,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let c=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,c=!0)}c&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class fr extends ua{constructor(e,o,c,d){super(e,o,c,d),this.roundZoom=!0,this.type="video",this.options=o}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const o of e.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield u.a3(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new u.j(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const o=this.video.seekable;e<o.start(0)||e>o.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,La.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new ot(e,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let c=!1;for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,c=!0)}c&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class bi extends ua{constructor(e,o,c,d){super(e,o,c,d),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(w=>typeof w!="number"))||this.fire(new u.j(new u.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${e}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,c=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,La.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ot(o,this.canvas,c.RGBA,{premultiply:!0});let d=!1;for(const g in this.tiles){const w=this.tiles[g];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const da={},ha=m=>{switch(m){case"geojson":return pr;case"image":return ua;case"raster":return qt;case"raster-dem":return un;case"vector":return Oi;case"video":return fr;case"canvas":return bi}return da[m]},Ne="RTLPluginLoaded";class wi extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Rr()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return u._(this,arguments,void 0,function*(o,c=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=j.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!c)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Ne))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let fn=null;function Bn(){return fn||(fn=new wi),fn}class pa{constructor(e,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=u.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const o=e+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,o,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,g){const w={};if(!g)return w;for(const A of d){const S=A.layerIds.map(T=>g.getLayer(T)).filter(Boolean);if(S.length!==0){A.layers=S,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(T=>S.filter(D=>D.id===T)[0]));for(const T of S)w[T.id]=A}}return w}(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const g=this.buckets[d];if(g instanceof u.a6){if(this.hasSymbolBuckets=!0,!c)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const g=this.buckets[d];if(g instanceof u.a6&&g.hasRTLText){this.hasRTLText=!0,Bn().lazyLoad();break}}this.queryPadding=0;for(const d in this.buckets){const g=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(d).queryRadius(g))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const c in this.buckets){const d=this.buckets[c];d.uploadPending()&&d.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ot(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ot(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,c,d,g,w,A,S,T,D){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:g,scale:w,tileSize:this.tileSize,pixelPosMatrix:D,transform:S,params:A,queryPadding:this.queryPadding*T},e,o,c):{}}querySourceFeatures(e,o){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const d=c.loadVTLayers(),g=o&&o.sourceLayer?o.sourceLayer:"",w=d._geojsonTileLayer||d[g];if(!w)return;const A=u.a7(o&&o.filter),{z:S,x:T,y:D}=this.tileID.canonical,P={z:S,x:T,y:D};for(let B=0;B<w.length;B++){const G=w.feature(B);if(A.needGeometry){const Z=u.a8(G,!0);if(!A.filter(new u.z(this.tileID.overscaledZ),Z,this.tileID.canonical))continue}else if(!A.filter(new u.z(this.tileID.overscaledZ),G))continue;const H=c.getId(G,g),Y=new u.a9(G,S,T,D,H);Y.tile=P,e.push(Y)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const c=u.aa(e.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const c=Date.now();let d=!1;if(this.expirationTime>c)d=!1;else if(o)if(this.expirationTime<o)d=!0;else{const g=this.expirationTime-o;g?this.expirationTime=c+Math.max(g,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const c=this.latestFeatureIndex.loadVTLayers();for(const d in this.buckets){if(!o.style.hasLayer(d))continue;const g=this.buckets[d],w=g.layers[0].sourceLayer||"_geojsonTileLayer",A=c[w],S=e[w];if(!A||!S||Object.keys(S).length===0)continue;g.update(S,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const T=o&&o.style&&o.style.getLayer(d);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=j.now()+e}setDependencies(e,o){const c={};for(const d of o)c[d]=!0;this.dependencies[e]=c}hasDependency(e,o){for(const c of e){const d=this.dependencies[c];if(d){for(const g of o)if(d[g])return!0}}return!1}}class Ue{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,c){const d=e.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:o,timeout:void 0};if(c!==void 0&&(g.timeout=setTimeout(()=>{this.remove(e,g)},c)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const c=e.wrapped().key,d=o===void 0?0:this.data[c].indexOf(o),g=this.data[c][d];return this.data[c].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(g.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const c in this.data)for(const d of this.data[c])e(d.value)||o.push(d);for(const c of o)this.remove(c.value.tileID,c)}}class Pt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,c){const d=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},u.e(this.stateChanges[e][d],c),this.deletedStates[e]===null){this.deletedStates[e]={};for(const g in this.state[e])g!==d&&(this.deletedStates[e][g]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][d]===null){this.deletedStates[e][d]={};for(const g in this.state[e][d])c[g]||(this.deletedStates[e][d][g]=null)}else for(const g in c)this.deletedStates[e]&&this.deletedStates[e][d]&&this.deletedStates[e][d][g]===null&&delete this.deletedStates[e][d][g]}removeFeatureState(e,o,c){if(this.deletedStates[e]===null)return;const d=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},c&&o!==void 0)this.deletedStates[e][d]!==null&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][c]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][d])for(c in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][c]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,o){const c=String(o),d=u.e({},(this.state[e]||{})[c],(this.stateChanges[e]||{})[c]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const g=this.deletedStates[e][o];if(g===null)return{};for(const w in g)delete d[w]}return d}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const c={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const g={};for(const w in this.stateChanges[d])this.state[d][w]||(this.state[d][w]={}),u.e(this.state[d][w],this.stateChanges[d][w]),g[w]=this.state[d][w];c[d]=g}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const g={};if(this.deletedStates[d]===null)for(const w in this.state[d])g[w]={},this.state[d][w]={};else for(const w in this.deletedStates[d]){if(this.deletedStates[d][w]===null)this.state[d][w]={};else for(const A of Object.keys(this.deletedStates[d][w]))delete this.state[d][w][A];g[w]=this.state[d][w]}c[d]=c[d]||{},u.e(c[d],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const d in e)e[d].setFeatureState(c,o)}}class yt extends u.E{constructor(e,o,c){super(),this.id=e,this.dispatcher=c,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,g,w,A)=>{const S=new(ha(g.type))(d,g,w,A);if(S.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${S.id}`);return S})(e,o,c,this),this._tiles={},this._cache=new Ue(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Pt,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,o,c){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,o,c)}catch(d){e.state="errored",d.status!==404?this._source.fire(new u.j(d,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new u.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const c=this._tiles[o];c.upload(e),c.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(Yn).map(e=>e.key)}getRenderableIds(e){const o=[];for(const c in this._tiles)this._isIdRenderable(c,e)&&o.push(this._tiles[c]);return e?o.sort((c,d)=>{const g=c.tileID,w=d.tileID,A=new u.P(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),S=new u.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-w.overscaledZ||S.y-A.y||S.x-A.x}).map(c=>c.tileID.key):o.map(c=>c.tileID).sort(Yn).map(c=>c.key)}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,o){return u._(this,void 0,void 0,function*(){const c=this._tiles[e];c&&(c.state!=="loading"&&(c.state=o),yield this._loadTile(c,e,o))})}_tileLoaded(e,o,c){e.timeAdded=j.now(),c==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const o=this.getRenderableIds();for(let d=0;d<o.length;d++){const g=o[d];if(e.neighboringTiles&&e.neighboringTiles[g]){const w=this.getTileByID(g);c(e,w),c(w,e)}}function c(d,g){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let w=g.tileID.canonical.x-d.tileID.canonical.x;const A=g.tileID.canonical.y-d.tileID.canonical.y,S=Math.pow(2,d.tileID.canonical.z),T=g.tileID.key;w===0&&A===0||Math.abs(A)>1||(Math.abs(w)>1&&(Math.abs(w+S)===1?w+=S:Math.abs(w-S)===1&&(w-=S)),g.dem&&d.dem&&(d.dem.backfillBorder(g.dem,w,A),d.neighboringTiles&&d.neighboringTiles[T]&&(d.neighboringTiles[T].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,c,d){for(const g in this._tiles){let w=this._tiles[g];if(d[g]||!w.hasData()||w.tileID.overscaledZ<=o||w.tileID.overscaledZ>c)continue;let A=w.tileID;for(;w&&w.tileID.overscaledZ>o+1;){const T=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[T.key],w&&w.hasData()&&(A=T)}let S=A;for(;S.overscaledZ>o;)if(S=S.scaledTo(S.overscaledZ-1),e[S.key]){d[A.key]=A;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const c=this._loadedParentTiles[e.key];return c&&c.tileID.overscaledZ>=o?c:null}for(let c=e.overscaledZ-1;c>=o;c--){const d=e.scaledTo(c),g=this._getLoadedTile(d);if(g)return g}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const o=Math.ceil(e.width/this._source.tileSize)+1,c=Math.ceil(e.height/this._source.tileSize)+1,d=Math.floor(o*c*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(g)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const c={};for(const d in this._tiles){const g=this._tiles[d];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+o),c[g.tileID.key]=g}this._tiles=c;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(e,o,c,d,g,w){const A={},S={},T=Object.keys(e),D=j.now();for(const P of T){const B=e[P],G=this._tiles[P];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=D)continue;const H=this.findLoadedParent(B,o),Y=this.findLoadedSibling(B),Z=H||Y||null;Z&&(this._addTile(Z.tileID),A[Z.tileID.key]=Z.tileID),S[P]=B}this._retainLoadedChildren(S,d,c,e);for(const P in A)e[P]||(this._coveredTiles[P]=!0,e[P]=A[P]);if(w){const P={},B={};for(const G of g)this._tiles[G.key].hasData()?P[G.key]=G:B[G.key]=G;for(const G in B){const H=B[G].children(this._source.maxzoom);this._tiles[H[0].key]&&this._tiles[H[1].key]&&this._tiles[H[2].key]&&this._tiles[H[3].key]&&(P[H[0].key]=e[H[0].key]=H[0],P[H[1].key]=e[H[1].key]=H[1],P[H[2].key]=e[H[2].key]=H[2],P[H[3].key]=e[H[3].key]=H[3],delete B[G])}for(const G in B){const H=B[G],Y=this.findLoadedParent(H,this._source.minzoom),Z=this.findLoadedSibling(H),te=Y||Z||null;if(te){P[te.tileID.key]=e[te.tileID.key]=te.tileID;for(const oe in P)P[oe].isChildOf(te.tileID)&&delete P[oe]}}for(const G in this._tiles)P[G]||(this._coveredTiles[G]=!0)}}update(e,o){if(!this._sourceLoaded||this._paused)return;let c;this.transform=e,this.terrain=o,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(D=>new u.S(D.canonical.z,D.wrap,D.canonical.z,D.canonical.x,D.canonical.y)):(c=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(c=c.filter(D=>this._source.hasTile(D)))):c=[];const d=e.coveringZoomLevel(this._source),g=Math.max(d-yt.maxOverzooming,this._source.minzoom),w=Math.max(d+yt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const D={};for(const P of c)if(P.canonical.z>this._source.minzoom){const B=P.scaledTo(P.canonical.z-1);D[B.key]=B;const G=P.scaledTo(Math.max(this._source.minzoom,Math.min(P.canonical.z,5)));D[G.key]=G}c=c.concat(Object.values(D))}const A=c.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const S=this._updateRetainedTiles(c,d);Ci(this._source.type)&&this._updateCoveredAndRetainedTiles(S,g,w,d,c,o);for(const D in S)this._tiles[D].clearFadeHold();const T=u.ab(this._tiles,S);for(const D of T){const P=this._tiles[D];P.hasSymbolBuckets&&!P.holdingForFade()?P.setHoldDuration(this.map._fadeDuration):P.hasSymbolBuckets&&!P.symbolFadeFinished()||this._removeTile(D)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,o){var c;const d={},g={},w=Math.max(o-yt.maxOverzooming,this._source.minzoom),A=Math.max(o+yt.maxUnderzooming,this._source.minzoom),S={};for(const T of e){const D=this._addTile(T);d[T.key]=T,D.hasData()||o<this._source.maxzoom&&(S[T.key]=T)}this._retainLoadedChildren(S,o,A,d);for(const T of e){let D=this._tiles[T.key];if(D.hasData())continue;if(o+1>this._source.maxzoom){const B=T.children(this._source.maxzoom)[0],G=this.getTile(B);if(G&&G.hasData()){d[B.key]=B;continue}}else{const B=T.children(this._source.maxzoom);if(d[B[0].key]&&d[B[1].key]&&d[B[2].key]&&d[B[3].key])continue}let P=D.wasRequested();for(let B=T.overscaledZ-1;B>=w;--B){const G=T.scaledTo(B);if(g[G.key])break;if(g[G.key]=!0,D=this.getTile(G),!D&&P&&(D=this._addTile(G)),D){const H=D.hasData();if((H||!(!((c=this.map)===null||c===void 0)&&c.cancelPendingTileRequestsWhileZooming)||P)&&(d[G.key]=G),P=D.wasRequested(),H)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let c,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){c=this._loadedParentTiles[d.key];break}o.push(d.key);const g=d.scaledTo(d.overscaledZ-1);if(c=this._getLoadedTile(g),c)break;d=g}for(const g of o)this._loadedParentTiles[g]=c}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const o=this._tiles[e].tileID,c=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=c}}_addTile(e){let o=this._tiles[e.key];if(o)return o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const c=o;return o||(o=new pa(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(o,e.key,o.state)),o.uses++,this._tiles[e.key]=o,c||this._source.fire(new u.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const c=o.getExpiryTimeout();c&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},c))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(e){const o=e.sourceDataType;e.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&o==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,o,c){const d=[],g=this.transform;if(!g)return d;const w=c?g.getCameraQueryGeometry(e):e,A=e.map(H=>g.pointCoordinate(H,this.terrain)),S=w.map(H=>g.pointCoordinate(H,this.terrain)),T=this.getIds();let D=1/0,P=1/0,B=-1/0,G=-1/0;for(const H of S)D=Math.min(D,H.x),P=Math.min(P,H.y),B=Math.max(B,H.x),G=Math.max(G,H.y);for(let H=0;H<T.length;H++){const Y=this._tiles[T[H]];if(Y.holdingForFade())continue;const Z=Y.tileID,te=Math.pow(2,g.zoom-Y.tileID.overscaledZ),oe=o*Y.queryPadding*u.X/Y.tileSize/te,K=[Z.getTilePoint(new u.Z(D,P)),Z.getTilePoint(new u.Z(B,G))];if(K[0].x-oe<u.X&&K[0].y-oe<u.X&&K[1].x+oe>=0&&K[1].y+oe>=0){const he=A.map(_e=>Z.getTilePoint(_e)),ge=S.map(_e=>Z.getTilePoint(_e));d.push({tile:Y,tileID:Z,queryGeometry:he,cameraQueryGeometry:ge,scale:te})}}return d}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map(c=>this._tiles[c].tileID);for(const c of o)c.posMatrix=this.transform.calculatePosMatrix(c.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Ci(this._source.type)){const e=j.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=e)return!0}return!1}setFeatureState(e,o,c){this._state.updateState(e=e||"_geojsonTileLayer",o,c)}removeFeatureState(e,o,c){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,c)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,c){const d=this._tiles[e];d&&d.setDependencies(o,c)}reloadTilesForDependencies(e,o){for(const c in this._tiles)this._tiles[c].hasDependency(e,o)&&this._reloadTile(c,"reloading");this._cache.filter(c=>!c.hasDependency(e,o))}}function Yn(m,e){const o=Math.abs(2*m.wrap)-+(m.wrap<0),c=Math.abs(2*e.wrap)-+(e.wrap<0);return m.overscaledZ-e.overscaledZ||c-o||e.canonical.y-m.canonical.y||e.canonical.x-m.canonical.x}function Ci(m){return m==="raster"||m==="image"||m==="video"}yt.maxOverzooming=10,yt.maxUnderzooming=3;class At{constructor(e,o){this.reset(e,o)}reset(e,o){this.points=e||[],this._distances=[0];for(let c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=u.ac(e,0,1);let o=1,c=this._distances[o];const d=e*this.paddedLength+this.padding;for(;c<d&&o<this._distances.length;)c=this._distances[++o];const g=o-1,w=this._distances[g],A=c-w,S=A>0?(d-w)/A:0;return this.points[g].mult(1-S).add(this.points[o].mult(S))}}function Ji(m,e){let o=!0;return m==="always"||m!=="never"&&e!=="never"||(o=!1),o}class Yi{constructor(e,o,c){const d=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(e/c),this.yCellCount=Math.ceil(o/c);for(let w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=o,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,o,c,d,g){this._forEachCell(o,c,d,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(g)}insertCircle(e,o,c,d){this._forEachCell(o-d,c-d,o+d,c+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(o),this.circles.push(c),this.circles.push(d)}_insertBoxCell(e,o,c,d,g,w){this.boxCells[g].push(w)}_insertCircleCell(e,o,c,d,g,w){this.circleCells[g].push(w)}_query(e,o,c,d,g,w,A){if(c<0||e>this.width||d<0||o>this.height)return[];const S=[];if(e<=0&&o<=0&&this.width<=c&&this.height<=d){if(g)return[{key:null,x1:e,y1:o,x2:c,y2:d}];for(let T=0;T<this.boxKeys.length;T++)S.push({key:this.boxKeys[T],x1:this.bboxes[4*T],y1:this.bboxes[4*T+1],x2:this.bboxes[4*T+2],y2:this.bboxes[4*T+3]});for(let T=0;T<this.circleKeys.length;T++){const D=this.circles[3*T],P=this.circles[3*T+1],B=this.circles[3*T+2];S.push({key:this.circleKeys[T],x1:D-B,y1:P-B,x2:D+B,y2:P+B})}}else this._forEachCell(e,o,c,d,this._queryCell,S,{hitTest:g,overlapMode:w,seenUids:{box:{},circle:{}}},A);return S}query(e,o,c,d){return this._query(e,o,c,d,!1,null)}hitTest(e,o,c,d,g,w){return this._query(e,o,c,d,!0,g,w).length>0}hitTestCircle(e,o,c,d,g){const w=e-c,A=e+c,S=o-c,T=o+c;if(A<0||w>this.width||T<0||S>this.height)return!1;const D=[];return this._forEachCell(w,S,A,T,this._queryCellCircle,D,{hitTest:!0,overlapMode:d,circle:{x:e,y:o,radius:c},seenUids:{box:{},circle:{}}},g),D.length>0}_queryCell(e,o,c,d,g,w,A,S){const{seenUids:T,hitTest:D,overlapMode:P}=A,B=this.boxCells[g];if(B!==null){const H=this.bboxes;for(const Y of B)if(!T.box[Y]){T.box[Y]=!0;const Z=4*Y,te=this.boxKeys[Y];if(e<=H[Z+2]&&o<=H[Z+3]&&c>=H[Z+0]&&d>=H[Z+1]&&(!S||S(te))&&(!D||!Ji(P,te.overlapMode))&&(w.push({key:te,x1:H[Z],y1:H[Z+1],x2:H[Z+2],y2:H[Z+3]}),D))return!0}}const G=this.circleCells[g];if(G!==null){const H=this.circles;for(const Y of G)if(!T.circle[Y]){T.circle[Y]=!0;const Z=3*Y,te=this.circleKeys[Y];if(this._circleAndRectCollide(H[Z],H[Z+1],H[Z+2],e,o,c,d)&&(!S||S(te))&&(!D||!Ji(P,te.overlapMode))){const oe=H[Z],K=H[Z+1],he=H[Z+2];if(w.push({key:te,x1:oe-he,y1:K-he,x2:oe+he,y2:K+he}),D)return!0}}}return!1}_queryCellCircle(e,o,c,d,g,w,A,S){const{circle:T,seenUids:D,overlapMode:P}=A,B=this.boxCells[g];if(B!==null){const H=this.bboxes;for(const Y of B)if(!D.box[Y]){D.box[Y]=!0;const Z=4*Y,te=this.boxKeys[Y];if(this._circleAndRectCollide(T.x,T.y,T.radius,H[Z+0],H[Z+1],H[Z+2],H[Z+3])&&(!S||S(te))&&!Ji(P,te.overlapMode))return w.push(!0),!0}}const G=this.circleCells[g];if(G!==null){const H=this.circles;for(const Y of G)if(!D.circle[Y]){D.circle[Y]=!0;const Z=3*Y,te=this.circleKeys[Y];if(this._circlesCollide(H[Z],H[Z+1],H[Z+2],T.x,T.y,T.radius)&&(!S||S(te))&&!Ji(P,te.overlapMode))return w.push(!0),!0}}}_forEachCell(e,o,c,d,g,w,A,S){const T=this._convertToXCellCoord(e),D=this._convertToYCellCoord(o),P=this._convertToXCellCoord(c),B=this._convertToYCellCoord(d);for(let G=T;G<=P;G++)for(let H=D;H<=B;H++)if(g.call(this,e,o,c,d,this.xCellCount*H+G,w,A,S))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,o,c,d,g,w){const A=d-e,S=g-o,T=c+w;return T*T>A*A+S*S}_circleAndRectCollide(e,o,c,d,g,w,A){const S=(w-d)/2,T=Math.abs(e-(d+S));if(T>S+c)return!1;const D=(A-g)/2,P=Math.abs(o-(g+D));if(P>D+c)return!1;if(T<=S||P<=D)return!0;const B=T-S,G=P-D;return B*B+G*G<=c*c}}function Bi(m,e,o,c,d){const g=u.H();return e?(u.K(g,g,[1/d,1/d,1]),o||u.ad(g,g,c.angle)):u.L(g,c.labelPlaneMatrix,m),g}function Fi(m,e,o,c,d){if(e){const g=u.ae(m);return u.K(g,g,[d,d,1]),o||u.ad(g,g,-c.angle),g}return c.glCoordMatrix}function Q(m,e,o){let c;o?(c=[m.x,m.y,o(m.x,m.y),1],u.af(c,c,e)):(c=[m.x,m.y,0,1],function(g,w,A){const S=w[0],T=w[1];g[0]=A[0]*S+A[4]*T+A[12],g[1]=A[1]*S+A[5]*T+A[13],g[3]=A[3]*S+A[7]*T+A[15]}(c,c,e));const d=c[3];return{point:new u.P(c[0]/d,c[1]/d),signedDistanceFromCamera:d,isOccluded:!1}}function k(m,e){return .5+m/e*.5}function L(m,e){return m.x>=-e[0]&&m.x<=e[0]&&m.y>=-e[1]&&m.y<=e[1]}function q(m,e,o,c,d,g,w,A,S,T,D,P,B,G,H){const Y=c?m.textSizeData:m.iconSizeData,Z=u.ag(Y,o.transform.zoom),te=[256/o.width*2+1,256/o.height*2+1],oe=c?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;oe.clear();const K=m.lineVertexArray,he=c?m.text.placedSymbolArray:m.icon.placedSymbolArray,ge=o.transform.width/o.transform.height;let _e=!1;for(let Pe=0;Pe<he.length;Pe++){const Be=he.get(Pe);if(Be.hidden||Be.writingMode===u.ah.vertical&&!_e){ue(Be.numGlyphs,oe);continue}_e=!1;const Je=Q(new u.P(Be.anchorX,Be.anchorY),e,H);if(!L(Je.point,te)){ue(Be.numGlyphs,oe);continue}const Ye=k(o.transform.cameraToCenterDistance,Je.signedDistanceFromCamera),Fe=u.ai(Y,Z,Be),je=w?Fe/Ye:Fe*Ye,lt={getElevation:H,labelPlaneMatrix:d,lineVertexArray:K,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:T,tileAnchorPoint:new u.P(Be.anchorX,Be.anchorY),unwrappedTileID:D,width:P,height:B,translation:G},Et=de(lt,Be,je,!1,A,e,g,m.glyphOffsetArray,oe,ge,S);_e=Et.useVertical,(Et.notEnoughRoom||_e||Et.needsFlipping&&de(lt,Be,je,!0,A,e,g,m.glyphOffsetArray,oe,ge,S).notEnoughRoom)&&ue(Be.numGlyphs,oe)}c?m.text.dynamicLayoutVertexBuffer.updateData(oe):m.icon.dynamicLayoutVertexBuffer.updateData(oe)}function X(m,e,o,c,d,g,w,A){const S=g.glyphStartIndex+g.numGlyphs,T=g.lineStartIndex,D=g.lineStartIndex+g.lineLength,P=e.getoffsetX(g.glyphStartIndex),B=e.getoffsetX(S-1),G=$(m*P,o,c,d,g.segment,T,D,A,w);if(!G)return null;const H=$(m*B,o,c,d,g.segment,T,D,A,w);return H?A.projectionCache.anyProjectionOccluded?null:{first:G,last:H}:null}function se(m,e,o,c){return m===u.ah.horizontal&&Math.abs(o.y-e.y)>Math.abs(o.x-e.x)*c?{useVertical:!0}:(m===u.ah.vertical?e.y<o.y:e.x>o.x)?{needsFlipping:!0}:null}function de(m,e,o,c,d,g,w,A,S,T,D){const P=o/24,B=e.lineOffsetX*P,G=e.lineOffsetY*P;let H;if(e.numGlyphs>1){const Y=e.glyphStartIndex+e.numGlyphs,Z=e.lineStartIndex,te=e.lineStartIndex+e.lineLength,oe=X(P,A,B,G,c,e,D,m);if(!oe)return{notEnoughRoom:!0};const K=Q(oe.first.point,w,m.getElevation).point,he=Q(oe.last.point,w,m.getElevation).point;if(d&&!c){const ge=se(e.writingMode,K,he,T);if(ge)return ge}H=[oe.first];for(let ge=e.glyphStartIndex+1;ge<Y-1;ge++)H.push($(P*A.getoffsetX(ge),B,G,c,e.segment,Z,te,m,D));H.push(oe.last)}else{if(d&&!c){const Z=Q(m.tileAnchorPoint,g,m.getElevation).point,te=e.lineStartIndex+e.segment+1,oe=new u.P(m.lineVertexArray.getx(te),m.lineVertexArray.gety(te)),K=Q(oe,g,m.getElevation),he=K.signedDistanceFromCamera>0?K.point:function(_e,Pe,Be,Je,Ye,Fe){return me(_e,Pe,Be,1,Ye,Fe)}(m.tileAnchorPoint,oe,Z,0,g,m),ge=se(e.writingMode,Z,he,T);if(ge)return ge}const Y=$(P*A.getoffsetX(e.glyphStartIndex),B,G,c,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,m,D);if(!Y||m.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};H=[Y]}for(const Y of H)u.aj(S,Y.point,Y.angle);return{}}function me(m,e,o,c,d,g){const w=m.add(m.sub(e)._unit()),A=d!==void 0?Q(w,d,g.getElevation).point:Ae(w.x,w.y,g).point,S=o.sub(A);return o.add(S._mult(c/S.mag()))}function ae(m,e,o){const c=e.projectionCache;if(c.projections[m])return c.projections[m];const d=new u.P(e.lineVertexArray.getx(m),e.lineVertexArray.gety(m)),g=Ae(d.x,d.y,e);if(g.signedDistanceFromCamera>0)return c.projections[m]=g.point,c.anyProjectionOccluded=c.anyProjectionOccluded||g.isOccluded,g.point;const w=m-o.direction;return function(A,S,T,D,P){return me(A,S,T,D,void 0,P)}(o.distanceFromAnchor===0?e.tileAnchorPoint:new u.P(e.lineVertexArray.getx(w),e.lineVertexArray.gety(w)),d,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,e)}function Ae(m,e,o){const c=m+o.translation[0],d=e+o.translation[1];let g;return!o.pitchWithMap&&o.projection.useSpecialProjectionForSymbols?(g=o.projection.projectTileCoordinates(c,d,o.unwrappedTileID,o.getElevation),g.point.x=(.5*g.point.x+.5)*o.width,g.point.y=(.5*-g.point.y+.5)*o.height):(g=Q(new u.P(c,d),o.labelPlaneMatrix,o.getElevation),g.isOccluded=!1),g}function De(m,e,o){return m._unit()._perp()._mult(e*o)}function ve(m,e,o,c,d,g,w,A,S){if(A.projectionCache.offsets[m])return A.projectionCache.offsets[m];const T=o.add(e);if(m+S.direction<c||m+S.direction>=d)return A.projectionCache.offsets[m]=T,T;const D=ae(m+S.direction,A,S),P=De(D.sub(o),w,S.direction),B=o.add(P),G=D.add(P);return A.projectionCache.offsets[m]=u.ak(g,T,B,G)||T,A.projectionCache.offsets[m]}function $(m,e,o,c,d,g,w,A,S){const T=c?m-e:m+e;let D=T>0?1:-1,P=0;c&&(D*=-1,P=Math.PI),D<0&&(P+=Math.PI);let B,G=D>0?g+d:g+d+1;A.projectionCache.cachedAnchorPoint?B=A.projectionCache.cachedAnchorPoint:(B=Ae(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=B);let H,Y,Z=B,te=B,oe=0,K=0;const he=Math.abs(T),ge=[];let _e;for(;oe+K<=he;){if(G+=D,G<g||G>=w)return null;oe+=K,te=Z,Y=H;const Je={absOffsetX:he,direction:D,distanceFromAnchor:oe,previousVertex:te};if(Z=ae(G,A,Je),o===0)ge.push(te),_e=Z.sub(te);else{let Ye;const Fe=Z.sub(te);Ye=Fe.mag()===0?De(ae(G+D,A,Je).sub(Z),o,D):De(Fe,o,D),Y||(Y=te.add(Ye)),H=ve(G,Ye,Z,g,w,Y,o,A,Je),ge.push(Y),_e=H.sub(Y)}K=_e.mag()}const Pe=_e._mult((he-oe)/K)._add(Y||te),Be=P+Math.atan2(Z.y-te.y,Z.x-te.x);return ge.push(Pe),{point:Pe,angle:S?Be:0,path:ge}}const ee=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ue(m,e){for(let o=0;o<m;o++){const c=e.length;e.resize(c+4),e.float32.set(ee,3*c)}}const xe=100;class Le{constructor(e,o,c=new Yi(e.width+200,e.height+200,25),d=new Yi(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=o,this.grid=c,this.ignoredGrid=d,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+xe,this.screenBottomBoundary=e.height+xe,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,o,c,d,g,w,A,S,T,D,P){const B=e.anchorPointX+S[0],G=e.anchorPointY+S[1],H=this.projectAndGetPerspectiveRatio(d,B,G,g,D),Y=this._projectCollisionBox(e,c,d,g,w,A,S,H,D,P),[Z,te,oe,K]=Y.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?Y.allPointsOccluded:this.mapProjection.isOccluded(B,G,g))||H.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Z,te,oe,K)||o!=="always"&&this.grid.hitTest(Z,te,oe,K,o,T)?{box:[Z,te,oe,K],placeable:!1,offscreen:!1}:{box:[Z,te,oe,K],placeable:!0,offscreen:this.isOffscreen(Z,te,oe,K)}}placeCollisionCircles(e,o,c,d,g,w,A,S,T,D,P,B,G,H,Y,Z){const te=[],oe=new u.P(o.anchorX,o.anchorY),K=this.getPerspectiveRatio(w,oe.x,oe.y,A,Z),he=(P?g/K:g*K)/u.ap,ge={getElevation:Z,labelPlaneMatrix:S,lineVertexArray:c,pitchWithMap:P,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:oe,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Y},_e=X(he,d,o.lineOffsetX*he,o.lineOffsetY*he,!1,o,!1,ge);let Pe=!1,Be=!1,Je=!0;if(_e){const Ye=.5*G*K+H,Fe=new u.P(-100,-100),je=new u.P(this.screenRightBoundary,this.screenBottomBoundary),lt=new At,Et=_e.first,He=_e.last;let Ze=[];for(let Dt=Et.path.length-1;Dt>=1;Dt--)Ze.push(Et.path[Dt]);for(let Dt=1;Dt<He.path.length;Dt++)Ze.push(He.path[Dt]);const wt=2.5*Ye;if(T){const Dt=this.projectPathToScreenSpace(Ze,ge,T);Ze=Dt.some(kt=>kt.signedDistanceFromCamera<=0)?[]:Dt.map(kt=>kt.point)}let tn=[];if(Ze.length>0){const Dt=Ze[0].clone(),kt=Ze[0].clone();for(let on=1;on<Ze.length;on++)Dt.x=Math.min(Dt.x,Ze[on].x),Dt.y=Math.min(Dt.y,Ze[on].y),kt.x=Math.max(kt.x,Ze[on].x),kt.y=Math.max(kt.y,Ze[on].y);tn=Dt.x>=Fe.x&&kt.x<=je.x&&Dt.y>=Fe.y&&kt.y<=je.y?[Ze]:kt.x<Fe.x||Dt.x>je.x||kt.y<Fe.y||Dt.y>je.y?[]:u.al([Ze],Fe.x,Fe.y,je.x,je.y)}for(const Dt of tn){lt.reset(Dt,.25*Ye);let kt=0;kt=lt.length<=.5*Ye?1:Math.ceil(lt.paddedLength/wt)+1;for(let on=0;on<kt;on++){const ii=on/Math.max(kt-1,1),_a=lt.lerp(ii),sn=_a.x+xe,Si=_a.y+xe;te.push(sn,Si,Ye,0);const fi=sn-Ye,ai=Si-Ye,ri=sn+Ye,va=Si+Ye;if(Je=Je&&this.isOffscreen(fi,ai,ri,va),Be=Be||this.isInsideGrid(fi,ai,ri,va),e!=="always"&&this.grid.hitTestCircle(sn,Si,Ye,e,B)&&(Pe=!0,!D))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!D&&Pe||!Be||K<this.perspectiveRatioCutoff?[]:te,offscreen:Je,collisionDetected:Pe}}projectPathToScreenSpace(e,o,c){return e.map(d=>Q(d,c,o.getElevation))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let c=1/0,d=1/0,g=-1/0,w=-1/0;for(const D of e){const P=new u.P(D.x+xe,D.y+xe);c=Math.min(c,P.x),d=Math.min(d,P.y),g=Math.max(g,P.x),w=Math.max(w,P.y),o.push(P)}const A=this.grid.query(c,d,g,w).concat(this.ignoredGrid.query(c,d,g,w)),S={},T={};for(const D of A){const P=D.key;if(S[P.bucketInstanceId]===void 0&&(S[P.bucketInstanceId]={}),S[P.bucketInstanceId][P.featureIndex])continue;const B=[new u.P(D.x1,D.y1),new u.P(D.x2,D.y1),new u.P(D.x2,D.y2),new u.P(D.x1,D.y2)];u.am(o,B)&&(S[P.bucketInstanceId][P.featureIndex]=!0,T[P.bucketInstanceId]===void 0&&(T[P.bucketInstanceId]=[]),T[P.bucketInstanceId].push(P.featureIndex))}return T}insertCollisionBox(e,o,c,d,g,w){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:g,collisionGroupID:w,overlapMode:o},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,o,c,d,g,w){const A=c?this.ignoredGrid:this.grid,S={bucketInstanceId:d,featureIndex:g,collisionGroupID:w,overlapMode:o};for(let T=0;T<e.length;T+=4)A.insertCircle(S,e[T],e[T+1],e[T+2])}projectAndGetPerspectiveRatio(e,o,c,d,g){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,c,d,g):Q(new u.P(o,c),e,g);return{point:new u.P((w.point.x+1)/2*this.transform.width+xe,(1-w.point.y)/2*this.transform.height+xe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}getPerspectiveRatio(e,o,c,d,g){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,c,d,g):Q(new u.P(o,c),e,g);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(e,o,c,d){return c<xe||e>=this.screenRightBoundary||d<xe||o>this.screenBottomBoundary}isInsideGrid(e,o,c,d){return c>=0&&e<this.gridRightBoundary&&d>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const e=u.an([]);return u.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,o,c,d,g,w,A,S,T,D){const P=o*S.perspectiveRatio;let B=new u.P(1,0),G=new u.P(0,1);const H=new u.P(e.anchorPointX+A[0],e.anchorPointY+A[1]);if(w&&!g){const Ye=this.projectAndGetPerspectiveRatio(c,H.x+1,H.y,d,T).point.sub(S.point).unit(),Fe=Math.atan(Ye.y/Ye.x)+(Ye.x<0?Math.PI:0),je=Math.sin(Fe),lt=Math.cos(Fe);B=new u.P(lt,je),G=new u.P(-je,lt)}else if(!w&&g){const Ye=-this.transform.angle,Fe=Math.sin(Ye),je=Math.cos(Ye);B=new u.P(je,Fe),G=new u.P(-Fe,je)}let Y=S.point,Z=P;if(g){Y=H;const Ye=this.transform.zoom-Math.floor(this.transform.zoom);Z=Math.pow(2,-Ye),Z*=this.mapProjection.getPitchedTextCorrection(this.transform,H,d),D||(Z*=u.ac(.5+S.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}D&&(Y=Y.add(B.mult(D.x*Z)).add(G.mult(D.y*Z)));const te=e.x1*Z,oe=e.x2*Z,K=(te+oe)/2,he=e.y1*Z,ge=e.y2*Z,_e=(he+ge)/2,Pe=[{offsetX:te,offsetY:he},{offsetX:K,offsetY:he},{offsetX:oe,offsetY:he},{offsetX:oe,offsetY:_e},{offsetX:oe,offsetY:ge},{offsetX:K,offsetY:ge},{offsetX:te,offsetY:ge},{offsetX:te,offsetY:_e}];let Be=[];for(const{offsetX:Ye,offsetY:Fe}of Pe)Be.push(new u.P(Y.x+B.x*Ye+G.x*Fe,Y.y+B.y*Ye+G.y*Fe));let Je=!1;if(g){const Ye=Be.map(Fe=>this.projectAndGetPerspectiveRatio(c,Fe.x,Fe.y,d,T));Je=Ye.some(Fe=>!Fe.isOccluded),Be=Ye.map(Fe=>Fe.point)}else Je=!0;return{box:u.ao(Be),allPointsOccluded:!Je}}}function ze(m,e,o){return e*(u.X/(m.tileSize*Math.pow(2,o-m.tileID.overscaledZ)))}class nt{constructor(e,o,c,d){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?o:-o))):d&&c?1:0,this.placed=c}isHidden(){return this.opacity===0&&!this.placed}}class Oe{constructor(e,o,c,d,g){this.text=new nt(e?e.text:null,o,c,g),this.icon=new nt(e?e.icon:null,o,d,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gt{constructor(e,o,c){this.text=e,this.icon=o,this.skipFade=c}}class Ve{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class st{constructor(e,o,c,d,g){this.bucketInstanceId=e,this.featureIndex=o,this.sourceLayerIndex=c,this.bucketIndex=d,this.tileID=g}}class xt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const o=++this.maxGroupID;this.collisionGroups[e]={ID:o,predicate:c=>c.collisionGroupID===o}}return this.collisionGroups[e]}}function Tt(m,e,o,c,d){const{horizontalAlign:g,verticalAlign:w}=u.au(m);return new u.P(-(g-.5)*e+c[0]*d,-(w-.5)*o+c[1]*d)}class zt{constructor(e,o,c,d,g,w){this.transform=e.clone(),this.terrain=c,this.collisionIndex=new Le(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new xt(g),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const o=this.terrain;return o?(c,d)=>o.getElevation(e,c,d):null}getBucketParts(e,o,c,d){const g=c.getBucket(o),w=c.latestFeatureIndex;if(!g||!w||o.id!==g.layerIds[0])return;const A=c.collisionBoxArray,S=g.layers[0].layout,T=g.layers[0].paint,D=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),P=c.tileSize/u.X,B=c.tileID.toUnwrapped(),G=this.transform.calculatePosMatrix(B),H=S.get("text-pitch-alignment")==="map",Y=S.get("text-rotation-alignment")==="map",Z=ze(c,1,this.transform.zoom),te=this.collisionIndex.mapProjection.translatePosition(this.transform,c,T.get("text-translate"),T.get("text-translate-anchor")),oe=this.collisionIndex.mapProjection.translatePosition(this.transform,c,T.get("icon-translate"),T.get("icon-translate-anchor")),K=Bi(G,H,Y,this.transform,Z);let he=null;if(H){const _e=Fi(G,H,Y,this.transform,Z);he=u.L([],this.transform.labelPlaneMatrix,_e)}this.retainedQueryData[g.bucketInstanceId]=new st(g.bucketInstanceId,w,g.sourceLayerIndex,g.index,c.tileID);const ge={bucket:g,layout:S,translationText:te,translationIcon:oe,posMatrix:G,unwrappedTileID:B,textLabelPlaneMatrix:K,labelToScreenMatrix:he,scale:D,textPixelRatio:P,holdingForFade:c.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:u.ag(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(d)for(const _e of g.sortKeyRanges){const{sortKey:Pe,symbolInstanceStart:Be,symbolInstanceEnd:Je}=_e;e.push({sortKey:Pe,symbolInstanceStart:Be,symbolInstanceEnd:Je,parameters:ge})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(e,o,c,d,g,w,A,S,T,D,P,B,G,H,Y,Z,te,oe,K){const he=u.aq[e.textAnchor],ge=[e.textOffset0,e.textOffset1],_e=Tt(he,c,d,ge,g),Pe=this.collisionIndex.placeCollisionBox(o,B,S,T,D,A,w,Z,P.predicate,K,_e);if((!oe||this.collisionIndex.placeCollisionBox(oe,B,S,T,D,A,w,te,P.predicate,K,_e).placeable)&&Pe.placeable){let Be;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Be=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:ge,width:c,height:d,anchor:he,textBoxScale:g,prevAnchor:Be},this.markUsedJustification(H,he,G,Y),H.allowVerticalPlacement&&(this.markUsedOrientation(H,Y,G),this.placedOrientations[G.crossTileID]=Y),{shift:_e,placedGlyphBoxes:Pe}}}placeLayerBucketPart(e,o,c){const{bucket:d,layout:g,translationText:w,translationIcon:A,posMatrix:S,unwrappedTileID:T,textLabelPlaneMatrix:D,labelToScreenMatrix:P,textPixelRatio:B,holdingForFade:G,collisionBoxArray:H,partiallyEvaluatedTextSize:Y,collisionGroup:Z}=e.parameters,te=g.get("text-optional"),oe=g.get("icon-optional"),K=u.ar(g,"text-overlap","text-allow-overlap"),he=K==="always",ge=u.ar(g,"icon-overlap","icon-allow-overlap"),_e=ge==="always",Pe=g.get("text-rotation-alignment")==="map",Be=g.get("text-pitch-alignment")==="map",Je=g.get("icon-text-fit")!=="none",Ye=g.get("symbol-z-order")==="viewport-y",Fe=he&&(_e||!d.hasIconData()||oe),je=_e&&(he||!d.hasTextData()||te);!d.collisionArrays&&H&&d.deserializeCollisionBoxes(H);const lt=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),Et=(He,Ze,wt)=>{var tn,Dt;if(o[He.crossTileID])return;if(G)return void(this.placements[He.crossTileID]=new gt(!1,!1,!1));let kt=!1,on=!1,ii=!0,_a=null,sn={box:null,placeable:!1,offscreen:null},Si={box:null,placeable:!1,offscreen:null},fi=null,ai=null,ri=null,va=0,Gr=0,Cs=0;Ze.textFeatureIndex?va=Ze.textFeatureIndex:He.useRuntimeCollisionCircles&&(va=He.featureIndex),Ze.verticalTextFeatureIndex&&(Gr=Ze.verticalTextFeatureIndex);const Hr=Ze.textBox;if(Hr){const ta=mi=>{let oi=u.ah.horizontal;if(d.allowVerticalPlacement&&!mi&&this.prevPlacement){const qi=this.prevPlacement.placedOrientations[He.crossTileID];qi&&(this.placedOrientations[He.crossTileID]=qi,oi=qi,this.markUsedOrientation(d,oi,He))}return oi},xa=(mi,oi)=>{if(d.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&Ze.verticalTextBox){for(const qi of d.writingModes)if(qi===u.ah.vertical?(sn=oi(),Si=sn):sn=mi(),sn&&sn.placeable)break}else sn=mi()},br=He.textAnchorOffsetStartIndex,ba=He.textAnchorOffsetEndIndex;if(ba===br){const mi=(oi,qi)=>{const xn=this.collisionIndex.placeCollisionBox(oi,K,B,S,T,Be,Pe,w,Z.predicate,lt);return xn&&xn.placeable&&(this.markUsedOrientation(d,qi,He),this.placedOrientations[He.crossTileID]=qi),xn};xa(()=>mi(Hr,u.ah.horizontal),()=>{const oi=Ze.verticalTextBox;return d.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&oi?mi(oi,u.ah.vertical):{box:null,offscreen:null}}),ta(sn&&sn.placeable)}else{let mi=u.aq[(Dt=(tn=this.prevPlacement)===null||tn===void 0?void 0:tn.variableOffsets[He.crossTileID])===null||Dt===void 0?void 0:Dt.anchor];const oi=(xn,Ao,wr)=>{const As=xn.x2-xn.x1,Pf=xn.y2-xn.y1,Df=He.textBoxScale,Qn=Je&&ge==="never"?Ao:null;let Cr=null,Ss=K==="never"?1:2,Es="never";mi&&Ss++;for(let hu=0;hu<Ss;hu++){for(let pu=br;pu<ba;pu++){const fu=d.textAnchorOffsets.get(pu);if(mi&&fu.textAnchor!==mi)continue;const Rl=this.attemptAnchorPlacement(fu,xn,As,Pf,Df,Pe,Be,B,S,T,Z,Es,He,d,wr,w,A,Qn,lt);if(Rl&&(Cr=Rl.placedGlyphBoxes,Cr&&Cr.placeable))return kt=!0,_a=Rl.shift,Cr}mi?mi=null:Es=K}return c&&!Cr&&(Cr={box:this.collisionIndex.placeCollisionBox(Hr,"always",B,S,T,Be,Pe,w,Z.predicate,lt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Cr};xa(()=>oi(Hr,Ze.iconBox,u.ah.horizontal),()=>{const xn=Ze.verticalTextBox;return d.allowVerticalPlacement&&(!sn||!sn.placeable)&&He.numVerticalGlyphVertices>0&&xn?oi(xn,Ze.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),sn&&(kt=sn.placeable,ii=sn.offscreen);const qi=ta(sn&&sn.placeable);if(!kt&&this.prevPlacement){const xn=this.prevPlacement.variableOffsets[He.crossTileID];xn&&(this.variableOffsets[He.crossTileID]=xn,this.markUsedJustification(d,xn.anchor,He,qi))}}}if(fi=sn,kt=fi&&fi.placeable,ii=fi&&fi.offscreen,He.useRuntimeCollisionCircles){const ta=d.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),xa=u.ai(d.textSizeData,Y,ta),br=g.get("text-padding");ai=this.collisionIndex.placeCollisionCircles(K,ta,d.lineVertexArray,d.glyphOffsetArray,xa,S,T,D,P,c,Be,Z.predicate,He.collisionCircleDiameter,br,w,lt),ai.circles.length&&ai.collisionDetected&&!c&&u.w("Collisions detected, but collision boxes are not shown"),kt=he||ai.circles.length>0&&!ai.collisionDetected,ii=ii&&ai.offscreen}if(Ze.iconFeatureIndex&&(Cs=Ze.iconFeatureIndex),Ze.iconBox){const ta=xa=>this.collisionIndex.placeCollisionBox(xa,ge,B,S,T,Be,Pe,A,Z.predicate,lt,Je&&_a?_a:void 0);Si&&Si.placeable&&Ze.verticalIconBox?(ri=ta(Ze.verticalIconBox),on=ri.placeable):(ri=ta(Ze.iconBox),on=ri.placeable),ii=ii&&ri.offscreen}const xr=te||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,zl=oe||He.numIconVertices===0;xr||zl?zl?xr||(on=on&&kt):kt=on&&kt:on=kt=on&&kt;const du=on&&ri.placeable;if(kt&&fi.placeable&&this.collisionIndex.insertCollisionBox(fi.box,K,g.get("text-ignore-placement"),d.bucketInstanceId,Si&&Si.placeable&&Gr?Gr:va,Z.ID),du&&this.collisionIndex.insertCollisionBox(ri.box,ge,g.get("icon-ignore-placement"),d.bucketInstanceId,Cs,Z.ID),ai&&kt&&this.collisionIndex.insertCollisionCircles(ai.circles,K,g.get("text-ignore-placement"),d.bucketInstanceId,va,Z.ID),c&&this.storeCollisionData(d.bucketInstanceId,wt,Ze,fi,ri,ai),He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new gt(kt||Fe,on||je,ii||d.justReloaded),o[He.crossTileID]=!0};if(Ye){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const He=d.getSortedSymbolIndexes(this.transform.angle);for(let Ze=He.length-1;Ze>=0;--Ze){const wt=He[Ze];Et(d.symbolInstances.get(wt),d.collisionArrays[wt],wt)}}else for(let He=e.symbolInstanceStart;He<e.symbolInstanceEnd;He++)Et(d.symbolInstances.get(He),d.collisionArrays[He],He);if(c&&d.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[d.bucketInstanceId];u.as(He.invProjMatrix,S),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(e,o,c,d,g,w){if(c.textBox||c.iconBox){let A,S;this.collisionBoxArrays.has(e)?A=this.collisionBoxArrays.get(e):(A=new Map,this.collisionBoxArrays.set(e,A)),A.has(o)?S=A.get(o):(S={text:null,icon:null},A.set(o,S)),c.textBox&&(S.text=d.box),c.iconBox&&(S.icon=g.box)}if(w){let A=this.collisionCircleArrays[e];A===void 0&&(A=this.collisionCircleArrays[e]=new Ve);for(let S=0;S<w.circles.length;S+=4)A.circles.push(w.circles[S+0]),A.circles.push(w.circles[S+1]),A.circles.push(w.circles[S+2]),A.circles.push(w.collisionDetected?1:0)}}markUsedJustification(e,o,c,d){let g;g=d===u.ah.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[u.at(o)];const w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];for(const A of w)A>=0&&(e.text.placedSymbolArray.get(A).crossTileID=g>=0&&A!==g?0:c.crossTileID)}markUsedOrientation(e,o,c){const d=o===u.ah.horizontal||o===u.ah.horizontalOnly?o:0,g=o===u.ah.vertical?o:0,w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];for(const A of w)e.text.placedSymbolArray.get(A).placedOrientation=d;c.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let c=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const d=o?o.symbolFadeChange(e):1,g=o?o.opacities:{},w=o?o.variableOffsets:{},A=o?o.placedOrientations:{};for(const S in this.placements){const T=this.placements[S],D=g[S];D?(this.opacities[S]=new Oe(D,d,T.text,T.icon),c=c||T.text!==D.text.placed||T.icon!==D.icon.placed):(this.opacities[S]=new Oe(null,d,T.text,T.icon,T.skipFade),c=c||T.text||T.icon)}for(const S in g){const T=g[S];if(!this.opacities[S]){const D=new Oe(T,d,!1,!1);D.isHidden()||(this.opacities[S]=D,c=c||T.text.placed||T.icon.placed)}}for(const S in w)this.variableOffsets[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.variableOffsets[S]=w[S]);for(const S in A)this.placedOrientations[S]||!this.opacities[S]||this.opacities[S].isHidden()||(this.placedOrientations[S]=A[S]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");c?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:e)}updateLayerOpacities(e,o){const c={};for(const d of o){const g=d.getBucket(e);g&&d.latestFeatureIndex&&e.id===g.layerIds[0]&&this.updateBucketOpacities(g,d.tileID,c,d.collisionBoxArray)}}updateBucketOpacities(e,o,c,d){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const g=e.layers[0],w=g.layout,A=new Oe(null,0,!1,!1,!0),S=w.get("text-allow-overlap"),T=w.get("icon-allow-overlap"),D=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),P=w.get("text-rotation-alignment")==="map",B=w.get("text-pitch-alignment")==="map",G=w.get("icon-text-fit")!=="none",H=new Oe(null,0,S&&(T||!e.hasIconData()||w.get("icon-optional")),T&&(S||!e.hasTextData()||w.get("text-optional")),!0);!e.collisionArrays&&d&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(d);const Y=(te,oe,K)=>{for(let he=0;he<oe/4;he++)te.opacityVertexArray.emplaceBack(K);te.hasVisibleVertices=te.hasVisibleVertices||K!==Mn},Z=this.collisionBoxArrays.get(e.bucketInstanceId);for(let te=0;te<e.symbolInstances.length;te++){const oe=e.symbolInstances.get(te),{numHorizontalGlyphVertices:K,numVerticalGlyphVertices:he,crossTileID:ge}=oe;let _e=this.opacities[ge];c[ge]?_e=A:_e||(_e=H,this.opacities[ge]=_e),c[ge]=!0;const Pe=oe.numIconVertices>0,Be=this.placedOrientations[oe.crossTileID],Je=Be===u.ah.vertical,Ye=Be===u.ah.horizontal||Be===u.ah.horizontalOnly;if(K>0||he>0){const je=mn(_e.text);Y(e.text,K,Je?Mn:je),Y(e.text,he,Ye?Mn:je);const lt=_e.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(Ze=>{Ze>=0&&(e.text.placedSymbolArray.get(Ze).hidden=lt||Je?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=lt||Ye?1:0);const Et=this.variableOffsets[oe.crossTileID];Et&&this.markUsedJustification(e,Et.anchor,oe,Be);const He=this.placedOrientations[oe.crossTileID];He&&(this.markUsedJustification(e,"left",oe,He),this.markUsedOrientation(e,He,oe))}if(Pe){const je=mn(_e.icon),lt=!(G&&oe.verticalPlacedIconSymbolIndex&&Je);oe.placedIconSymbolIndex>=0&&(Y(e.icon,oe.numIconVertices,lt?je:Mn),e.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=_e.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(Y(e.icon,oe.numVerticalIconVertices,lt?Mn:je),e.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=_e.icon.isHidden())}const Fe=Z&&Z.has(te)?Z.get(te):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const je=e.collisionArrays[te];if(je){let lt=new u.P(0,0);if(je.textBox||je.verticalTextBox){let Et=!0;if(D){const He=this.variableOffsets[ge];He?(lt=Tt(He.anchor,He.width,He.height,He.textOffset,He.textBoxScale),P&&lt._rotate(B?this.transform.angle:-this.transform.angle)):Et=!1}if(je.textBox||je.verticalTextBox){let He;je.textBox&&(He=Je),je.verticalTextBox&&(He=Ye),Mt(e.textCollisionBox.collisionVertexArray,_e.text.placed,!Et||He,Fe.text,lt.x,lt.y)}}if(je.iconBox||je.verticalIconBox){const Et=!!(!Ye&&je.verticalIconBox);let He;je.iconBox&&(He=Et),je.verticalIconBox&&(He=!Et),Mt(e.iconCollisionBox.collisionVertexArray,_e.icon.placed,He,Fe.icon,G?lt.x:0,G?lt.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const te=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=te.invProjMatrix,e.placementViewportMatrix=te.viewportMatrix,e.collisionCircleArray=te.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,o){const c=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*c>e}setStale(){this.stale=!0}}function Mt(m,e,o,c,d,g){c&&c.length!==0||(c=[0,0,0,0]);const w=c[0]-xe,A=c[1]-xe,S=c[2]-xe,T=c[3]-xe;m.emplaceBack(e?1:0,o?1:0,d||0,g||0,w,A),m.emplaceBack(e?1:0,o?1:0,d||0,g||0,S,A),m.emplaceBack(e?1:0,o?1:0,d||0,g||0,S,T),m.emplaceBack(e?1:0,o?1:0,d||0,g||0,w,T)}const _n=Math.pow(2,25),St=Math.pow(2,24),Ja=Math.pow(2,17),Qi=Math.pow(2,16),Fn=Math.pow(2,9),Nn=Math.pow(2,8),mr=Math.pow(2,1);function mn(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const e=m.placed?1:0,o=Math.floor(127*m.opacity);return o*_n+e*St+o*Ja+e*Qi+o*Fn+e*Nn+o*mr+e}const Mn=0;function Ya(){return{isOccluded:(m,e,o)=>!1,getPitchedTextCorrection:(m,e,o)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(m,e,o,c){throw new Error("Not implemented.")},translatePosition:(m,e,o,c)=>function(d,g,w,A,S=!1){if(!w[0]&&!w[1])return[0,0];const T=S?A==="map"?d.angle:0:A==="viewport"?-d.angle:0;if(T){const D=Math.sin(T),P=Math.cos(T);w=[w[0]*P-w[1]*D,w[0]*D+w[1]*P]}return[S?w[0]:ze(g,w[0],d.zoom),S?w[1]:ze(g,w[1],d.zoom)]}(m,e,o,c),getCircleRadiusCorrection:m=>1}}class Oa{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,o,c,d,g){const w=this._bucketParts;for(;this._currentTileIndex<e.length;)if(o.getBucketParts(w,d,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((A,S)=>A.sortKey-S.sortKey));this._currentPartIndex<w.length;)if(o.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,g())return!0;return!1}}class _t{constructor(e,o,c,d,g,w,A,S){this.placement=new zt(e,Ya(),o,w,A,S),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(e,o,c){const d=j.now(),g=()=>!this._forceFullPlacement&&j.now()-d>2;for(;this._currentPlacementIndex>=0;){const w=o[e[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=A)&&(!w.maxzoom||w.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Oa(w)),this._inProgressLayer.continuePlacement(c[w.source],this.placement,this._showCollisionBoxes,w,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Zt=512/u.X/2;class In{constructor(e,o,c){this.tileID=e,this.bucketInstanceId=c,this._symbolsByKey={};const d=new Map;for(let g=0;g<o.length;g++){const w=o.get(g),A=w.key,S=d.get(A);S?S.push(w):d.set(A,[w])}for(const[g,w]of d){const A={positions:w.map(S=>({x:Math.floor(S.anchorX*Zt),y:Math.floor(S.anchorY*Zt)})),crossTileIDs:w.map(S=>S.crossTileID)};if(A.positions.length>128){const S=new u.av(A.positions.length,16,Uint16Array);for(const{x:T,y:D}of A.positions)S.add(T,D);S.finish(),delete A.positions,A.index=S}this._symbolsByKey[g]=A}}getScaledCoordinates(e,o){const{x:c,y:d,z:g}=this.tileID.canonical,{x:w,y:A,z:S}=o.canonical,T=Zt/Math.pow(2,S-g),D=(A*u.X+e.anchorY)*T,P=d*u.X*Zt;return{x:Math.floor((w*u.X+e.anchorX)*T-c*u.X*Zt),y:Math.floor(D-P)}}findMatches(e,o,c){const d=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let g=0;g<e.length;g++){const w=e.get(g);if(w.crossTileID)continue;const A=this._symbolsByKey[w.key];if(!A)continue;const S=this.getScaledCoordinates(w,o);if(A.index){const T=A.index.range(S.x-d,S.y-d,S.x+d,S.y+d).sort();for(const D of T){const P=A.crossTileIDs[D];if(!c[P]){c[P]=!0,w.crossTileID=P;break}}}else if(A.positions)for(let T=0;T<A.positions.length;T++){const D=A.positions[T],P=A.crossTileIDs[T];if(Math.abs(D.x-S.x)<=d&&Math.abs(D.y-S.y)<=d&&!c[P]){c[P]=!0,w.crossTileID=P;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class It{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ai{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const o=Math.round((e-this.lng)/360);if(o!==0)for(const c in this.indexes){const d=this.indexes[c],g={};for(const w in d){const A=d[w];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+o),g[A.tileID.key]=A}this.indexes[c]=g}this.lng=e}addBucket(e,o,c){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let g=0;g<o.symbolInstances.length;g++)o.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const d=this.usedCrossTileIDs[e.overscaledZ];for(const g in this.indexes){const w=this.indexes[g];if(Number(g)>e.overscaledZ)for(const A in w){const S=w[A];S.tileID.isChildOf(e)&&S.findMatches(o.symbolInstances,e,d)}else{const A=w[e.scaledTo(Number(g)).key];A&&A.findMatches(o.symbolInstances,e,d)}}for(let g=0;g<o.symbolInstances.length;g++){const w=o.symbolInstances.get(g);w.crossTileID||(w.crossTileID=c.generate(),d[w.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new In(e,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(e,o){for(const c of o.getCrossTileIDsLists())for(const d of c)delete this.usedCrossTileIDs[e][d]}removeStaleBuckets(e){let o=!1;for(const c in this.indexes){const d=this.indexes[c];for(const g in d)e[d[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[g]),delete d[g],o=!0)}return o}}class pi{constructor(){this.layerIndexes={},this.crossTileIDs=new It,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,o,c){let d=this.layerIndexes[e.id];d===void 0&&(d=this.layerIndexes[e.id]=new Ai);let g=!1;const w={};d.handleWrapJump(c);for(const A of o){const S=A.getBucket(e);S&&e.id===S.layerIds[0]&&(S.bucketInstanceId||(S.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(A.tileID,S,this.crossTileIDs)&&(g=!0),w[S.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(g=!0),g}pruneUnusedLayers(e){const o={};e.forEach(c=>{o[c]=!0});for(const c in this.layerIndexes)o[c]||delete this.layerIndexes[c]}}const kr=(m,e)=>u.t(m,e&&e.filter(o=>o.identifier!=="source.canvas")),gr=u.aw();class Ec extends u.E{constructor(e,o={}){super(),this._rtlPluginLoaded=()=>{for(const c in this.sourceCaches){const d=this.sourceCaches[c].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[c].reload()}},this.map=e,this.dispatcher=new la(Xa(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(c,d)=>this.getGlyphs(c,d)),this.dispatcher.registerMessageHandler("GI",(c,d)=>this.getImages(c,d)),this.imageManager=new Ft,this.imageManager.setEventedParent(this),this.glyphManager=new Un(e._requestManager,o.localIdeographFontFamily),this.lineAtlas=new Tn(256,512),this.crossTileSymbolIndex=new pi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),Bn().on(Ne,this._rtlPluginLoaded),this.on("data",c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const d=this.sourceCaches[c.sourceId];if(!d)return;const g=d.getSource();if(g&&g.vectorLayerIds)for(const w in this._layers){const A=this._layers[w];A.source===g.id&&this._validateLayer(A)}})}loadURL(e,o={},c){this.fire(new u.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const d=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const g=this._loadStyleRequest;u.h(d,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,o,c)}).catch(w=>{this._loadStyleRequest=null,w&&!g.signal.aborted&&this.fire(new u.j(w))})}loadJSON(e,o={},c){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,j.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(e,o,c)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(gr,{validate:!1})}_load(e,o,c){var d;const g=o.transformStyle?o.transformStyle(c,e):e;if(!o.validate||!kr(this,u.u(g))){this._loaded=!0,this.stylesheet=g;for(const w in g.sources)this.addSource(w,g.sources[w],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new bt(this.stylesheet.light),this.sky=new Nt(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const e=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of e){const c=u.aA(o);c.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=c}}_loadSprite(e,o=!1,c=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(g,w,A,S){return u._(this,void 0,void 0,function*(){const T=pt(g),D=A>1?"@2x":"",P={},B={};for(const{id:G,url:H}of T){const Y=w.transformRequest(ct(H,D,".json"),"SpriteJSON");P[G]=u.h(Y,S);const Z=w.transformRequest(ct(H,D,".png"),"SpriteImage");B[G]=ce.getImage(Z,S)}return yield Promise.all([...Object.values(P),...Object.values(B)]),function(G,H){return u._(this,void 0,void 0,function*(){const Y={};for(const Z in G){Y[Z]={};const te=j.getImageCanvasContext((yield H[Z]).data),oe=(yield G[Z]).data;for(const K in oe){const{width:he,height:ge,x:_e,y:Pe,sdf:Be,pixelRatio:Je,stretchX:Ye,stretchY:Fe,content:je,textFitWidth:lt,textFitHeight:Et}=oe[K];Y[Z][K]={data:null,pixelRatio:Je,sdf:Be,stretchX:Ye,stretchY:Fe,content:je,textFitWidth:lt,textFitHeight:Et,spriteData:{width:he,height:ge,x:_e,y:Pe,context:te}}}}return Y})}(P,B)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(g=>{if(this._spriteRequest=null,g)for(const w in g){this._spritesImagesIds[w]=[];const A=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(S=>!(S in g)):[];for(const S of A)this.imageManager.removeImage(S),this._changedImages[S]=!0;for(const S in g[w]){const T=w==="default"?S:`${w}:${S}`;this._spritesImagesIds[w].push(T),T in this.imageManager.images?this.imageManager.updateImage(T,g[w][S],!1):this.imageManager.addImage(T,g[w][S]),o&&(this._changedImages[T]=!0)}}}).catch(g=>{this._spriteRequest=null,d=g,this.fire(new u.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),c&&c(d)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(e){const o=this.sourceCaches[e.source];if(!o)return;const c=e.sourceLayer;if(!c)return;const d=o.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(c)===-1)&&this.fire(new u.j(new Error(`Source layer "${c}" does not exist on source "${d.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,o=!1){const c=this._serializedAllLayers();if(!e||e.length===0)return Object.values(o?u.aB(c):c);const d=[];for(const g of e)if(c[g]){const w=o?u.aB(c[g]):c[g];d.push(w)}return d}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const o=Object.keys(this._layers);for(const c of o){const d=this._layers[c];d.type!=="custom"&&(e[c]=d.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const o=this._changed;if(o){const d=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(d.length||g.length)&&this._updateWorkerLayers(d,g);for(const w in this._updatedSources){const A=this._updatedSources[w];if(A==="reload")this._reloadSource(w);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const c={};for(const d in this.sourceCaches){const g=this.sourceCaches[d];c[d]=g.used,g.used=!1}for(const d of this._order){const g=this._layers[d];g.recalculate(e,this._availableImages),!g.isHidden(e.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(const d in c){const g=this.sourceCaches[d];!!c[d]!=!!g.used&&g.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,o&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,o={}){var c;this._checkLoaded();const d=this.serialize();if(e=o.transformStyle?o.transformStyle(d,e):e,((c=o.validate)===null||c===void 0||c)&&kr(this,u.u(e)))return!1;(e=u.aB(e)).layers=u.az(e.layers);const g=u.aC(d,e),w=this._getOperationsToPerform(g);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const A of w.operations)A();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const o=[],c=[];for(const d of e)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":o.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":o.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":o.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":o.push(()=>{});break;default:c.push(d.command)}return{operations:o,unimplemented:c}}addImage(e,o){if(this.getImage(e))return this.fire(new u.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,o),this._afterImageUpdated(e)}updateImage(e,o){this.imageManager.updateImage(e,o)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new u.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,o,c={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(u.u.source,`sources.${e}`,o,null,c))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const d=this.sourceCaches[e]=new yt(e,o,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:e})),d.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===e)return this.fire(new u.j(new Error(`Source "${e}" cannot be removed while layer "${c}" is using it.`)));const o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,o){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const c=this.sourceCaches[e].getSource();if(c.type!=="geojson")throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(o),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,o,c={}){this._checkLoaded();const d=e.id;if(this.getLayer(d))return void this.fire(new u.j(new Error(`Layer "${d}" already exists on this map.`)));let g;if(e.type==="custom"){if(kr(this,u.aD(e)))return;g=u.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(d,e.source),e=u.aB(e),e=u.e(e,{source:d})),this._validate(u.u.layer,`layers.${d}`,e,{arrayIndex:-1},c))return;g=u.aA(e),this._validateLayer(g),g.setEventedParent(this,{layer:{id:d}})}const w=o?this._order.indexOf(o):this._order.length;if(o&&w===-1)this.fire(new u.j(new Error(`Cannot add layer "${d}" before non-existing layer "${o}".`)));else{if(this._order.splice(w,0,d),this._layerOrderChanged=!0,this._layers[d]=g,this._removedLayers[d]&&g.source&&g.type!=="custom"){const A=this._removedLayers[d];delete this._removedLayers[d],A.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(e,o){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new u.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===o)return;const c=this._order.indexOf(e);this._order.splice(c,1);const d=o?this._order.indexOf(o):this._order.length;o&&d===-1?this.fire(new u.j(new Error(`Cannot move layer "${e}" before non-existing layer "${o}".`))):(this._order.splice(d,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const o=this._layers[e];if(!o)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${e}".`)));o.setEventedParent(null);const c=this._order.indexOf(e);this._order.splice(c,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=o,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],o.onRemove&&o.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,o,c){this._checkLoaded();const d=this.getLayer(e);d?d.minzoom===o&&d.maxzoom===c||(o!=null&&(d.minzoom=o),c!=null&&(d.maxzoom=c),this._updateLayer(d)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,o,c={}){this._checkLoaded();const d=this.getLayer(e);if(d){if(!u.aE(d.filter,o))return o==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(u.u.filter,`layers.${d.id}.filter`,o,null,c)||(d.filter=u.aB(o),this._updateLayer(d)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return u.aB(this.getLayer(e).filter)}setLayoutProperty(e,o,c,d={}){this._checkLoaded();const g=this.getLayer(e);g?u.aE(g.getLayoutProperty(o),c)||(g.setLayoutProperty(o,c,d),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,o){const c=this.getLayer(e);if(c)return c.getLayoutProperty(o);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,o,c,d={}){this._checkLoaded();const g=this.getLayer(e);g?u.aE(g.getPaintProperty(o),c)||(g.setPaintProperty(o,c,d)&&this._updateLayer(g),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,o){return this.getLayer(e).getPaintProperty(o)}setFeatureState(e,o){this._checkLoaded();const c=e.source,d=e.sourceLayer,g=this.sourceCaches[c];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)));const w=g.getSource().type;w==="geojson"&&d?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||d?(e.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.setFeatureState(d,e.id,o)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,o){this._checkLoaded();const c=e.source,d=this.sourceCaches[c];if(d===void 0)return void this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)));const g=d.getSource().type,w=g==="vector"?e.sourceLayer:void 0;g!=="vector"||w?o&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(w,e.id,o):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const o=e.source,c=e.sourceLayer,d=this.sourceCaches[o];if(d!==void 0)return d.getSource().type!=="vector"||c?(e.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(c,e.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=u.aF(this.sourceCaches,g=>g.serialize()),o=this._serializeByIds(this._order,!0),c=this.map.getTerrain()||void 0,d=this.stylesheet;return u.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:e,layers:o,terrain:c},g=>g!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const o=w=>this._layers[w].type==="fill-extrusion",c={},d=[];for(let w=this._order.length-1;w>=0;w--){const A=this._order[w];if(o(A)){c[A]=w;for(const S of e){const T=S[A];if(T)for(const D of T)d.push(D)}}}d.sort((w,A)=>A.intersectionZ-w.intersectionZ);const g=[];for(let w=this._order.length-1;w>=0;w--){const A=this._order[w];if(o(A))for(let S=d.length-1;S>=0;S--){const T=d[S].feature;if(c[T.layer.id]<w)break;g.push(T),d.pop()}else for(const S of e){const T=S[A];if(T)for(const D of T)g.push(D.feature)}}return g}queryRenderedFeatures(e,o,c){o&&o.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",o.filter,null,o);const d={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const A of o.layers){const S=this._layers[A];if(!S)return this.fire(new u.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];d[S.source]=!0}}const g=[];o.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const A in this.sourceCaches)o.layers&&!d[A]||g.push(ka(this.sourceCaches[A],this._layers,w,e,o,c));return this.placement&&g.push(function(A,S,T,D,P,B,G){const H={},Y=B.queryRenderedSymbols(D),Z=[];for(const te of Object.keys(Y).map(Number))Z.push(G[te]);Z.sort(pn);for(const te of Z){const oe=te.featureIndex.lookupSymbolFeatures(Y[te.bucketInstanceId],S,te.bucketIndex,te.sourceLayerIndex,P.filter,P.layers,P.availableImages,A);for(const K in oe){const he=H[K]=H[K]||[],ge=oe[K];ge.sort((_e,Pe)=>{const Be=te.featureSortOrder;if(Be){const Je=Be.indexOf(_e.featureIndex);return Be.indexOf(Pe.featureIndex)-Je}return Pe.featureIndex-_e.featureIndex});for(const _e of ge)he.push(_e)}}for(const te in H)H[te].forEach(oe=>{const K=oe.feature,he=T[A[te].source].getFeatureState(K.layer["source-layer"],K.id);K.source=K.layer.source,K.layer["source-layer"]&&(K.sourceLayer=K.layer["source-layer"]),K.state=he});return H}(this._layers,w,this.sourceCaches,e,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(e,o){o&&o.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",o.filter,null,o);const c=this.sourceCaches[e];return c?function(d,g){const w=d.getRenderableIds().map(T=>d.getTileByID(T)),A=[],S={};for(let T=0;T<w.length;T++){const D=w[T],P=D.tileID.canonical.key;S[P]||(S[P]=!0,D.querySourceFeatures(A,g))}return A}(c,o):[]}getLight(){return this.light.getLight()}setLight(e,o={}){this._checkLoaded();const c=this.light.getLight();let d=!1;for(const w in e)if(!u.aE(e[w],c[w])){d=!0;break}if(!d)return;const g={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,o),this.light.updateTransitions(g)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,o={}){const c=this.getSky();let d=!1;if(!e&&!c)return;if(e&&!c)d=!0;else if(!e&&c)d=!0;else for(const w in e)if(!u.aE(e[w],c[w])){d=!0;break}if(!d)return;const g={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,o),this.sky.updateTransitions(g)}_validate(e,o,c,d,g={}){return(!g||g.validate!==!1)&&kr(this,e.call(u.u,u.e({key:o,style:this.serialize(),value:c,styleSpec:u.v},d)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Bn().off(Ne,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const c=this.sourceCaches[o];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const o in this.sourceCaches)this.sourceCaches[o].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,o,c,d,g=!1){let w=!1,A=!1;const S={};for(const T of this._order){const D=this._layers[T];if(D.type!=="symbol")continue;if(!S[D.source]){const B=this.sourceCaches[D.source];S[D.source]=B.getRenderableIds(!0).map(G=>B.getTileByID(G)).sort((G,H)=>H.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(H.tileID)?-1:1))}const P=this.crossTileSymbolIndex.addLayer(D,S[D.source],e.center.lng);w=w||P}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||c===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.now(),e.zoom))&&(this.pauseablePlacement=new _t(e,this.map.terrain,this._order,g,o,c,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,S),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.now()),A=!0),w&&this.pauseablePlacement.placement.setStale()),A||w)for(const T of this._order){const D=this._layers[T];D.type==="symbol"&&this.placement.updateLayerOpacities(D,S[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,o){return u._(this,void 0,void 0,function*(){const c=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,o.icons),c})}getGlyphs(e,o){return u._(this,void 0,void 0,function*(){const c=yield this.glyphManager.getGlyphs(o.stacks),d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,[""]),c})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,o={}){this._checkLoaded(),e&&this._validate(u.u.glyphs,"glyphs",e,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,o,c={},d){this._checkLoaded();const g=[{id:e,url:o}],w=[...pt(this.stylesheet.sprite),...g];this._validate(u.u.sprite,"sprite",w,null,c)||(this.stylesheet.sprite=w,this._loadSprite(g,!0,d))}removeSprite(e){this._checkLoaded();const o=pt(this.stylesheet.sprite);if(o.find(c=>c.id===e)){if(this._spritesImagesIds[e])for(const c of this._spritesImagesIds[e])this.imageManager.removeImage(c),this._changedImages[c]=!0;o.splice(o.findIndex(c=>c.id===e),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return pt(this.stylesheet.sprite)}setSprite(e,o={},c){this._checkLoaded(),e&&this._validate(u.u.sprite,"sprite",e,null,o)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,c):(this._unloadSprite(),c&&c(null)))}}var es=u.Y([{name:"a_pos",type:"Int16",components:2}]);const yr={prelude:$t(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:$t(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:$t(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$t(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$t("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$t(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:$t(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$t("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$t("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$t("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:$t(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:$t(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:$t(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:$t(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$t(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$t(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$t(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$t(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:$t(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$t(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$t(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$t(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$t(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:$t(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$t(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$t(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$t("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:$t("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:$t("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:$t("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function $t(m,e){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=e.match(/attribute ([\w]+) ([\w]+)/g),d=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=g?g.concat(d):d,A={};return{fragmentSource:m=m.replace(o,(S,T,D,P,B)=>(A[B]=!0,T==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${D} ${P} ${B};
#else
uniform ${D} ${P} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${D} ${P} ${B} = u_${B};
#endif
`)),vertexSource:e=e.replace(o,(S,T,D,P,B)=>{const G=P==="float"?"vec2":"vec4",H=B.match(/color/)?"color":G;return A[B]?T==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${D} ${G} a_${B};
varying ${D} ${P} ${B};
#else
uniform ${D} ${P} u_${B};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${D} ${P} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${H}(a_${B}, u_${B}_t);
#else
    ${D} ${P} ${B} = u_${B};
#endif
`:T==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${D} ${G} a_${B};
#else
uniform ${D} ${P} u_${B};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${D} ${P} ${B} = a_${B};
#else
    ${D} ${P} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${D} ${P} ${B} = unpack_mix_${H}(a_${B}, u_${B}_t);
#else
    ${D} ${P} ${B} = u_${B};
#endif
`}),staticAttributes:c,staticUniforms:w}}class tl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,o,c,d,g,w,A,S,T){this.context=e;let D=this.boundPaintVertexBuffers.length!==d.length;for(let P=0;!D&&P<d.length;P++)this.boundPaintVertexBuffers[P]!==d[P]&&(D=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==c||D||this.boundIndexBuffer!==g||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==S||this.boundDynamicVertexBuffer3!==T?this.freshBind(o,c,d,g,w,A,S,T):(e.bindVertexArray.set(this.vao),A&&A.bind(),g&&g.dynamicDraw&&g.bind(),S&&S.bind(),T&&T.bind())}freshBind(e,o,c,d,g,w,A,S){const T=e.numAttributes,D=this.context,P=D.gl;this.vao&&this.destroy(),this.vao=D.createVertexArray(),D.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=S,o.enableAttributes(P,e);for(const B of c)B.enableAttributes(P,e);w&&w.enableAttributes(P,e),A&&A.enableAttributes(P,e),S&&S.enableAttributes(P,e),o.bind(),o.setVertexAttribPointers(P,e,g);for(const B of c)B.bind(),B.setVertexAttribPointers(P,e,g);w&&(w.bind(),w.setVertexAttribPointers(P,e,g)),d&&d.bind(),A&&(A.bind(),A.setVertexAttribPointers(P,e,g)),S&&(S.bind(),S.setVertexAttribPointers(P,e,g)),D.currentNumAttributes=T}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Tc=(m,e,o,c,d)=>({u_matrix:m,u_texture:0,u_ele_delta:e,u_fog_matrix:o,u_fog_color:c?c.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:c?c.calculateFogBlendOpacity(d):0,u_horizon_color:c?c.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1});function ts(m){const e=[];for(let o=0;o<m.length;o++){if(m[o]===null)continue;const c=m[o].split(" ");e.push(c.pop())}return e}class nl{constructor(e,o,c,d,g,w){const A=e.gl;this.program=A.createProgram();const S=ts(o.staticAttributes),T=c?c.getBinderAttributes():[],D=S.concat(T),P=yr.prelude.staticUniforms?ts(yr.prelude.staticUniforms):[],B=o.staticUniforms?ts(o.staticUniforms):[],G=c?c.getBinderUniforms():[],H=P.concat(B).concat(G),Y=[];for(const _e of H)Y.indexOf(_e)<0&&Y.push(_e);const Z=c?c.defines():[];g&&Z.push("#define OVERDRAW_INSPECTOR;"),w&&Z.push("#define TERRAIN3D;");const te=Z.concat(yr.prelude.fragmentSource,o.fragmentSource).join(`
`),oe=Z.concat(yr.prelude.vertexSource,o.vertexSource).join(`
`),K=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(K,te),A.compileShader(K),!A.getShaderParameter(K,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(K)}`);A.attachShader(this.program,K);const he=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(he,oe),A.compileShader(he),!A.getShaderParameter(he,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(he)}`);A.attachShader(this.program,he),this.attributes={};const ge={};this.numAttributes=D.length;for(let _e=0;_e<this.numAttributes;_e++)D[_e]&&(A.bindAttribLocation(this.program,_e,D[_e]),this.attributes[D[_e]]=_e);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(he),A.deleteShader(K);for(let _e=0;_e<Y.length;_e++){const Pe=Y[_e];if(Pe&&!ge[Pe]){const Be=A.getUniformLocation(this.program,Pe);Be&&(ge[Pe]=Be)}}this.fixedUniforms=d(e,ge),this.terrainUniforms=((_e,Pe)=>({u_depth:new u.aH(_e,Pe.u_depth),u_terrain:new u.aH(_e,Pe.u_terrain),u_terrain_dim:new u.aI(_e,Pe.u_terrain_dim),u_terrain_matrix:new u.aJ(_e,Pe.u_terrain_matrix),u_terrain_unpack:new u.aK(_e,Pe.u_terrain_unpack),u_terrain_exaggeration:new u.aI(_e,Pe.u_terrain_exaggeration)}))(e,ge),this.binderUniforms=c?c.getUniforms(e,ge):[]}draw(e,o,c,d,g,w,A,S,T,D,P,B,G,H,Y,Z,te,oe){const K=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(c),e.setStencilMode(d),e.setColorMode(g),e.setCullFace(w),S){e.activeTexture.set(K.TEXTURE2),K.bindTexture(K.TEXTURE_2D,S.depthTexture),e.activeTexture.set(K.TEXTURE3),K.bindTexture(K.TEXTURE_2D,S.texture);for(const ge in this.terrainUniforms)this.terrainUniforms[ge].set(S[ge])}for(const ge in this.fixedUniforms)this.fixedUniforms[ge].set(A[ge]);Y&&Y.setUniforms(e,this.binderUniforms,G,{zoom:H});let he=0;switch(o){case K.LINES:he=2;break;case K.TRIANGLES:he=3;break;case K.LINE_STRIP:he=1}for(const ge of B.get()){const _e=ge.vaos||(ge.vaos={});(_e[T]||(_e[T]=new tl)).bind(e,this,D,Y?Y.getPaintVertexBuffers():[],P,ge.vertexOffset,Z,te,oe),K.drawElements(o,ge.primitiveLength*he,K.UNSIGNED_SHORT,ge.primitiveOffset*he*2)}}}function il(m,e,o){const c=1/ze(o,1,e.transform.tileZoom),d=Math.pow(2,o.tileID.overscaledZ),g=o.tileSize*Math.pow(2,e.transform.tileZoom)/d,w=g*(o.tileID.canonical.x+o.tileID.wrap*d),A=g*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[c,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[w>>16,A>>16],u_pixel_coord_lower:[65535&w,65535&A]}}const al=(m,e,o,c)=>{const d=e.style.light,g=d.properties.get("position"),w=[g.x,g.y,g.z],A=function(){var T=new u.A(9);return u.A!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[5]=0,T[6]=0,T[7]=0),T[0]=1,T[4]=1,T[8]=1,T}();d.properties.get("anchor")==="viewport"&&function(T,D){var P=Math.sin(D),B=Math.cos(D);T[0]=B,T[1]=P,T[2]=0,T[3]=-P,T[4]=B,T[5]=0,T[6]=0,T[7]=0,T[8]=1}(A,-e.transform.angle),function(T,D,P){var B=D[0],G=D[1],H=D[2];T[0]=B*P[0]+G*P[3]+H*P[6],T[1]=B*P[1]+G*P[4]+H*P[7],T[2]=B*P[2]+G*P[5]+H*P[8]}(w,w,A);const S=d.properties.get("color");return{u_matrix:m,u_lightpos:w,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[S.r,S.g,S.b],u_vertical_gradient:+o,u_opacity:c}},rl=(m,e,o,c,d,g,w)=>u.e(al(m,e,o,c),il(g,e,w),{u_height_factor:-Math.pow(2,d.overscaledZ)/w.tileSize/8}),ns=m=>({u_matrix:m}),uo=(m,e,o,c)=>u.e(ns(m),il(o,e,c)),cf=(m,e)=>({u_matrix:m,u_world:e}),uf=(m,e,o,c,d)=>u.e(uo(m,e,o,c),{u_world:d}),kd=(m,e,o,c)=>{const d=m.transform;let g,w;if(c.paint.get("circle-pitch-alignment")==="map"){const A=ze(o,1,d.zoom);g=!0,w=[A,A]}else g=!1,w=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(e.posMatrix,o,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:w}},df=(m,e,o)=>({u_matrix:m,u_inv_matrix:e,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}),_r=(m,e,o=1)=>({u_matrix:m,u_color:e,u_overlay:0,u_overlay_scale:o}),is=m=>({u_matrix:m}),Ni=(m,e,o,c)=>({u_matrix:m,u_extrude_scale:ze(e,1,o),u_intensity:c});function ji(m,e){const o=Math.pow(2,e.canonical.z),c=e.canonical.y;return[new u.Z(0,c/o).toLngLat().lat,new u.Z(0,(c+1)/o).toLngLat().lat]}const as=(m,e,o,c)=>{const d=m.transform;return{u_matrix:Bd(m,e,o,c),u_ratio:1/ze(e,1,d.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},ol=(m,e,o,c,d)=>u.e(as(m,e,o,d),{u_image:0,u_image_height:c}),Ld=(m,e,o,c,d)=>{const g=m.transform,w=Lr(e,g);return{u_matrix:Bd(m,e,o,d),u_texsize:e.imageAtlasTexture.size,u_ratio:1/ze(e,1,g.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Od=(m,e,o,c,d,g)=>{const w=m.lineAtlas,A=Lr(e,m.transform),S=o.layout.get("line-cap")==="round",T=w.getDash(c.from,S),D=w.getDash(c.to,S),P=T.width*d.fromScale,B=D.width*d.toScale;return u.e(as(m,e,o,g),{u_patternscale_a:[A/P,-T.height/2],u_patternscale_b:[A/B,-D.height/2],u_sdfgamma:w.width/(256*Math.min(P,B)*m.pixelRatio)/2,u_image:0,u_tex_y_a:T.y,u_tex_y_b:D.y,u_mix:d.t})};function Lr(m,e){return 1/ze(m,1,e.tileZoom)}function Bd(m,e,o,c){return m.translatePosMatrix(c?c.posMatrix:e.tileID.posMatrix,e,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const hf=(m,e,o,c,d)=>{return{u_matrix:m,u_tl_parent:e,u_scale_parent:o,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(w=d.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(g=d.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:pf(d.paint.get("raster-hue-rotate"))};var g,w};function pf(m){m*=Math.PI/180;const e=Math.sin(m),o=Math.cos(m);return[(2*o+1)/3,(-Math.sqrt(3)*e-o+1)/3,(Math.sqrt(3)*e-o+1)/3]}const Fd=(m,e,o,c,d,g,w,A,S,T,D,P,B,G)=>{const H=w.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:H.width/H.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:S,u_coord_matrix:T,u_is_text:+P,u_pitch_with_map:+c,u_is_along_line:d,u_is_variable_anchor:g,u_texsize:B,u_texture:0,u_translation:D,u_pitched_scale:G}},Nd=(m,e,o,c,d,g,w,A,S,T,D,P,B,G,H)=>{const Y=w.transform;return u.e(Fd(m,e,o,c,d,g,w,A,S,T,D,P,B,H),{u_gamma_scale:c?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+G})},ff=(m,e,o,c,d,g,w,A,S,T,D,P,B,G)=>u.e(Nd(m,e,o,c,d,g,w,A,S,T,D,!0,P,!0,G),{u_texsize_icon:B,u_texture_icon:1}),sl=(m,e,o)=>({u_matrix:m,u_opacity:e,u_color:o}),Mc=(m,e,o,c,d,g)=>u.e(function(w,A,S,T){const D=S.imageManager.getPattern(w.from.toString()),P=S.imageManager.getPattern(w.to.toString()),{width:B,height:G}=S.imageManager.getPixelSize(),H=Math.pow(2,T.tileID.overscaledZ),Y=T.tileSize*Math.pow(2,S.transform.tileZoom)/H,Z=Y*(T.tileID.canonical.x+T.tileID.wrap*H),te=Y*T.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:P.tl,u_pattern_br_b:P.br,u_texsize:[B,G],u_mix:A.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:P.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/ze(T,1,S.transform.tileZoom),u_pixel_coord_upper:[Z>>16,te>>16],u_pixel_coord_lower:[65535&Z,65535&te]}}(c,g,o,d),{u_matrix:m,u_opacity:e}),ll={fillExtrusion:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_lightpos:new u.aN(m,e.u_lightpos),u_lightintensity:new u.aI(m,e.u_lightintensity),u_lightcolor:new u.aN(m,e.u_lightcolor),u_vertical_gradient:new u.aI(m,e.u_vertical_gradient),u_opacity:new u.aI(m,e.u_opacity)}),fillExtrusionPattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_lightpos:new u.aN(m,e.u_lightpos),u_lightintensity:new u.aI(m,e.u_lightintensity),u_lightcolor:new u.aN(m,e.u_lightcolor),u_vertical_gradient:new u.aI(m,e.u_vertical_gradient),u_height_factor:new u.aI(m,e.u_height_factor),u_image:new u.aH(m,e.u_image),u_texsize:new u.aO(m,e.u_texsize),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade),u_opacity:new u.aI(m,e.u_opacity)}),fill:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix)}),fillPattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_image:new u.aH(m,e.u_image),u_texsize:new u.aO(m,e.u_texsize),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade)}),fillOutline:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_world:new u.aO(m,e.u_world)}),fillOutlinePattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_world:new u.aO(m,e.u_world),u_image:new u.aH(m,e.u_image),u_texsize:new u.aO(m,e.u_texsize),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade)}),circle:(m,e)=>({u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_scale_with_map:new u.aH(m,e.u_scale_with_map),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_extrude_scale:new u.aO(m,e.u_extrude_scale),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_matrix:new u.aJ(m,e.u_matrix)}),collisionBox:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_pixel_extrude_scale:new u.aO(m,e.u_pixel_extrude_scale)}),collisionCircle:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_inv_matrix:new u.aJ(m,e.u_inv_matrix),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_viewport_size:new u.aO(m,e.u_viewport_size)}),debug:(m,e)=>({u_color:new u.aL(m,e.u_color),u_matrix:new u.aJ(m,e.u_matrix),u_overlay:new u.aH(m,e.u_overlay),u_overlay_scale:new u.aI(m,e.u_overlay_scale)}),clippingMask:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix)}),heatmap:(m,e)=>({u_extrude_scale:new u.aI(m,e.u_extrude_scale),u_intensity:new u.aI(m,e.u_intensity),u_matrix:new u.aJ(m,e.u_matrix)}),heatmapTexture:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_world:new u.aO(m,e.u_world),u_image:new u.aH(m,e.u_image),u_color_ramp:new u.aH(m,e.u_color_ramp),u_opacity:new u.aI(m,e.u_opacity)}),hillshade:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_image:new u.aH(m,e.u_image),u_latrange:new u.aO(m,e.u_latrange),u_light:new u.aO(m,e.u_light),u_shadow:new u.aL(m,e.u_shadow),u_highlight:new u.aL(m,e.u_highlight),u_accent:new u.aL(m,e.u_accent)}),hillshadePrepare:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_image:new u.aH(m,e.u_image),u_dimension:new u.aO(m,e.u_dimension),u_zoom:new u.aI(m,e.u_zoom),u_unpack:new u.aK(m,e.u_unpack)}),line:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels)}),lineGradient:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels),u_image:new u.aH(m,e.u_image),u_image_height:new u.aI(m,e.u_image_height)}),linePattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_texsize:new u.aO(m,e.u_texsize),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_image:new u.aH(m,e.u_image),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels),u_scale:new u.aN(m,e.u_scale),u_fade:new u.aI(m,e.u_fade)}),lineSDF:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ratio:new u.aI(m,e.u_ratio),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_units_to_pixels:new u.aO(m,e.u_units_to_pixels),u_patternscale_a:new u.aO(m,e.u_patternscale_a),u_patternscale_b:new u.aO(m,e.u_patternscale_b),u_sdfgamma:new u.aI(m,e.u_sdfgamma),u_image:new u.aH(m,e.u_image),u_tex_y_a:new u.aI(m,e.u_tex_y_a),u_tex_y_b:new u.aI(m,e.u_tex_y_b),u_mix:new u.aI(m,e.u_mix)}),raster:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_tl_parent:new u.aO(m,e.u_tl_parent),u_scale_parent:new u.aI(m,e.u_scale_parent),u_buffer_scale:new u.aI(m,e.u_buffer_scale),u_fade_t:new u.aI(m,e.u_fade_t),u_opacity:new u.aI(m,e.u_opacity),u_image0:new u.aH(m,e.u_image0),u_image1:new u.aH(m,e.u_image1),u_brightness_low:new u.aI(m,e.u_brightness_low),u_brightness_high:new u.aI(m,e.u_brightness_high),u_saturation_factor:new u.aI(m,e.u_saturation_factor),u_contrast_factor:new u.aI(m,e.u_contrast_factor),u_spin_weights:new u.aN(m,e.u_spin_weights)}),symbolIcon:(m,e)=>({u_is_size_zoom_constant:new u.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(m,e.u_is_size_feature_constant),u_size_t:new u.aI(m,e.u_size_t),u_size:new u.aI(m,e.u_size),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_pitch:new u.aI(m,e.u_pitch),u_rotate_symbol:new u.aH(m,e.u_rotate_symbol),u_aspect_ratio:new u.aI(m,e.u_aspect_ratio),u_fade_change:new u.aI(m,e.u_fade_change),u_matrix:new u.aJ(m,e.u_matrix),u_label_plane_matrix:new u.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new u.aJ(m,e.u_coord_matrix),u_is_text:new u.aH(m,e.u_is_text),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_is_along_line:new u.aH(m,e.u_is_along_line),u_is_variable_anchor:new u.aH(m,e.u_is_variable_anchor),u_texsize:new u.aO(m,e.u_texsize),u_texture:new u.aH(m,e.u_texture),u_translation:new u.aO(m,e.u_translation),u_pitched_scale:new u.aI(m,e.u_pitched_scale)}),symbolSDF:(m,e)=>({u_is_size_zoom_constant:new u.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(m,e.u_is_size_feature_constant),u_size_t:new u.aI(m,e.u_size_t),u_size:new u.aI(m,e.u_size),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_pitch:new u.aI(m,e.u_pitch),u_rotate_symbol:new u.aH(m,e.u_rotate_symbol),u_aspect_ratio:new u.aI(m,e.u_aspect_ratio),u_fade_change:new u.aI(m,e.u_fade_change),u_matrix:new u.aJ(m,e.u_matrix),u_label_plane_matrix:new u.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new u.aJ(m,e.u_coord_matrix),u_is_text:new u.aH(m,e.u_is_text),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_is_along_line:new u.aH(m,e.u_is_along_line),u_is_variable_anchor:new u.aH(m,e.u_is_variable_anchor),u_texsize:new u.aO(m,e.u_texsize),u_texture:new u.aH(m,e.u_texture),u_gamma_scale:new u.aI(m,e.u_gamma_scale),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_is_halo:new u.aH(m,e.u_is_halo),u_translation:new u.aO(m,e.u_translation),u_pitched_scale:new u.aI(m,e.u_pitched_scale)}),symbolTextAndIcon:(m,e)=>({u_is_size_zoom_constant:new u.aH(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(m,e.u_is_size_feature_constant),u_size_t:new u.aI(m,e.u_size_t),u_size:new u.aI(m,e.u_size),u_camera_to_center_distance:new u.aI(m,e.u_camera_to_center_distance),u_pitch:new u.aI(m,e.u_pitch),u_rotate_symbol:new u.aH(m,e.u_rotate_symbol),u_aspect_ratio:new u.aI(m,e.u_aspect_ratio),u_fade_change:new u.aI(m,e.u_fade_change),u_matrix:new u.aJ(m,e.u_matrix),u_label_plane_matrix:new u.aJ(m,e.u_label_plane_matrix),u_coord_matrix:new u.aJ(m,e.u_coord_matrix),u_is_text:new u.aH(m,e.u_is_text),u_pitch_with_map:new u.aH(m,e.u_pitch_with_map),u_is_along_line:new u.aH(m,e.u_is_along_line),u_is_variable_anchor:new u.aH(m,e.u_is_variable_anchor),u_texsize:new u.aO(m,e.u_texsize),u_texsize_icon:new u.aO(m,e.u_texsize_icon),u_texture:new u.aH(m,e.u_texture),u_texture_icon:new u.aH(m,e.u_texture_icon),u_gamma_scale:new u.aI(m,e.u_gamma_scale),u_device_pixel_ratio:new u.aI(m,e.u_device_pixel_ratio),u_is_halo:new u.aH(m,e.u_is_halo),u_translation:new u.aO(m,e.u_translation),u_pitched_scale:new u.aI(m,e.u_pitched_scale)}),background:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_opacity:new u.aI(m,e.u_opacity),u_color:new u.aL(m,e.u_color)}),backgroundPattern:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_opacity:new u.aI(m,e.u_opacity),u_image:new u.aH(m,e.u_image),u_pattern_tl_a:new u.aO(m,e.u_pattern_tl_a),u_pattern_br_a:new u.aO(m,e.u_pattern_br_a),u_pattern_tl_b:new u.aO(m,e.u_pattern_tl_b),u_pattern_br_b:new u.aO(m,e.u_pattern_br_b),u_texsize:new u.aO(m,e.u_texsize),u_mix:new u.aI(m,e.u_mix),u_pattern_size_a:new u.aO(m,e.u_pattern_size_a),u_pattern_size_b:new u.aO(m,e.u_pattern_size_b),u_scale_a:new u.aI(m,e.u_scale_a),u_scale_b:new u.aI(m,e.u_scale_b),u_pixel_coord_upper:new u.aO(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(m,e.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(m,e.u_tile_units_to_pixels)}),terrain:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_texture:new u.aH(m,e.u_texture),u_ele_delta:new u.aI(m,e.u_ele_delta),u_fog_matrix:new u.aJ(m,e.u_fog_matrix),u_fog_color:new u.aL(m,e.u_fog_color),u_fog_ground_blend:new u.aI(m,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(m,e.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(m,e.u_horizon_color),u_horizon_fog_blend:new u.aI(m,e.u_horizon_fog_blend)}),terrainDepth:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_ele_delta:new u.aI(m,e.u_ele_delta)}),terrainCoords:(m,e)=>({u_matrix:new u.aJ(m,e.u_matrix),u_texture:new u.aH(m,e.u_texture),u_terrain_coords_id:new u.aI(m,e.u_terrain_coords_id),u_ele_delta:new u.aI(m,e.u_ele_delta)}),sky:(m,e)=>({u_sky_color:new u.aL(m,e.u_sky_color),u_horizon_color:new u.aL(m,e.u_horizon_color),u_horizon:new u.aI(m,e.u_horizon),u_sky_horizon_blend:new u.aI(m,e.u_sky_horizon_blend)})};class Ic{constructor(e,o,c){this.context=e;const d=e.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ba{constructor(e,o,c,d){this.length=o.length,this.attributes=c,this.itemSize=o.bytesPerElement,this.dynamicDraw=d,this.context=e;const g=e.gl;this.buffer=g.createBuffer(),e.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,o){for(let c=0;c<this.attributes.length;c++){const d=o.attributes[this.attributes[c].name];d!==void 0&&e.enableVertexAttribArray(d)}}setVertexAttribPointers(e,o,c){for(let d=0;d<this.attributes.length;d++){const g=this.attributes[d],w=o.attributes[g.name];w!==void 0&&e.vertexAttribPointer(w,g.components,e[Pc[g.type]],!1,this.itemSize,g.offset+this.itemSize*(c||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Dc=new WeakMap;function ho(m){var e;if(Dc.has(m))return Dc.get(m);{const o=(e=m.getParameter(m.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Dc.set(m,o),o}}class Vt{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rs extends Vt{getDefault(){return u.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class mf extends Vt{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class cl extends Vt{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class gf extends Vt{getDefault(){return[!0,!0,!0,!0]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class po extends Vt{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class yf extends Vt{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class jd extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const o=this.current;(e.func!==o.func||e.ref!==o.ref||e.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class _f extends Vt{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Vd extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=e,this.dirty=!1}}class zc extends Vt{getDefault(){return[0,1]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ud extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=e,this.dirty=!1}}class qd extends Vt{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Gd extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.BLEND):o.disable(o.BLEND),this.current=e,this.dirty=!1}}class Hd extends Vt{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Or extends Vt{getDefault(){return u.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class $d extends Vt{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class vf extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=e,this.dirty=!1}}class Zd extends Vt{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class os extends Vt{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class xf extends Vt{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class ul extends Vt{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class bf extends Vt{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class wf extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Wd extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Xd extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Kd extends Vt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Rc extends Vt{getDefault(){return null}set(e){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Jd extends Vt{getDefault(){return null}set(e){var o;if(e===this.current&&!this.dirty)return;const c=this.gl;ho(c)?c.bindVertexArray(e):(o=c.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class dl extends Vt{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Qa extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class kc extends Vt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class ss extends Vt{constructor(e,o){super(e),this.context=e,this.parent=o}getDefault(){return null}}class Lc extends ss{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Yd extends ss{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Oc extends ss{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Br{constructor(e,o,c,d,g){this.context=e,this.width=o,this.height=c;const w=e.gl,A=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new Lc(e,A),d)this.depthAttachment=g?new Oc(e,A):new Yd(e,A);else if(g)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,o=this.colorAttachment.get();if(o&&e.deleteTexture(o),this.depthAttachment){const c=this.depthAttachment.get();c&&e.deleteRenderbuffer(c)}e.deleteFramebuffer(this.framebuffer)}}class vn{constructor(e,o,c){this.blendFunction=e,this.blendColor=o,this.mask=c}}vn.Replace=[1,0],vn.disabled=new vn(vn.Replace,u.aM.transparent,[!1,!1,!1,!1]),vn.unblended=new vn(vn.Replace,u.aM.transparent,[!0,!0,!0,!0]),vn.alphaBlended=new vn([1,771],u.aM.transparent,[!0,!0,!0,!0]);class Cf{constructor(e){var o,c;if(this.gl=e,this.clearColor=new rs(this),this.clearDepth=new mf(this),this.clearStencil=new cl(this),this.colorMask=new gf(this),this.depthMask=new po(this),this.stencilMask=new yf(this),this.stencilFunc=new jd(this),this.stencilOp=new _f(this),this.stencilTest=new Vd(this),this.depthRange=new zc(this),this.depthTest=new Ud(this),this.depthFunc=new qd(this),this.blend=new Gd(this),this.blendFunc=new Hd(this),this.blendColor=new Or(this),this.blendEquation=new $d(this),this.cullFace=new vf(this),this.cullFaceSide=new Zd(this),this.frontFace=new os(this),this.program=new xf(this),this.activeTexture=new ul(this),this.viewport=new bf(this),this.bindFramebuffer=new wf(this),this.bindRenderbuffer=new Wd(this),this.bindTexture=new Xd(this),this.bindVertexBuffer=new Kd(this),this.bindElementBuffer=new Rc(this),this.bindVertexArray=new Jd(this),this.pixelStoreUnpack=new dl(this),this.pixelStoreUnpackPremultiplyAlpha=new Qa(this),this.pixelStoreUnpackFlipY=new kc(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),ho(e)){this.HALF_FLOAT=e.HALF_FLOAT;const d=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=e.RGBA16F)!==null&&o!==void 0?o:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(c=e.RGB16F)!==null&&c!==void 0?c:d==null?void 0:d.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const d=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,o){return new Ic(this,e,o)}createVertexBuffer(e,o,c){return new Ba(this,e,o,c)}createRenderbuffer(e,o,c){const d=this.gl,g=d.createRenderbuffer();return this.bindRenderbuffer.set(g),d.renderbufferStorage(d.RENDERBUFFER,e,o,c),this.bindRenderbuffer.set(null),g}createFramebuffer(e,o,c,d){return new Br(this,e,o,c,d)}clear({color:e,depth:o,stencil:c}){const d=this.gl;let g=0;e&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),c!==void 0&&(g|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(c),this.stencilMask.set(255)),d.clear(g)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){u.aE(e.blendFunction,vn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return ho(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var o;return ho(this.gl)?this.gl.deleteVertexArray(e):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Lt{constructor(e,o,c){this.func=e,this.mask=o,this.range=c}}Lt.ReadOnly=!1,Lt.ReadWrite=!0,Lt.disabled=new Lt(519,Lt.ReadOnly,[0,1]);const Bc=7680;class dn{constructor(e,o,c,d,g,w){this.test=e,this.ref=o,this.mask=c,this.fail=d,this.depthFail=g,this.pass=w}}dn.disabled=new dn({func:519,mask:0},0,0,Bc,Bc,Bc);class en{constructor(e,o,c){this.enable=e,this.mode=o,this.frontFace=c}}let hl;function Fc(m,e,o,c,d){const g=m.context,w=g.gl,A=m.useProgram("collisionBox"),S=[];let T=0,D=0;for(let te=0;te<c.length;te++){const oe=c[te],K=e.getTile(oe).getBucket(o);if(!K)continue;const he=d?K.textCollisionBox:K.iconCollisionBox,ge=K.collisionCircleArray;if(ge.length>0){const _e=u.H();u.aQ(_e,K.placementInvProjMatrix,m.transform.glCoordMatrix),u.aQ(_e,_e,K.placementViewportMatrix),S.push({circleArray:ge,circleOffset:D,transform:oe.posMatrix,invTransform:_e,coord:oe}),T+=ge.length/4,D=T}he&&A.draw(g,w.LINES,Lt.disabled,dn.disabled,m.colorModeForRenderPass(),en.disabled,{u_matrix:oe.posMatrix,u_pixel_extrude_scale:[1/(P=m.transform).width,1/P.height]},m.style.map.terrain&&m.style.map.terrain.getTerrainData(oe),o.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,null,m.transform.zoom,null,null,he.collisionVertexBuffer)}var P;if(!d||!S.length)return;const B=m.useProgram("collisionCircle"),G=new u.aR;G.resize(4*T),G._trim();let H=0;for(const te of S)for(let oe=0;oe<te.circleArray.length/4;oe++){const K=4*oe,he=te.circleArray[K+0],ge=te.circleArray[K+1],_e=te.circleArray[K+2],Pe=te.circleArray[K+3];G.emplace(H++,he,ge,_e,Pe,0),G.emplace(H++,he,ge,_e,Pe,1),G.emplace(H++,he,ge,_e,Pe,2),G.emplace(H++,he,ge,_e,Pe,3)}(!hl||hl.length<2*T)&&(hl=function(te){const oe=2*te,K=new u.aT;K.resize(oe),K._trim();for(let he=0;he<oe;he++){const ge=6*he;K.uint16[ge+0]=4*he+0,K.uint16[ge+1]=4*he+1,K.uint16[ge+2]=4*he+2,K.uint16[ge+3]=4*he+2,K.uint16[ge+4]=4*he+3,K.uint16[ge+5]=4*he+0}return K}(T));const Y=g.createIndexBuffer(hl,!0),Z=g.createVertexBuffer(G,u.aS.members,!0);for(const te of S){const oe=df(te.transform,te.invTransform,m.transform);B.draw(g,w.TRIANGLES,Lt.disabled,dn.disabled,m.colorModeForRenderPass(),en.disabled,oe,m.style.map.terrain&&m.style.map.terrain.getTerrainData(te.coord),o.id,Z,Y,u.a0.simpleSegment(0,2*te.circleOffset,te.circleArray.length,te.circleArray.length/2),null,m.transform.zoom,null,null,null)}Z.destroy(),Y.destroy()}en.disabled=new en(!1,1029,2305),en.backCCW=new en(!0,1029,2305);const ls=u.an(new Float32Array(16));function pl(m,e,o,c,d,g){const{horizontalAlign:w,verticalAlign:A}=u.au(m);return new u.P((-(w-.5)*e/d+c[0])*g,(-(A-.5)*o/d+c[1])*g)}function fl(m,e,o,c,d,g){const w=e.tileAnchorPoint.add(new u.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let A=c.mult(g);return o||(A=A.rotate(-d)),Q(w.add(A),e.labelPlaneMatrix,e.getElevation).point}if(o){const A=Ae(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(m),S=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return m.add(c.rotate(S))}return m.add(c)}function Nc(m,e,o,c,d,g,w,A,S,T,D,P,B,G){const H=m.text.placedSymbolArray,Y=m.text.dynamicLayoutVertexArray,Z=m.icon.dynamicLayoutVertexArray,te={};Y.clear();for(let oe=0;oe<H.length;oe++){const K=H.get(oe),he=K.hidden||!K.crossTileID||m.allowVerticalPlacement&&!K.placedOrientation?null:c[K.crossTileID];if(he){const ge=new u.P(K.anchorX,K.anchorY),_e={getElevation:G,width:d.width,height:d.height,labelPlaneMatrix:g,lineVertexArray:null,pitchWithMap:o,projection:D,projectionCache:null,tileAnchorPoint:ge,translation:P,unwrappedTileID:B},Pe=o?Q(ge,w,G):Ae(ge.x,ge.y,_e),Be=k(d.cameraToCenterDistance,Pe.signedDistanceFromCamera);let Je=u.ai(m.textSizeData,S,K)*Be/u.ap;o&&(Je*=m.tilePixelRatio/A);const{width:Ye,height:Fe,anchor:je,textOffset:lt,textBoxScale:Et}=he,He=pl(je,Ye,Fe,lt,Et,Je),Ze=D.getPitchedTextCorrection(d,ge.add(new u.P(P[0],P[1])),B),wt=fl(Pe.point,_e,e,He,d.angle,Ze),tn=m.allowVerticalPlacement&&K.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let Dt=0;Dt<K.numGlyphs;Dt++)u.aj(Y,wt,tn);T&&K.associatedIconIndex>=0&&(te[K.associatedIconIndex]={shiftedAnchor:wt,angle:tn})}else ue(K.numGlyphs,Y)}if(T){Z.clear();const oe=m.icon.placedSymbolArray;for(let K=0;K<oe.length;K++){const he=oe.get(K);if(he.hidden)ue(he.numGlyphs,Z);else{const ge=te[K];if(ge)for(let _e=0;_e<he.numGlyphs;_e++)u.aj(Z,ge.shiftedAnchor,ge.angle);else ue(he.numGlyphs,Z)}}m.icon.dynamicLayoutVertexBuffer.updateData(Z)}m.text.dynamicLayoutVertexBuffer.updateData(Y)}function Fr(m,e,o){return o.iconsInText&&e?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Nr(m,e,o,c,d,g,w,A,S,T,D,P){const B=m.context,G=B.gl,H=m.transform,Y=Ya(),Z=A==="map",te=S==="map",oe=A!=="viewport"&&o.layout.get("symbol-placement")!=="point",K=Z&&!te&&!oe,he=!te&&oe,ge=!o.layout.get("symbol-sort-key").isConstant();let _e=!1;const Pe=m.depthModeForSublayer(0,Lt.ReadOnly),Be=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Je=[],Ye=Y.getCircleRadiusCorrection(H);for(const Fe of c){const je=e.getTile(Fe),lt=je.getBucket(o);if(!lt)continue;const Et=d?lt.text:lt.icon;if(!Et||!Et.segments.get().length||!Et.hasVisibleVertices)continue;const He=Et.programConfigurations.get(o.id),Ze=d||lt.sdfIcons,wt=d?lt.textSizeData:lt.iconSizeData,tn=te||H.pitch!==0,Dt=m.useProgram(Fr(Ze,d,lt),He),kt=u.ag(wt,H.zoom),on=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Fe);let ii,_a,sn,Si,fi=[0,0],ai=null;if(d)_a=je.glyphAtlasTexture,sn=G.LINEAR,ii=je.glyphAtlasTexture.size,lt.iconsInText&&(fi=je.imageAtlasTexture.size,ai=je.imageAtlasTexture,Si=tn||m.options.rotating||m.options.zooming||wt.kind==="composite"||wt.kind==="camera"?G.LINEAR:G.NEAREST);else{const xn=o.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;_a=je.imageAtlasTexture,sn=Ze||m.options.rotating||m.options.zooming||xn||tn?G.LINEAR:G.NEAREST,ii=je.imageAtlasTexture.size}const ri=ze(je,1,m.transform.zoom),va=he?Fe.posMatrix:ls,Gr=Bi(va,te,Z,m.transform,ri),Cs=Fi(va,te,Z,m.transform,ri),Hr=Fi(Fe.posMatrix,te,Z,m.transform,ri),xr=Y.translatePosition(m.transform,je,g,w),zl=Be&&lt.hasTextData(),du=o.layout.get("icon-text-fit")!=="none"&&zl&&lt.hasIconData();if(oe){const xn=m.style.map.terrain?(wr,As)=>m.style.map.terrain.getElevation(Fe,wr,As):null,Ao=o.layout.get("text-rotation-alignment")==="map";q(lt,Fe.posMatrix,m,d,Gr,Hr,te,T,Ao,Y,Fe.toUnwrapped(),H.width,H.height,xr,xn)}const ta=Fe.posMatrix,xa=d&&Be||du,br=oe||xa?ls:Gr,ba=Cs,mi=Ze&&o.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=Ze?lt.iconsInText?ff(wt.kind,kt,K,te,oe,xa,m,ta,br,ba,xr,ii,fi,Ye):Nd(wt.kind,kt,K,te,oe,xa,m,ta,br,ba,xr,d,ii,!0,Ye):Fd(wt.kind,kt,K,te,oe,xa,m,ta,br,ba,xr,d,ii,Ye);const qi={program:Dt,buffers:Et,uniformValues:oi,atlasTexture:_a,atlasTextureIcon:ai,atlasInterpolation:sn,atlasInterpolationIcon:Si,isSDF:Ze,hasHalo:mi};if(ge&&lt.canOverlap){_e=!0;const xn=Et.segments.get();for(const Ao of xn)Je.push({segments:new u.a0([Ao]),sortKey:Ao.sortKey,state:qi,terrainData:on})}else Je.push({segments:Et.segments,sortKey:0,state:qi,terrainData:on})}_e&&Je.sort((Fe,je)=>Fe.sortKey-je.sortKey);for(const Fe of Je){const je=Fe.state;if(B.activeTexture.set(G.TEXTURE0),je.atlasTexture.bind(je.atlasInterpolation,G.CLAMP_TO_EDGE),je.atlasTextureIcon&&(B.activeTexture.set(G.TEXTURE1),je.atlasTextureIcon&&je.atlasTextureIcon.bind(je.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),je.isSDF){const lt=je.uniformValues;je.hasHalo&&(lt.u_is_halo=1,Vi(je.buffers,Fe.segments,o,m,je.program,Pe,D,P,lt,Fe.terrainData)),lt.u_is_halo=0}Vi(je.buffers,Fe.segments,o,m,je.program,Pe,D,P,je.uniformValues,Fe.terrainData)}}function Vi(m,e,o,c,d,g,w,A,S,T){const D=c.context;d.draw(D,D.gl.TRIANGLES,g,w,A,en.disabled,S,T,o.id,m.layoutVertexBuffer,m.indexBuffer,e,o.paint,c.transform.zoom,m.programConfigurations.get(o.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function jc(m,e,o,c,d){if(!o||!c||!c.imageAtlas)return;const g=c.imageAtlas.patternPositions;let w=g[o.to.toString()],A=g[o.from.toString()];if(!w&&A&&(w=A),!A&&w&&(A=w),!w||!A){const S=d.getPaintProperty(e);w=g[S],A=g[S]}w&&A&&m.setConstantPatternPositions(w,A)}function Vc(m,e,o,c,d,g,w){const A=m.context.gl,S="fill-pattern",T=o.paint.get(S),D=T&&T.constantOr(1),P=o.getCrossfadeParameters();let B,G,H,Y,Z;w?(G=D&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=A.LINES):(G=D?"fillPattern":"fill",B=A.TRIANGLES);const te=T.constantOr(null);for(const oe of c){const K=e.getTile(oe);if(D&&!K.patternsLoaded())continue;const he=K.getBucket(o);if(!he)continue;const ge=he.programConfigurations.get(o.id),_e=m.useProgram(G,ge),Pe=m.style.map.terrain&&m.style.map.terrain.getTerrainData(oe);D&&(m.context.activeTexture.set(A.TEXTURE0),K.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ge.updatePaintBuffers(P)),jc(ge,S,te,K,o);const Be=Pe?oe:null,Je=m.translatePosMatrix(Be?Be.posMatrix:oe.posMatrix,K,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(w){Y=he.indexBuffer2,Z=he.segments2;const Ye=[A.drawingBufferWidth,A.drawingBufferHeight];H=G==="fillOutlinePattern"&&D?uf(Je,m,P,K,Ye):cf(Je,Ye)}else Y=he.indexBuffer,Z=he.segments,H=D?uo(Je,m,P,K):ns(Je);_e.draw(m.context,B,d,m.stencilModeForClipping(oe),g,en.disabled,H,Pe,o.id,he.layoutVertexBuffer,Y,Z,o.paint,m.transform.zoom,ge)}}function cs(m,e,o,c,d,g,w){const A=m.context,S=A.gl,T="fill-extrusion-pattern",D=o.paint.get(T),P=D.constantOr(1),B=o.getCrossfadeParameters(),G=o.paint.get("fill-extrusion-opacity"),H=D.constantOr(null);for(const Y of c){const Z=e.getTile(Y),te=Z.getBucket(o);if(!te)continue;const oe=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Y),K=te.programConfigurations.get(o.id),he=m.useProgram(P?"fillExtrusionPattern":"fillExtrusion",K);P&&(m.context.activeTexture.set(S.TEXTURE0),Z.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),K.updatePaintBuffers(B)),jc(K,T,H,Z,o);const ge=m.translatePosMatrix(Y.posMatrix,Z,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),_e=o.paint.get("fill-extrusion-vertical-gradient"),Pe=P?rl(ge,m,_e,G,Y,B,Z):al(ge,m,_e,G);he.draw(A,A.gl.TRIANGLES,d,g,w,en.backCCW,Pe,oe,o.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,o.paint,m.transform.zoom,K,m.style.map.terrain&&te.centroidVertexBuffer)}}function jr(m,e,o,c,d,g,w){const A=m.context,S=A.gl,T=o.fbo;if(!T)return;const D=m.useProgram("hillshade"),P=m.style.map.terrain&&m.style.map.terrain.getTerrainData(e);A.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,T.colorAttachment.get()),D.draw(A,S.TRIANGLES,d,g,w,en.disabled,((B,G,H,Y)=>{const Z=H.paint.get("hillshade-shadow-color"),te=H.paint.get("hillshade-highlight-color"),oe=H.paint.get("hillshade-accent-color");let K=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(K-=B.transform.angle);const he=!B.options.moving;return{u_matrix:Y?Y.posMatrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),he),u_image:0,u_latrange:ji(0,G.tileID),u_light:[H.paint.get("hillshade-exaggeration"),K],u_shadow:Z,u_highlight:te,u_accent:oe}})(m,o,c,P?e:null),P,c.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function ml(m,e,o,c,d,g){const w=m.context,A=w.gl,S=e.dem;if(S&&S.data){const T=S.dim,D=S.stride,P=S.getPixels();if(w.activeTexture.set(A.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||m.getTileTexture(D),e.demTexture){const G=e.demTexture;G.update(P,{premultiply:!1}),G.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else e.demTexture=new ot(w,P,A.RGBA,{premultiply:!1}),e.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);w.activeTexture.set(A.TEXTURE0);let B=e.fbo;if(!B){const G=new ot(w,{width:T,height:T,data:null},A.RGBA);G.bind(A.LINEAR,A.CLAMP_TO_EDGE),B=e.fbo=w.createFramebuffer(T,T,!0,!1),B.colorAttachment.set(G.texture)}w.bindFramebuffer.set(B.framebuffer),w.viewport.set([0,0,T,T]),m.useProgram("hillshadePrepare").draw(w,A.TRIANGLES,c,d,g,en.disabled,((G,H)=>{const Y=H.stride,Z=u.H();return u.aP(Z,0,u.X,-u.X,0,0,1),u.J(Z,Z,[0,-u.X,0]),{u_matrix:Z,u_image:1,u_dimension:[Y,Y],u_zoom:G.overscaledZ,u_unpack:H.getUnpackVector()}})(e.tileID,S),null,o.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function gl(m,e,o,c,d,g){const w=c.paint.get("raster-fade-duration");if(!g&&w>0){const A=j.now(),S=(A-m.timeAdded)/w,T=e?(A-e.timeAdded)/w:-1,D=o.getSource(),P=d.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),B=!e||Math.abs(e.tileID.overscaledZ-P)>Math.abs(m.tileID.overscaledZ-P),G=B&&m.refreshedUponExpiration?1:u.ac(B?S:1-T,0,1);return m.refreshedUponExpiration&&S>=1&&(m.refreshedUponExpiration=!1),e?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}const us=new u.aM(1,0,0,1),yl=new u.aM(0,1,0,1),Qd=new u.aM(0,0,1,1),fo=new u.aM(1,0,1,1),mo=new u.aM(0,1,1,1);function Uc(m,e,o,c){jt(m,0,e+o/2,m.transform.width,o,c)}function _l(m,e,o,c){jt(m,e-o/2,0,o,m.transform.height,c)}function jt(m,e,o,c,d,g){const w=m.context,A=w.gl;A.enable(A.SCISSOR_TEST),A.scissor(e*m.pixelRatio,o*m.pixelRatio,c*m.pixelRatio,d*m.pixelRatio),w.clear({color:g}),A.disable(A.SCISSOR_TEST)}function vl(m,e,o){const c=m.context,d=c.gl,g=o.posMatrix,w=m.useProgram("debug"),A=Lt.disabled,S=dn.disabled,T=m.colorModeForRenderPass(),D="$debug",P=m.style.map.terrain&&m.style.map.terrain.getTerrainData(o);c.activeTexture.set(d.TEXTURE0);const B=e.getTileByID(o.key).latestRawTileData,G=Math.floor((B&&B.byteLength||0)/1024),H=e.getTile(o).tileSize,Y=512/Math.min(H,512)*(o.overscaledZ/m.transform.zoom)*.5;let Z=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(Z+=` => ${o.overscaledZ}`),function(te,oe){te.initDebugOverlayCanvas();const K=te.debugOverlayCanvas,he=te.context.gl,ge=te.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,K.width,K.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(oe,5,5),ge.strokeText(oe,5,5),te.debugOverlayTexture.update(K),te.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(m,`${Z} ${G}kB`),w.draw(c,d.TRIANGLES,A,S,vn.alphaBlended,en.disabled,_r(g,u.aM.transparent,Y),null,D,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),w.draw(c,d.LINE_STRIP,A,S,T,en.disabled,_r(g,u.aM.red),P,D,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function eh(m,e,o){const c=m.context,d=c.gl,g=m.colorModeForRenderPass(),w=new Lt(d.LEQUAL,Lt.ReadWrite,m.depthRangeFor3D),A=m.useProgram("terrain"),S=e.getTerrainMesh();c.bindFramebuffer.set(null),c.viewport.set([0,0,m.width,m.height]);for(const T of o){const D=m.renderToTexture.getTexture(T),P=e.getTerrainData(T.tileID);c.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,D.texture);const B=m.transform.calculatePosMatrix(T.tileID.toUnwrapped()),G=e.getMeshFrameDelta(m.transform.zoom),H=m.transform.calculateFogMatrix(T.tileID.toUnwrapped()),Y=Tc(B,G,H,m.style.sky,m.transform.pitch);A.draw(c,d.TRIANGLES,w,dn.disabled,g,en.backCCW,Y,P,"terrain",S.vertexBuffer,S.indexBuffer,S.segments)}}class qc{constructor(e,o,c){this.vertexBuffer=e,this.indexBuffer=o,this.segments=c}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class ds{constructor(e,o){this.context=new Cf(e),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=yt.maxUnderzooming+yt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pi}resize(e,o,c){if(this.width=Math.floor(e*c),this.height=Math.floor(o*c),this.pixelRatio=c,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const d of this.style._order)this.style._layers[d].resize()}setup(){const e=this.context,o=new u.aW;o.emplaceBack(0,0),o.emplaceBack(u.X,0),o.emplaceBack(0,u.X),o.emplaceBack(u.X,u.X),this.tileExtentBuffer=e.createVertexBuffer(o,es.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const c=new u.aW;c.emplaceBack(0,0),c.emplaceBack(u.X,0),c.emplaceBack(0,u.X),c.emplaceBack(u.X,u.X),this.debugBuffer=e.createVertexBuffer(c,es.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const d=new u.$;d.emplaceBack(0,0,0,0),d.emplaceBack(u.X,0,u.X,0),d.emplaceBack(0,u.X,0,u.X),d.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=e.createVertexBuffer(d,La.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const g=new u.aW;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(g,es.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const w=new u.aY;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(w);const A=new u.aX;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(A);const S=this.context.gl;this.stencilClearMode=new dn({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)}clearStencil(){const e=this.context,o=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const c=u.H();u.aP(c,0,this.width,this.height,0,0,1),u.K(c,c,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,o.TRIANGLES,Lt.disabled,this.stencilClearMode,vn.disabled,en.disabled,is(c),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,o){if(this.currentStencilSource===e.source||!e.isTileClipped()||!o||!o.length)return;this.currentStencilSource=e.source;const c=this.context,d=c.gl;this.nextStencilID+o.length>256&&this.clearStencil(),c.setColorMode(vn.disabled),c.setDepthMode(Lt.disabled);const g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of o){const A=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,S=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);g.draw(c,d.TRIANGLES,Lt.disabled,new dn({func:d.ALWAYS,mask:0},A,255,d.KEEP,d.KEEP,d.REPLACE),vn.disabled,en.disabled,is(w.posMatrix),S,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,o=this.context.gl;return new dn({func:o.NOTEQUAL,mask:255},e,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(e){const o=this.context.gl;return new dn({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(e){const o=this.context.gl,c=e.sort((w,A)=>A.overscaledZ-w.overscaledZ),d=c[c.length-1].overscaledZ,g=c[0].overscaledZ-d+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();const w={};for(let A=0;A<g;A++)w[A+d]=new dn({func:o.GEQUAL,mask:255},A+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=g,[w,c]}return[{[d]:dn.disabled},c]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new vn([e.CONSTANT_COLOR,e.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?vn.unblended:vn.alphaBlended}depthModeForSublayer(e,o,c){if(!this.opaquePassEnabledForLayer())return Lt.disabled;const d=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Lt(c||this.context.gl.LEQUAL,o,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,o){this.style=e,this.options=o,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(j.now()),this.imageManager.beginFrame();const c=this.style._order,d=this.style.sourceCaches,g={},w={},A={};for(const S in d){const T=d[S];T.used&&T.prepare(this.context),g[S]=T.getVisibleCoordinates(),w[S]=g[S].slice().reverse(),A[S]=T.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let S=0;S<c.length;S++)if(this.style._layers[c[S]].is3D()){this.opaquePassCutoff=S;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const S of c){const T=this.style._layers[S];if(!T.hasOffscreenPass()||T.isHidden(this.transform.zoom))continue;const D=w[T.source];(T.type==="custom"||D.length)&&this.renderLayer(this,d[T.source],T,D)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(S,T){const D=S.context,P=D.gl,B=((te,oe,K)=>({u_sky_color:te.properties.get("sky-color"),u_horizon_color:te.properties.get("horizon-color"),u_horizon:(oe.height/2+oe.getHorizon())*K,u_sky_horizon_blend:te.properties.get("sky-horizon-blend")*oe.height/2*K}))(T,S.style.map.transform,S.pixelRatio),G=new Lt(P.LEQUAL,Lt.ReadWrite,[0,1]),H=dn.disabled,Y=S.colorModeForRenderPass(),Z=S.useProgram("sky");if(!T.mesh){const te=new u.aW;te.emplaceBack(-1,-1),te.emplaceBack(1,-1),te.emplaceBack(1,1),te.emplaceBack(-1,1);const oe=new u.aX;oe.emplaceBack(0,1,2),oe.emplaceBack(0,2,3),T.mesh=new qc(D.createVertexBuffer(te,es.members),D.createIndexBuffer(oe),u.a0.simpleSegment(0,0,te.length,oe.length))}Z.draw(D,P.TRIANGLES,G,H,Y,en.disabled,B,void 0,"sky",T.mesh.vertexBuffer,T.mesh.indexBuffer,T.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){const S=this.style._layers[c[this.currentLayer]],T=d[S.source],D=g[S.source];this._renderTileClippingMasks(S,D),this.renderLayer(this,T,S,D)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){const S=this.style._layers[c[this.currentLayer]],T=d[S.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(S))continue;const D=(S.type==="symbol"?A:w)[S.source];this._renderTileClippingMasks(S,g[S.source]),this.renderLayer(this,T,S,D)}if(this.options.showTileBoundaries){const S=function(T,D){let P=null;const B=Object.values(T._layers).flatMap(Z=>Z.source&&!Z.isHidden(D)?[T.sourceCaches[Z.source]]:[]),G=B.filter(Z=>Z.getSource().type==="vector"),H=B.filter(Z=>Z.getSource().type!=="vector"),Y=Z=>{(!P||P.getSource().maxzoom<Z.getSource().maxzoom)&&(P=Z)};return G.forEach(Z=>Y(Z)),P||H.forEach(Z=>Y(Z)),P}(this.style,this.transform.zoom);S&&function(T,D,P){for(let B=0;B<P.length;B++)vl(T,D,P[B])}(this,S,S.getVisibleCoordinates())}this.options.showPadding&&function(S){const T=S.transform.padding;Uc(S,S.transform.height-(T.top||0),3,us),Uc(S,T.bottom||0,3,yl),_l(S,T.left||0,3,Qd),_l(S,S.transform.width-(T.right||0),3,fo);const D=S.transform.centerPoint;(function(P,B,G,H){jt(P,B-1,G-10,2,20,H),jt(P,B-10,G-1,20,2,H)})(S,D.x,S.transform.height-D.y,mo)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,c=this.transform.modelViewProjectionMatrix;let d=this.terrainFacilitator.dirty;d||(d=e?!u.aZ(o,c):!u.a_(o,c)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(u.a$(o,c),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(g,w){const A=g.context,S=A.gl,T=vn.unblended,D=new Lt(S.LEQUAL,Lt.ReadWrite,[0,1]),P=w.getTerrainMesh(),B=w.sourceCache.getRenderableTiles(),G=g.useProgram("terrainDepth");A.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),A.clear({color:u.aM.transparent,depth:1});for(const H of B){const Y=w.getTerrainData(H.tileID),Z={u_matrix:g.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(g.transform.zoom)};G.draw(A,S.TRIANGLES,D,dn.disabled,T,en.backCCW,Z,Y,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain),function(g,w){const A=g.context,S=A.gl,T=vn.unblended,D=new Lt(S.LEQUAL,Lt.ReadWrite,[0,1]),P=w.getTerrainMesh(),B=w.getCoordsTexture(),G=w.sourceCache.getRenderableTiles(),H=g.useProgram("terrainCoords");A.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),A.clear({color:u.aM.transparent,depth:1}),w.coordsIndex=[];for(const Y of G){const Z=w.getTerrainData(Y.tileID);A.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,B.texture);const te={u_matrix:g.transform.calculatePosMatrix(Y.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(g.transform.zoom)};H.draw(A,S.TRIANGLES,D,dn.disabled,T,en.backCCW,te,Z,"terrain",P.vertexBuffer,P.indexBuffer,P.segments),w.coordsIndex.push(Y.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain))}renderLayer(e,o,c,d){if(!c.isHidden(this.transform.zoom)&&(c.type==="background"||c.type==="custom"||(d||[]).length))switch(this.id=c.id,c.type){case"symbol":(function(g,w,A,S,T){if(g.renderPass!=="translucent")return;const D=dn.disabled,P=g.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(B,G,H,Y,Z,te,oe,K,he){const ge=G.transform,_e=Ya(),Pe=Z==="map",Be=te==="map";for(const Je of B){const Ye=Y.getTile(Je),Fe=Ye.getBucket(H);if(!Fe||!Fe.text||!Fe.text.segments.get().length)continue;const je=u.ag(Fe.textSizeData,ge.zoom),lt=ze(Ye,1,G.transform.zoom),Et=Bi(Je.posMatrix,Be,Pe,G.transform,lt),He=H.layout.get("icon-text-fit")!=="none"&&Fe.hasIconData();if(je){const Ze=Math.pow(2,ge.zoom-Ye.tileID.overscaledZ),wt=G.style.map.terrain?(Dt,kt)=>G.style.map.terrain.getElevation(Je,Dt,kt):null,tn=_e.translatePosition(ge,Ye,oe,K);Nc(Fe,Pe,Be,he,ge,Et,Je.posMatrix,Ze,je,He,_e,tn,Je.toUnwrapped(),wt)}}}(S,g,A,w,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),T),A.paint.get("icon-opacity").constantOr(1)!==0&&Nr(g,w,A,S,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),D,P),A.paint.get("text-opacity").constantOr(1)!==0&&Nr(g,w,A,S,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),D,P),w.map.showCollisionBoxes&&(Fc(g,w,A,S,!0),Fc(g,w,A,S,!1))})(e,o,c,d,this.style.placement.variableOffsets);break;case"circle":(function(g,w,A,S){if(g.renderPass!=="translucent")return;const T=A.paint.get("circle-opacity"),D=A.paint.get("circle-stroke-width"),P=A.paint.get("circle-stroke-opacity"),B=!A.layout.get("circle-sort-key").isConstant();if(T.constantOr(1)===0&&(D.constantOr(1)===0||P.constantOr(1)===0))return;const G=g.context,H=G.gl,Y=g.depthModeForSublayer(0,Lt.ReadOnly),Z=dn.disabled,te=g.colorModeForRenderPass(),oe=[];for(let K=0;K<S.length;K++){const he=S[K],ge=w.getTile(he),_e=ge.getBucket(A);if(!_e)continue;const Pe=_e.programConfigurations.get(A.id),Be=g.useProgram("circle",Pe),Je=_e.layoutVertexBuffer,Ye=_e.indexBuffer,Fe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(he),je={programConfiguration:Pe,program:Be,layoutVertexBuffer:Je,indexBuffer:Ye,uniformValues:kd(g,he,ge,A),terrainData:Fe};if(B){const lt=_e.segments.get();for(const Et of lt)oe.push({segments:new u.a0([Et]),sortKey:Et.sortKey,state:je})}else oe.push({segments:_e.segments,sortKey:0,state:je})}B&&oe.sort((K,he)=>K.sortKey-he.sortKey);for(const K of oe){const{programConfiguration:he,program:ge,layoutVertexBuffer:_e,indexBuffer:Pe,uniformValues:Be,terrainData:Je}=K.state;ge.draw(G,H.TRIANGLES,Y,Z,te,en.disabled,Be,Je,A.id,_e,Pe,K.segments,A.paint,g.transform.zoom,he)}})(e,o,c,d);break;case"heatmap":(function(g,w,A,S){if(A.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const T=g.context,D=T.gl,P=dn.disabled,B=new vn([D.ONE,D.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(G,H,Y){const Z=G.gl;G.activeTexture.set(Z.TEXTURE1),G.viewport.set([0,0,H.width/4,H.height/4]);let te=Y.heatmapFbo;if(te)Z.bindTexture(Z.TEXTURE_2D,te.colorAttachment.get()),G.bindFramebuffer.set(te.framebuffer);else{const oe=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,oe),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),te=Y.heatmapFbo=G.createFramebuffer(H.width/4,H.height/4,!1,!1),function(K,he,ge,_e){var Pe,Be;const Je=K.gl,Ye=(Pe=K.HALF_FLOAT)!==null&&Pe!==void 0?Pe:Je.UNSIGNED_BYTE,Fe=(Be=K.RGBA16F)!==null&&Be!==void 0?Be:Je.RGBA;Je.texImage2D(Je.TEXTURE_2D,0,Fe,he.width/4,he.height/4,0,Je.RGBA,Ye,null),_e.colorAttachment.set(ge)}(G,H,oe,te)}})(T,g,A),T.clear({color:u.aM.transparent});for(let G=0;G<S.length;G++){const H=S[G];if(w.hasRenderableParent(H))continue;const Y=w.getTile(H),Z=Y.getBucket(A);if(!Z)continue;const te=Z.programConfigurations.get(A.id),oe=g.useProgram("heatmap",te),{zoom:K}=g.transform;oe.draw(T,D.TRIANGLES,Lt.disabled,P,B,en.disabled,Ni(H.posMatrix,Y,K,A.paint.get("heatmap-intensity")),null,A.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,A.paint,g.transform.zoom,te)}T.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(T,D){const P=T.context,B=P.gl,G=D.heatmapFbo;if(!G)return;P.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,G.colorAttachment.get()),P.activeTexture.set(B.TEXTURE1);let H=D.colorRampTexture;H||(H=D.colorRampTexture=new ot(P,D.colorRamp,B.RGBA)),H.bind(B.LINEAR,B.CLAMP_TO_EDGE),T.useProgram("heatmapTexture").draw(P,B.TRIANGLES,Lt.disabled,dn.disabled,T.colorModeForRenderPass(),en.disabled,((Y,Z,te,oe)=>{const K=u.H();u.aP(K,0,Y.width,Y.height,0,0,1);const he=Y.context.gl;return{u_matrix:K,u_world:[he.drawingBufferWidth,he.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(T,D),null,D.id,T.viewportBuffer,T.quadTriangleIndexBuffer,T.viewportSegments,D.paint,T.transform.zoom)}(g,A))})(e,o,c,d);break;case"line":(function(g,w,A,S){if(g.renderPass!=="translucent")return;const T=A.paint.get("line-opacity"),D=A.paint.get("line-width");if(T.constantOr(1)===0||D.constantOr(1)===0)return;const P=g.depthModeForSublayer(0,Lt.ReadOnly),B=g.colorModeForRenderPass(),G=A.paint.get("line-dasharray"),H=A.paint.get("line-pattern"),Y=H.constantOr(1),Z=A.paint.get("line-gradient"),te=A.getCrossfadeParameters(),oe=Y?"linePattern":G?"lineSDF":Z?"lineGradient":"line",K=g.context,he=K.gl;let ge=!0;for(const _e of S){const Pe=w.getTile(_e);if(Y&&!Pe.patternsLoaded())continue;const Be=Pe.getBucket(A);if(!Be)continue;const Je=Be.programConfigurations.get(A.id),Ye=g.context.program.get(),Fe=g.useProgram(oe,Je),je=ge||Fe.program!==Ye,lt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(_e),Et=H.constantOr(null);if(Et&&Pe.imageAtlas){const wt=Pe.imageAtlas,tn=wt.patternPositions[Et.to.toString()],Dt=wt.patternPositions[Et.from.toString()];tn&&Dt&&Je.setConstantPatternPositions(tn,Dt)}const He=lt?_e:null,Ze=Y?Ld(g,Pe,A,te,He):G?Od(g,Pe,A,G,te,He):Z?ol(g,Pe,A,Be.lineClipsArray.length,He):as(g,Pe,A,He);if(Y)K.activeTexture.set(he.TEXTURE0),Pe.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Je.updatePaintBuffers(te);else if(G&&(je||g.lineAtlas.dirty))K.activeTexture.set(he.TEXTURE0),g.lineAtlas.bind(K);else if(Z){const wt=Be.gradients[A.id];let tn=wt.texture;if(A.gradientVersion!==wt.version){let Dt=256;if(A.stepInterpolant){const kt=w.getSource().maxzoom,on=_e.canonical.z===kt?Math.ceil(1<<g.transform.maxZoom-_e.canonical.z):1;Dt=u.ac(u.aU(Be.maxLineLength/u.X*1024*on),256,K.maxTextureSize)}wt.gradient=u.aV({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Dt,image:wt.gradient||void 0,clips:Be.lineClipsArray}),wt.texture?wt.texture.update(wt.gradient):wt.texture=new ot(K,wt.gradient,he.RGBA),wt.version=A.gradientVersion,tn=wt.texture}K.activeTexture.set(he.TEXTURE0),tn.bind(A.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}Fe.draw(K,he.TRIANGLES,P,g.stencilModeForClipping(_e),B,en.disabled,Ze,lt,A.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,A.paint,g.transform.zoom,Je,Be.layoutVertexBuffer2),ge=!1}})(e,o,c,d);break;case"fill":(function(g,w,A,S){const T=A.paint.get("fill-color"),D=A.paint.get("fill-opacity");if(D.constantOr(1)===0)return;const P=g.colorModeForRenderPass(),B=A.paint.get("fill-pattern"),G=g.opaquePassEnabledForLayer()&&!B.constantOr(1)&&T.constantOr(u.aM.transparent).a===1&&D.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===G){const H=g.depthModeForSublayer(1,g.renderPass==="opaque"?Lt.ReadWrite:Lt.ReadOnly);Vc(g,w,A,S,H,P,!1)}if(g.renderPass==="translucent"&&A.paint.get("fill-antialias")){const H=g.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Lt.ReadOnly);Vc(g,w,A,S,H,P,!0)}})(e,o,c,d);break;case"fill-extrusion":(function(g,w,A,S){const T=A.paint.get("fill-extrusion-opacity");if(T!==0&&g.renderPass==="translucent"){const D=new Lt(g.context.gl.LEQUAL,Lt.ReadWrite,g.depthRangeFor3D);if(T!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))cs(g,w,A,S,D,dn.disabled,vn.disabled),cs(g,w,A,S,D,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const P=g.colorModeForRenderPass();cs(g,w,A,S,D,dn.disabled,P)}}})(e,o,c,d);break;case"hillshade":(function(g,w,A,S){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const T=g.context,D=g.depthModeForSublayer(0,Lt.ReadOnly),P=g.colorModeForRenderPass(),[B,G]=g.renderPass==="translucent"?g.stencilConfigForOverlap(S):[{},S];for(const H of G){const Y=w.getTile(H);Y.needsHillshadePrepare!==void 0&&Y.needsHillshadePrepare&&g.renderPass==="offscreen"?ml(g,Y,A,D,dn.disabled,P):g.renderPass==="translucent"&&jr(g,H,Y,A,D,B[H.overscaledZ],P)}T.viewport.set([0,0,g.width,g.height])})(e,o,c,d);break;case"raster":(function(g,w,A,S){if(g.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!S.length)return;const T=g.context,D=T.gl,P=w.getSource(),B=g.useProgram("raster"),G=g.colorModeForRenderPass(),[H,Y]=P instanceof ua?[{},S]:g.stencilConfigForOverlap(S),Z=Y[Y.length-1].overscaledZ,te=!g.options.moving;for(const oe of Y){const K=g.depthModeForSublayer(oe.overscaledZ-Z,A.paint.get("raster-opacity")===1?Lt.ReadWrite:Lt.ReadOnly,D.LESS),he=w.getTile(oe);he.registerFadeDuration(A.paint.get("raster-fade-duration"));const ge=w.findLoadedParent(oe,0),_e=w.findLoadedSibling(oe),Pe=gl(he,ge||_e||null,w,A,g.transform,g.style.map.terrain);let Be,Je;const Ye=A.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;T.activeTexture.set(D.TEXTURE0),he.texture.bind(Ye,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),T.activeTexture.set(D.TEXTURE1),ge?(ge.texture.bind(Ye,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),Be=Math.pow(2,ge.tileID.overscaledZ-he.tileID.overscaledZ),Je=[he.tileID.canonical.x*Be%1,he.tileID.canonical.y*Be%1]):he.texture.bind(Ye,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST),he.texture.useMipmap&&T.extTextureFilterAnisotropic&&g.transform.pitch>20&&D.texParameterf(D.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax);const Fe=g.style.map.terrain&&g.style.map.terrain.getTerrainData(oe),je=Fe?oe:null,lt=je?je.posMatrix:g.transform.calculatePosMatrix(oe.toUnwrapped(),te),Et=hf(lt,Je||[0,0],Be||1,Pe,A);P instanceof ua?B.draw(T,D.TRIANGLES,K,dn.disabled,G,en.disabled,Et,Fe,A.id,P.boundsBuffer,g.quadTriangleIndexBuffer,P.boundsSegments):B.draw(T,D.TRIANGLES,K,H[oe.overscaledZ],G,en.disabled,Et,Fe,A.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}})(e,o,c,d);break;case"background":(function(g,w,A,S){const T=A.paint.get("background-color"),D=A.paint.get("background-opacity");if(D===0)return;const P=g.context,B=P.gl,G=g.transform,H=G.tileSize,Y=A.paint.get("background-pattern");if(g.isPatternMissing(Y))return;const Z=!Y&&T.a===1&&D===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==Z)return;const te=dn.disabled,oe=g.depthModeForSublayer(0,Z==="opaque"?Lt.ReadWrite:Lt.ReadOnly),K=g.colorModeForRenderPass(),he=g.useProgram(Y?"backgroundPattern":"background"),ge=S||G.coveringTiles({tileSize:H,terrain:g.style.map.terrain});Y&&(P.activeTexture.set(B.TEXTURE0),g.imageManager.bind(g.context));const _e=A.getCrossfadeParameters();for(const Pe of ge){const Be=S?Pe.posMatrix:g.transform.calculatePosMatrix(Pe.toUnwrapped()),Je=Y?Mc(Be,D,g,Y,{tileID:Pe,tileSize:H},_e):sl(Be,D,T),Ye=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Pe);he.draw(P,B.TRIANGLES,oe,te,K,en.disabled,Je,Ye,A.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}})(e,0,c,d);break;case"custom":(function(g,w,A){const S=g.context,T=A.implementation;if(g.renderPass==="offscreen"){const D=T.prerender;D&&(g.setCustomLayerDefaults(),S.setColorMode(g.colorModeForRenderPass()),D.call(T,S.gl,g.transform.customLayerMatrix()),S.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),S.setColorMode(g.colorModeForRenderPass()),S.setStencilMode(dn.disabled);const D=T.renderingMode==="3d"?new Lt(g.context.gl.LEQUAL,Lt.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,Lt.ReadOnly);S.setDepthMode(D),T.render(S.gl,g.transform.customLayerMatrix(),{farZ:g.transform.farZ,nearZ:g.transform.nearZ,fov:g.transform._fov,modelViewProjectionMatrix:g.transform.modelViewProjectionMatrix,projectionMatrix:g.transform.projectionMatrix}),S.setDirty(),g.setBaseState(),S.bindFramebuffer.set(null)}})(e,0,c)}}translatePosMatrix(e,o,c,d,g){if(!c[0]&&!c[1])return e;const w=g?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(w){const T=Math.sin(w),D=Math.cos(w);c=[c[0]*D-c[1]*T,c[0]*T+c[1]*D]}const A=[g?c[0]:ze(o,c[0],this.transform.zoom),g?c[1]:ze(o,c[1],this.transform.zoom),0],S=new Float32Array(16);return u.J(S,e,A),S}saveTileTexture(e){const o=this._tileTextures[e.size[0]];o?o.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const o=this._tileTextures[e];return o&&o.length>0?o.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const o=this.imageManager.getPattern(e.from.toString()),c=this.imageManager.getPattern(e.to.toString());return!o||!c}useProgram(e,o){this.cache=this.cache||{};const c=e+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[c]||(this.cache[c]=new nl(this.context,yr[e],o,ll[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[c]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ot(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:o}=this.context.gl;return this.width!==e||this.height!==o}}class Gc{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,c){const d=Math.pow(2,c),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const S=1/(A=u.af([],A,e))[3]/o*d;return u.b0(A,A,[S,S,1/A[3],S])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const S=function(B,G){var H=G[0],Y=G[1],Z=G[2],te=H*H+Y*Y+Z*Z;return te>0&&(te=1/Math.sqrt(te)),B[0]=G[0]*te,B[1]=G[1]*te,B[2]=G[2]*te,B}([],function(B,G,H){var Y=G[0],Z=G[1],te=G[2],oe=H[0],K=H[1],he=H[2];return B[0]=Z*he-te*K,B[1]=te*oe-Y*he,B[2]=Y*K-Z*oe,B}([],Qe([],g[A[0]],g[A[1]]),Qe([],g[A[2]],g[A[1]]))),T=-((D=S)[0]*(P=g[A[1]])[0]+D[1]*P[1]+D[2]*P[2]);var D,P;return S.concat(T)});return new Gc(g,w)}}class xl{constructor(e,o){this.min=e,this.max=o,this.center=function(c,d,g){return c[0]=.5*d[0],c[1]=.5*d[1],c[2]=.5*d[2],c}([],function(c,d,g){return c[0]=d[0]+g[0],c[1]=d[1]+g[1],c[2]=d[2]+g[2],c}([],this.min,this.max))}quadrant(e){const o=[e%2==0,e<2],c=ke(this.min),d=ke(this.max);for(let g=0;g<o.length;g++)c[g]=o[g]?this.min[g]:this.center[g],d[g]=o[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new xl(c,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let c=!0;for(let d=0;d<e.planes.length;d++){const g=e.planes[d];let w=0;for(let A=0;A<o.length;A++)u.b1(g,o[A])>=0&&w++;if(w===0)return 0;w!==o.length&&(c=!1)}if(c)return 2;for(let d=0;d<3;d++){let g=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let A=0;A<e.points.length;A++){const S=e.points[A][d]-this.min[d];g=Math.min(g,S),w=Math.max(w,S)}if(w<0||g>this.max[d]-this.min[d])return 0}return 1}}class hs{constructor(e=0,o=0,c=0,d=0){if(isNaN(e)||e<0||isNaN(o)||o<0||isNaN(c)||c<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=o,this.left=c,this.right=d}interpolate(e,o,c){return o.top!=null&&e.top!=null&&(this.top=u.y.number(e.top,o.top,c)),o.bottom!=null&&e.bottom!=null&&(this.bottom=u.y.number(e.bottom,o.bottom,c)),o.left!=null&&e.left!=null&&(this.left=u.y.number(e.left,o.left,c)),o.right!=null&&e.right!=null&&(this.right=u.y.number(e.right,o.right,c)),this}getCenter(e,o){const c=u.ac((this.left+e-this.right)/2,0,e),d=u.ac((this.top+o-this.bottom)/2,0,o);return new u.P(c,d)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new hs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const th=85.051129;class ps{constructor(e,o,c,d,g){this.tileSize=512,this._renderWorldCopies=g===void 0||!!g,this._minZoom=e||0,this._maxZoom=o||22,this._minPitch=c??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new hs,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new ps(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const o=-u.b2(e,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=function(){var c=new u.A(4);return u.A!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c}(),function(c,d,g){var w=d[0],A=d[1],S=d[2],T=d[3],D=Math.sin(g),P=Math.cos(g);c[0]=w*P+S*D,c[1]=A*P+T*D,c[2]=w*-D+S*P,c[3]=A*-D+T*P}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const o=u.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const o=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.tileZoom=Math.max(0,Math.floor(o)),this.scale=this.zoomScale(o),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,o,c){this._unmodified=!1,this._edgeInsets.interpolate(e,o,c),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const o=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(e){const o=[new u.b3(0,e)];if(this._renderWorldCopies){const c=this.pointCoordinate(new u.P(0,0)),d=this.pointCoordinate(new u.P(this.width,0)),g=this.pointCoordinate(new u.P(this.width,this.height)),w=this.pointCoordinate(new u.P(0,this.height)),A=Math.floor(Math.min(c.x,d.x,g.x,w.x)),S=Math.floor(Math.max(c.x,d.x,g.x,w.x)),T=1;for(let D=A-T;D<=S+T;D++)D!==0&&o.push(new u.b3(D,e))}return o}coveringTiles(e){var o,c;let d=this.coveringZoomLevel(e);const g=d;if(e.minzoom!==void 0&&d<e.minzoom)return[];e.maxzoom!==void 0&&d>e.maxzoom&&(d=e.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),A=u.Z.fromLngLat(this.center),S=Math.pow(2,d),T=[S*w.x,S*w.y,0],D=[S*A.x,S*A.y,0],P=Gc.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d);let B=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(B=d);const G=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,H=K=>({aabb:new xl([K*S,0,0],[(K+1)*S,S,0]),zoom:0,x:0,y:0,wrap:K,fullyVisible:!1}),Y=[],Z=[],te=d,oe=e.reparseOverscaled?g:d;if(this._renderWorldCopies)for(let K=1;K<=3;K++)Y.push(H(-K)),Y.push(H(K));for(Y.push(H(0));Y.length>0;){const K=Y.pop(),he=K.x,ge=K.y;let _e=K.fullyVisible;if(!_e){const Fe=K.aabb.intersects(P);if(Fe===0)continue;_e=Fe===2}const Pe=e.terrain?T:D,Be=K.aabb.distanceX(Pe),Je=K.aabb.distanceY(Pe),Ye=Math.max(Math.abs(Be),Math.abs(Je));if(K.zoom===te||Ye>G+(1<<te-K.zoom)-2&&K.zoom>=B){const Fe=te-K.zoom,je=T[0]-.5-(he<<Fe),lt=T[1]-.5-(ge<<Fe);Z.push({tileID:new u.S(K.zoom===te?oe:K.zoom,K.wrap,K.zoom,he,ge),distanceSq:pe([D[0]-.5-he,D[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(je*je+lt*lt)})}else for(let Fe=0;Fe<4;Fe++){const je=(he<<1)+Fe%2,lt=(ge<<1)+(Fe>>1),Et=K.zoom+1;let He=K.aabb.quadrant(Fe);if(e.terrain){const Ze=new u.S(Et,K.wrap,Et,je,lt),wt=e.terrain.getMinMaxElevation(Ze),tn=(o=wt.minElevation)!==null&&o!==void 0?o:this.elevation,Dt=(c=wt.maxElevation)!==null&&c!==void 0?c:this.elevation;He=new xl([He.min[0],He.min[1],tn],[He.max[0],He.max[1],Dt])}Y.push({aabb:He,zoom:Et,x:je,y:lt,wrap:K.wrap,fullyVisible:_e})}}return Z.sort((K,he)=>K.distanceSq-he.distanceSq).map(K=>K.tileID)}resize(e,o){this.width=e,this.height=o,this.pixelsToGLUnits=[2/e,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const o=u.ac(e.lat,-85.051129,th);return new u.P(u.O(e.lng)*this.worldSize,u.Q(o)*this.worldSize)}unproject(e){return new u.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const o=this.elevation,c=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,e),g=e.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-g))return;const w=c+o-g,A=Math.cos(this._pitch)*this.cameraToCenterDistance/w/u.b4(1,d.lat),S=this.scaleZoom(A/this.tileSize);this._elevation=g,this._center=d,this.zoom=S}setLocationAtPoint(e,o){const c=this.pointCoordinate(o),d=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(e),w=new u.Z(g.x-(c.x-d.x),g.y-(c.y-d.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,o){return o?this.coordinatePoint(this.locationCoordinate(e),o.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,o){return this.coordinateLocation(this.pointCoordinate(e,o))}locationCoordinate(e){return u.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,o){if(o){const B=o.pointCoordinate(e);if(B!=null)return B}const c=[e.x,e.y,0,1],d=[e.x,e.y,1,1];u.af(c,c,this.pixelMatrixInverse),u.af(d,d,this.pixelMatrixInverse);const g=c[3],w=d[3],A=c[1]/g,S=d[1]/w,T=c[2]/g,D=d[2]/w,P=T===D?0:(0-T)/(D-T);return new u.Z(u.y.number(c[0]/g,d[0]/w,P)/this.worldSize,u.y.number(A,S,P)/this.worldSize)}coordinatePoint(e,o=0,c=this.pixelMatrix){const d=[e.x*this.worldSize,e.y*this.worldSize,o,1];return u.af(d,d,c),new u.P(d[0]/d[3],d[1]/d[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new be().extend(this.pointLocation(new u.P(0,e))).extend(this.pointLocation(new u.P(this.width,e))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new be([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,th])}calculateTileMatrix(e){const o=e.canonical,c=this.worldSize/this.zoomScale(o.z),d=o.x+Math.pow(2,o.z)*e.wrap,g=u.an(new Float64Array(16));return u.J(g,g,[d*c,o.y*c,0]),u.K(g,g,[c/u.X,c/u.X,1]),g}calculatePosMatrix(e,o=!1){const c=e.key,d=o?this._alignedPosMatrixCache:this._posMatrixCache;if(d[c])return d[c];const g=this.calculateTileMatrix(e);return u.L(g,o?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,g),d[c]=new Float32Array(g),d[c]}calculateFogMatrix(e){const o=e.key,c=this._fogMatrixCache;if(c[o])return c[o];const d=this.calculateTileMatrix(e);return u.L(d,this.fogMatrix,d),c[o]=new Float32Array(d),c[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,o){o=u.ac(+o,this.minZoom,this.maxZoom);const c={center:new u.N(e.lng,e.lat),zoom:o};let d=this.lngRange;if(!this._renderWorldCopies&&d===null){const K=179.9999999999;d=[-K,K]}const g=this.tileSize*this.zoomScale(c.zoom);let w=0,A=g,S=0,T=g,D=0,P=0;const{x:B,y:G}=this.size;if(this.latRange){const K=this.latRange;w=u.Q(K[1])*g,A=u.Q(K[0])*g,A-w<G&&(D=G/(A-w))}d&&(S=u.b2(u.O(d[0])*g,0,g),T=u.b2(u.O(d[1])*g,0,g),T<S&&(T+=g),T-S<B&&(P=B/(T-S)));const{x:H,y:Y}=this.project.call({worldSize:g},e);let Z,te;const oe=Math.max(P||0,D||0);if(oe){const K=new u.P(P?(T+S)/2:H,D?(A+w)/2:Y);return c.center=this.unproject.call({worldSize:g},K).wrap(),c.zoom+=this.scaleZoom(oe),c}if(this.latRange){const K=G/2;Y-K<w&&(te=w+K),Y+K>A&&(te=A-K)}if(d){const K=(S+T)/2;let he=H;this._renderWorldCopies&&(he=u.b2(H,K-g/2,K+g/2));const ge=B/2;he-ge<S&&(Z=S+ge),he+ge>T&&(Z=T-ge)}if(Z!==void 0||te!==void 0){const K=new u.P(Z??H,te??Y);c.center=this.unproject.call({worldSize:g},K).wrap()}return c}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:o,zoom:c}=this.getConstrained(this.center,this.zoom);this.center=o,this.zoom=c,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,o=this.point.x,c=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b4(1,this.center.lat)*this.worldSize;let d=u.an(new Float64Array(16));u.K(d,d,[this.width/2,-this.height/2,1]),u.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=u.an(new Float64Array(16)),u.K(d,d,[1,-1,1]),u.J(d,d,[-1,-1,0]),u.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;const g=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),A=g-w*this._pixelPerMeter/Math.cos(this._pitch),S=w<0?A:g,T=Math.PI/2+this._pitch,D=this._fov*(.5+e.y/this.height),P=Math.sin(D)*S/Math.sin(u.ac(Math.PI-T-D,.01,Math.PI-.01)),B=this.getHorizon(),G=2*Math.atan(B/this.cameraToCenterDistance)*(.5+e.y/(2*B)),H=Math.sin(G)*S/Math.sin(u.ac(Math.PI-T-G,.01,Math.PI-.01)),Y=Math.min(P,H);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Y+S),this.nearZ=this.height/50,d=new Float64Array(16),u.b5(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-e.x/this.width,d[9]=2*e.y/this.height,this.projectionMatrix=u.ae(d),u.K(d,d,[1,-1,1]),u.J(d,d,[0,0,-this.cameraToCenterDistance]),u.b6(d,d,this._pitch),u.ad(d,d,this.angle),u.J(d,d,[-o,-c,0]),this.mercatorMatrix=u.K([],d,[this.worldSize,this.worldSize,this.worldSize]),u.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,d),u.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=u.as([],d),this.fogMatrix=new Float64Array(16),u.b5(this.fogMatrix,this._fov,this.width/this.height,g,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b6(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-o,-c,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,d);const Z=this.width%2/2,te=this.height%2/2,oe=Math.cos(this.angle),K=Math.sin(this.angle),he=o-Math.round(o)+oe*Z+K*te,ge=c-Math.round(c)+oe*te+K*Z,_e=new Float64Array(d);if(u.J(_e,_e,[he>.5?he-1:he,ge>.5?ge-1:ge,0]),this.alignedModelViewProjectionMatrix=_e,d=u.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new u.P(0,0)),o=[e.x*this.worldSize,e.y*this.worldSize,0,1];return u.af(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,e))}getCameraQueryGeometry(e){const o=this.getCameraPoint();if(e.length===1)return[e[0],o];{let c=o.x,d=o.y,g=o.x,w=o.y;for(const A of e)c=Math.min(c,A.x),d=Math.min(d,A.y),g=Math.max(g,A.x),w=Math.max(w,A.y);return[new u.P(c,d),new u.P(g,d),new u.P(g,w),new u.P(c,w),new u.P(c,d)]}}lngLatToCameraDepth(e,o){const c=this.locationCoordinate(e),d=[c.x*this.worldSize,c.y*this.worldSize,o,1];return u.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function fs(m,e){let o,c=!1,d=null,g=null;const w=()=>{d=null,c&&(m.apply(g,o),d=setTimeout(w,e),c=!1)};return(...A)=>(c=!0,g=this,o=A,d||w(),d)}class ms{constructor(e){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(c=d)}),(c&&c[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(o.length>=3&&!o.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:c,pitch:+(o[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const c=o.join("/");let d=c;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${c}`);let g=window.location.hash.replace(d,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let w=window.location.href.replace(/(#.+)?$/,g);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=fs(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const o=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,d),w=Math.round(o.lng*g)/g,A=Math.round(o.lat*g)/g,S=this._map.getBearing(),T=this._map.getPitch();let D="";if(D+=e?`/${w}/${A}/${c}`:`${c}/${A}/${w}`,(S||T)&&(D+="/"+Math.round(10*S)/10),T&&(D+=`/${Math.round(T)}`),this._hashName){const P=this._hashName;let B=!1;const G=window.location.hash.slice(1).split("&").map(H=>{const Y=H.split("=")[0];return Y===P?(B=!0,`${Y}=${D}`):H}).filter(H=>H);return B||G.push(`${P}=${D}`),`#${G.join("&")}`}return`#${D}`}}const go={linearity:.3,easing:u.b7(0,0,.3,1)},Hc=u.e({deceleration:2500,maxSpeed:1400},go),nh=u.e({deceleration:20,maxSpeed:1400},go),bl=u.e({deceleration:1e3,maxSpeed:360},go),wl=u.e({deceleration:1e3,maxSpeed:90},go);class $c{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,o=j.now();for(;e.length>0&&o-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:g}of this._inertiaBuffer)o.zoom+=g.zoomDelta||0,o.bearing+=g.bearingDelta||0,o.pitch+=g.pitchDelta||0,g.panDelta&&o.pan._add(g.panDelta),g.around&&(o.around=g.around),g.pinchAround&&(o.pinchAround=g.pinchAround);const c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(o.pan.mag()){const g=yo(o.pan.mag(),c,u.e({},Hc,e||{}));d.offset=o.pan.mult(g.amount/o.pan.mag()),d.center=this._map.transform.center,Cl(d,g)}if(o.zoom){const g=yo(o.zoom,c,nh);d.zoom=this._map.transform.zoom+g.amount,Cl(d,g)}if(o.bearing){const g=yo(o.bearing,c,bl);d.bearing=this._map.transform.bearing+u.ac(g.amount,-179,179),Cl(d,g)}if(o.pitch){const g=yo(o.pitch,c,wl);d.pitch=this._map.transform.pitch+g.amount,Cl(d,g)}if(d.zoom||d.bearing){const g=o.pinchAround===void 0?o.around:o.pinchAround;d.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),u.e(d,{noMoveStart:!0})}}function Cl(m,e){(!m.duration||m.duration<e.duration)&&(m.duration=e.duration,m.easing=e.easing)}function yo(m,e,o){const{maxSpeed:c,linearity:d,deceleration:g}=o,w=u.ac(m*d/(e/1e3),-c,c),A=Math.abs(w)/(g*d);return{easing:o.easing,duration:1e3*A,amount:w*(A/2)}}class Ui extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,c,d={}){const g=N.mousePos(o.getCanvas(),c),w=o.unproject(g);super(e,u.e({point:g,lngLat:w,originalEvent:c},d)),this._defaultPrevented=!1,this.target=o}}class _o extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,c){const d=e==="touchend"?c.changedTouches:c.touches,g=N.touchPos(o.getCanvasContainer(),d),w=g.map(S=>o.unproject(S)),A=g.reduce((S,T,D,P)=>S.add(T.div(P.length)),new u.P(0,0));super(e,{points:g,point:A,lngLats:w,lngLat:o.unproject(A),originalEvent:c}),this._defaultPrevented=!1}}class gs extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,c){super(e,{originalEvent:c}),this._defaultPrevented=!1}}class Zc{constructor(e,o){this._map=e,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new gs(e.type,this._map,e))}mousedown(e,o){return this._mousedownPos=o,this._firePreventable(new Ui(e.type,this._map,e))}mouseup(e){this._map.fire(new Ui(e.type,this._map,e))}click(e,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Ui(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Ui(e.type,this._map,e))}mouseover(e){this._map.fire(new Ui(e.type,this._map,e))}mouseout(e){this._map.fire(new Ui(e.type,this._map,e))}touchstart(e){return this._firePreventable(new _o(e.type,this._map,e))}touchmove(e){this._map.fire(new _o(e.type,this._map,e))}touchend(e){this._map.fire(new _o(e.type,this._map,e))}touchcancel(e){this._map.fire(new _o(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ih{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Ui(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Ui(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vo{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(u.P.convert(e),this._map.terrain)}}class ys{constructor(e,o){this._map=e,this._tr=new vo(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,o){this.isEnabled()&&e.shiftKey&&e.button===0&&(N.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(e,o){if(!this._active)return;const c=o;if(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)return;const d=this._startPos;this._lastPos=c,this._box||(this._box=N.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const g=Math.min(d.x,c.x),w=Math.max(d.x,c.x),A=Math.min(d.y,c.y),S=Math.max(d.y,c.y);N.setTransform(this._box,`translate(${g}px,${A}px)`),this._box.style.width=w-g+"px",this._box.style.height=S-A+"px"}mouseupWindow(e,o){if(!this._active||e.button!==0)return;const c=this._startPos,d=o;if(this.reset(),N.suppressClick(),c.x!==d.x||c.y!==d.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:e})),{cameraAnimation:g=>g.fitScreenCoordinates(c,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,o){return this._map.fire(new u.k(e,{originalEvent:o}))}}function _s(m,e){if(m.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${e.length}`);const o={};for(let c=0;c<m.length;c++)o[m[c].identifier]=e[c];return o}class Af{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,o,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),c.length===this.numTouches&&(this.centroid=function(d){const g=new u.P(0,0);for(const w of d)g._add(w);return g.div(d.length)}(o),this.touches=_s(c,o)))}touchmove(e,o,c){if(this.aborted||!this.centroid)return;const d=_s(c,o);for(const g in this.touches){const w=d[g];(!w||w.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(e,o,c){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){const d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Al{constructor(e){this.singleTap=new Af(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,o,c){this.singleTap.touchstart(e,o,c)}touchmove(e,o,c){this.singleTap.touchmove(e,o,c)}touchend(e,o,c){const d=this.singleTap.touchend(e,o,c);if(d){const g=e.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(g&&w||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class An{constructor(e){this._tr=new vo(e),this._zoomIn=new Al({numTouches:1,numTaps:2}),this._zoomOut=new Al({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,o,c){this._zoomIn.touchstart(e,o,c),this._zoomOut.touchstart(e,o,c)}touchmove(e,o,c){this._zoomIn.touchmove(e,o,c),this._zoomOut.touchmove(e,o,c)}touchend(e,o,c){const d=this._zoomIn.touchend(e,o,c),g=this._zoomOut.touchend(e,o,c),w=this._tr;return d?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(d)},{originalEvent:e})}):g?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(g)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fa{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const o=this._moveFunction(...e);if(o.bearingDelta||o.pitchDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(e,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=o.length?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,o){if(!this.isEnabled())return;const c=this._lastPoint;if(!c)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const d=o.length?o[0]:o;return!this._moved&&d.dist(c)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(c,d))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&N.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ea={0:1,2:2};class vs{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const o=N.mouseButton(e);this._eventButton=o}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(o,c){const d=ea[c];return o.buttons===void 0||(o.buttons&d)!==d}(e,this._eventButton)}isValidEndEvent(e){return N.mouseButton(e)===this._eventButton}}class Sl{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const El=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=e=>{e.preventDefault()}},Vr=({enable:m,clickTolerance:e,bearingDegreesPerPixelMoved:o=.8})=>{const c=new vs({checkCorrectEvent:d=>N.mouseButton(d)===0&&d.ctrlKey||N.mouseButton(d)===2});return new fa({clickTolerance:e,move:(d,g)=>({bearingDelta:(g.x-d.x)*o}),moveStateManager:c,enable:m,assignEvents:El})},xo=({enable:m,clickTolerance:e,pitchDegreesPerPixelMoved:o=-.5})=>{const c=new vs({checkCorrectEvent:d=>N.mouseButton(d)===0&&d.ctrlKey||N.mouseButton(d)===2});return new fa({clickTolerance:e,move:(d,g)=>({pitchDelta:(g.y-d.y)*o}),moveStateManager:c,enable:m,assignEvents:El})};class Wc{constructor(e,o){this._clickTolerance=e.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,o,c){return this._calculateTransform(e,o,c)}touchmove(e,o,c){if(this._active){if(!this._shouldBePrevented(c.length))return e.preventDefault(),this._calculateTransform(e,o,c);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,o,c){this._calculateTransform(e,o,c),this._active&&this._shouldBePrevented(c.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,o,c){c.length>0&&(this._active=!0);const d=_s(c,o),g=new u.P(0,0),w=new u.P(0,0);let A=0;for(const T in d){const D=d[T],P=this._touches[T];P&&(g._add(D),w._add(D.sub(P)),A++,d[T]=D)}if(this._touches=d,this._shouldBePrevented(A)||!w.mag())return;const S=w.div(A);return this._sum._add(S),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(A),panDelta:S}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,o,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([o[0],o[1]]))}touchmove(e,o,c){if(!this._firstTwoTouches)return;e.preventDefault();const[d,g]=this._firstTwoTouches,w=xs(c,o,d),A=xs(c,o,g);if(!w||!A)return;const S=this._aroundCenter?null:w.add(A).div(2);return this._move([w,A],S,e)}touchend(e,o,c){if(!this._firstTwoTouches)return;const[d,g]=this._firstTwoTouches,w=xs(c,o,d),A=xs(c,o,g);w&&A||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function xs(m,e,o){for(let c=0;c<m.length;c++)if(m[c].identifier===o)return e[c]}function Xc(m,e){return Math.log(m/e)/Math.LN2}class Kc extends Tl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,o){const c=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Xc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xc(this._distance,c),pinchAround:o}}}function Jc(m,e){return 180*m.angleWith(e)/Math.PI}class vr extends Tl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,o,c){const d=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Jc(this._vector,d),pinchAround:o}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const o=25/(Math.PI*this._minDiameter)*360,c=Jc(e,this._startVector);return Math.abs(c)<o}}function Ml(m){return Math.abs(m.y)>Math.abs(m.x)}class Yc extends Tl{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,o,c){super.touchstart(e,o,c),this._currentTouchCount=c.length}_start(e){this._lastPoints=e,Ml(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,o,c){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const d=e[0].sub(this._lastPoints[0]),g=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,g,c.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(d.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(e,o,c){if(this._valid!==void 0)return this._valid;const d=e.mag()>=2,g=o.mag()>=2;if(!d&&!g)return;if(!d||!g)return this._firstMove===void 0&&(this._firstMove=c),c-this._firstMove<100&&void 0;const w=e.y>0==o.y>0;return Ml(e)&&Ml(o)&&w}}const ah={panStep:100,bearingStep:15,pitchStep:10};class Qc{constructor(e){this._tr=new vo(e);const o=ah;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let o=0,c=0,d=0,g=0,w=0;switch(e.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:e.shiftKey?c=-1:(e.preventDefault(),g=-1);break;case 39:e.shiftKey?c=1:(e.preventDefault(),g=1);break;case 38:e.shiftKey?d=1:(e.preventDefault(),w=-1);break;case 40:e.shiftKey?d=-1:(e.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(c=0,d=0),{cameraAnimation:A=>{const S=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:rh,zoom:o?Math.round(S.zoom)+o*(e.shiftKey?2:1):S.zoom,bearing:S.bearing+c*this._bearingStep,pitch:S.pitch+d*this._pitchStep,offset:[-g*this._panStep,-w*this._panStep],center:S.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rh(m){return m*(2-m)}const eu=4.000244140625;class tu{constructor(e,o){this._onTimeout=c=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},this._map=e,this._tr=new vo(e),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let o=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const c=j.now(),d=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,o!==0&&o%eu==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(d*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),e.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=e,this._delta-=o,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=N.mousePos(this._map.getCanvas(),e),c=this._tr;this._around=o.y>c.transform.height/2-c.transform.getHorizon()?u.N.convert(this._aroundCenter?c.center:c.unproject(o)):u.N.convert(c.center),this._aroundPoint=c.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>eu?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&T!==0&&(T=1/T);const D=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(D*T))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,c=this._startZoom,d=this._easing;let g,w=!1;const A=j.now()-this._lastWheelEventTime;if(this._type==="wheel"&&c&&d&&A){const S=Math.min(A/200,1),T=d(S);g=u.y.number(c,o,T),S<1?this._frameId||(this._frameId=!0):w=!0}else g=o,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:g-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let o=u.b8;if(this._prevEase){const c=this._prevEase,d=(j.now()-c.start)/c.duration,g=c.easing(d+.01)-c.easing(d),w=.27/Math.sqrt(g*g+1e-4)*.01,A=Math.sqrt(.0729-w*w);o=u.b7(w,A,.25,1)}return this._prevEase={start:j.now(),duration:e,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bo{constructor(e,o){this._clickZoom=e,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class oh{constructor(e){this._tr=new vo(e),this.reset()}reset(){this._active=!1}dblclick(e,o){return e.preventDefault(),{cameraAnimation:c=>{c.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ma{constructor(){this._tap=new Al({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,o,c){if(!this._swipePoint)if(this._tapTime){const d=o[0],g=e.timeStamp-this._tapTime<500,w=this._tapPoint.dist(d)<30;g&&w?c.length>0&&(this._swipePoint=d,this._swipeTouch=c[0].identifier):this.reset()}else this._tap.touchstart(e,o,c)}touchmove(e,o,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;const d=o[0],g=d.y-this._swipePoint.y;return this._swipePoint=d,e.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(e,o,c)}touchend(e,o,c){if(this._tapTime)this._swipePoint&&c.length===0&&this.reset();else{const d=this._tap.touchend(e,o,c);d&&(this._tapTime=e.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ga{constructor(e,o,c){this._el=e,this._mousePan=o,this._touchPan=c}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nu{constructor(e,o,c){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=o,this._mousePitch=c}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ya{constructor(e,o,c,d){this._el=e,this._touchZoom=o,this._touchRotate=c,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ur{constructor(e,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=N.create("div","maplibregl-cooperative-gesture-screen",e);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=o,this._container.appendChild(d);const g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=c,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(N.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,o){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:e,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Il=m=>m.zoom||m.drag||m.pitch||m.rotate;class Sf extends u.k{}function iu(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Ef{constructor(e,o){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,g)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=d.type==="renderFrame"?void 0:d,A={needsRenderFrame:!1},S={},T={},D=d.touches,P=D?this._getMapTouches(D):void 0,B=P?N.touchPos(this._map.getCanvas(),P):N.mousePos(this._map.getCanvas(),d);for(const{handlerName:Y,handler:Z,allowed:te}of this._handlers){if(!Z.isEnabled())continue;let oe;this._blockedByActive(T,te,Y)?Z.reset():Z[g||d.type]&&(oe=Z[g||d.type](d,B,P),this.mergeHandlerResult(A,S,oe,Y,w),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||Z.isActive())&&(T[Y]=Z)}const G={};for(const Y in this._previousActiveHandlers)T[Y]||(G[Y]=w);this._previousActiveHandlers=T,(Object.keys(G).length||iu(A))&&(this._changes.push([A,S,G]),this._triggerRenderFrame()),(Object.keys(T).length||iu(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=A;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $c(e),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[window,"blur",void 0]];for(const[d,g,w]of this._listeners)N.addEventListener(d,g,d===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[e,o,c]of this._listeners)N.removeEventListener(e,o,e===document?this.handleWindowEvent:this.handleEvent,c)}_addDefaultHandlers(e){const o=this._map,c=o.getCanvasContainer();this._add("mapEvent",new Zc(o,e));const d=o.boxZoom=new ys(o,e);this._add("boxZoom",d),e.interactive&&e.boxZoom&&d.enable();const g=o.cooperativeGestures=new Ur(o,e.cooperativeGestures);this._add("cooperativeGestures",g),e.cooperativeGestures&&g.enable();const w=new An(o),A=new oh(o);o.doubleClickZoom=new bo(A,w),this._add("tapZoom",w),this._add("clickZoom",A),e.interactive&&e.doubleClickZoom&&o.doubleClickZoom.enable();const S=new ma;this._add("tapDragZoom",S);const T=o.touchPitch=new Yc(o);this._add("touchPitch",T),e.interactive&&e.touchPitch&&o.touchPitch.enable(e.touchPitch);const D=Vr(e),P=xo(e);o.dragRotate=new nu(e,D,P),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",P,["mouseRotate"]),e.interactive&&e.dragRotate&&o.dragRotate.enable();const B=(({enable:oe,clickTolerance:K})=>{const he=new vs({checkCorrectEvent:ge=>N.mouseButton(ge)===0&&!ge.ctrlKey});return new fa({clickTolerance:K,move:(ge,_e)=>({around:_e,panDelta:_e.sub(ge)}),activateOnStart:!0,moveStateManager:he,enable:oe,assignEvents:El})})(e),G=new Wc(e,o);o.dragPan=new ga(c,B,G),this._add("mousePan",B),this._add("touchPan",G,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&o.dragPan.enable(e.dragPan);const H=new vr,Y=new Kc;o.touchZoomRotate=new ya(c,Y,H,S),this._add("touchRotate",H,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&o.touchZoomRotate.enable(e.touchZoomRotate);const Z=o.scrollZoom=new tu(o,()=>this._triggerRenderFrame());this._add("scrollZoom",Z,["mousePan"]),e.interactive&&e.scrollZoom&&o.scrollZoom.enable(e.scrollZoom);const te=o.keyboard=new Qc(o);this._add("keyboard",te),e.interactive&&e.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new ih(o))}_add(e,o,c){this._handlers.push({handlerName:e,handler:o,allowed:c}),this._handlersById[e]=o}stop(e){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Il(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,o,c){for(const d in e)if(d!==c&&(!o||o.indexOf(d)<0))return!0;return!1}_getMapTouches(e){const o=[];for(const c of e)this._el.contains(c.target)&&o.push(c);return o}mergeHandlerResult(e,o,c,d,g){if(!c)return;u.e(e,c);const w={handlerName:d,originalEvent:c.originalEvent||g};c.zoomDelta!==void 0&&(o.zoom=w),c.panDelta!==void 0&&(o.drag=w),c.pitchDelta!==void 0&&(o.pitch=w),c.bearingDelta!==void 0&&(o.rotate=w)}_applyChanges(){const e={},o={},c={};for(const[d,g,w]of this._changes)d.panDelta&&(e.panDelta=(e.panDelta||new u.P(0,0))._add(d.panDelta)),d.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(e.around=d.around),d.pinchAround!==void 0&&(e.pinchAround=d.pinchAround),d.noInertia&&(e.noInertia=d.noInertia),u.e(o,g),u.e(c,w);this._updateMapTransform(e,o,c),this._changes=[]}_updateMapTransform(e,o,c){const d=this._map,g=d._getTransformForUpdate(),w=d.terrain;if(!(iu(e)||w&&this._terrainMovement))return this._fireEvents(o,c,!0);let{panDelta:A,zoomDelta:S,bearingDelta:T,pitchDelta:D,around:P,pinchAround:B}=e;B!==void 0&&(P=B),d._stop(!0),P=P||d.transform.centerPoint;const G=g.pointLocation(A?P.sub(A):P);T&&(g.bearing+=T),D&&(g.pitch+=D),S&&(g.zoom+=S),w?this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?g.center=g.pointLocation(g.centerPoint.sub(A)):g.setLocationAtPoint(G,P):(this._terrainMovement=!0,this._map._elevationFreeze=!0,g.setLocationAtPoint(G,P)):g.setLocationAtPoint(G,P),d._applyUpdatedTransform(g),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(o,c,!0)}_fireEvents(e,o,c){const d=Il(this._eventsInProgress),g=Il(e),w={};for(const P in e){const{originalEvent:B}=e[P];this._eventsInProgress[P]||(w[`${P}start`]=B),this._eventsInProgress[P]=e[P]}!d&&g&&this._fireEvent("movestart",g.originalEvent);for(const P in w)this._fireEvent(P,w[P]);g&&this._fireEvent("move",g.originalEvent);for(const P in e){const{originalEvent:B}=e[P];this._fireEvent(P,B)}const A={};let S;for(const P in this._eventsInProgress){const{handlerName:B,originalEvent:G}=this._eventsInProgress[P];this._handlersById[B].isActive()||(delete this._eventsInProgress[P],S=o[B]||G,A[`${P}end`]=S)}for(const P in A)this._fireEvent(P,A[P]);const T=Il(this._eventsInProgress),D=(d||g)&&!T;if(D&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const P=this._map._getTransformForUpdate();P.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(P)}if(c&&D){this._updatingCamera=!0;const P=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!P||!P.essential&&j.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:S})),B(this._map.getBearing())&&this._map.resetNorth()):(B(P.bearing||this._map.getBearing())&&(P.bearing=0),P.freezeElevation=!0,this._map.easeTo(P,{originalEvent:S})),this._updatingCamera=!1}}_fireEvent(e,o){this._map.fire(new u.k(e,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Sf("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class sh extends u.E{constructor(e,o){super(),this._renderFrameCallback=()=>{const c=Math.min((j.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=o.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,o){return this.jumpTo({center:e},o)}panBy(e,o,c){return e=u.P.convert(e).mult(-1),this.panTo(this.transform.center,u.e({offset:e},o),c)}panTo(e,o,c){return this.easeTo(u.e({center:e},o),c)}getZoom(){return this.transform.zoom}setZoom(e,o){return this.jumpTo({zoom:e},o),this}zoomTo(e,o,c){return this.easeTo(u.e({zoom:e},o),c)}zoomIn(e,o){return this.zoomTo(this.getZoom()+1,e,o),this}zoomOut(e,o){return this.zoomTo(this.getZoom()-1,e,o),this}getBearing(){return this.transform.bearing}setBearing(e,o){return this.jumpTo({bearing:e},o),this}getPadding(){return this.transform.padding}setPadding(e,o){return this.jumpTo({padding:e},o),this}rotateTo(e,o,c){return this.easeTo(u.e({bearing:e},o),c)}resetNorth(e,o){return this.rotateTo(0,u.e({duration:1e3},e),o),this}resetNorthPitch(e,o){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},e),o),this}snapToNorth(e,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,o):this}getPitch(){return this.transform.pitch}setPitch(e,o){return this.jumpTo({pitch:e},o),this}cameraForBounds(e,o){e=be.convert(e);const c=o&&o.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),c,o)}_cameraForBoxAndBearing(e,o,c,d){const g={top:0,bottom:0,right:0,left:0};if(typeof(d=u.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){const Fe=d.padding;d.padding={top:Fe,bottom:Fe,right:Fe,left:Fe}}d.padding=u.e(g,d.padding);const w=this.transform,A=w.padding,S=new be(e,o),T=w.project(S.getNorthWest()),D=w.project(S.getNorthEast()),P=w.project(S.getSouthEast()),B=w.project(S.getSouthWest()),G=u.b9(-c),H=T.rotate(G),Y=D.rotate(G),Z=P.rotate(G),te=B.rotate(G),oe=new u.P(Math.max(H.x,Y.x,te.x,Z.x),Math.max(H.y,Y.y,te.y,Z.y)),K=new u.P(Math.min(H.x,Y.x,te.x,Z.x),Math.min(H.y,Y.y,te.y,Z.y)),he=oe.sub(K),ge=(w.width-(A.left+A.right+d.padding.left+d.padding.right))/he.x,_e=(w.height-(A.top+A.bottom+d.padding.top+d.padding.bottom))/he.y;if(_e<0||ge<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Pe=Math.min(w.scaleZoom(w.scale*Math.min(ge,_e)),d.maxZoom),Be=u.P.convert(d.offset),Je=new u.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(u.b9(c)),Ye=Be.add(Je).mult(w.scale/w.zoomScale(Pe));return{center:w.unproject(T.add(P).div(2).sub(Ye)),zoom:Pe,bearing:c}}fitBounds(e,o,c){return this._fitInternal(this.cameraForBounds(e,o),o,c)}fitScreenCoordinates(e,o,c,d,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(e)),this.transform.pointLocation(u.P.convert(o)),c,d),d,g)}_fitInternal(e,o,c){return e?(delete(o=u.e(e,o)).padding,o.linear?this.easeTo(o,c):this.flyTo(o,c)):this}jumpTo(e,o){this.stop();const c=this._getTransformForUpdate();let d=!1,g=!1,w=!1;return"zoom"in e&&c.zoom!==+e.zoom&&(d=!0,c.zoom=+e.zoom),e.center!==void 0&&(c.center=u.N.convert(e.center)),"bearing"in e&&c.bearing!==+e.bearing&&(g=!0,c.bearing=+e.bearing),"pitch"in e&&c.pitch!==+e.pitch&&(w=!0,c.pitch=+e.pitch),e.padding==null||c.isPaddingEqual(e.padding)||(c.padding=e.padding),this._applyUpdatedTransform(c),this.fire(new u.k("movestart",o)).fire(new u.k("move",o)),d&&this.fire(new u.k("zoomstart",o)).fire(new u.k("zoom",o)).fire(new u.k("zoomend",o)),g&&this.fire(new u.k("rotatestart",o)).fire(new u.k("rotate",o)).fire(new u.k("rotateend",o)),w&&this.fire(new u.k("pitchstart",o)).fire(new u.k("pitch",o)).fire(new u.k("pitchend",o)),this.fire(new u.k("moveend",o))}calculateCameraOptionsFromTo(e,o,c,d=0){const g=u.Z.fromLngLat(e,o),w=u.Z.fromLngLat(c,d),A=w.x-g.x,S=w.y-g.y,T=w.z-g.z,D=Math.hypot(A,S,T);if(D===0)throw new Error("Can't calculate camera options with same From and To");const P=Math.hypot(A,S),B=this.transform.scaleZoom(this.transform.cameraToCenterDistance/D/this.transform.tileSize),G=180*Math.atan2(A,-S)/Math.PI;let H=180*Math.acos(P/D)/Math.PI;return H=T<0?90-H:90+H,{center:w.toLngLat(),zoom:B,pitch:H,bearing:G}}easeTo(e,o){var c;this._stop(!1,e.easeId),((e=u.e({offset:[0,0],duration:500,easing:u.b8},e)).animate===!1||!e.essential&&j.prefersReducedMotion)&&(e.duration=0);const d=this._getTransformForUpdate(),g=d.zoom,w=d.bearing,A=d.pitch,S=d.padding,T="bearing"in e?this._normalizeBearing(e.bearing,w):w,D="pitch"in e?+e.pitch:A,P="padding"in e?e.padding:d.padding,B=u.P.convert(e.offset);let G=d.centerPoint.add(B);const H=d.pointLocation(G),{center:Y,zoom:Z}=d.getConstrained(u.N.convert(e.center||H),(c=e.zoom)!==null&&c!==void 0?c:g);this._normalizeCenter(Y,d);const te=d.project(H),oe=d.project(Y).sub(te),K=d.zoomScale(Z-g);let he,ge;e.around&&(he=u.N.convert(e.around),ge=d.locationPoint(he));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Z!==g,this._rotating=this._rotating||w!==T,this._pitching=this._pitching||D!==A,this._padding=!d.isPaddingEqual(P),this._easeId=e.easeId,this._prepareEase(o,e.noMoveStart,_e),this.terrain&&this._prepareElevation(Y),this._ease(Pe=>{if(this._zooming&&(d.zoom=u.y.number(g,Z,Pe)),this._rotating&&(d.bearing=u.y.number(w,T,Pe)),this._pitching&&(d.pitch=u.y.number(A,D,Pe)),this._padding&&(d.interpolatePadding(S,P,Pe),G=d.centerPoint.add(B)),this.terrain&&!e.freezeElevation&&this._updateElevation(Pe),he)d.setLocationAtPoint(he,ge);else{const Be=d.zoomScale(d.zoom-g),Je=Z>g?Math.min(2,K):Math.max(.5,K),Ye=Math.pow(Je,1-Pe),Fe=d.unproject(te.add(oe.mult(Pe*Ye)).mult(Be));d.setLocationAtPoint(d.renderWorldCopies?Fe.wrap():Fe,G)}this._applyUpdatedTransform(d),this._fireMoveEvents(o)},Pe=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o,Pe)},e),this}_prepareEase(e,o,c={}){this._moving=!0,o||c.moving||this.fire(new u.k("movestart",e)),this._zooming&&!c.zooming&&this.fire(new u.k("zoomstart",e)),this._rotating&&!c.rotating&&this.fire(new u.k("rotatestart",e)),this._pitching&&!c.pitching&&this.fire(new u.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&o!==this._elevationTarget){const c=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(c-(o-(c*e+this._elevationStart))/(1-e)),this._elevationTarget=o}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const o=e.getCameraPosition(),c=this.terrain.getElevationForLngLatZoom(o.lngLat,e.zoom);if(o.altitude<c){const d=this.calculateCameraOptionsFromTo(o.lngLat,c,e.center,e.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(e){const o=[];if(this.terrain&&o.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&o.push(d=>this.transformCameraUpdate(d)),!o.length)return;const c=e.clone();for(const d of o){const g=c.clone(),{center:w,zoom:A,pitch:S,bearing:T,elevation:D}=d(g);w&&(g.center=w),A!==void 0&&(g.zoom=A),S!==void 0&&(g.pitch=S),T!==void 0&&(g.bearing=T),D!==void 0&&(g.elevation=D),c.apply(g)}this.transform.apply(c)}_fireMoveEvents(e){this.fire(new u.k("move",e)),this._zooming&&this.fire(new u.k("zoom",e)),this._rotating&&this.fire(new u.k("rotate",e)),this._pitching&&this.fire(new u.k("pitch",e))}_afterEase(e,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const c=this._zooming,d=this._rotating,g=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,c&&this.fire(new u.k("zoomend",e)),d&&this.fire(new u.k("rotateend",e)),g&&this.fire(new u.k("pitchend",e)),this.fire(new u.k("moveend",e))}flyTo(e,o){var c;if(!e.essential&&j.prefersReducedMotion){const Ze=u.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ze,o)}this.stop(),e=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b8},e);const d=this._getTransformForUpdate(),g=d.zoom,w=d.bearing,A=d.pitch,S=d.padding,T="bearing"in e?this._normalizeBearing(e.bearing,w):w,D="pitch"in e?+e.pitch:A,P="padding"in e?e.padding:d.padding,B=u.P.convert(e.offset);let G=d.centerPoint.add(B);const H=d.pointLocation(G),{center:Y,zoom:Z}=d.getConstrained(u.N.convert(e.center||H),(c=e.zoom)!==null&&c!==void 0?c:g);this._normalizeCenter(Y,d);const te=d.zoomScale(Z-g),oe=d.project(H),K=d.project(Y).sub(oe);let he=e.curve;const ge=Math.max(d.width,d.height),_e=ge/te,Pe=K.mag();if("minZoom"in e){const Ze=u.ac(Math.min(e.minZoom,g,Z),d.minZoom,d.maxZoom),wt=ge/d.zoomScale(Ze-g);he=Math.sqrt(wt/Pe*2)}const Be=he*he;function Je(Ze){const wt=(_e*_e-ge*ge+(Ze?-1:1)*Be*Be*Pe*Pe)/(2*(Ze?_e:ge)*Be*Pe);return Math.log(Math.sqrt(wt*wt+1)-wt)}function Ye(Ze){return(Math.exp(Ze)-Math.exp(-Ze))/2}function Fe(Ze){return(Math.exp(Ze)+Math.exp(-Ze))/2}const je=Je(!1);let lt=function(Ze){return Fe(je)/Fe(je+he*Ze)},Et=function(Ze){return ge*((Fe(je)*(Ye(wt=je+he*Ze)/Fe(wt))-Ye(je))/Be)/Pe;var wt},He=(Je(!0)-je)/he;if(Math.abs(Pe)<1e-6||!isFinite(He)){if(Math.abs(ge-_e)<1e-6)return this.easeTo(e,o);const Ze=_e<ge?-1:1;He=Math.abs(Math.log(_e/ge))/he,Et=()=>0,lt=wt=>Math.exp(Ze*he*wt)}return e.duration="duration"in e?+e.duration:1e3*He/("screenSpeed"in e?+e.screenSpeed/he:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=w!==T,this._pitching=D!==A,this._padding=!d.isPaddingEqual(P),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(Y),this._ease(Ze=>{const wt=Ze*He,tn=1/lt(wt);d.zoom=Ze===1?Z:g+d.scaleZoom(tn),this._rotating&&(d.bearing=u.y.number(w,T,Ze)),this._pitching&&(d.pitch=u.y.number(A,D,Ze)),this._padding&&(d.interpolatePadding(S,P,Ze),G=d.centerPoint.add(B)),this.terrain&&!e.freezeElevation&&this._updateElevation(Ze);const Dt=Ze===1?Y:d.unproject(oe.add(K.mult(Et(wt))).mult(tn));d.setLocationAtPoint(d.renderWorldCopies?Dt.wrap():Dt,G),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,o){var c;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,o)}return e||(c=this.handlers)===null||c===void 0||c.stop(!1),this}_ease(e,o,c){c.animate===!1||c.duration===0?(e(1),o()):(this._easeStart=j.now(),this._easeOptions=c,this._onEaseFrame=e,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,o){e=u.b2(e,-180,180);const c=Math.abs(e-o);return Math.abs(e-360-o)<c&&(e-=360),Math.abs(e+360-o)<c&&(e+=360),e}_normalizeCenter(e,o){if(!o.renderWorldCopies||o.lngRange)return;const c=e.lng-o.center.lng;e.lng+=c>180?-360:c<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const wo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fa{constructor(e=wo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,o){const c=this._map._getUIString(`AttributionControl.${o}`);e.title=c,e.setAttribute("aria-label",c)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}const o=this._map.style.sourceCaches;for(const d in o){const g=o[d];if(g.used||g.usedForTerrain){const w=g.getSource();w.attribution&&e.indexOf(w.attribution)<0&&e.push(w.attribution)}}e=e.filter(d=>String(d).trim()),e.sort((d,g)=>d.length-g.length),e=e.filter((d,g)=>{for(let w=g+1;w<e.length;w++)if(e[w].indexOf(d)>=0)return!1;return!0});const c=e.join(" | ");c!==this._attribHTML&&(this._attribHTML=c,e.length?(this._innerContainer.innerHTML=c,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class et{constructor(e={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl");const o=N.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class lh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const o=++this._id;return this._queue.push({callback:e,id:o,cancelled:!1}),o}remove(e){const o=this._currentlyRunning,c=o?this._queue.concat(o):this._queue;for(const d of c)if(d.id===e)return void(d.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const c of o)if(!c.cancelled&&(c.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var au=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class ch extends u.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,o){this.sourceCache.update(e,o),this._renderableTilesKeys=[];const c={};for(const d of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))c[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),u.aP(d.posMatrix,0,u.X,0,u.X,0,1),this._tiles[d.key]=new pa(d,this.tileSize));for(const d in this._tiles)c[d]||delete this._tiles[d]}freeRtt(e){for(const o in this._tiles){const c=this._tiles[o];(!e||c.tileID.equals(e)||c.tileID.isChildOf(e)||e.isChildOf(c.tileID))&&(c.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const o={};for(const c of this._renderableTilesKeys){const d=this._tiles[c].tileID;if(d.canonical.equals(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16),u.aP(g.posMatrix,0,u.X,0,u.X,0,1),o[c]=g}else if(d.canonical.isChildOf(e.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const w=d.canonical.z-e.canonical.z,A=d.canonical.x-(d.canonical.x>>w<<w),S=d.canonical.y-(d.canonical.y>>w<<w),T=u.X>>w;u.aP(g.posMatrix,0,T,0,T,0,1),u.J(g.posMatrix,g.posMatrix,[-A*T,-S*T,0]),o[c]=g}else if(e.canonical.isChildOf(d.canonical)){const g=e.clone();g.posMatrix=new Float64Array(16);const w=e.canonical.z-d.canonical.z,A=e.canonical.x-(e.canonical.x>>w<<w),S=e.canonical.y-(e.canonical.y>>w<<w),T=u.X>>w;u.aP(g.posMatrix,0,u.X,0,u.X,0,1),u.J(g.posMatrix,g.posMatrix,[A*T,S*T,0]),u.K(g.posMatrix,g.posMatrix,[1/2**w,1/2**w,0]),o[c]=g}}return o}getSourceTile(e,o){const c=this.sourceCache._source;let d=e.overscaledZ-this.deltaZoom;if(d>c.maxzoom&&(d=c.maxzoom),d<c.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(d).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!g||!g.dem)&&o)for(;d>=c.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(e.scaledTo(d--).key);return g}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter(o=>o.timeAdded>=e)}}class bs{constructor(e,o,c){this.painter=e,this.sourceCache=new ch(o),this.options=c,this.exaggeration=typeof c.exaggeration=="number"?c.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,o,c,d=u.X){var g;if(!(o>=0&&o<d&&c>=0&&c<d))return 0;const w=this.getTerrainData(e),A=(g=w.tile)===null||g===void 0?void 0:g.dem;if(!A)return 0;const S=function(H,Y,Z){var te=Y[0],oe=Y[1];return H[0]=Z[0]*te+Z[4]*oe+Z[12],H[1]=Z[1]*te+Z[5]*oe+Z[13],H}([],[o/d*u.X,c/d*u.X],w.u_terrain_matrix),T=[S[0]*A.dim,S[1]*A.dim],D=Math.floor(T[0]),P=Math.floor(T[1]),B=T[0]-D,G=T[1]-P;return A.get(D,P)*(1-B)*(1-G)+A.get(D+1,P)*B*(1-G)+A.get(D,P+1)*(1-B)*G+A.get(D+1,P+1)*B*G}getElevationForLngLatZoom(e,o){if(!u.ba(o,e.wrap()))return 0;const{tileID:c,mercatorX:d,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(e,o);return this.getElevation(c,d%u.X,g%u.X,u.X)}getElevation(e,o,c,d=u.X){return this.getDEMElevation(e,o,c,d)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const d=this.painter.context,g=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ot(d,g,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ot(d,new u.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const o=this.sourceCache.getSourceTile(e,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const d=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new ot(d,o.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),o.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const c=o&&o+o.tileID.key+e.key;if(c&&!this._demMatrixCache[c]){const d=this.sourceCache.sourceCache._source.maxzoom;let g=e.canonical.z-o.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=d?g=e.canonical.z-d:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=e.canonical.x-(e.canonical.x>>g<<g),A=e.canonical.y-(e.canonical.y>>g<<g),S=u.bb(new Float64Array(16),[1/(u.X<<g),1/(u.X<<g),0]);u.J(S,S,[w*u.X,A*u.X,0]),this._demMatrixCache[e.key]={matrix:S,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:c?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(e){const o=this.painter,c=o.width/devicePixelRatio,d=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===c&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ot(o.context,{width:c,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ot(o.context,{width:c,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(c,d,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,c,d))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,w=0;g<this._coordsTextureSize;g++)for(let A=0;A<this._coordsTextureSize;A++,w+=4)o[w+0]=255&A,o[w+1]=255&g,o[w+2]=A>>8<<4|g>>8,o[w+3]=0;const c=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),d=new ot(e,c,e.gl.RGBA,{premultiply:!1});return d.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),c=this.painter.context,d=c.gl,g=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);c.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(g,A-w-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),c.bindFramebuffer.set(null);const S=o[0]+(o[2]>>4<<8),T=o[1]+((15&o[2])<<8),D=this.coordsIndex[255-o[3]],P=D&&this.sourceCache.getTileByID(D);if(!P)return null;const B=this._coordsTextureSize,G=(1<<P.tileID.canonical.z)*B;return new u.Z((P.tileID.canonical.x*B+S)/G+P.tileID.wrap,(P.tileID.canonical.y*B+T)/G,this.getElevation(P.tileID,S,T,B))}depthAtPoint(e){const o=new Uint8Array(4),c=this.painter.context,d=c.gl;return c.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),c.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,o=new u.bc,c=new u.aX,d=this.meshSize,g=u.X/d,w=d*d;for(let P=0;P<=d;P++)for(let B=0;B<=d;B++)o.emplaceBack(B*g,P*g,0);for(let P=0;P<w;P+=d+1)for(let B=0;B<d;B++)c.emplaceBack(B+P,d+B+P+1,d+B+P+2),c.emplaceBack(B+P,d+B+P+2,B+P+1);const A=o.length,S=A+2*(d+1);for(const P of[0,1])for(let B=0;B<=d;B++)for(const G of[0,1])o.emplaceBack(B*g,P*u.X,G);for(let P=0;P<2*d;P+=2)c.emplaceBack(S+P,S+P+1,S+P+3),c.emplaceBack(S+P,S+P+3,S+P+2),c.emplaceBack(A+P,A+P+3,A+P+1),c.emplaceBack(A+P,A+P+2,A+P+3);const T=o.length,D=T+2*(d+1);for(const P of[0,1])for(let B=0;B<=d;B++)for(const G of[0,1])o.emplaceBack(P*u.X,B*g,G);for(let P=0;P<2*d;P+=2)c.emplaceBack(T+P,T+P+1,T+P+3),c.emplaceBack(T+P,T+P+3,T+P+2),c.emplaceBack(D+P,D+P+3,D+P+1),c.emplaceBack(D+P,D+P+2,D+P+3);return this._mesh=new qc(e.createVertexBuffer(o,au.members),e.createIndexBuffer(c),u.a0.simpleSegment(0,0,o.length,c.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*u.bd/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,o){var c;const{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(e,o);return(c=this.getMinMaxElevation(d).minElevation)!==null&&c!==void 0?c:0}getMinMaxElevation(e){const o=this.getTerrainData(e).tile,c={minElevation:null,maxElevation:null};return o&&o.dem&&(c.minElevation=o.dem.min*this.exaggeration,c.maxElevation=o.dem.max*this.exaggeration),c}_getOverscaledTileIDFromLngLatZoom(e,o){const c=u.Z.fromLngLat(e.wrap()),d=(1<<o)*u.X,g=c.x*d,w=c.y*d,A=Math.floor(g/u.X),S=Math.floor(w/u.X);return{tileID:new u.S(o,0,o,A,S),mercatorX:g,mercatorY:w}}}class ws{constructor(e,o,c){this._context=e,this._size=o,this._tileSize=c,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),c=new ot(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return c.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(c.texture),{id:e,fbo:o,texture:c,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>e.id!==o),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const qr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Bt{constructor(e,o){this.painter=e,this.terrain=o,this.pool=new ws(e.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(c=>!e._layers[c].isHidden(o)),this._coordsDescendingInv={};for(const c in e.sourceCaches){this._coordsDescendingInv[c]={};const d=e.sourceCaches[c].getVisibleCoordinates();for(const g of d){const w=this.terrain.sourceCache.getTerrainCoords(g);for(const A in w)this._coordsDescendingInv[c][A]||(this._coordsDescendingInv[c][A]=[]),this._coordsDescendingInv[c][A].push(w[A])}}this._coordsDescendingInvStr={};for(const c of e._order){const d=e._layers[c],g=d.source;if(qr[d.type]&&!this._coordsDescendingInvStr[g]){this._coordsDescendingInvStr[g]={};for(const w in this._coordsDescendingInv[g])this._coordsDescendingInvStr[g][w]=this._coordsDescendingInv[g][w].map(A=>A.key).sort().join()}}for(const c of this._renderableTiles)for(const d in this._coordsDescendingInvStr){const g=this._coordsDescendingInvStr[d][c.tileID.key];g&&g!==c.rttCoords[d]&&(c.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const o=e.type,c=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(qr[o]&&(this._prevType&&qr[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(e.id),!d))return!0;if(qr[this._prevType]||qr[o]&&d){this._prevType=o;const g=this._stacks.length-1,w=this._stacks[g]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(eh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[g]){const T=this.pool.getObjectForId(A.rtt[g].id);if(T.stamp===A.rtt[g].stamp){this.pool.useObject(T);continue}}const S=this.pool.getOrCreateFreeObject();this.pool.useObject(S),this.pool.stampObject(S),A.rtt[g]={id:S.id,stamp:S.stamp},c.context.bindFramebuffer.set(S.fbo.framebuffer),c.context.clear({color:u.aM.transparent,stencil:0}),c.currentStencilSource=void 0;for(let T=0;T<w.length;T++){const D=c.style._layers[w[T]],P=D.source?this._coordsDescendingInv[D.source][A.tileID.key]:[A.tileID];c.context.viewport.set([0,0,S.fbo.width,S.fbo.height]),c._renderTileClippingMasks(D,P),c.renderLayer(c,c.style.sourceCaches[D.source],D,P),D.source&&(A.rttCoords[D.source]=this._coordsDescendingInvStr[D.source][A.tileID.key])}}return eh(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),qr[o]}return!1}}const ru={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Tf=z,ou={hash:!1,interactive:!0,bearingSnap:7,attributionControl:wo,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},uh=m=>{m.touchstart=m.dragStart,m.touchmoveWindow=m.dragMove,m.touchend=m.dragEnd},Mf={showCompass:!0,showZoom:!0,visualizePitch:!1};class dh{constructor(e,o,c=!1){this.mousedown=w=>{this.startMouse(u.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),N.mousePos(this.element,w)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,N.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),N.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const d=e.dragRotate._mouseRotate.getClickTolerance(),g=e.dragRotate._mousePitch.getClickTolerance();this.element=o,this.mouseRotate=Vr({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:A,bearingDegreesPerPixelMoved:S=.8})=>{const T=new Sl;return new fa({clickTolerance:A,move:(D,P)=>({bearingDelta:(P.x-D.x)*S}),moveStateManager:T,enable:w,assignEvents:uh})})({clickTolerance:d,enable:!0}),this.map=e,c&&(this.mousePitch=xo({clickTolerance:g,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:A,pitchDegreesPerPixelMoved:S=-.5})=>{const T=new Sl;return new fa({clickTolerance:A,move:(D,P)=>({pitchDelta:(P.y-D.y)*S}),moveStateManager:T,enable:w,assignEvents:uh})})({clickTolerance:g,enable:!0})),N.addEventListener(o,"mousedown",this.mousedown),N.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(o,"touchcancel",this.reset)}startMouse(e,o){this.mouseRotate.dragStart(e,o),this.mousePitch&&this.mousePitch.dragStart(e,o),N.disableDrag()}startTouch(e,o){this.touchRotate.dragStart(e,o),this.touchPitch&&this.touchPitch.dragStart(e,o),N.disableDrag()}moveMouse(e,o){const c=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(e,o)||{};if(d&&c.setBearing(c.getBearing()+d),this.mousePitch){const{pitchDelta:g}=this.mousePitch.dragMove(e,o)||{};g&&c.setPitch(c.getPitch()+g)}}moveTouch(e,o){const c=this.map,{bearingDelta:d}=this.touchRotate.dragMove(e,o)||{};if(d&&c.setBearing(c.getBearing()+d),this.touchPitch){const{pitchDelta:g}=this.touchPitch.dragMove(e,o)||{};g&&c.setPitch(c.getPitch()+g)}}off(){const e=this.element;N.removeEventListener(e,"mousedown",this.mousedown),N.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend),N.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup),N.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),N.removeEventListener(window,"touchend",this.touchend)}}let er;function su(m,e,o){const c=new u.N(m.lng,m.lat);if(m=new u.N(m.lng,m.lat),e){const d=new u.N(m.lng-360,m.lat),g=new u.N(m.lng+360,m.lat),w=o.locationPoint(m).distSqr(e);o.locationPoint(d).distSqr(e)<w?m=d:o.locationPoint(g).distSqr(e)<w&&(m=g)}for(;Math.abs(m.lng-o.center.lng)>180;){const d=o.locationPoint(m);if(d.x>=0&&d.y>=0&&d.x<=o.width&&d.y<=o.height)break;m.lng>o.center.lng?m.lng-=360:m.lng+=360}return m.lng!==c.lng&&o.locationPoint(m).y>o.height/2-o.getHorizon()?m:c}const lu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cu(m,e,o){const c=m.classList;for(const d in lu)c.remove(`maplibregl-${o}-anchor-${d}`);c.add(`maplibregl-${o}-anchor-${e}`)}class uu extends u.E{constructor(e){if(super(),this._onKeyPress=o=>{const c=o.code,d=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=o=>{const c=o.originalEvent.target,d=this._element;this._popup&&(c===d||d.contains(c))&&this.togglePopup()},this._update=o=>{var c;if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?su(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${lu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${g}`),j.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=u.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div");const o=N.createNS("http://www.w3.org/2000/svg","svg"),c=41,d=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${c}px`),o.setAttributeNS(null,"width",`${d}px`),o.setAttributeNS(null,"viewBox",`0 0 ${d} ${c}`);const g=N.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");const w=N.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const A=N.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const S=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const te of S){const oe=N.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",te.rx),oe.setAttributeNS(null,"ry",te.ry),A.appendChild(oe)}const T=N.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill",this._color);const D=N.createNS("http://www.w3.org/2000/svg","path");D.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),T.appendChild(D);const P=N.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"opacity","0.25"),P.setAttributeNS(null,"fill","#000000");const B=N.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),P.appendChild(B);const G=N.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");const H=N.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Y=N.createNS("http://www.w3.org/2000/svg","circle");Y.setAttributeNS(null,"fill","#000000"),Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"cx","5.5"),Y.setAttributeNS(null,"cy","5.5"),Y.setAttributeNS(null,"r","5.4999962");const Z=N.createNS("http://www.w3.org/2000/svg","circle");Z.setAttributeNS(null,"fill","#FFFFFF"),Z.setAttributeNS(null,"cx","5.5"),Z.setAttributeNS(null,"cy","5.5"),Z.setAttributeNS(null,"r","5.4999962"),H.appendChild(Y),H.appendChild(Z),w.appendChild(A),w.appendChild(T),w.appendChild(P),w.appendChild(G),w.appendChild(H),o.appendChild(w),o.setAttributeNS(null,"height",c*this._scale+"px"),o.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(o),this._offset=u.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),cu(this._element,this._anchor,"marker"),e&&e.className)for(const o of e.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=u.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const d=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var o,c;if(!(!((o=this._map)===null||o===void 0)&&o.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const d=this._map,g=d.terrain.depthAtPoint(this._pos),w=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,w)-g<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/d.transform._pixelPerMeter,S=Math.sin(d.getPitch()*Math.PI/180)*A,T=d.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),D=d.transform.lngLatToCameraDepth(this._lngLat,w+S)-T>.006;!((c=this._popup)===null||c===void 0)&&c.isOpen()&&D&&this._popup.remove(),this._element.style.opacity=D?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=u.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,o){return e===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const If={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Na=0,Kt=!1;const Pl={maxWidth:100,unit:"metric"};function Dl(m,e,o){const c=o&&o.maxWidth||100,d=m._container.clientHeight/2,g=m.unproject([0,d]),w=m.unproject([c,d]),A=g.distanceTo(w);if(o&&o.unit==="imperial"){const S=3.2808*A;S>5280?Co(e,c,S/5280,m._getUIString("ScaleControl.Miles")):Co(e,c,S,m._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Co(e,c,A/1852,m._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Co(e,c,A/1e3,m._getUIString("ScaleControl.Kilometers")):Co(e,c,A,m._getUIString("ScaleControl.Meters"))}function Co(m,e,o,c){const d=function(g){const w=Math.pow(10,`${Math.floor(g)}`.length-1);let A=g/w;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(S){const T=Math.pow(10,Math.ceil(-Math.log(S)/Math.LN10));return Math.round(S*T)/T}(A),w*A}(o);m.style.width=e*(d/o)+"px",m.innerHTML=`${d}&nbsp;${c}`}const hh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},ph=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fh(m){if(m){if(typeof m=="number"){const e=Math.round(Math.abs(m)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,m),"top-left":new u.P(e,e),"top-right":new u.P(-e,e),bottom:new u.P(0,-m),"bottom-left":new u.P(e,-e),"bottom-right":new u.P(-e,-e),left:new u.P(m,0),right:new u.P(-m,0)}}if(m instanceof u.P||Array.isArray(m)){const e=u.P.convert(m);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:u.P.convert(m.center||[0,0]),top:u.P.convert(m.top||[0,0]),"top-left":u.P.convert(m["top-left"]||[0,0]),"top-right":u.P.convert(m["top-right"]||[0,0]),bottom:u.P.convert(m.bottom||[0,0]),"bottom-left":u.P.convert(m["bottom-left"]||[0,0]),"bottom-right":u.P.convert(m["bottom-right"]||[0,0]),left:u.P.convert(m.left||[0,0]),right:u.P.convert(m.right||[0,0])}}return fh(new u.P(0,0))}const ja=z;v.AJAXError=u.bg,v.Evented=u.E,v.LngLat=u.N,v.MercatorCoordinate=u.Z,v.Point=u.P,v.addProtocol=u.bh,v.config=u.a,v.removeProtocol=u.bi,v.AttributionControl=Fa,v.BoxZoomHandler=ys,v.CanvasSource=bi,v.CooperativeGesturesHandler=Ur,v.DoubleClickZoomHandler=bo,v.DragPanHandler=ga,v.DragRotateHandler=nu,v.EdgeInsets=hs,v.FullscreenControl=class extends u.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var e;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=o==null?void 0:o.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const m=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},v.GeoJSONSource=pr,v.GeolocateControl=class extends u.E{constructor(m){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const o=new u.N(e.coords.longitude,e.coords.latitude),c=e.coords.accuracy,d=this._map.getBearing(),g=u.e({bearing:d},this.options.fitBoundsOptions),w=be.fromLngLat(o,c);this._map.fitBounds(w,g,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const o=new u.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&Kt)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new uu({element:this._dotElement}),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new uu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},If,m)}onAdd(m){return this._map=m,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(e=!1){if(er!==void 0&&!e)return er;if(window.navigator.permissions===void 0)return er=!!window.navigator.geolocation,er;try{er=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{er=!!window.navigator.geolocation}return er})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Na=0,Kt=!1}_isOutOfMapMaxBounds(m){const e=this._map.getMaxBounds(),o=m.coords;return e&&(o.longitude<e.getWest()||o.longitude>e.getEast()||o.latitude<e.getSouth()||o.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const m=this._map.getBounds(),e=m.getSouthEast(),o=m.getNorthEast(),c=e.distanceTo(o),d=Math.ceil(this._accuracy/(c/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Na--,Kt=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Na++,Na>1?(m={maximumAge:6e5,timeout:0},Kt=!0):(m=this.options.positionOptions,Kt=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},v.Hash=ms,v.ImageSource=ua,v.KeyboardHandler=Qc,v.LngLatBounds=be,v.LogoControl=et,v.Map=class extends sh{constructor(m){u.be.mark(u.bf.create);const e=Object.assign(Object.assign({},ou),m);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ps(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new lh,this._controls=[],this._mapId=u.a4(),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ru),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ce.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ee(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const c=fs(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{o?c(d):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ef(this,e),this._hash=e.hash&&new ms(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,u.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Fa(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new et,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new u.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new u.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new u.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(m,e){if(e===void 0&&(e=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=m.onAdd(this);this._controls.push(m);const c=this._controlPositions[e];return e.indexOf("bottom")!==-1?c.insertBefore(o,c.firstChild):c.appendChild(o),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(m);return e>-1&&this._controls.splice(e,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,e,o,c){return c==null&&this.terrain&&(c=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,e,o,c)}resize(m){var e;const o=this._containerDimensions(),c=o[0],d=o[1],g=this._getClampedPixelRatio(c,d);if(this._resizeCanvas(c,d,g),this.painter.resize(c,d,g),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const S=this._getClampedPixelRatio(c,d);this._resizeCanvas(c,d,S),this.painter.resize(c,d,S)}this.transform.resize(c,d),(e=this._requestedCameraState)===null||e===void 0||e.resize(c,d);const w=!this._moving;return w&&(this.stop(),this.fire(new u.k("movestart",m)).fire(new u.k("move",m))),this.fire(new u.k("resize",m)),w&&this.fire(new u.k("moveend",m)),this}_getClampedPixelRatio(m,e){const{0:o,1:c}=this._maxCanvasSize,d=this.getPixelRatio(),g=m*d,w=e*d;return Math.min(g>o?o/g:1,w>c?c/w:1)*d}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(be.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(u.N.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.pointLocation(u.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,e,o){if(m==="mouseenter"||m==="mouseover"){let c=!1;return{layer:e,listener:o,delegates:{mousemove:g=>{const w=this.getLayer(e)?this.queryRenderedFeatures(g.point,{layers:[e]}):[];w.length?c||(c=!0,o.call(this,new Ui(m,this,g.originalEvent,{features:w}))):c=!1},mouseout:()=>{c=!1}}}}if(m==="mouseleave"||m==="mouseout"){let c=!1;return{layer:e,listener:o,delegates:{mousemove:w=>{(this.getLayer(e)?this.queryRenderedFeatures(w.point,{layers:[e]}):[]).length?c=!0:c&&(c=!1,o.call(this,new Ui(m,this,w.originalEvent)))},mouseout:w=>{c&&(c=!1,o.call(this,new Ui(m,this,w.originalEvent)))}}}}{const c=d=>{const g=this.getLayer(e)?this.queryRenderedFeatures(d.point,{layers:[e]}):[];g.length&&(d.features=g,o.call(this,d),delete d.features)};return{layer:e,listener:o,delegates:{[m]:c}}}}on(m,e,o){if(o===void 0)return super.on(m,e);const c=this._createDelegatedListener(m,e,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(c);for(const d in c.delegates)this.on(d,c.delegates[d]);return this}once(m,e,o){if(o===void 0)return super.once(m,e);const c=this._createDelegatedListener(m,e,o);for(const d in c.delegates)this.once(d,c.delegates[d]);return this}off(m,e,o){return o===void 0?super.off(m,e):(this._delegatedListeners&&this._delegatedListeners[m]&&(c=>{const d=this._delegatedListeners[m];for(let g=0;g<d.length;g++){const w=d[g];if(w.layer===e&&w.listener===o){for(const A in w.delegates)this.off(A,w.delegates[A]);return d.splice(g,1),this}}})(),this)}queryRenderedFeatures(m,e){if(!this.style)return[];let o;const c=m instanceof u.P||Array.isArray(m),d=c?m:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(c?{}:m)||{},d instanceof u.P||typeof d[0]=="number")o=[u.P.convert(d)];else{const g=u.P.convert(d[0]),w=u.P.convert(d[1]);o=[g,new u.P(w.x,g.y),w,new u.P(g.x,w.y),g]}return this.style.queryRenderedFeatures(o,e,this.transform)}querySourceFeatures(m,e){return this.style.querySourceFeatures(m,e)}setStyle(m,e){return(e=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(m,e))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const e=this._locale[m];if(e==null)throw new Error(`Missing UI string '${m}'`);return e}_updateStyle(m,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,e));const o=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new Ec(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,e,o):this.style.loadJSON(m,e,o),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ec(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,e){if(typeof m=="string"){const o=this._requestManager.transformRequest(m,"Style");u.h(o,new AbortController).then(c=>{this._updateDiff(c.data,e)}).catch(c=>{c&&this.fire(new u.j(c))})}else typeof m=="object"&&this._updateDiff(m,e)}_updateDiff(m,e){try{this.style.setState(m,e)&&this._update(!0)}catch(o){u.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(m,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(m,e){return this._lazyInitEmptyStyle(),this.style.addSource(m,e),this._update(!0)}isSourceLoaded(m){const e=this.style&&this.style.sourceCaches[m];if(e!==void 0)return e.loaded();this.fire(new u.j(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){const e=this.style.sourceCaches[m.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&e.reload();for(const o in this.style._layers){const c=this.style._layers[o];c.type==="hillshade"&&c.source===m.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new bs(this.painter,e,m),this.painter.renderToTexture=new Bt(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==m.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:m})),this}getTerrain(){var m,e;return(e=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const e in m){const o=m[e]._tiles;for(const c in o){const d=o[c];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,e,o={}){const{pixelRatio:c=1,sdf:d=!1,stretchX:g,stretchY:w,content:A,textFitWidth:S,textFitHeight:T}=o;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||u.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:D,height:P,data:B}=e,G=e;return this.style.addImage(m,{data:new u.R({width:D,height:P},new Uint8Array(B)),pixelRatio:c,stretchX:g,stretchY:w,content:A,textFitWidth:S,textFitHeight:T,sdf:d,version:0,userImage:G}),G.onAdd&&G.onAdd(this,m),this}}{const{width:D,height:P,data:B}=j.getImageData(e);this.style.addImage(m,{data:new u.R({width:D,height:P},B),pixelRatio:c,stretchX:g,stretchY:w,content:A,textFitWidth:S,textFitHeight:T,sdf:d,version:0})}}updateImage(m,e){const o=this.style.getImage(m);if(!o)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const c=e instanceof HTMLImageElement||u.b(e)?j.getImageData(e):e,{width:d,height:g,data:w}=c;if(d===void 0||g===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==o.data.width||g!==o.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(e instanceof HTMLImageElement||u.b(e));return o.data.replace(w,A),this.style.updateImage(m,o),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return ce.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,e){return this._lazyInitEmptyStyle(),this.style.addLayer(m,e),this._update(!0)}moveLayer(m,e){return this.style.moveLayer(m,e),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,e,o){return this.style.setLayerZoomRange(m,e,o),this._update(!0)}setFilter(m,e,o={}){return this.style.setFilter(m,e,o),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,e,o,c={}){return this.style.setPaintProperty(m,e,o,c),this._update(!0)}getPaintProperty(m,e){return this.style.getPaintProperty(m,e)}setLayoutProperty(m,e,o,c={}){return this.style.setLayoutProperty(m,e,o,c),this._update(!0)}getLayoutProperty(m,e){return this.style.getLayoutProperty(m,e)}setGlyphs(m,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,e,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,e,o,c=>{c||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,e,o=>{o||this._update(!0)}),this}setLight(m,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(m){return this._lazyInitEmptyStyle(),this.style.setSky(m),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,e){return this.style.setFeatureState(m,e),this._update()}removeFeatureState(m,e){return this.style.removeFeatureState(m,e),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,e=0;return this._container&&(m=this._container.clientWidth||400,e=this._container.clientHeight||300),[m,e]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map");const e=this._canvasContainer=N.create("div","maplibregl-canvas-container",m);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),c=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],c);const d=this._controlContainer=N.create("div","maplibregl-control-container",m),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{g[w]=N.create("div",`maplibregl-ctrl-${w} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,e,o){this._canvas.width=Math.floor(o*m),this._canvas.height=Math.floor(o*e),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const m={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",c=>{e={requestedAttributes:m},c&&(e.statusMessage=c.statusMessage,e.type=c.type)},{once:!0});const o=this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m);if(!o){const c="Failed to initialize WebGL";throw e?(e.message=c,new Error(JSON.stringify(e))):new Error(c)}this.painter=new ds(o,this.transform),Te.testSupport(o)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const d=this.transform.zoom,g=j.now();this.style.zoomHistory.update(d,g);const w=new u.z(d,{now:g,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=w.crossFadingFactor();A===1&&A===this._crossFadingFactor||(o=!0,this._crossFadingFactor=A),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.be.mark(u.bf.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const c=this._sourcesDirty||this._styleDirty||this._placementDirty;return c||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||c||(this._fullyLoaded=!0,u.be.mark(u.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ce.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.be.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,j.frameAsync(this._frameRequest).then(m=>{u.be.frame(m),this._frameRequest=null,this._render(m)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return Tf}getCameraTargetElevation(){return this.transform.elevation}},v.MapMouseEvent=Ui,v.MapTouchEvent=_o,v.MapWheelEvent=gs,v.Marker=uu,v.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{const e=this._map.getZoom(),o=e===this._map.getMaxZoom(),c=e===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,o)=>{const c=this._map._getUIString(`NavigationControl.${o}`);e.title=c,e.setAttribute("aria-label",c)},this.options=u.e({},Mf,m),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),N.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),N.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=N.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,e){const o=N.create("button",m,this._container);return o.type="button",o.addEventListener("click",e),o}},v.Popup=class extends u.E{constructor(m){super(),this.remove=()=>(this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=N.create("div","maplibregl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?su(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!e)return;const c=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor;const g=fh(this.options.offset);if(!d){const A=this._container.offsetWidth,S=this._container.offsetHeight;let T;T=c.y+g.bottom.y<S?["top"]:c.y>this._map.transform.height-S?["bottom"]:[],c.x<A/2?T.push("left"):c.x>this._map.transform.width-A/2&&T.push("right"),d=T.length===0?"bottom":T.join("-")}let w=c.add(g[d]);this.options.subpixelPositioning||(w=w.round()),N.setTransform(this._container,`${lu[d]} translate(${w.x}px,${w.y}px)`),cu(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(hh),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=u.N.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const e=document.createDocumentFragment(),o=document.createElement("body");let c;for(o.innerHTML=m;c=o.firstChild,c;)e.appendChild(c);return this.setDOMContent(e)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(ph);m&&m.focus()}},v.RasterDEMTileSource=un,v.RasterTileSource=qt,v.ScaleControl=class{constructor(m){this._onMove=()=>{Dl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Dl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Pl),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},v.ScrollZoomHandler=tu,v.Style=Ec,v.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},v.TwoFingersTouchPitchHandler=Yc,v.TwoFingersTouchRotateHandler=vr,v.TwoFingersTouchZoomHandler=Kc,v.TwoFingersTouchZoomRotateHandler=ya,v.VectorTileSource=Oi,v.VideoSource=fr,v.addSourceType=(m,e)=>u._(void 0,void 0,void 0,function*(){if(ha(m))throw new Error(`A source type called "${m}" already exists.`);((o,c)=>{da[o]=c})(m,e)}),v.clearPrewarmedResources=function(){const m=rn;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(yn),rn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},v.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},v.getRTLTextPluginStatus=function(){return Bn().getRTLTextPluginStatus()},v.getVersion=function(){return ja},v.getWorkerCount=function(){return On.workerCount},v.getWorkerUrl=function(){return u.a.WORKER_URL},v.importScriptInWorkers=function(m){return Rr().broadcast("IS",m)},v.prewarm=function(){Xa().acquire(yn)},v.setMaxParallelImageRequests=function(m){u.a.MAX_PARALLEL_IMAGE_REQUESTS=m},v.setRTLTextPlugin=function(m,e){return Bn().setRTLTextPlugin(m,e)},v.setWorkerCount=function(m){On.workerCount=m},v.setWorkerUrl=function(m){u.a.WORKER_URL=m}});var b=l;return b})})(ew);var nw=ew.exports;const iw=Wg(nw),Y3=Zg({__proto__:null,default:iw},[nw]),Q3="_mapa_5ggp1_1",e4="_marker_5ggp1_10",t4="_infoBox_5ggp1_28",n4={mapa:Q3,marker:e4,infoBox:t4},i4=[{"Espacio (nombre)":"LOS PODEROSITOS","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com.ar/maps/place/34%C2%B038'55.7%22S+58%C2%B026'42.9%22W/@-34.6488009,-58.4458967,19z/data=!3m1!4b1!4m4!3m3!8m2!3d-34.648802!4d-58.445253?entry=ttu&g_ep=EgoyMDI0MDkwNC4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"",Barrio:"BAJO FLORES","Dirección exacta":"MZA 14 CASA 18",Responsable:"Segundina Martinez Isla","Contacto del/la responsable":1125297192,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Luneas, Miercoles y viernes","Horarios de funcionamiento":"14hs a 18hs","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":16,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2017,"Cantidad de gente en lista de espera":60,Observaciones:""},{"Espacio (nombre)":"RAICES DEL SOL","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com.ar/maps/place/Plaza+Chapat%C3%ADn/@-34.6504591,-58.4413654,20z/data=!4m6!3m5!1s0x95bccb7579e158eb:0x75ce1a5e52996492!8m2!3d-34.6503598!4d-58.4414235!16s%2Fg%2F11rvb91cnl?entry=ttu&g_ep=EgoyMDI0MDkwNC4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65032391755396, -58.44141501204569",Barrio:"BAJO FLORES","Dirección exacta":"MZA 9 CASA 315",Responsable:"Paola  Alarcon","Contacto del/la responsable":1151602866,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, martes , miercoles y jueves","Horarios de funcionamiento":"14hs a 21hs","Cuantas raciones diarias entrega?":450,"Cantidad de trabajadorxs":21,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2021,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"PADRE CARLOS BUSTOS","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com/maps/dir/-34.6593516,-58.4538235/-34.6593538,-58.4538557/@-34.659372,-58.4538892,20z/data=!4m2!4m1!3e3?entry=ttu&g_ep=EgoyMDI0MDkwMy4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.659349429702644, -58.45382084237133",Barrio:"FATIMA","Dirección exacta":"MZA 5 CASA 163",Responsable:"Nilsa Ojeda","Contacto del/la responsable":1140926275,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"15 a 17 hs","Cuantas raciones diarias entrega?":40,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2017,"Cantidad de gente en lista de espera":0,Observaciones:"Segun la mercadería y disponibilidad hay dos mañanas en las que se elabora."},{"Espacio (nombre)":"OLLA POPULAR","Tipo de espacio":"Olla popular","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com/maps/dir/-34.6593516,-58.4538235/-34.6593538,-58.4538557/@-34.659372,-58.4538892,20z/data=!4m2!4m1!3e3?entry=ttu&g_ep=EgoyMDI0MDkwMy4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.659349429702644, -58.45382084237133",Barrio:"FATIMA","Dirección exacta":"MZA 5 CASA 163",Responsable:"Maria Palazzolo","Contacto del/la responsable":1153232654,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, miércoles y sabado","Horarios de funcionamiento":"7 a 13.30hs","Cuantas raciones diarias entrega?":450,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":130,Observaciones:""},{"Espacio (nombre)":"MANOS PODEROSAS","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://www.google.com.ar/maps/place/Capilla+Nuestra+Se%C3%B1ora+de+los+Milagros+de+Caacup%C3%A9/@-34.6189262,-58.3531397,3a,75y,259.27h,90.19t/data=!3m7!1e1!3m5!1s7hHMO1puj5iCPLHBawM4Jw!2e0!6shttps:%2F%2Fstreetviewpixels-pa.googleapis.com%2Fv1%2Fthumbnail%3Fcb_client%3Dmaps_sv.tactile%26w%3D900%26h%3D600%26pitch%3D-0.18999999999999773%26panoid%3D7hHMO1puj5iCPLHBawM4Jw%26yaw%3D259.27!7i13312!8i6656!4m7!3m6!1s0x95a3356a13beac4f:0x31bcc879dbb51aeb!8m2!3d-34.6187131!4d-58.3530611!10e5!16s%2Fg%2F11h79mcg7d?coh=205410&entry=ttu&g_ep=EgoyMDI0MDkwNC4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.618025608708635, -58.353010952753905",Barrio:"RODRIGO BUENO","Dirección exacta":"MZ3 CASA",Responsable:"LISSETH PEREZ","Contacto del/la responsable":1161697516,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a Sabado","Horarios de funcionamiento":"16 a 21 hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":13,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":30,Observaciones:"Se habia cerrado 2 dias por motivos de seco pero se abrio de nuevo con normalidad otra vez."},{"Espacio (nombre)":"LOS PATITOS","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ABHEC1DUUAZ839MX7",Coordenadas:"-34.674745, -58.465883",Barrio:"VILLA 20","Dirección exacta":"MZA 26 CASA 14",Responsable:"Gladys Nuñez","Contacto del/la responsable":1131899752,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"6 a 14hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":1989,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"EL ENANO","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/b8jedkZGwDhaSLTs6",Coordenadas:"-34.67758304459345, -58.46666948247058",Barrio:"VILLA 20","Dirección exacta":"Pasaje Kiki Lezcano y Fonrouge",Responsable:"Angelica Urquiza","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, Martes, Miercoles, Jueves y Viernes","Horarios de funcionamiento":"14 a 20hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SABINA","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/qY4iCwxG4yEDQoFZ8",Coordenadas:"-34.675118, -58.466496",Barrio:"VILLA 20","Dirección exacta":"MZA 21 CASA 69",Responsable:"Carolina Roque","Contacto del/la responsable":1151171749,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Miércoles","Horarios de funcionamiento":"14 a 18","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2021,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"OLLA CC","Tipo de espacio":"Olla popular","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/qY4iCwxG4yEDQoFZ8",Coordenadas:"-34.675118, -58.466496",Barrio:"VILLA 20","Dirección exacta":"MZA 21 CASA 69",Responsable:"Coca","Contacto del/la responsable":1153251026,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Martes y jueves","Horarios de funcionamiento":"13 a 18","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2019,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"OLLA MARCO","Tipo de espacio":"Olla popular","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ABHEC1DUUAZ839MX7",Coordenadas:"-34.674745, -58.465883",Barrio:"VILLA 20","Dirección exacta":"MZA 26 CASA 14",Responsable:"Gladys Nuñez","Contacto del/la responsable":1131899752,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Miércoles y viernes","Horarios de funcionamiento":"17 a 21","Cuantas raciones diarias entrega?":180,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"CELIA GONZALEZ","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/NvS62tYRoTKBswCQ8",Coordenadas:"-34.651165621917634, -58.397755",Barrio:"VILLA 21","Dirección exacta":"Avenida Iriarte 3506",Responsable:"Carla Albrecht","Contacto del/la responsable":1131471874,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Martes, Miércoles Jueves y Viernes","Horarios de funcionamiento":"15 a 17 hs","Cuantas raciones diarias entrega?":85,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"TACITAS PODEROSAS","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/bEkhphPbjEsdxi2LA",Coordenadas:"-34.658323236017004, -58.39981485767237",Barrio:"VILLA 21","Dirección exacta":"Pasaje La Amistad, Casa 18 bis",Responsable:"Otilia Concha Ledesma","Contacto del/la responsable":1179014580,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes,Martes, Miércoles Jueves, Viernes y Sábado","Horarios de funcionamiento":"15.30 a 18hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:"Los días sábados se sirve la merienda de 14 a 15"},{"Espacio (nombre)":"CELIA GONZALEZ","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/NvS62tYRoTKBswCQ8",Coordenadas:"-34.651147970213785, -58.39771208465528",Barrio:"VILLA 21","Dirección exacta":"Avenida Iriarte 3506",Responsable:"Carla Albrecht","Contacto del/la responsable":1131471874,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Martes, Miércoles Jueves y Viernes","Horarios de funcionamiento":"15 a 20  hs","Cuantas raciones diarias entrega?":360,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":35,Observaciones:""},{"Espacio (nombre)":"TACITAS PODEROSAS","Tipo de espacio":"Olla popular","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/bEkhphPbjEsdxi2LA",Coordenadas:"-34.658323236017004, -58.39981485767237",Barrio:"VILLA 21","Dirección exacta":"Pasaje La Amistad, Casa 18 bis",Responsable:"Otilia Concha Ledesma","Contacto del/la responsable":1179014580,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Viernes y Sábado","Horarios de funcionamiento":"8 a 13 hs","Cuantas raciones diarias entrega?":230,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"GUSTAVO CORTIÑAS","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/pGEBfQFfTE4vu7cB8",Coordenadas:"-34.582570610185044, -58.38173180420266",Barrio:"VILLA 31","Dirección exacta":"VICUÑA 964",Responsable:"ALICIA CASIMIRO","Contacto del/la responsable":1134606767,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12h a 18hs","Cuantas raciones diarias entrega?":425,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"GUSTAVO CORTIÑAS","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/pGEBfQFfTE4vu7cB8",Coordenadas:"-34.582570610185044, -58.38173180420266",Barrio:"VILLA 31","Dirección exacta":"VICUÑA 964",Responsable:"NATALIA ANALIA VALENZUELA ORTIZ","Contacto del/la responsable":1151493134,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, miercoles y viernes","Horarios de funcionamiento":"14h a 18hs","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"OLLA SAN MARTIN","Tipo de espacio":"Olla popular","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/6WJJZbxkDYs38sv6A",Coordenadas:"-34.58810225686198, -58.373908175366154",Barrio:"VILLA 31","Dirección exacta":"SARA BEATRIZ FERNANDEZ 84",Responsable:"VICTORIA RODRIGUEZ","Contacto del/la responsable":1123620141,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, martes y jueves","Horarios de funcionamiento":"13h a 17hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"LAS GARGANTITAS","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/QgFcJUQrRmcv2VaG8",Coordenadas:"-34.650768069384604, -58.40292422883618",Barrio:"ZAVALETA","Dirección exacta":"Iriarte 3800, Tira 6 casa 86 bis",Responsable:"MIRTA ORTEGA","Contacto del/la responsable":1150296469,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":25,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Año de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"EVITA ZAVALETA","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ghTUJR3fVu6T6CTBA",Coordenadas:"-34.65068634685871, -58.403528699999995",Barrio:"ZAVALETA","Dirección exacta":"Av. Gral. Tomás de Iriarte 3880",Responsable:"NELI VARGAS","Contacto del/la responsable":1160548268,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":1e3,"Cantidad de trabajadorxs":28,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Año de inicio":1990,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"EVITA ZAVALETA","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/ghTUJR3fVu6T6CTBA",Coordenadas:"-34.65068634685871, -58.403528699999995",Barrio:"ZAVALETA","Dirección exacta":"Av. Gral. Tomás de Iriarte 3880",Responsable:"NELI VARGAS","Contacto del/la responsable":1160548268,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":450,"Cantidad de trabajadorxs":12,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":1990,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"LOS ANGELITOS","Tipo de espacio":"Comedor","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/PwiSzfeijJ9YeiAq8",Coordenadas:"-34.650752868165064, -58.400262317065874",Barrio:"ZAVALETA","Dirección exacta":"Av. Gral. Tomás de Iriarte 3700",Responsable:"Mabel Fernández","Contacto del/la responsable":1161811043,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"9 a 19hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":12,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"OLLA LOS PEKES","Tipo de espacio":"Olla popular","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"",Coordenadas:"",Barrio:"ZAVALETA","Dirección exacta":"Tira 4 casa 61",Responsable:"Amelia Noemi Corbalan","Contacto del/la responsable":1122542900,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados y domingos","Horarios de funcionamiento":"9 a 16hs","Cuantas raciones diarias entrega?":180,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2019,"Cantidad de gente en lista de espera":"",Observaciones:"Hay veces que funciona cada 15 días por falta de mercadería"},{"Espacio (nombre)":"LO DE CAROLA","Tipo de espacio":"Merendero","Organización a la que pertenece":"LA PODEROSA","Enlace punto gps":"https://maps.app.goo.gl/m53mRBWkcPtgmutc8",Coordenadas:"-34.66318527015009, -58.45199738650853",Barrio:"CALASITA","Dirección exacta":"Lacarra 3154 m2 c2",Responsable:"Maura sanchez","Contacto del/la responsable":1163536837,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, martes y miércoles","Horarios de funcionamiento":"16 a 17.30hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2010,"Cantidad de gente en lista de espera":"",Observaciones:"aveces solo damos los sábados por falta de merienda"},{"Espacio (nombre)":"COMEDOR CORAZON ABIERTO","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://maps.app.goo.gl/K4A829ovW9pYFQEA9",Coordenadas:"-34.652902955494035, -58.4035063595285",Barrio:"BARRACAS","Dirección exacta":"IGUAZU1400 B°LOMA ALEGRE",Responsable:"LILIAN","Contacto del/la responsable":1130926771,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"11:00 a 12:00","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2009,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"COMEDOR TRINI","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://maps.app.goo.gl/LYynB1E5khbhQCtT8",Coordenadas:"-34.64957259277721, -58.39548325040347",Barrio:"BARRACAS","Dirección exacta":"LUNA1350 VILLA 21-24",Responsable:"SARA","Contacto del/la responsable":1124904213,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"18:00 a 19:00","Cuantas raciones diarias entrega?":255,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2e3,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"MERENDERO EMI","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"BARRACAS","Dirección exacta":"IGUAZU1400 (MZA 8 – CASA 11 BIS)",Responsable:"LILIAN","Contacto del/la responsable":1130926771,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES, MIERCOLES Y VIERNES","Horarios de funcionamiento":"13:00 A 14:00","Cuantas raciones diarias entrega?":60,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"MERENDERO LAS MANITOS","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"BARRACAS","Dirección exacta":"PASAJE SAN RAFAEL",Responsable:"LILIAN","Contacto del/la responsable":1130926771,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"SABADOS","Horarios de funcionamiento":"16:00 A 17:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2019,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"MERENDERO 100PRE DE PIE","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com.ar/maps/@-34.584537,-58.4554198,39m/data=!3m1!1e3?entry=ttu",Coordenadas:"-34.583786212768615, -58.456809990711065",Barrio:"CHACARITA","Dirección exacta":"FRAGA 900",Responsable:"KATY","Contacto del/la responsable":1127007191,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"14:00 A 18:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2017,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"MERENDERO CONSTRUYENDO SUEÑOS","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Parque+Avellaneda,+Mozart+1986,+C1407IVN+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6569464,-58.4725996,20z/data=!4m6!3m5!1s0x95bcc965bc778b41:0xbdbfb5febbd53f21!8m2!3d-34.6568631!4d-58.4725787!16s%2Fg%2F11mnngpc5x?entry=ttu",Coordenadas:"-34.65684104868476, -58.47257948342572",Barrio:"PARQUE AVELLANEDA","Dirección exacta":"MOZAT1986 Y ZUVIRIA",Responsable:"ALEJANDRA","Contacto del/la responsable":1170026184,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES MARTES Y VIERNES","Horarios de funcionamiento":"13:00 A 18:00","Cuantas raciones diarias entrega?":90,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":25,Observaciones:""},{"Espacio (nombre)":'MERENDERO "MANOS EN ACCIÓN',"Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.66078699119175, -58.471148559466755",Barrio:"PARQUE AVELLANEDA","Dirección exacta":"DELLEPIANE 4430 MZA D5 CASA 2 PUERTA 140",Responsable:"VALERIA","Contacto del/la responsable":1144100746,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MARTES VIERNES Y SABADOS","Horarios de funcionamiento":"16:30 a 17:30","Cuantas raciones diarias entrega?":40,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"MERENDERO MANOS SOLIDARIAS","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"RODRIGO BUENO","Dirección exacta":"AV, ESPAÑA 180 0MZA 2 CASA 66",Responsable:"ENMA","Contacto del/la responsable":1137579326,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MARTES","Horarios de funcionamiento":"16:00 A 18:00","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"MERENDERO LOS PITUFOS","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"FATIMA","Dirección exacta":"MARIANO ACOSTA RIESTRA MZA 7 – CASA 23",Responsable:"ROSANA","Contacto del/la responsable":1124985025,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"14:00 A 17:00","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"LOS PITUFOS","Tipo de espacio":"Olla popular","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"FATIMA","Dirección exacta":"MARIANO ACOSTA RIESTRA MZA 7 – CASA 23",Responsable:"ROSANA","Contacto del/la responsable":1124985025,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"SABADOS","Horarios de funcionamiento":"7:00 A 13:00","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"JUVENTUD","Tipo de espacio":"Olla popular","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.5841595,-58.3757582",Barrio:"RETIRO","Dirección exacta":"CARLOS H PERETTE Y MACHU PICHU",Responsable:"ANALI","Contacto del/la responsable":1130802891,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"VIERNES","Horarios de funcionamiento":"16:00 A 19:00","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"COMEDOR LA BOCA DE PIE","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Comedor+Comunitario+la+Boca+de+Pie/@-34.63845,-58.3616692,17z/data=!4m6!3m5!1s0x95a334b0ecd786e9:0xac76150a500af09d!8m2!3d-34.6382916!4d-58.3617513!16s%2Fg%2F11f0kxpp_y?entry=ttu",Coordenadas:"-34.6384432,-58.3616476",Barrio:"LA BOCA","Dirección exacta":"LAMADRID 667 3B°",Responsable:"PAOLA","Contacto del/la responsable":1161136163,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"12:30 a 13:30","Cuantas raciones diarias entrega?":304,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2006,"Cantidad de gente en lista de espera":40,Observaciones:""},{"Espacio (nombre)":"MERENDERO CAMINITO","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Comedor+Comunitario+la+Boca+de+Pie/@-34.63845,-58.3616692,17z/data=!4m6!3m5!1s0x95a334b0ecd786e9:0xac76150a500af09d!8m2!3d-34.6382916!4d-58.3617513!16s%2Fg%2F11f0kxpp_y?entry=ttu",Coordenadas:"-34.6384432,-58.3616476",Barrio:"LA BOCA","Dirección exacta":"LAMADRID 662",Responsable:"JESSICA","Contacto del/la responsable":1169485621,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"JUEVES","Horarios de funcionamiento":"15:00 A 17:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"COMEDOR LOS CASTORCITOS","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.674263, -58.463650",Barrio:"VILLA LUGANO","Dirección exacta":"CORVALAN MZA 22 – CASA 87 VILLA 20",Responsable:"MARIANA","Contacto del/la responsable":1137723924,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"17:00 A 18:00","Cuantas raciones diarias entrega?":117,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"MERENDERO OÑONDÍ VEPA","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/@-34.6736398,-58.4634834,2a,75y,290.5h,80.73t/data=!3m9!1e1!3m7!1sByHr5G2yvwDa60aDOivUpg!2e0!7i13312!8i6656!9m2!1b1!2i49?coh=205409&entry=ttu",Coordenadas:"-34.6736398,-58.4634834",Barrio:"VILLA LUGANO","Dirección exacta":"CHILAVERT MZA 21 CASA 67 VILLA 20",Responsable:"MARIANA","Contacto del/la responsable":1137723924,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MIERCOLES Y VIERNES","Horarios de funcionamiento":"15:00 A 17:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"MERENDERO LOS CASTORCITOS","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.674263, -58.463650",Barrio:"VILLA LUGANO","Dirección exacta":"CHILAVERT Y CORVALAN 4000 MZA 22 – CASA 87VILLA 20",Responsable:"MARIANA","Contacto del/la responsable":1137723924,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"VIERNES","Horarios de funcionamiento":"17:00 A 18:00","Cuantas raciones diarias entrega?":70,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"COMEDOR TANGUITO 2X4","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.6682049443487, -58.48983316226018",Barrio:"VILLA 15","Dirección exacta":"HUBAC 6378  MZA 6 CASA 34 OCULTA",Responsable:"MIRIAM HUANTO","Contacto del/la responsable":1141921332,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"18:00 A 19:00","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2017,"Cantidad de gente en lista de espera":40,Observaciones:""},{"Espacio (nombre)":"MERENDERO  CARITA FELIZ","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"VILLA 15","Dirección exacta":"MZA 31 BIS  CASA 70 VILLA OCULTA CRISOSTOMO ALVAREZ 6920",Responsable:"LINA","Contacto del/la responsable":1150517363,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MARTES","Horarios de funcionamiento":"14:00 A 18:00","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":1,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"MERENDERO  OMBU","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"VILLA 15","Dirección exacta":"MZA 31 BIS – CASA 131 VILLA OCULTA CRISOSTOMO ALVAREZ 6900",Responsable:"JULIANA","Contacto del/la responsable":1165490277,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"SABADO","Horarios de funcionamiento":"10:30 a 12.00","Cuantas raciones diarias entrega?":160,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Desayuno",Modalidad:"Vianda","Año de inicio":2013,"Cantidad de gente en lista de espera":5,Observaciones:""},{"Espacio (nombre)":"MERENDERO SANTANDER","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.67283904100512, -58.48687055512544",Barrio:"VILLA 15","Dirección exacta":"SANTANDER 6007 (CASA 50)VILLA OCULTA",Responsable:"SONIA","Contacto del/la responsable":1144718962,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"JUEVES","Horarios de funcionamiento":"17:30 A 18:30","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":1,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2017,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"MERENDERO CARITA DE ANGEL","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.67414767519864, -58.487502175750386",Barrio:"VILLA 15","Dirección exacta":"VILLA 15 MZA 30 CASA 21 SANTANDER 6117",Responsable:"NIMIA","Contacto del/la responsable":1154819216,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MIERCOLES","Horarios de funcionamiento":"16:30 A 18:00","Cuantas raciones diarias entrega?":36,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2017,"Cantidad de gente en lista de espera":7,Observaciones:""},{"Espacio (nombre)":"MERENDERO CASITA DEL SOL","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.673304, -58.490703",Barrio:"PIEDRABUENA","Dirección exacta":"PIEDRABUENA3800 (MZA 32, CASA 88 BIS)PIEDRABUENA",Responsable:"ANA","Contacto del/la responsable":1162220016,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MIERCOLES Y VIERNES","Horarios de funcionamiento":"16:30 A 17:00","Cuantas raciones diarias entrega?":75,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"MERENDERO TEODORA ULLOA","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Yaguaret%C3%A9+1096,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5791467,-58.3854826,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaa87499d305:0x21ab09af4c385b57!8m2!3d-34.5791511!4d-58.3829077?entry=ttu",Coordenadas:"-34.5791467,-58.3854826",Barrio:"RETIRO","Dirección exacta":"YAGUARETE 1096",Responsable:"ABIGAIL","Contacto del/la responsable":1135722166,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"SABADOS","Horarios de funcionamiento":"16:00 A 18:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":4,Observaciones:""},{"Espacio (nombre)":"MERENDERO ABRIENDO CAMINO","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Alpaca+1397,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5816203,-58.3848745,21z/data=!4m14!1m7!3m6!1s0x95bccaa640a5ee8d:0x4e017f9fafe56f69!2sAlpaca+1409,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.5815728!4d-58.3847996!3m5!1s0x95bccaa64633dab1:0x4519cb926a2beb82!8m2!3d-34.5815827!4d-58.3847097!16s%2Fg%2F11c12r4_1m?entry=ttu",Coordenadas:"-34.5816203,-58.3848745",Barrio:"RETIRO","Dirección exacta":"ALPACA 1409 MZA 7",Responsable:"FELICIDAD","Contacto del/la responsable":1130981072,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MIERCOLES Y SABADOS","Horarios de funcionamiento":17,"Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2019,"Cantidad de gente en lista de espera":7,Observaciones:""},{"Espacio (nombre)":"MERENDERO MIS SOLECITOS","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"-34.579535, -58.383945",Barrio:"RETIRO","Dirección exacta":"PUMA Y PJE MOCOVI 1189  RETIRO BARIIO YPF(ENTRE PUMA Y MOSCONI)",Responsable:"MIGUELINA","Contacto del/la responsable":1130758059,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES VIERNES Y SABADO","Horarios de funcionamiento":"17:30 A 18:30","Cuantas raciones diarias entrega?":37,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2021,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"COMEDOR DE PIE","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"",Coordenadas:"",Barrio:"RETIRO","Dirección exacta":"MZA 32- CASA 20 SAN MARTIN 5000",Responsable:"MIRIAM SUAREZ","Contacto del/la responsable":1136987128,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES, MIERCOLES Y VIERNES","Horarios de funcionamiento":"18:00 A 19:00","Cuantas raciones diarias entrega?":57,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2017,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"MERENDERO ANGELES DE PIE","Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/@-34.5835731,-58.3817062,2a,75y,43.73h,90t/data=!3m6!1e1!3m4!1sDbFa6QjzY7KAMgBQvUQx4A!2e0!7i13312!8i6656?coh=205409&entry=ttu",Coordenadas:"-34.5835731,-58.3817062",Barrio:"RETIRO","Dirección exacta":"DIAGUITAS 842",Responsable:"SIMON","Contacto del/la responsable":1169356774,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES","Horarios de funcionamiento":"16:00 a 17:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2019,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":'MERENDERO "CASITA DEL SABER',"Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Aymar%C3%A1+767,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5845365,-58.381271,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaaf69aa242d:0x3e66beeef48a7643!8m2!3d-34.5845365!4d-58.381271?entry=ttu",Coordenadas:"-34.5845365,-58.381271",Barrio:"RETIRO","Dirección exacta":"AYMARA 767 MZA 103 CASA 62 FERROVIARIO SAN MARTIN",Responsable:"YENNI","Contacto del/la responsable":1161243963,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MARTES Y VIERNES","Horarios de funcionamiento":"15 A 17:00","Cuantas raciones diarias entrega?":25,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2019,"Cantidad de gente en lista de espera":4,Observaciones:""},{"Espacio (nombre)":"SAN TELMO","Tipo de espacio":"Olla popular","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Estados+Unidos+557,+C1101AAK+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/data=!4m2!3m1!1s0x95bccb2b11c640af:0x16712cce08fb2b76?sa=X&ved=1t:242&ictx=111",Coordenadas:"-34.6184444,-58.3737562",Barrio:"SAN TELMO","Dirección exacta":"ESTADOS UNIDOS 557",Responsable:"MARTIN","Contacto del/la responsable":1134392506,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"DOMINGOS","Horarios de funcionamiento":"13: A 14 HS","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Año de inicio":2020,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"HAMBRE NO COMUNA 12","Tipo de espacio":"Olla popular","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Parroquia+Coraz%C3%B3n+de+Jes%C3%BAs/@-34.5801534,-58.5076997,15.75z/data=!4m6!3m5!1s0x95bcb7c3308e29b5:0x9797a4f6092cc54c!8m2!3d-34.5757474!4d-58.5114295!16s%2Fg%2F1tgjmgrq?entry=ttu",Coordenadas:"-34.5756815,-58.5116107",Barrio:"VILLA PUEYRREDON","Dirección exacta":"CORAZON DE JESUS PARROQUIA NAZCA Y EZEIZA ( BARRIO PERON)",Responsable:"MONICA","Contacto del/la responsable":1169218311,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"MIERCOLES","Horarios de funcionamiento":"12:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":2,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2022,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"HAMBRE NO COMUNA 14","Tipo de espacio":"Olla popular","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com/maps/place/Jun%C3%ADn+425,+C1026ABI+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6041345,-58.3967435,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccaeaf8569caf:0xc191e03ca1c0d76e!8m2!3d-34.6041345!4d-58.3967435!16s%2Fg%2F11c5klkddl?entry=ttu",Coordenadas:"-34.6041345,-58.3967435",Barrio:"PALERMO","Dirección exacta":"JUNIN 4 25 PB C  17 hS  (COCINAN) RECORRIDA BULNES Y SANTA FE HASTA ESCALIBRINI ORTIS Y HASTA LA PLAZA GUEMES",Responsable:"SOL","Contacto del/la responsable":1136651352,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES","Horarios de funcionamiento":"19:00","Cuantas raciones diarias entrega?":40,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2021,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"COMEDOR TIERRA AMARILLA","Tipo de espacio":"Comedor","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com.ar/maps/@-34.6610253,-58.4555153,20z?hl=es&entry=ttu",Coordenadas:"-34.660885, -58.455859",Barrio:"VILLA SOLDATI","Dirección exacta":"MZA 10CASA 20B LOS PILETONES LACARRA 2300",Responsable:"GLADYS","Contacto del/la responsable":1134491203,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"5:30 A 18:30","Cuantas raciones diarias entrega?":90,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2016,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":'MERENDERO "NUEVO AMANECER',"Tipo de espacio":"Merendero","Organización a la que pertenece":"Barrios de Pie","Enlace punto gps":"https://www.google.com.ar/maps/@-34.6610253,-58.4555153,20z?hl=es&entry=ttu",Coordenadas:"-34.660885, -58.455859",Barrio:"VILLA SOLDATI","Dirección exacta":"MZA 10CASA 20B LOS PILETONES LACARRA 2300",Responsable:"ANA","Contacto del/la responsable":1157618782,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"JUEVES Y SABADO","Horarios de funcionamiento":"16:Y 11:00","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Desayuno y merienda",Modalidad:"Ambas","Año de inicio":2017,"Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"LUCHANDO JUNTOS","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Sara+Beatriz+Fern%C3%A1ndez+1606,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5811945,-58.3867811,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaa71b7be4a3:0x6d9c9a24ae7308dd!8m2!3d-34.5811945!4d-58.3867811?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.580978084012585, -58.38681328650949",Barrio:"","Dirección exacta":"SARA BEATRIZ FERNÁNDEZ 1606",Responsable:"CLAUDIA NOEMI, PALOMINO","Contacto del/la responsable":1121611784,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":500,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LUZ DE ESPERANZA","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"CAÑA 2569",Responsable:"JIMENEZ, MARIEL","Contacto del/la responsable":1130217061,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":400,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"VÍRGEN DE SATA NUDO","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":`34° 34' 46.6367" S 58° 23' 10.3333" W`,Coordenadas:"-34.579422546883016, -58.386214428836496",Barrio:"","Dirección exacta":"EVITA 1948",Responsable:"MYRIAM BEATRIZ, CORNEJO","Contacto del/la responsable":1130217072,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":319,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"RINCON DE LUZ","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"Cochabamba 2630",Coordenadas:"-34.625021057740724, -58.40236378225194",Barrio:"","Dirección exacta":"AV. COCHABAMBA 2630",Responsable:"MIRTHA YANINE, DE PAZ RIVERA","Contacto del/la responsable":1150038656,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":765,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"PRIMERO LOS CHICOS Y LOS ABUELOS","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":`34° 39' 5.5271" S 58° 28' 41.0246" W`,Coordenadas:"Correa 4010",Barrio:"","Dirección exacta":"CORREA 4010",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NI UN PIBE MENOS","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Av.+Manuel+Ricardo+Trelles+2673,+C1416BSE+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5981098,-58.4659155,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb6011fc6fba7:0x89a6d9c682f69971!8m2!3d-34.5981098!4d-58.4659155!16s%2Fg%2F11fpdbttm7?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.59792875413545, -58.465915499999994",Barrio:"","Dirección exacta":"TRELLES 2673",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"PLAYON URQUIZA-FRAGA","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"FRAGA Y PALPA",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LA NUEVA ESPERANZA MATADEROS","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Padre+Montes+Carballo+1674,+C1407+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6536993,-58.4772921,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcc971cabbcd99:0xb6649e7d34f53655!8m2!3d-34.6536993!4d-58.4772921!16s%2Fg%2F11f9zzr77p?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65350072418475, -58.477302828836514",Barrio:"","Dirección exacta":"PADRE MONTE CARBALLO 1674",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"MI NUEVO AMANECER","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Av.+Escalada+4537,+C1439+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6751391,-58.494009,13z/data=!4m6!3m5!1s0x95bccc0789faaf33:0x8c28790de6620aaa!8m2!3d-34.6779474!4d-58.4534371!16s%2Fg%2F11c2c0qvqs?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.674927340582244, -58.45366857475961",Barrio:"","Dirección exacta":"AV ESCALADA 4537",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LOS ANGELITOS DE LA PATERNAL","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Av.+Manuel+Ricardo+Trelles+2750+SECTOR+2+CASA+25,+C1416+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5977528,-58.467585,17z/data=!3m1!4b1!4m5!3m4!1s0x95bcb600d862d4cd:0xee3cb7b43de76f2b!8m2!3d-34.5977528!4d-58.467585?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.59754525869358, -58.46759572883651",Barrio:"","Dirección exacta":"MANUEL RICARDO TRELLES 2750 SECTOR 2 CASA 25",Responsable:"JULIA ROSALES","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Casita de los Pinos","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"Av. Portela Mza 1 csa 5",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Casita de los niños","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"https://www.google.com/maps/place/Coronel+Martiniano+Chilavert+2835,+C1437+Villa+Soldati,+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6570414,-58.4424496,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbeafc95a9f3:0xd0917541f9609f2e!8m2!3d-34.6570414!4d-58.4424496!16s%2Fg%2F11s9b13b7s?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65685165743773, -58.44246032883649",Barrio:"","Dirección exacta":"Martiniano chilavert 2835",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Viento de Luz","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"Mza 3 Csa 53 Los Piletones",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Rayito de la 20","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"Fonrouge y Barros pazos mza 3 casa 43",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Casita de la 20","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"Mza 30 csa226 - villa 20",Responsable:"LUCIANO NARDULLI","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Merendero María conty","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"Manzana 1 casa 75 bis 9 loma alegre",Responsable:"BLANCA GARCIA","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor La Lecherita","Tipo de espacio":"","Organización a la que pertenece":"CCC","Enlace punto gps":"",Coordenadas:"",Barrio:"","Dirección exacta":"manzana 23 casa 77 Villa 21.24",Responsable:"BLANCA GARCIA","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Casa Popular  fpds Consti utep","Tipo de espacio":"Comedor","Organización a la que pertenece":"FPDS","Enlace punto gps":"https://www.google.com/maps/place/Santiago+del+Estero+866,+C1075+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.618343,-58.3867769,847m/data=!3m2!1e3!4b1!4m6!3m5!1s0x95bccb27f4333241:0xfe49ec2150a16097!8m2!3d-34.6183474!4d-58.384202!16s%2Fg%2F11fjzx94kc?hl=es&entry=ttu",Coordenadas:"-34.618370477629306, -58.384240021260936",Barrio:"CONSTITUCION","Dirección exacta":"Santiago del Estero 866",Responsable:"Vani","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"9h a 14hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":2010,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"LA BOCA Olavarria  fpds utep","Tipo de espacio":"Comedor","Organización a la que pertenece":"FPDS","Enlace punto gps":"https://www.google.com/maps/place/Frente+Popular+Dario+Santillan/@-34.6356436,-58.3595483,847m/data=!3m1!1e3!4m15!1m8!3m7!1s0x95a334bbd10e9d07:0xf435f641063423f5!2sOlavarr%C3%ADa+300,+C1162ABF+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.635648!4d-58.3569734!16s%2Fg%2F11dfh3m35x!3m5!1s0x95a334ba2f221d47:0x4a9c9218e26d033c!8m2!3d-34.6358897!4d-58.357987!16s%2Fg%2F11f0437r3c?hl=es&entry=ttu",Coordenadas:"-34.635881370482494, -58.35798625441978",Barrio:"LA BOCA","Dirección exacta":"Olavarria  371",Responsable:"Margarita","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"9h a 14hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":2010,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SOLDATI fpds utep","Tipo de espacio":"Comedor","Organización a la que pertenece":"FPDS","Enlace punto gps":"https://maps.app.goo.gl/MHQkpbTHYKdyiH879",Coordenadas:"-34.6605251054488, -58.454588526292",Barrio:"SOLDATI","Dirección exacta":"Manzana 6 casa 22. Barrio Fátima Soldati",Responsable:"Yaneth","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"9h a 14hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"1 11 14 Padre Richardelli fpds utep","Tipo de espacio":"Comedor","Organización a la que pertenece":"FPDS","Enlace punto gps":"https://maps.app.goo.gl/ihyHFgz3PFk2Aafq7",Coordenadas:"-34.650180, -58.440274",Barrio:"BAJO FLORES","Dirección exacta":"Av perito moreno Puerta 4 Barrio Padre Richardelli 1 11 14",Responsable:"Paola Ramos","Contacto del/la responsable":1134318454,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"8hs a 13hs","Cuantas raciones diarias entrega?":38,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Se come en el lugar","Año de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"31 Mujica fpds utep","Tipo de espacio":"Comedor","Organización a la que pertenece":"FPDS","Enlace punto gps":"https://maps.app.goo.gl/ihyHFgz3PFk2Aafq7",Coordenadas:"-34.582659, -58.380255",Barrio:"RETIRO","Dirección exacta":"Evita 756",Responsable:"Laura chauque","Contacto del/la responsable":1165510057,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A VIERNES","Horarios de funcionamiento":"10 a 18hs","Cuantas raciones diarias entrega?":20,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo, merienda, desayuno y cena",Modalidad:"Se come en el lugar","Año de inicio":2023,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Merendero Nueva Esperanza","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Sara+Beatriz+Fern%C3%A1ndez+1429,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5818339,-58.3879753,16z/data=!4m5!3m4!1s0x95bccaa66baa89b1:0x90d08f816cf810bd!8m2!3d-34.5820297!4d-58.384939?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.58168373501976, -58.38499268345298",Barrio:"Ferroviario","Dirección exacta":"Sara Beatriz Fernández 1429",Responsable:"Leni Gutiérrez","Contacto del/la responsable":1166272625,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"martes y viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":80,"Cantidad de trabajadorxs":15,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Hilda Guerrero","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Constitución","Dirección exacta":"",Responsable:"José Luis","Contacto del/la responsable":1165164393,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"12  a 18 hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":12,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Divino Niño","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Pje.+Ypacara%C3%AD+898,+C1104+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5806944,-58.3808532,17z/data=!3m1!4b1!4m5!3m4!1s0x95bccaa8e5b022a9:0x45f2c3f36951b970!8m2!3d-34.5806944!4d-58.3808532?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.580486816080196, -58.3808639288365",Barrio:"villa 31","Dirección exacta":"Ypacaraí 898",Responsable:"Maribel","Contacto del/la responsable":1151062751,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 19 hs","Cuantas raciones diarias entrega?":300,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Merendero Saldías","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Saldías","Dirección exacta":"Padre Mujica 21571",Responsable:"Elvia Suarex","Contacto del/la responsable":1130751206,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"jueves y sábado","Horarios de funcionamiento":"16 a 18_ 19 a 21","Cuantas raciones diarias entrega?":90,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Centro Cultural Recreativo y Biblioteca Evita","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Zavaleta","Dirección exacta":"Av. Iriarte 3800 tira 1",Responsable:"Lorena Claudia Corral","Contacto del/la responsable":1132586493,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 19 hs","Cuantas raciones diarias entrega?":800,"Cantidad de trabajadorxs":20,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Año de inicio":1983,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"Comedor Comunitario Santino","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Loma Alegre","Dirección exacta":"Manz. 5_ Casa 26 bis",Responsable:"Blanca Ester Alfonzo de Benítez","Contacto del/la responsable":1138526718,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":55,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":5,Observaciones:""},{"Espacio (nombre)":"Grupo Comunitario Tu Sonrisa es la luz","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Zavaleta","Dirección exacta":"Zavaleta",Responsable:"María Elizabeth Ferreyra","Contacto del/la responsable":1131458219,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"Comedor Santa Rosa","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Agust%C3%ADn+Magaldi+1273,+C1286AFD+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6476258,-58.3926957,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb425c088a0f:0x684a30f1a114aefd!8m2!3d-34.6476258!4d-58.3926957!16s%2Fg%2F11gmz4hydn?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.64743603588417, -58.39270642883648",Barrio:"Barracas","Dirección exacta":"Agustín Magaldi 1273",Responsable:"María Isabel Ballesteros","Contacto del/la responsable":1131512554,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":80,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"Merendero Meren-dar","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Dr.+Prof.+Pedro+Chutro+3246,+C1437IYN+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6426655,-58.4081518,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb0d0637f021:0xeb19d421f76e670a!8m2!3d-34.6426655!4d-58.4081518!16s%2Fg%2F11dzmtbx5z?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.64247572453146, -58.4081625288365",Barrio:"Pque. Patricios","Dirección exacta":"Dr. Pedro Chutro 3246",Responsable:"Sheila de Jesús Villalba","Contacto del/la responsable":1153423248,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"miércoles y sábado","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":15,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero Evita de la Boca","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Irala+50,+C1163ABB+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6288799,-58.3713526,17z/data=!3m1!4b1!4m6!3m5!1s0x95a334cb81e94075:0x30c8fee800d3ca67!8m2!3d-34.6288843!4d-58.3687777!16s%2Fg%2F11jdczq3rn?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62868566475438, -58.36878842883649",Barrio:"La Boca","Dirección exacta":"Irala 50",Responsable:"Lidia Elena Cortiana","Contacto del/la responsable":1166384898,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero Gleyzer","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Juan+de+Garay+2900,+C1256AAX+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6294284,-58.4053499,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb1b571b1d45:0x2774900eec47fc5b!8m2!3d-34.6294284!4d-58.4053499!16s%2Fg%2F11ngjr0mkx?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62924742242681, -58.40536062883649",Barrio:"Parque Patricios","Dirección exacta":"Juan de Garay 2900",Responsable:"Estela Flores Linares","Contacto del/la responsable":1143991728,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 y de 19 a 21 hs","Cuantas raciones diarias entrega?":38,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Casa Pueblo La Boca","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Almte.+Brown+1127,+C1159ABD+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6347913,-58.3594412,17z/data=!3m1!4b1!4m5!3m4!1s0x95a334b9c27c73b7:0xbcdb7b964754510a!8m2!3d-34.6347913!4d-58.3594412?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.63460150651253, -58.35944119999998",Barrio:"La Boca","Dirección exacta":"Av. Almirante Brown 1127",Responsable:"Elsa Susana Reynoso","Contacto del/la responsable":1150463695,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, miércoles, viernes","Horarios de funcionamiento":"12 a 14 hs - 16 a 18 hs","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Se come en el lugar","Año de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero/ Comedor Santa Librada","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"Agustín Magaldi 1240",Coordenadas:"-34.64713054211727, -58.392555464704124",Barrio:"Barracas","Dirección exacta":"Mza. 8 _ Casa 40",Responsable:"Reineira Orquiola","Contacto del/la responsable":1138763882,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, miércoles, viernes","Horarios de funcionamiento":"16 a 18 hs - 19 a 21 hs","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"Merendero El Abuelo","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"San Blas","Dirección exacta":"8 de Diciembre casa 127",Responsable:"","Contacto del/la responsable":1139586831,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, miércoles, viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Rincón de Luz","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Gral.+Tom%C3%A1s+de+Iriarte+3516,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6512478,-58.3981389,17z/data=!4m6!3m5!1s0x95bccb6891f3ae73:0xf228c9c2aad68915!8m2!3d-34.6511438!4d-58.3981524!16s%2Fg%2F11h8b4d9ht?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.65094330788373, -58.3981710865095",Barrio:"Villa 21","Dirección exacta":"Av. Iriarte 3516 mz. 18 casa 177",Responsable:"Cristina Noelia Mercado","Contacto del/la responsable":1133873425,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, miércoles, viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":15,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"El Pasillo","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa 21","Dirección exacta":"Mz. 25- Casa 76 La Loma",Responsable:"Felicia Rotela","Contacto del/la responsable":1136587140,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes miércoles viernes","Horarios de funcionamiento":"12 a 14 hs y de 16 a 18 hs","Cuantas raciones diarias entrega?":30,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"Comedor Micaela","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Benito+Quinquela+Mart%C3%ADn+2252,+C1296ADT+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6453043,-58.3827051,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb4e4b6d98bb:0xdbf4f189bc07da4e!8m2!3d-34.6453087!4d-58.3801302!16s%2Fg%2F11gv08mvsf?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.645136583568366, -58.380130199999996",Barrio:"Barracas","Dirección exacta":"Benito Quinquela Martín 2252",Responsable:"Martin Ronca","Contacto del/la responsable":1157401367,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"10 a 12 hs - de 12 a 14 hs","Cuantas raciones diarias entrega?":161,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":34,Observaciones:""},{"Espacio (nombre)":"Centro Cultural Charrúa","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Charrúa","Dirección exacta":"Pasillo 4 casa 100",Responsable:"Norma Peñarrieta","Contacto del/la responsable":1159132403,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"miércoles","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Vianda","Año de inicio":2015,"Cantidad de gente en lista de espera":12,Observaciones:""},{"Espacio (nombre)":"Comedor Maná del Cielo","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa 21","Dirección exacta":"Zavaleta y Osvaldo Cruz Mz. 25- casa 43 bis",Responsable:"Isabel Pérez Guerrero","Contacto del/la responsable":1159199308,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12 a 14 hs- 16 a 18 hs","Cuantas raciones diarias entrega?":480,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"Trama","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Comuna+4,+Av.+La+Plata+2604,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6449748,-58.4209155,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccba117d5f5dd:0x7dc6b08c1e0f776f!8m2!3d-34.6449748!4d-58.4209155!16s%2Fg%2F11fkc2swfc?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.644785029816596, -58.42092622883649",Barrio:"Pompeya","Dirección exacta":"Av. La Plata 2604",Responsable:"Julia Parodi","Contacto del/la responsable":1161101143,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, martes, jueves, viernes","Horarios de funcionamiento":"16 a 18 hs y 19 a 21 hs","Cuantas raciones diarias entrega?":35,"Cantidad de trabajadorxs":3,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Recreación","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"B Rivadavia","Dirección exacta":"Placita Rivadavia 1",Responsable:"Judith Cespedes Flores","Contacto del/la responsable":1121726272,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"sábado","Horarios de funcionamiento":"10 a 12 hs","Cuantas raciones diarias entrega?":45,"Cantidad de trabajadorxs":16,"Prestacion alimentaria":"Merienda",Modalidad:"Se come en el lugar","Año de inicio":"","Cantidad de gente en lista de espera":10,Observaciones:""},{"Espacio (nombre)":"Anfibio","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Eva+Per%C3%B3n+2558,+C1406+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6409425,-58.4588816,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbd3716dcd9f:0x8ab6cc4dca26159c!8m2!3d-34.6409469!4d-58.4563067!16s%2Fg%2F11frnjkk4b?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.64071298579157, -58.4563174288365",Barrio:"Flores","Dirección exacta":"Av. Eva Perón 2558",Responsable:"Emiliano Armango","Contacto del/la responsable":1155807963,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a sábado","Horarios de funcionamiento":"16 a 18. 19 a 21 hs","Cuantas raciones diarias entrega?":165,"Cantidad de trabajadorxs":14,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Club Miraflores","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Somellera+1770,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6442693,-58.4364642,17z/data=!4m15!1m8!3m7!1s0x95bccbb9c7a6edb3:0xa73e1d20b51e7f6f!2sSomellera+1770,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.6442693!4d-58.4364642!16s%2Fg%2F11fctc7w7f!3m5!1s0x95bccbb9c7a6edb3:0xa73e1d20b51e7f6f!8m2!3d-34.6442693!4d-58.4364642!16s%2Fg%2F11fctc7w7f?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.644097181410764, -58.4364642",Barrio:"Pque. Chacabuco","Dirección exacta":"Somellera 1770",Responsable:"Tamara Violi","Contacto del/la responsable":1155807963,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs - 19 a 21 hs","Cuantas raciones diarias entrega?":250,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"Nuevo Amanecer","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ricciardelli","Dirección exacta":"Av. Bonorino y Oceanía  Mz. 31- Casa 47",Responsable:"Jhovana Cruz Martínez","Contacto del/la responsable":1164976898,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, martes, jueves","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":260,"Cantidad de trabajadorxs":7,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Frente de Mujeres","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ricciardelli","Dirección exacta":"Perito Moreno Mz. 2- casa 45",Responsable:"Gloria Elizabeth Otazu Pereira","Contacto del/la responsable":1126645388,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"viernes y sábado","Horarios de funcionamiento":"16- 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":5,Observaciones:""},{"Espacio (nombre)":"Flores Sur","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"Santander 2551",Coordenadas:"-34.64232234478304, -58.452728771423885",Barrio:"Flores","Dirección exacta":"Santander 2551",Responsable:"Marcelo Alejandro Vergottini","Contacto del/la responsable":1138051988,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"10 a 12 hs","Cuantas raciones diarias entrega?":280,"Cantidad de trabajadorxs":30,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"La leona","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ricciardelli","Dirección exacta":"Perito Moreno Pasillo 6 Mz 1 - casa 485",Responsable:"Zaira Nadir Mamani Fernández","Contacto del/la responsable":1123299006,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"12 a 14 hs y de 19 a 21 hs","Cuantas raciones diarias entrega?":700,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Olympia","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/C.+Pres.+Torres+y+Tenorio+2081,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6445347,-58.4431962,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbc7fc46cf83:0x87c9b80d9b499ab8!8m2!3d-34.6445391!4d-58.4406213!16s%2Fg%2F11c5k09sx7?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.644344888462314, -58.44063203342515",Barrio:"Bajo Flores","Dirección exacta":"Camilo Torres 2081 loc. 15 y 16",Responsable:"Celia Vanesa Fredes","Contacto del/la responsable":1125584601,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a sábado","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":60,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":17,Observaciones:""},{"Espacio (nombre)":"Casa Tesai","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Juan+Bautista+Alberdi+2652,+C1406GSP+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6291302,-58.4745049,15z/data=!4m6!3m5!1s0x95bcc987c77616f3:0xb4748ea141b90cc5!8m2!3d-34.6325647!4d-58.4650815!16s%2Fg%2F11c18j9mht?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.63190220735978, -58.46514935457191",Barrio:"Flores","Dirección exacta":"Av. Alberdi 2652",Responsable:"Federico Vallero","Contacto del/la responsable":1132069034,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, martes, miércoles, jueves","Horarios de funcionamiento":"10 a 12 hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Almuerzo",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Furgón","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Parque+Chacabuco,+Somellera+1825,+C1437+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6441539,-58.4377674,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccbb831e6b0fd:0xf5ff3f39d16180e8!8m2!3d-34.6441539!4d-58.4377674!16s%2Fg%2F11gj4nqv13?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.643972954555004, -58.43778885767298",Barrio:"Pque. Chacabuco","Dirección exacta":"Somellera 1825",Responsable:"Martha Alicia Choque Yanarico","Contacto del/la responsable":1139364719,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"8 a 12 hs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":25,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Ayudar es Vivir","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://maps.app.goo.gl/HasrSYUheiJwN9ZKA",Coordenadas:"-34.64806749069679, -58.43480988302473",Barrio:"Barrio Illia","Dirección exacta":"Giacchino 538",Responsable:"Clara Haydee Rodríguez","Contacto del/la responsable":1137578597,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"martes, miércoles, jueves","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Comedor Vecino Solidario","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa Esperanza","Dirección exacta":"entre La Carra y Riestra Mz. 2 - casa 28",Responsable:"Maribel Gayoso","Contacto del/la responsable":1168652683,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"Sonrisita","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Soldati","Dirección exacta":"Av. Fernández de la Cruz y La Carra",Responsable:"Johanna Rocío","Contacto del/la responsable":1155818664,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, martes, miércoles","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":50,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"Merendero Mis Tres Sonrisas","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Av.+Eva+Per%C3%B3n+6600,+1439+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6687565,-58.4940412,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcc9163158bf09:0x7d1c607aeacef559!8m2!3d-34.6687565!4d-58.4940412!16s%2Fg%2F11py731c83?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.66854031226439, -58.49405192883649",Barrio:"Villa 15","Dirección exacta":"Tira 9 - Casa 137",Responsable:"Fátima Lorena Aguila","Contacto del/la responsable":1166552356,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":112,"Cantidad de trabajadorxs":15,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"Arcoiris","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Ramón Carrillo ( V. Soldati )","Dirección exacta":"Lateral La Carra y Castañares casa 107",Responsable:"Marisol Humacata","Contacto del/la responsable":1130917424,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":60,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Merendero Carusito","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Dr.+Jos%C3%A9+Ignacio+de+la+Rosa+6355,+C1439+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6673161,-58.4935375,17.25z/data=!4m6!3m5!1s0x95bcc915d9b79bf3:0x1df92f4089c4ecba!8m2!3d-34.6671235!4d-58.4912357!16s%2Fg%2F11h7b5cjxv?entry=ttu&g_ep=EgoyMDI0MDkxMS4wIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.6669410735787, -58.491241528988986",Barrio:"Lugano","Dirección exacta":"José Ignacio de la Rosa 6355",Responsable:"Fany del Valle Beltrán","Contacto del/la responsable":1164560682,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes miércoles viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"La Milagrosa","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa 15","Dirección exacta":"Piedra Buena 3200 Mz. 27 bis - Casa 8",Responsable:"Sonia Larrea","Contacto del/la responsable":1166125818,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes miércoles viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":30,Observaciones:""},{"Espacio (nombre)":"Movimiento Popular","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Villa Lugano","Dirección exacta":"entre Barros Pazos y Miralla Mz.26- Casa 98",Responsable:"Guillermina Pally Calizaya","Contacto del/la responsable":1121616239,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, miércoles, jueves, viernes","Horarios de funcionamiento":"16 a 18 hs","Cuantas raciones diarias entrega?":215,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":15,Observaciones:""},{"Espacio (nombre)":"La Esperanza","Tipo de espacio":"Merendero","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Piletones","Dirección exacta":"Mz. 10- Casa 2",Responsable:"María Arellano Choque","Contacto del/la responsable":1160446585,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"martes y jueves","Horarios de funcionamiento":"12 a 14 hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":9,"Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":20,Observaciones:""},{"Espacio (nombre)":"Los Salteños","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"",Coordenadas:"",Barrio:"Fátima","Dirección exacta":"Pasaje la Esperanza Mz. 4 - Casa 20",Responsable:"Gabriela Anahí Rodríguez","Contacto del/la responsable":1150558018,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes, miércoles, viernes","Horarios de funcionamiento":"16 a 18 hs - 19 a 21 hs","Cuantas raciones diarias entrega?":65,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":50,Observaciones:""},{"Espacio (nombre)":"La Curva Popular","Tipo de espacio":"Olla popular","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Leiva+4554,+C1427+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5948392,-58.4526326,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb5f9cf542d43:0x1e4f7578a7f8c6d2!8m2!3d-34.5948392!4d-58.4526326!16s%2Fg%2F11hzxqhh1q?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.59463022592408, -58.45264776913285",Barrio:"Chacarita","Dirección exacta":"Leiva 4554",Responsable:"Walter Nuñez","Contacto del/la responsable":1137759156,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"martes","Horarios de funcionamiento":"19 a 21 hs","Cuantas raciones diarias entrega?":80,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":0,Observaciones:""},{"Espacio (nombre)":"Centro Barrial Luna Ortiz","Tipo de espacio":"Comedor","Organización a la que pertenece":"Movimiento Evita","Enlace punto gps":"https://www.google.com/maps/place/Federico+Lacroze+4169,+C1427EDG+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5865582,-58.4549322,17z/data=!4m16!1m9!3m8!1s0x95bcb5e4f9e7f8c1:0x1a21b309bd2eb883!2sFederico+Lacroze+4169,+C1427EDG+Cdad.+Aut%C3%B3noma+de+Buenos+Aires!3b1!8m2!3d-34.586425!4d-58.455107!10e5!16s%2Fg%2F11c23537lg!3m5!1s0x95bcb5e4f9e7f8c1:0x1a21b309bd2eb883!8m2!3d-34.586425!4d-58.455107!16s%2Fg%2F11c23537lg?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.58620044997163, -58.45512529533697",Barrio:"Chacarita","Dirección exacta":"Federico Lacroze 4169",Responsable:"Sonia del Valle Sacayan","Contacto del/la responsable":1158037630,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a viernes","Horarios de funcionamiento":"10 a 12 hs y 12 a 14 hs y 16 a 18 hs y 19 a 21 hs","Cuantas raciones diarias entrega?":280,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Almuerzo, merienda, desayuno y cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Comedor Naty","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/UzyF9brt7BrDfurZ6",Coordenadas:"-34.61272637069967, -58.39881632883648",Barrio:"Balvanera","Dirección exacta":"Pichincha 282",Responsable:"Edalia del Rocio Cama Sanchez","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Martes y viernes","Horarios de funcionamiento":"12hs a 14hs","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":20,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2021,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Olla Alsina / Vientos del Pueblo","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Adolfo+Alsina+2163,+C1090AAG+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6117515,-58.3968911,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccae87894b801:0x184ade726f4bbf93!8m2!3d-34.6117515!4d-58.3968911!16s%2Fg%2F11cs8ygyzl?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.61157931393906, -58.396880371163505",Barrio:"Balvanera","Dirección exacta":"Adolfo Alsina 2163",Responsable:"Ada Luz Campos","Contacto del/la responsable":1164861470,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12hs a 14hs - 17hs a 19hs","Cuantas raciones diarias entrega?":600,"Cantidad de trabajadorxs":40,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Año de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:"lunes y mier olla para personas en situac de calle. mier y vier merienda. el resto de los dias los trabajadores preparan su almuerzo ahi."},{"Espacio (nombre)":"Villa 31 / Las Mirabal","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Alpaca+1146,+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5827958,-58.3836509,19z/data=!3m1!4b1!4m6!3m5!1s0x95bccaa8aaf3244b:0x684b0aa35a274c66!8m2!3d-34.5827969!4d-58.3830072!16s%2Fg%2F11lcbz4tsr?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.58274500538147, -58.38300988220911",Barrio:"Barrio Padre Mugica/Retiro","Dirección exacta":"Alpaca 1152 (Mza.4 Casa. 7 bis)",Responsable:"Luz Burgos","Contacto del/la responsable":1132701282,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, miércoles, viernes y sábados","Horarios de funcionamiento":"13hs a 18hs","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":8,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Ambas","Año de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:"Sabados se sirve la merienda en el espacio"},{"Espacio (nombre)":"Bartolina Sisa","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/nyAAFxayH784xxzM9",Coordenadas:"-34.6506988154815, -58.44100711349051",Barrio:"Barrio Padre Ricciardelli","Dirección exacta":"Av. Perito Moreno, Mza. 9 B casa 303",Responsable:"Verónica Mollericona Capajeño","Contacto del/la responsable":1161359299,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"8hs a 12hs","Cuantas raciones diarias entrega?":380,"Cantidad de trabajadorxs":36,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2013,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Atuel-Comedor Y Cac","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Atuel+310,+C1437EPD+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.641686,-58.4074259,17z/data=!4m6!3m5!1s0x95bccb0da2cbff3d:0x77829edc3a490973!8m2!3d-34.641686!4d-58.4074259!16s%2Fg%2F11c1y45cz5?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.6414962222898, -58.407447357672986",Barrio:"Parque Patricios","Dirección exacta":"ATUEL 310",Responsable:"Lazarte Graciela Liliana","Contacto del/la responsable":1138014633,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12:15hs a 13:15hs","Cuantas raciones diarias entrega?":250,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":'Comedor "Somos',"Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/dutTyBZdYcyx98DJ9",Coordenadas:"-34.580644404069844, -58.38822718220912",Barrio:"Barrio Padre Mugica/Retiro","Dirección exacta":"Aguara Guazú 2051, Barrio Padre Mújica",Responsable:"Paola Crispino","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a sábado","Horarios de funcionamiento":"11 a 18hs","Cuantas raciones diarias entrega?":120,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Desayuno, almuerzo y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Sol y Luna","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/pV5eSD7XKh9V8T9UA",Coordenadas:"-34.667674606292394, -58.493429328836505",Barrio:"Ciudad Oculta (Villa 15)","Dirección exacta":"Simón guerrero 3300 mz27 casa 29",Responsable:"Cynthia Ortiz","Contacto del/la responsable":1131645078,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a jueves","Horarios de funcionamiento":"12hs a 17:30hs","Cuantas raciones diarias entrega?":190,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Año de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Olla Congreso","Tipo de espacio":"Olla popular","Organización a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/GRZcrJwoZvnfcyrZ7",Coordenadas:"-34.61029932074438, -58.3911537288365",Barrio:"Balvanera","Dirección exacta":"Plaza Congreso",Responsable:"Malena Rios","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, miércoles y jueves","Horarios de funcionamiento":"16hs a 18hs","Cuantas raciones diarias entrega?":500,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":2021,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Los 6 nietos","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/XD98eHQrxvmX8DrX7",Coordenadas:"-34.67370747260604, -58.46373572883618",Barrio:"Villa 20","Dirección exacta":"Mz 2 Casa 72",Responsable:"Maria Gonzalez","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"11hs a 15hs","Cuantas raciones diarias entrega?":100,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":'Comedor "La Patria Grande',"Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://maps.app.goo.gl/4q31oDBGo9dNSizVA",Coordenadas:"-34.59946160082347, -58.4734023288365",Barrio:"La Paternal","Dirección exacta":"Espinosa 2899 sector 3 casa 111, La Carbonilla",Responsable:"María Flores","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Jueves y sábados","Horarios de funcionamiento":"15hs a 17hs (jue) - 11hs a 15hs (sáb)","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Cooperativa Anuillan","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Osorio+4941,+C1427+DUC,+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.5953385,-58.470535,17z/data=!3m1!4b1!4m6!3m5!1s0x95bcb606e1c93291:0x675349c198b3d74a!8m2!3d-34.595343!4d-58.4659216!16s%2Fg%2F11f3vn_1ps?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.595153116295094, -58.46595378650949",Barrio:"La Paternal","Dirección exacta":"Osorio 4941",Responsable:"Ana Amador","Contacto del/la responsable":1169273099,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"8hs a 17hs","Cuantas raciones diarias entrega?":440,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno, almuerzo y merienda",Modalidad:"Ambas","Año de inicio":2014,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Cooperativa Amanecer de los Cartoneros","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Jos%C3%A9+A.+Cortejarena+3151,+C1437ISK+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6433032,-58.4092732,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb0d42b190f9:0xa6347407c42449e5!8m2!3d-34.6433076!4d-58.4066983!16s%2Fg%2F11gr6h9pgb?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.6431001725836, -58.406730486509495",Barrio:"Parque Patricios","Dirección exacta":"Cortajarena 3151",Responsable:"Dominguez Arcangeli Marlene","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"8hs a 12hs - 16hs a 20hs","Cuantas raciones diarias entrega?":1e3,"Cantidad de trabajadorxs":25,"Prestacion alimentaria":"Almuerzo y cena",Modalidad:"Ambas","Año de inicio":2014,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"CAC Once -BARRIAL ONCE","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Bartolom%C3%A9+Mitre+3366,+C1201AAL+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6094033,-58.4165869,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccaf4565b5f67:0x6cd06ef5178ae00a!8m2!3d-34.6094077!4d-58.414012!16s%2Fg%2F11csfvhcbc?entry=tts&g_ep=EgoyMDI0MDczMS4wKgBIAVAD",Coordenadas:"-34.60921784845045, -58.4140227288365",Barrio:"Once","Dirección exacta":"Bartolome Mitre 3366",Responsable:"Gonzalez Braian","Contacto del/la responsable":1130758854,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"10hs a 16hs","Cuantas raciones diarias entrega?":1200,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":2018,"Cantidad de gente en lista de espera":"",Observaciones:"Desayuno (lun, mier y vier) - Almuerzo (mar y jue)"},{"Espacio (nombre)":"Brasil","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com/maps/place/Av.+Brasil+1517,+C1154ABA+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6286025,-58.3898224,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb24c99784bf:0x9ba4efb091302238!8m2!3d-34.6286069!4d-58.3872475!16s%2Fg%2F11j00msj3p?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62841265116379, -58.387258233426216",Barrio:"Constitución","Dirección exacta":"Brasil 1517",Responsable:"Roxana Ridella","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Martes y viernes","Horarios de funcionamiento":"17-21hrs","Cuantas raciones diarias entrega?":150,"Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Olla CTEP Comedor Constitución","Tipo de espacio":"Comedor","Organización a la que pertenece":"MTE","Enlace punto gps":"https://www.google.com.ar/maps/place/Pedro+Echag%C3%BCe+1265,+C1130+Cdad.+Aut%C3%B3noma+de+Buenos+Aires/@-34.6296172,-58.3880474,17z/data=!3m1!4b1!4m6!3m5!1s0x95bccb3a9c838cd1:0xfa925f73d313e4b1!8m2!3d-34.6296217!4d-58.383434!16s%2Fg%2F11c4lh2g54?entry=ttu&g_ep=EgoyMDI0MDkxOC4xIKXMDSoASAFQAw%3D%3D",Coordenadas:"-34.62945387821929, -58.38343402481305",Barrio:"Constitución","Dirección exacta":"Pedro Echagüe 1265",Responsable:"Sergio","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"El Bajo Sin Limites","Tipo de espacio":"Comedor","Organización a la que pertenece":"Nuestramerica","Enlace punto gps":"https://goo.gl/maps/G1KGH5pqfN2kYzBC8",Coordenadas:"",Barrio:"Rivadavia 1 casa 660 A","Dirección exacta":"Esteban Bonorino 1957 (Bario Rivadavia 1 Casa 660 A)",Responsable:"Araceli Claros","Contacto del/la responsable":1140349822,"Redes institucionales (IG, FB, web)":'FB. "El Bajo Sin Limites',"Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes,miercoles y viernes","Horarios de funcionamiento":"15:00  a  20:30 Hrs.","Cuantas raciones diarias entrega?":350,"Cantidad de trabajadorxs":6,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":2022,"Cantidad de gente en lista de espera":"",Observaciones:"Detalles de ubicacion mural alegorico al lugar."},{"Espacio (nombre)":"Comedor niños del oeste","Tipo de espacio":"Comedor","Organización a la que pertenece":"Nuestramerica","Enlace punto gps":"https://maps.app.goo.gl/Z2WhPvU6893ERA9X8",Coordenadas:"",Barrio:"Lugano1 Y 2","Dirección exacta":"Martin Guerrico 5697 entre Av.Rica y Soldado de la Frontera",Responsable:"Karina Leticia Estrada","Contacto del/la responsable":1134636613,"Redes institucionales (IG, FB, web)":'FB. "Comedor Niños Del Oeste ',"Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"14:00 a 20:00 Hrs.","Cuantas raciones diarias entrega?":153,"Cantidad de trabajadorxs":5,"Prestacion alimentaria":"Cena y merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Todo Por Los Niños","Tipo de espacio":"Comedor","Organización a la que pertenece":"Nuestramerica","Enlace punto gps":"https://maps.app.goo.gl/3919txLAvkCEL1cS9",Coordenadas:"",Barrio:"Padre Mujica","Dirección exacta":"Av.Castañares 6670",Responsable:"Lidia Beatriz Mino","Contacto del/la responsable":1144244749,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes,Miercoles,Viernes,Sabado y Domingo","Horarios de funcionamiento":"8:00 a 18:00 Hrs.","Cuantas raciones diarias entrega?":200,"Cantidad de trabajadorxs":10,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Año de inicio":2020,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Refugio","Tipo de espacio":"Comedor","Organización a la que pertenece":"Nuestramerica","Enlace punto gps":"https://maps.app.goo.gl/653f2rd9Pq6FYYAR8",Coordenadas:"",Barrio:"Fatima","Dirección exacta":"Manzana 2 Casa 106",Responsable:"Rosa Ortega","Contacto del/la responsable":1144127841,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a Viernes","Horarios de funcionamiento":"9:00 a 14:00 Hrs.","Cuantas raciones diarias entrega?":280,"Cantidad de trabajadorxs":4,"Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Vianda","Año de inicio":2015,"Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"INMACULADA CONCEPCION","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.561844060158556, -58.455583489399906",Barrio:"Belgrano","Dirección exacta":"Vuelta de Obligado 2042",Responsable:"Silvia Martinez","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"LUNES A SABADOS","Horarios de funcionamiento":"DE 18.15 A 19.hs HOMBRES MAYORES DE 45 AÑOS","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SAN CAYETANO Belgrano","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.56719104274461, -58.45750213172874",Barrio:"Belgrano","Dirección exacta":"Vidal 1745",Responsable:"Susana Fernandez Verstegen","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"De 7 a 9am","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"JESUS MISERICORDIOSO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.56886265251097, -58.482534478552274",Barrio:"Villa Urquiza","Dirección exacta":"C. Dr. Pedro I. Rivera 4591",Responsable:"Andrea Orellana","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Viernes","Horarios de funcionamiento":"19hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"CRISTO REY","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.57526445713002, -58.502561977294484",Barrio:"Devoto","Dirección exacta":"Larsen 2384",Responsable:"Laura Gontade","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"9 a 11am","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SANTA MAGDALENA SOFIA BARAT","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.587493822838454, -58.493010002892376",Barrio:"Devoto","Dirección exacta":"Av. Salvador María del Carril 2458",Responsable:"Esther Palma","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"12.30pm","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Desayunador Negro Manuel","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.59407763300242, -58.51122210612533",Barrio:"Devoto","Dirección exacta":"Fernández de Enciso 4521",Responsable:"Damiel Fascinato","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"martes, jueves y viernes","Horarios de funcionamiento":"8 a 10 am","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SAN PEDRO APOSTOL","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.61961667220753, -58.5089183893978",Barrio:"Devoto","Dirección exacta":"Bermúdez 2011",Responsable:"Ana Ghidoli","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Domingo","Horarios de funcionamiento":"20hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SAN CAYETANO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.63772340318292, -58.52808964844375",Barrio:"Devoto","Dirección exacta":"Cuzco 150",Responsable:"Graciela Filomena","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"18.30 a 21hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"VIRGEN DE LOS DESAMPARADOS","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.64175715557527, -58.48374683172574",Barrio:"Flores","Dirección exacta":"José Enrique Rodó 4203",Responsable:"Silvia Centurión","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"FB: parroquia Virgen de los Desamparados","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Miércoles y domingo","Horarios de funcionamiento":"Domingo 16hs para niños","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"TRANSITO DE SAN JOSE","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.64906926667106, -58.5114920546149",Barrio:"Liniers","Dirección exacta":"Av. Emilio Castro 6391",Responsable:"Marta Abbruzzese","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"martaabbruzzese@gmail.com","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"HOSPITAL SANTOJANNI","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.64840517184973, -58.51508266056097",Barrio:"Liniers","Dirección exacta":"Pilar 950",Responsable:"María de los Ángeles","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"hnangelesorione12@gmail.com","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a domingo","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE LA PAZ","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.63300450639029, -58.47555516056181",Barrio:"Flores","Dirección exacta":"Azul 61",Responsable:"Graciela Beatriz Pérez de Maio","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"delapazparroquia@gmail.com","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Jueves","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE LA CANDELARIA","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.628978059399124, -58.481910850028235",Barrio:"Floresta","Dirección exacta":"Bahía Blanca 363",Responsable:"Darío Gonzalez","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"lun a vier 12 a 13:30 hs y lunes/martes/jueves de 8 a 9.30am","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE LA VISITACION","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.621706119616064, -58.47318446056212",Barrio:"Flores","Dirección exacta":"Nazca y Paez",Responsable:"Gustavo Spera","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Miércoles y sabados","Horarios de funcionamiento":"17hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE LA MISERICORDIA","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.66050923091652, -58.4913195760961",Barrio:"Parque Avellaneda","Dirección exacta":"Larrazábal 2390",Responsable:"María Belforte","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DEL CARMEN","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.66716596275676, -58.49291477483745",Barrio:"Barrio 15 - Ciudad Oculta","Dirección exacta":"EVA PERON 6378- MANZ.8 CASA 1",Responsable:"Héctor Arias","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a sabados","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DEL ROSARIO DEL MILAGRO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.67707436513504, -58.49286416056",Barrio:"Barrio Piedrabuena","Dirección exacta":"Montiel 3899",Responsable:"Roxana Ferreyra","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SAN JOSE BENITO COTTOLENGO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.67798921322769, -58.487315031724414",Barrio:"","Dirección exacta":"Av. Piedra Buena 3848",Responsable:"Ivan","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"https://www.facebook.com/parroquiacottolengo.donorione.9?mibextid=ZbWKwL -","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"MARIA MADRE DE LA ESPERANZA","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.67289713256787, -58.46890614843515",Barrio:"Barrio 20","Dirección exacta":"Miralla 3838",Responsable:"Javier Knees","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12hs y 17hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"VIRGEN INMACULADA","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.65558888943899, -58.457413660560825",Barrio:"Barrio Fátima","Dirección exacta":"Martinez Castro y Pasaje C",Responsable:"Sebastián Dipascuali","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE FATIMA","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.65982372471726, -58.44970673172505",Barrio:"Barrio Fátima","Dirección exacta":"Av. Mariano Acosta 2929",Responsable:"Bety","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"psantuariofatima@gmail.com","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a domingo","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SAN FRANCISCO DE ASÍS","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.6654669952142, -58.44423070610791",Barrio:"Soldati","Dirección exacta":"Corrales 3420",Responsable:"","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"sabado, domingo y feriados","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"CRISTO OBRERO Y SAN BLAS","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.66292023197079, -58.43814736056051",Barrio:"Soldati","Dirección exacta":"Av. Lafuente 3242",Responsable:"Stella Maris España","Contacto del/la responsable":1159351160,"Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Martes y jueves","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SANTA MARIA MADRE DEL PUEBLO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.650008675775716, -58.433670160561",Barrio:"Barrio Illia","Dirección exacta":"Av. Perito Moreno al 1700- MANZANA 3, CASA 1",Responsable:"Belén Brenzoni","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a domingo","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SAN SATURNINO Y SAN JUDAS TADEO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.643896214017204, -58.438753061871566",Barrio:"Parque Chacabuco","Dirección exacta":"Miraflores 2080",Responsable:"Alicia Tomasello","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"parroquia@institutosanjudastadeo.edu.ar","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:"para niños"},{"Espacio (nombre)":"“Comedor Padre Mujica” Virgen de Lujan","Tipo de espacio":"Comedor","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.64630425964254, -58.4035036288365",Barrio:"Zavaleta","Dirección exacta":"H. Masantonio 2990",Responsable:"Padre Toto de Vedia","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12 a 13hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"VIRGEN DE LOS MILAGROS DE CAACUPE","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.65711684357121, -58.39766930419842",Barrio:"21-24","Dirección exacta":"Av. Osvaldo Cruz 3470",Responsable:"Griselda","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"9 A 12","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SAN PEDRO GONZALEZ TELMO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.620557949140476, -58.370360904200545",Barrio:"San Telmo","Dirección exacta":"Humberto 1º 330",Responsable:"Patricia","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"11hs (hombres)","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"San Vicente","Tipo de espacio":"Comedor","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.624473484604465, -58.385999061872646",Barrio:"Constitucion","Dirección exacta":"Constitución 1407",Responsable:"Hermana Rosemary Mafaile","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a sábados","Horarios de funcionamiento":"L a V 11hs/Sáb 14.45","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"HERMANAS DEL CORDERO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.621257321462764, -58.38442354652813",Barrio:"San Cristobal","Dirección exacta":"Santiago del Estero 1131",Responsable:"Hermana Esperanza y Hermana Talía.","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a domingo","Horarios de funcionamiento":"14 a 14.30/20 a 20.30","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"HERMANOS DEL CORDERO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.620985862825044, -58.385853004590096",Barrio:"San Cristobal","Dirección exacta":"San Jose 1130",Responsable:"Hermano Lucas","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a domingo","Horarios de funcionamiento":"14 a 15/20 a 21","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"INMACULADA CONCEPCION","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.618089325906006, -58.37866418248903",Barrio:"San Telmo","Dirección exacta":"Tacuarí 870",Responsable:"Pascual Ángela","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Viernes y sàbados","Horarios de funcionamiento":"Vie 19hs/Sab 9am","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno y cena",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SANTISIMO REDENTOR","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.591938944811254, -58.400525786056285",Barrio:"Recoleta","Dirección exacta":"Larrea 1252",Responsable:"Patricia Maciel","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a domingo","Horarios de funcionamiento":"7 a 8.30/11hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE BALVANERA","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.60806659360294, -58.40046477550291",Barrio:"Balvanera","Dirección exacta":"Bartolomé Mitre 2411",Responsable:"","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes y sàbados","Horarios de funcionamiento":"Sab 9 a 10/12 a 13/Lunes 20hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno, almuerzo y cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:"NOCHE DE LA CARIDAD: Lunes 20 hs en Plaza Once y Plaza Congreso"},{"Espacio (nombre)":"SANTA CRUZ","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.621298734515264, -58.409929204200445",Barrio:"San Cristobal","Dirección exacta":"Estados Unidos 3150",Responsable:"Maria Elena del Corral","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Sábados","Horarios de funcionamiento":"13hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SANTA MARIA","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.61790285593929, -58.4282034330369",Barrio:"Almagro","Dirección exacta":"Av. La Plata 286",Responsable:"Gabriel Toranzo","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Martes y viernes","Horarios de funcionamiento":"17hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE CAACUPE","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.615940515286844, -58.433926593074695",Barrio:"Caballito","Dirección exacta":"Av. Rivadavia 4879",Responsable:"Elizabeth B. Gagero","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes a viernes","Horarios de funcionamiento":"12hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:"con turno"},{"Espacio (nombre)":"BUEN PASTOR","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.61361764636845, -58.442350604200904",Barrio:"Caballito","Dirección exacta":"C. Dr. Juan Felipe Aranguren 691",Responsable:"Rosalba Ubeda","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes y jueves","Horarios de funcionamiento":"8am","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"JESÚS SACRAMENTADO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.60178892670375, -58.42755527536544",Barrio:"Villa Crespo","Dirección exacta":"Av. Corrientes 4433",Responsable:"Liliana Bonaz","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes y miércoles","Horarios de funcionamiento":"17hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE LA CONSOLACION","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.59416091922992, -58.430445326651395",Barrio:"Villa Crespo","Dirección exacta":"Raúl Scalabrini Ortíz 1073",Responsable:"Griselda Aparicio","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Viernes y sàbados","Horarios de funcionamiento":"Vie 14 a 15/Sab 11.30 a 13","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SANTA LUCIA (PALERMO)","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.59428767132606, -58.423057119546755",Barrio:"Palermo","Dirección exacta":"Gascón 1372",Responsable:"Cristina Bianco","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Domingo","Horarios de funcionamiento":"16 a 18","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Vianda","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE GUADALUPE","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.588931393900474, -58.41749721954695",Barrio:"Palermo","Dirección exacta":"Gral. Lucio Norberto Mansilla 3847",Responsable:"JORGE VALENTIN","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Lunes, miércoles y viernes","Horarios de funcionamiento":"15 a 16","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Merienda",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"San Pablo Apóstol","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.579379669935825, -58.45256953303894",Barrio:"Colegiales","Dirección exacta":"Av. Álvarez Thomas 795",Responsable:"PAOLA CORTESE","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Miércoles, jueves y viernes","Horarios de funcionamiento":"17 a 18","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Cena",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"SANTA INES, VIRGEN Y MARTIR Y SAN CAMILO","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.59359113774189, -58.466738375365786",Barrio:"Paternal","Dirección exacta":"Avalos 250",Responsable:"Claudia Toscano","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"Jueves","Horarios de funcionamiento":"7.30 a 14hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Santa Isabel de Hungría","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.6318896,-58.4367652",Barrio:"Parque Chacabuco","Dirección exacta":"Estrada 833",Responsable:"Inés Vernengo","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"https://parroquiasantaisabeldehungria.org.ar/","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"miércoles","Horarios de funcionamiento":"18hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Viandas",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"NUESTRA SEÑORA DE BUENOS AIRES","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.6109904,-58.4523679",Barrio:"Caballito","Dirección exacta":"Av. Gaona 1730",Responsable:"Paula Mansina","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"sábados","Horarios de funcionamiento":"8:30 a 11hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"San José de Flores","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.6301593,-58.4629097",Barrio:"Flores","Dirección exacta":"Av. Rivadavia 6950",Responsable:"María Trinidad Martinez","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"lunes a sábados","Horarios de funcionamiento":"8hs (se retira número) a 11hs (se sirve)","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Almuerzo y merienda",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"San Juan Evangelista","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.6367195,-58.3596412",Barrio:"La Boca","Dirección exacta":"Olavarría 486",Responsable:"Velqui Romero","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"sabado y domingo","Horarios de funcionamiento":"8hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"Desayuno y almuerzo",Modalidad:"Ambas","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""},{"Espacio (nombre)":"Santa Catalina de Alejandria","Tipo de espacio":"Parroquia","Organización a la que pertenece":"Cáritas","Enlace punto gps":"",Coordenadas:"-34.6264255,-58.3762896",Barrio:"Parque Lezama","Dirección exacta":"Brasil 850",Responsable:"Maria Ines","Contacto del/la responsable":"","Redes institucionales (IG, FB, web)":"https://www.casasantacatalina.com.ar/","Frecuencia de funcionamiento":"Todas las semanas","Días de funcionamiento":"martes a viernes","Horarios de funcionamiento":"16hs a 17hs","Cuantas raciones diarias entrega?":"","Cantidad de trabajadorxs":"","Prestacion alimentaria":"",Modalidad:"","Año de inicio":"","Cantidad de gente en lista de espera":"",Observaciones:""}];function Cv(n){return hr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M39.906 27.188c-9.118 13.907-11.366 30.99-7.843 50.718 4.2 23.526 16.91 50.038 35.28 75 36.742 49.925 96.05 93.082 148.813 99.625l3.688.47 2.375 2.844L416.374 490.22c19.352 4.624 31.847 1.745 38.344-4.69 6.547-6.484 9.566-19.005 4.717-38.874L39.908 27.187zM414.97 29.5L306.47 138c-12 11.998-12.104 25.2-5.908 39.625l2.563 5.97-4.688 4.5L262 222.844l29.594 29.593 34.594-36.532 4.5-4.75 5.968 2.594c15.165 6.535 29.546 6.267 40.688-4.875l108.5-108.5L471.75 86.28l-70.563 70.532L388 143.595l70.53-70.53L443.5 58.03l-70.53 70.532-13.22-13.218 70.53-70.53-15.31-15.314zM210.936 271.563L25.53 448.469c-4.575 18.95-1.644 30.787 4.532 36.905 6.178 6.118 18.128 8.927 36.844 4.406l173.22-182.967-29.19-35.25z"},child:[]}]})(n)}function a4(n){return hr({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,112H32a8,8,0,0,0-8,8,104.35,104.35,0,0,0,56,92.28V216a16,16,0,0,0,16,16h64a16,16,0,0,0,16-16v-3.72A104.35,104.35,0,0,0,232,120,8,8,0,0,0,224,112Zm-59.34,88a8,8,0,0,0-4.66,7.27V216H96v-8.71A8,8,0,0,0,91.34,200a88.29,88.29,0,0,1-51-72H215.63A88.29,88.29,0,0,1,164.66,200ZM81.77,55c5.35-6.66,6.67-11.16,6.12-13.14-.42-1.49-2.41-2.26-2.43-2.26A8,8,0,0,1,88,24a8.11,8.11,0,0,1,2.38.36c1,.31,9.91,3.33,12.79,12.76,2.46,8.07-.55,17.45-8.94,27.89-5.35,6.66-6.67,11.16-6.12,13.14.42,1.49,2.37,2.24,2.39,2.25A8,8,0,0,1,88,96a8.11,8.11,0,0,1-2.38-.36c-1-.31-9.91-3.33-12.79-12.76C70.37,74.81,73.38,65.43,81.77,55Zm40,0c5.35-6.66,6.67-11.16,6.12-13.14-.42-1.49-2.41-2.26-2.43-2.26A8,8,0,0,1,128,24a8.11,8.11,0,0,1,2.38.36c1,.31,9.91,3.33,12.79,12.76,2.46,8.07-.55,17.45-8.94,27.89-5.35,6.66-6.67,11.16-6.12,13.14.42,1.49,2.37,2.24,2.39,2.25A8,8,0,0,1,128,96a8.11,8.11,0,0,1-2.38-.36c-1-.31-9.91-3.33-12.79-12.76C110.37,74.81,113.38,65.43,121.77,55Zm40,0c5.35-6.66,6.67-11.16,6.12-13.14-.42-1.49-2.41-2.26-2.43-2.26A8,8,0,0,1,168,24a8.11,8.11,0,0,1,2.38.36c1,.31,9.91,3.33,12.79,12.76,2.46,8.07-.55,17.45-8.94,27.89-5.35,6.66-6.67,11.16-6.12,13.14.42,1.49,2.37,2.24,2.39,2.25A8,8,0,0,1,168,96a8.11,8.11,0,0,1-2.38-.36c-1-.31-9.91-3.33-12.79-12.76C150.37,74.81,153.38,65.43,161.77,55Z"},child:[]}]})(n)}function r4(n){return hr({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M88,48V16a8,8,0,0,1,16,0V48a8,8,0,0,1-16,0Zm40,8a8,8,0,0,0,8-8V16a8,8,0,0,0-16,0V48A8,8,0,0,0,128,56Zm32,0a8,8,0,0,0,8-8V16a8,8,0,0,0-16,0V48A8,8,0,0,0,160,56Zm92.8,46.4L224,124v60a32,32,0,0,1-32,32H64a32,32,0,0,1-32-32V124L3.2,102.4a8,8,0,0,1,9.6-12.8L32,104V80a8,8,0,0,1,8-8H216a8,8,0,0,1,8,8v24l19.2-14.4a8,8,0,0,1,9.6,12.8ZM208,88H48v96a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16Z"},child:[]}]})(n)}function o4(n){return hr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 4V2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1s-1-.45-1-1zm7.36 3.05 1.41-1.42a.996.996 0 1 0-1.41-1.41l-1.41 1.42a.996.996 0 1 0 1.41 1.41zM22 11h-2c-.55 0-1 .45-1 1s.45 1 1 1h2c.55 0 1-.45 1-1s-.45-1-1-1zm-10 8c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1zM5.64 7.05 4.22 5.64c-.39-.39-.39-1.03 0-1.41s1.03-.39 1.41 0l1.41 1.41c.39.39.39 1.03 0 1.41s-1.02.39-1.4 0zm11.31 9.9a.996.996 0 0 0 0 1.41l1.41 1.41c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.41-1.41a.996.996 0 0 0-1.41 0zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm3.64 6.78 1.41-1.41c.39-.39.39-1.03 0-1.41s-1.03-.39-1.41 0l-1.41 1.41a.996.996 0 0 0 0 1.41c.38.39 1.02.39 1.41 0zM12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6z"},child:[]}]})(n)}function s4(n){return hr({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 12.22V9l-5-2.5V5h2V3h-2V1h-2v2H9v2h2v1.5L6 9v3.22L2 14v8h9v-4c0-.55.45-1 1-1s1 .45 1 1v4h9v-8l-4-1.78zM20 20h-5v-2.04c0-1.69-1.35-3.06-3-3.06s-3 1.37-3 3.06V20H4v-4.79l4-1.81v-3.35L12 8l4 2.04v3.35l4 1.81V20z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"1.5"},child:[]}]})(n)}const l4=({prestacionAlimentaria:n,size:a})=>{let l=null,p="",_={};switch(n){case"Comedor":l=it.jsx(Cv,{style:{color:"#69a7f5",fontSize:"15px"}}),p="#3469eb";break;case"Merendero":l=it.jsx(a4,{style:{color:"#9366eb",fontSize:"15px"}}),p="#ff8ce9";break;case"Olla popular":l=it.jsx(r4,{style:{color:"#39b00c",fontSize:"15px"}}),p="#afeb00";break;case"Parroquia":l=it.jsx(s4,{style:{color:"#f77b63",fontSize:"15px"}}),p="#eeff00";break;default:l=it.jsx(Cv,{style:{color:"#f77b63",fontSize:"15px"}}),p="#eeff00"}return a==="small"?_={padding:"4px",fontSize:"8px",maxWidth:"3vw"}:a==="medium"?_={padding:"8px",fontSize:"18px",maxWidth:"6vw"}:a==="large"&&(_={padding:"12px",fontSize:"25px",maxWidth:"8vw"}),it.jsx("div",{style:{background:p,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"black",border:"solid 1px black",..._},children:l})};function c4({comedores:n,onSelect:a}){return it.jsx(it.Fragment,{children:n.map((l,p)=>{const[_,b]=l.Coordenadas.split(",").map(Number);if(isNaN(_)||isNaN(b)||_===0||b===0)return null;let v;const u=l["Cuantas raciones diarias entrega?"];return u<=100?v="small":u<=500?v="medium":v="large",it.jsx(K3,{longitude:b,latitude:_,onClick:()=>a(l),children:it.jsx(l4,{prestacionAlimentaria:l["Tipo de espacio"],size:v})},p)})})}const u4="_screen_b5bq8_1",d4="_dataSection_b5bq8_18",h4="_timeSection_b5bq8_18",p4="_titleBox_b5bq8_55",f4="_contactBox_b5bq8_83",m4="_socialIcons_b5bq8_91",g4="_prestacion_b5bq8_118",Gu={screen:u4,dataSection:d4,timeSection:h4,titleBox:p4,contactBox:f4,socialIcons:m4,prestacion:g4};function Wl(n){return hr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9.173 14.83a4 4 0 1 1 5.657 -5.657"},child:[]},{tag:"path",attr:{d:"M11.294 12.707l.174 .247a7.5 7.5 0 0 0 8.845 2.492a9 9 0 0 1 -14.671 2.914"},child:[]},{tag:"path",attr:{d:"M3 12h1"},child:[]},{tag:"path",attr:{d:"M12 3v1"},child:[]},{tag:"path",attr:{d:"M5.6 5.6l.7 .7"},child:[]},{tag:"path",attr:{d:"M3 21l18 -18"},child:[]}]})(n)}function y4(n){return hr({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 13h1"},child:[]},{tag:"path",attr:{d:"M20 13h1"},child:[]},{tag:"path",attr:{d:"M5.6 6.6l.7 .7"},child:[]},{tag:"path",attr:{d:"M18.4 6.6l-.7 .7"},child:[]},{tag:"path",attr:{d:"M8 13a4 4 0 1 1 8 0"},child:[]},{tag:"path",attr:{d:"M3 17h18"},child:[]},{tag:"path",attr:{d:"M7 20h5"},child:[]},{tag:"path",attr:{d:"M16 20h1"},child:[]},{tag:"path",attr:{d:"M12 5v-1"},child:[]}]})(n)}function _4(n){return hr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M454.65 169.4A31.82 31.82 0 0 0 432 160h-64v-16a112 112 0 0 0-224 0v16H80a32 32 0 0 0-32 32v216c0 39 33 72 72 72h272a72.22 72.22 0 0 0 50.48-20.55 69.48 69.48 0 0 0 21.52-50.2V192a31.75 31.75 0 0 0-9.35-22.6zM176 144a80 80 0 0 1 160 0v16H176zm192 96a112 112 0 0 1-224 0v-16a16 16 0 0 1 32 0v16a80 80 0 0 0 160 0v-16a16 16 0 0 1 32 0z"},child:[]}]})(n)}function v4(n){return hr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M340 480H106c-29.5 0-54.92-7.83-73.53-22.64C11.23 440.44 0 415.35 0 384.8c0-26.66 10.08-49.8 29.14-66.91 15.24-13.68 36.17-23.21 59-26.84.06 0 .08 0 .09-.05 6.44-39 23.83-72.09 50.31-95.68A140.24 140.24 0 0 1 232 160c30.23 0 58.48 9.39 81.71 27.17a142.24 142.24 0 0 1 42.19 53.21 16 16 0 0 0 11.19 9c26 5.61 48.4 17.29 65.17 34C453 304.11 464 331.71 464 363.2c0 32.85-13.13 62.87-37 84.52-22.89 20.82-53.8 32.28-87 32.28zm19-232.18zm28.89-26.14a168.8 168.8 0 0 1 34.76 14.71 4 4 0 0 0 5.82-2.44 97 97 0 0 0 3.53-26.68c-.39-52.43-43.48-95.22-95.91-95.27A95.46 95.46 0 0 0 281 129.33h-.06a3.38 3.38 0 0 0 1 6 162.45 162.45 0 0 1 51.28 26.4 173.92 173.92 0 0 1 45.32 52.51 16 16 0 0 0 9.35 7.44zM496 224h-32a16 16 0 0 1 0-32h32a16 16 0 0 1 0 32zM336 96a16 16 0 0 1-16-16V48a16 16 0 0 1 32 0v32a16 16 0 0 1-16 16zm-90.51 37.49a15.92 15.92 0 0 1-11.31-4.69l-22.63-22.62a16 16 0 0 1 22.63-22.63l22.62 22.63a16 16 0 0 1-11.31 27.31zm181.02 0a16 16 0 0 1-11.31-27.31l22.62-22.63a16 16 0 0 1 22.63 22.63l-22.63 22.62a15.92 15.92 0 0 1-11.31 4.69z"},child:[]}]})(n)}function x4(n){return hr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278"},child:[]},{tag:"path",attr:{d:"M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"},child:[]}]})(n)}const b4=({prestacionAlimentaria:n})=>{let a=null;switch(n){case"Almuerzo":a=it.jsx(o4,{style:{color:"yellow",fontSize:"14vh",filter:"drop-shadow(0 0 10px yellow)"}});break;case"Desayuno":a=it.jsx(y4,{style:{color:"orange",fontSize:"14vh",filter:"drop-shadow(0 0 10px orange)"}});break;case"Merienda":a=it.jsx(v4,{style:{color:"pink",fontSize:"14vh",filter:"drop-shadow(0 0 10px pink)"}});break;case"Cena":a=it.jsx(x4,{style:{color:"violet",fontSize:"14vh",filter:"drop-shadow(0 0 10px violet)"}});break;case"Viandas":a=it.jsx(_4,{style:{color:"#4dd5d9",fontSize:"14vh",filter:"drop-shadow(0 0 10px #4dd5d9)"}});break;case"Almuerzo y Merienda":a=it.jsx(Wl,{style:{color:"green",fontSize:"14vh",filter:"drop-shadow(0 0 10px yellow)"}});break;case"Desayuno y Almuerzo":a=it.jsx(Wl,{style:{color:"pink",fontSize:"14vh",filter:"drop-shadow(0 0 10px pink)"}});break;case"Desayuno y Cena":a=it.jsx(Wl,{style:{color:"blue",fontSize:"14vh",filter:"drop-shadow(0 0 10px blue)"}});break;case"Cena y Merienda":a=it.jsx(Wl,{style:{color:"violet",fontSize:"14vh",filter:"drop-shadow(0 0 10px violet)"}});break;case"Almuerzo, Merienda, Desayuno y Cena":a=it.jsx(Wl,{style:{color:"orange",fontSize:"14vh",filter:"drop-shadow(0 0 10px orange)"}});break;default:a=it.jsx(Wl,{style:{color:"yellow",fontSize:"14vh",filter:"drop-shadow(0 0 10px yellow)"}})}return it.jsx("div",{style:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"left",color:"black",marginTop:"-8vh",opacity:.8,padding:"10px"},children:a})};function w4({comedor:n}){if(!n)return null;const a=_=>{switch(_){case"Comedor":return"#69a7f5";case"Merendero":return"#9366eb";case"Olla popular":return"#39b00c";case"Parroquia":return"#f77b63";default:return"#f27025"}},l=_=>{switch(_){case"Comedor":return"#3469eb";case"Merendero":return"#ff8ce9";case"Olla popular":return"#afeb00";case"Parroquia":return"#eeff00";default:return"#eeff00"}},p=n["Tipo de espacio"];return it.jsxs("div",{className:Gu.screen,children:[it.jsxs("div",{className:Gu.timeSection,style:{backgroundColor:a(p)},children:[it.jsx(b4,{prestacionAlimentaria:n["Prestacion alimentaria"]}),n["Prestacion alimentaria"]&&it.jsx("h2",{children:n["Prestacion alimentaria"]}),n["Frecuencia de funcionamiento"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Frecuencia:"})," ",n["Frecuencia de funcionamiento"]]}),n["Días de funcionamiento"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Días:"})," ",n["Días de funcionamiento"]]}),n["Horarios de funcionamiento"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Horarios:"})," ",n["Horarios de funcionamiento"]]})]}),it.jsxs("div",{className:Gu.dataSection,children:[it.jsxs("div",{className:Gu.titleBox,style:{background:l(p)},children:[it.jsx("h3",{style:{color:a(p)},children:n["Espacio (nombre)"]||""}),n["Organización a la que pertenece"]&&it.jsxs("p",{children:["Organización: ",it.jsx("strong",{children:n["Organización a la que pertenece"]})]}),n["Dirección exacta"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Dirección:"})," ",n["Dirección exacta"],", ",n.Barrio&&it.jsx("strong",{children:n.Barrio})]})]}),it.jsxs("div",{className:Gu.contactBox,children:[n.Responsable&&it.jsxs("p",{children:[it.jsx("strong",{children:"Responsable:"})," ",n.Responsable]}),n["Contacto del/la responsable"]&&it.jsxs("p",{children:[it.jsx("strong",{children:"Contacto:"})," ",n["Contacto del/la responsable"]]})]})]})]})}function C4(){const n={initialViewState:{longitude:58.3816,latitude:-34.6037,zoom:1,minZoom:1,maxZoom:25,maxBounds:[[-58.9,-35],[-58,-34.44]]},style:{width:"100vw",height:"100vh"}},[a,l]=Me.useState(null),p=_=>{l(_)};return it.jsx("div",{className:n4.mapa,children:it.jsxs(X3,{...n,style:{width:"100vw",height:"100vh"},mapStyle:"https://tiles.stadiamaps.com/styles/alidade_smooth.json",mapLib:iw,mapOptions:{},children:[it.jsx(J3,{position:"top-left"}),it.jsx(c4,{comedores:i4,onSelect:p}),a&&it.jsx(w4,{comedor:a})]})})}function A4(){return it.jsx(it.Fragment,{children:it.jsx("h3",{children:"V 0.1"})})}function S4(){return it.jsxs(it.Fragment,{children:[it.jsx(x3,{}),it.jsx(C4,{}),it.jsx(A4,{})]})}const E4="_container_1ts3g_1",T4="_image_1ts3g_6",M4="_title_1ts3g_13",I4="_subtitle_1ts3g_18",P4="_description_1ts3g_24",Hu={container:E4,image:T4,title:M4,subtitle:I4,description:P4},D4="/MapaDeLosComedores/assets/comedores-DjyFd6P9.jpg";function z4(){return it.jsxs("div",{className:Hu.container,children:[it.jsx("img",{src:D4,alt:"Imagen de comedores",className:Hu.image}),it.jsx("h1",{className:Hu.title,children:"MAPA DE LOS COMEDORES"}),it.jsx("h2",{className:Hu.subtitle,children:"La ciudad solidaria"}),it.jsx("p",{className:Hu.description,children:"Somos un conjunto de organizaciones de la sociedad civil de la Ciudad de Buenos Aires que todos los días sostenemos comedores y merenderos comunitarios. Esperamos que este Mapa de los Comedores sea un aporte a la visibilización y valoración de cada persona que dedica su tiempo y su trabajo para tenderle una mano a miles de otras en estos momentos difíciles. Buenos Aires es una Ciudad solidaria.."})]})}const R4=ZE([{path:"/",element:it.jsx(l3,{}),children:[{path:"/",element:it.jsx(S4,{})},{path:"/us",element:it.jsx(z4,{})}]}]);Ym.createRoot(document.getElementById("root")).render(it.jsx(to.StrictMode,{children:it.jsx(n3,{router:R4})}));
